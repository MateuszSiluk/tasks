"use strict";(self.webpackChunktasks=self.webpackChunktasks||[]).push([[179],{2011:(lt,Ae,k)=>{k.d(Ae,{hO:()=>Ke,xv:()=>ce,Dh:()=>fe,GT:()=>ge,cc:()=>Se,on:()=>$,pX:()=>X});var h=k(5e3),Y=k(127),P=k(5813);lt=k.hmd(lt);const ue=["ngOnDestroy"],X=(De,rt,Je,Ie={})=>new Proxy(De,{get:(ve,we)=>Je.runOutsideAngular(()=>{var ze;if(De[we])return(null===(ze=null==Ie?void 0:Ie.spy)||void 0===ze?void 0:ze.get)&&Ie.spy.get(we,De[we]),De[we];if(ue.indexOf(we)>-1)return()=>{};const qe=rt.toPromise().then(te=>{const W=te&&te[we];return"function"==typeof W?W.bind(te):W&&W.then?W.then(ie=>Je.run(()=>ie)):Je.run(()=>W)});return new Proxy(()=>{},{get:(te,W)=>qe[W],apply:(te,W,ie)=>qe.then(me=>{var se;const Oe=me&&me(...ie);return(null===(se=null==Ie?void 0:Ie.spy)||void 0===se?void 0:se.apply)&&Ie.spy.apply(we,ie,Oe),Oe})})})}),ge=(De,rt)=>{rt.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(Ie=>{Object.defineProperty(De.prototype,Ie,Object.getOwnPropertyDescriptor(Je.prototype||Je,Ie))})})};class re{constructor(rt){return rt}}const fe=new h.OlP("angularfire2.app.options"),ce=new h.OlP("angularfire2.app.name");function $(De,rt,Je){const ve="object"==typeof Je&&Je||{};ve.name=ve.name||"string"==typeof Je&&Je||"[DEFAULT]";const ze=Y.Z.apps.filter(qe=>qe&&qe.name===ve.name)[0]||rt.runOutsideAngular(()=>Y.Z.initializeApp(De,ve));try{JSON.stringify(De)!==JSON.stringify(ze.options)&&H("error",`${ze.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(qe){}return new re(ze)}const H=(De,...rt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...rt)},J={provide:re,useFactory:$,deps:[fe,h.R0b,[new h.FiY,ce]]};let Ke=(()=>{class De{constructor(Je){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Je.toString())}static initializeApp(Je,Ie){return{ngModule:De,providers:[{provide:fe,useValue:Je},{provide:ce,useValue:Ie}]}}}return De.\u0275fac=function(Je){return new(Je||De)(h.LFG(h.Lbi))},De.\u0275mod=h.oAB({type:De}),De.\u0275inj=h.cJS({providers:[J]}),De})();function Se(De,rt,Je,Ie,ve){const[,we,ze]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===De)||[];if(we)return function ke(De,rt){try{return De.toString()===rt.toString()}catch(Je){return De===rt}}(ve,ze)||(pe("error",`${rt} was already initialized on the ${Je} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:ve,was:ze})),we;{const qe=Ie();return globalThis.\u0275AngularfireInstanceCache.push([De,qe,ve]),qe}}const Be=!!lt.hot,pe=(De,...rt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Ae,k)=>{k.d(Ae,{q4:()=>$l,iC:()=>Wl,HU:()=>ku,vb:()=>gd,JM:()=>io});var h=k(5e3),Y=k(5867),P=k(5861),ue=k(9681),X=k(2090),ge=k(4859),re=k(1877);const fe="@firebase/installations",H="w:0.5.7",J="FIS_v2",De=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Je({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function ve(C,I){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(C,I){const L=(yield I.json()).error;return De.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function ze({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function qe(C,{refreshToken:I}){const R=ze(C);return R.append("Authorization",function me(C){return`${J} ${C}`}(I)),R}function te(C){return W.apply(this,arguments)}function W(){return(W=(0,P.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function se(C,I){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:R}){const L=Je(C),K=ze(C),ee=I.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&K.append("x-firebase-client",Tt)}const xe={method:"POST",headers:K,body:JSON.stringify({fid:R,authVersion:J,appId:C.appId,sdkVersion:H})},et=yield te(()=>fetch(L,xe));if(et.ok){const Tt=yield et.json();return{fid:Tt.fid||R,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Ie(Tt.authToken)}}throw yield ve("Create Installation",et)})).apply(this,arguments)}function ae(C){return new Promise(I=>{setTimeout(I,C)})}const Jt=/^[cdef][\w-]{21}$/;function ct(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function wt(C){return function St(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Jt.test(R)?R:""}catch(C){return""}}function cn(C){return`${C.appName}!${C.appId}`}const dn=new Map;function Ci(C,I){const R=cn(C);Xt(R,I),function Gt(C,I){const R=function si(){return!fr&&"BroadcastChannel"in self&&(fr=new BroadcastChannel("[Firebase] FID Change"),fr.onmessage=C=>{Xt(C.data.key,C.data.fid)}),fr}();R&&R.postMessage({key:C,fid:I}),function Fs(){0===dn.size&&fr&&(fr.close(),fr=null)}()}(R,I)}function Xt(C,I){const R=dn.get(C);if(R)for(const L of R)L(I)}let fr=null;const Fr="firebase-installations-store";let as=null;function us(){return as||(as=(0,X.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(Fr)})),as}function ht(C,I){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(C,I){const R=cn(C),K=(yield us()).transaction(Fr,"readwrite"),ee=K.objectStore(Fr),Me=yield ee.get(R);return yield ee.put(I,R),yield K.complete,(!Me||Me.fid!==I.fid)&&Ci(C,I.fid),I})).apply(this,arguments)}function sr(C){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(C){const I=cn(C),L=(yield us()).transaction(Fr,"readwrite");yield L.objectStore(Fr).delete(I),yield L.complete})).apply(this,arguments)}function oi(C,I){return po.apply(this,arguments)}function po(){return(po=(0,P.Z)(function*(C,I){const R=cn(C),K=(yield us()).transaction(Fr,"readwrite"),ee=K.objectStore(Fr),Me=yield ee.get(R),xe=I(Me);return void 0===xe?yield ee.delete(R):yield ee.put(xe,R),yield K.complete,xe&&(!Me||Me.fid!==xe.fid)&&Ci(C,xe.fid),xe})).apply(this,arguments)}function vn(C){return or.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(C){let I;const R=yield oi(C.appConfig,L=>{const K=Ls(L),ee=Ma(C,K);return I=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function Ls(C){return Ht(C||{fid:ct(),registrationStatus:0})}function Ma(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(De.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function qt(C,I){return at.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:It(C)}:{installationEntry:I}}function at(){return(at=(0,P.Z)(function*(C,I){try{const R=yield se(C,I);return ht(C.appConfig,R)}catch(R){throw rt(R)&&409===R.customData.serverCode?yield sr(C.appConfig):yield ht(C.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function It(C){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(C){let I=yield ji(C.appConfig);for(;1===I.registrationStatus;)yield ae(100),I=yield ji(C.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield vn(C);return L||R}return I})).apply(this,arguments)}function ji(C){return oi(C,I=>{if(!I)throw De.create("installation-not-found");return Ht(I)})}function Ht(C){return function go(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Dr(C,I){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:I},R){const L=ft(C,R),K=qe(C,R),ee=I.getImmediate({optional:!0});if(ee){const Tt=yield ee.getHeartbeatsHeader();Tt&&K.append("x-firebase-client",Tt)}const xe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},et=yield te(()=>fetch(L,xe));if(et.ok)return Ie(yield et.json());throw yield ve("Generate Auth Token",et)})).apply(this,arguments)}function ft(C,{fid:I}){return`${Je(C)}/${I}/authTokens:generate`}function Cr(C){return jt.apply(this,arguments)}function jt(){return(jt=(0,P.Z)(function*(C,I=!1){let R;const L=yield oi(C.appConfig,ee=>{if(!Vt(ee))throw De.create("not-registered");const Me=ee.authToken;if(!I&&j(Me))return ee;if(1===Me.requestStatus)return R=Xe(C,I),ee;{if(!navigator.onLine)throw De.create("app-offline");const xe=q(ee);return R=pt(C,xe),xe}});return R?yield R:L.authToken})).apply(this,arguments)}function Xe(C,I){return Te.apply(this,arguments)}function Te(){return(Te=(0,P.Z)(function*(C,I){let R=yield tt(C.appConfig);for(;1===R.authToken.requestStatus;)yield ae(100),R=yield tt(C.appConfig);const L=R.authToken;return 0===L.requestStatus?Cr(C,I):L})).apply(this,arguments)}function tt(C){return oi(C,I=>{if(!Vt(I))throw De.create("not-registered");return function de(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function pt(C,I){return $t.apply(this,arguments)}function $t(){return($t=(0,P.Z)(function*(C,I){try{const R=yield Dr(C,I),L=Object.assign(Object.assign({},I),{authToken:R});return yield ht(C.appConfig,L),R}catch(R){if(!rt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield ht(C.appConfig,L)}else yield sr(C.appConfig);throw R}})).apply(this,arguments)}function Vt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function q(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Ue(){return(Ue=(0,P.Z)(function*(C){const I=C,{installationEntry:R,registrationPromise:L}=yield vn(I);return L?L.catch(console.error):Cr(I).catch(console.error),R.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,P.Z)(function*(C,I=!1){const R=C;return yield Ir(R),(yield Cr(R,I)).token})).apply(this,arguments)}function Ir(C){return zt.apply(this,arguments)}function zt(){return(zt=(0,P.Z)(function*(C){const{registrationPromise:I}=yield vn(C);I&&(yield I)})).apply(this,arguments)}function Jn(C){return De.create("missing-app-config-values",{valueName:C})}const Ra="installations",Pe=C=>{const I=C.getProvider("app").getImmediate(),R=function ls(C){if(!C||!C.options)throw Jn("App Configuration");if(!C.name)throw Jn("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!C.options[R])throw Jn(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Pt=C=>{const I=C.getProvider("app").getImmediate(),R=(0,ue._getProvider)(I,Ra).getImmediate();return{getId:()=>function Q(C){return Ue.apply(this,arguments)}(R),getToken:K=>function bt(C){return Yt.apply(this,arguments)}(R,K)}};(function pn(){(0,ue._registerComponent)(new ge.wA(Ra,Pe,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",Pt,"PRIVATE"))})(),(0,ue.registerVersion)(fe,"0.5.7"),(0,ue.registerVersion)(fe,"0.5.7","esm2017");const mr="@firebase/remote-config",Pn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zh{constructor(I,R,L,K){this.client=I,this.storage=R,this.storageCache=L,this.logger=K}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,K=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${K}.`),K}fetch(I){var R=this;return(0,P.Z)(function*(){const[L,K]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(K&&R.isCachedDataFresh(I.cacheMaxAgeMillis,L))return K;I.eTag=K&&K.eTag;const ee=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function Zc(C=navigator){return C.languages&&C.languages[0]||C.language}class pu{constructor(I,R,L,K,ee,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=L,this.projectId=K,this.apiKey=ee,this.appId=Me}fetch(I){var R=this;return(0,P.Z)(function*(){const[L,K]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},et={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:K,app_id:R.appId,language_code:Zc()},Tt={method:"POST",headers:xe,body:JSON.stringify(et)},kt=fetch(Me,Tt),xt=new Promise((mi,Oi)=>{I.signal.addEventListener(()=>{const No=new Error("The operation was aborted.");No.name="AbortError",Oi(No)})});let Zn;try{yield Promise.race([kt,xt]),Zn=yield kt}catch(mi){let Oi="fetch-client-network";throw"AbortError"===mi.name&&(Oi="fetch-timeout"),Pn.create(Oi,{originalErrorMessage:mi.message})}let Rn=Zn.status;const la=Zn.headers.get("ETag")||void 0;let Ro,Ur;if(200===Zn.status){let mi;try{mi=yield Zn.json()}catch(Oi){throw Pn.create("fetch-client-parse",{originalErrorMessage:Oi.message})}Ro=mi.entries,Ur=mi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Rn=500:"NO_CHANGE"===Ur?Rn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Ro={}),304!==Rn&&200!==Rn)throw Pn.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:la,config:Ro}})()}}class sg{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,P.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:L}){var K=this;return(0,P.Z)(function*(){yield function qn(C,I){return new Promise((R,L)=>{const K=Math.max(I-Date.now(),0),ee=setTimeout(R,K);C.addEventListener(()=>{clearTimeout(ee),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const ee=yield K.client.fetch(I);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Yc(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(I,Me)}})()}}class yo{constructor(I,R,L,K,ee){this.app=I,this._client=R,this._storageCache=L,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _l(C,I){const R=C.target.error||void 0;return Pn.create(I,{originalErrorMessage:R&&R.message})}const $s="app_namespace_store";class Yh{constructor(I,R,L,K=function ug(){return new Promise((C,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{I(_l(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore($s,{keyPath:"compositeKey"})}}catch(R){I(Pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,P.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([$s],"readonly").objectStore($s),et=R.createCompositeKey(I);try{const Tt=xe.get(et);Tt.onerror=kt=>{ee(_l(kt,"storage-get"))},Tt.onsuccess=kt=>{const xt=kt.target.result;K(xt?xt.value:void 0)}}catch(Tt){ee(Pn.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(I,R){var L=this;return(0,P.Z)(function*(){const K=yield L.openDbPromise;return new Promise((ee,Me)=>{const et=K.transaction([$s],"readwrite").objectStore($s),Tt=L.createCompositeKey(I);try{const kt=et.put({compositeKey:Tt,value:R});kt.onerror=xt=>{Me(_l(xt,"storage-set"))},kt.onsuccess=()=>{ee()}}catch(kt){Me(Pn.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(I){var R=this;return(0,P.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([$s],"readwrite").objectStore($s),et=R.createCompositeKey(I);try{const Tt=xe.delete(et);Tt.onerror=kt=>{ee(_l(kt,"storage-delete"))},Tt.onsuccess=()=>{K()}}catch(Tt){ee(Pn.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class Jc{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,P.Z)(function*(){const R=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),K=I.storage.getActiveConfig(),ee=yield R;ee&&(I.lastFetchStatus=ee);const Me=yield L;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const xe=yield K;xe&&(I.activeConfig=xe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function _o(){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,P.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Zo(){(0,ue._registerComponent)(new ge.wA("remote-config",function C(I,{instanceIdentifier:R}){const L=I.getProvider("app").getImmediate(),K=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,X.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:xe}=L.options;if(!ee)throw Pn.create("registration-project-id");if(!Me)throw Pn.create("registration-api-key");if(!xe)throw Pn.create("registration-app-id");const et=new Yh(xe,L.name,R=R||"firebase"),Tt=new Jc(et),kt=new re.Yd(mr);kt.logLevel=re.in.ERROR;const xt=new pu(K,ue.SDK_VERSION,R,ee,Me,xe),Zn=new sg(xt,et),Rn=new Zh(Zn,et,Tt,kt),la=new yo(L,Rn,Tt,et,kt);return function Lr(C){const I=(0,X.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(mr,"0.3.6"),(0,ue.registerVersion)(mr,"0.3.6","esm2017")}();const vl="/firebase-messaging-sw.js",Hs="/firebase-cloud-messaging-push-scope",Xr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vo="google.c.a.c_id",Oa="google.c.a.c_l",Xc="google.c.a.ts",lg="google.c.a.e";var Gs=(()=>{return(C=Gs||(Gs={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Gs;var C})();function li(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mu(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),K=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)K[ee]=L.charCodeAt(ee);return K}const yu="fcm_token_details_db",yr="fcm_token_object_Store";function Jh(C){return _u.apply(this,arguments)}function _u(){return _u=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(yu))return null;let I=null;return(yield(0,X.X3)(yu,5,function(){var L=(0,P.Z)(function*(K,ee,Me,xe){var et;if(ee<2||!K.objectStoreNames.contains(yr))return;const Tt=xe.objectStore(yr),kt=yield Tt.index("fcmSenderId").get(C);if(yield Tt.clear(),kt)if(2===ee){const xt=kt;if(!xt.auth||!xt.p256dh||!xt.endpoint)return;I={token:xt.fcmToken,createTime:null!==(et=xt.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:xt.auth,p256dh:xt.p256dh,endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:"string"==typeof xt.vapidKey?xt.vapidKey:li(xt.vapidKey)}}}else if(3===ee){const xt=kt;I={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:li(xt.auth),p256dh:li(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:li(xt.vapidKey)}}}else if(4===ee){const xt=kt;I={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:li(xt.auth),p256dh:li(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:li(xt.vapidKey)}}}});return function(K,ee,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(yu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),ed(I)?I:null}),_u.apply(this,arguments)}function ed(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const fs="firebase-messaging-store";let ka=null;function El(){return ka||(ka=(0,X.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(fs)})),ka}function yn(C){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(C){const I=wo(C),L=yield(yield El()).transaction(fs).objectStore(fs).get(I);if(L)return L;{const K=yield Jh(C.appConfig.senderId);if(K)return yield qs(C,K),K}})).apply(this,arguments)}function qs(C,I){return ln.apply(this,arguments)}function ln(){return(ln=(0,P.Z)(function*(C,I){const R=wo(C),K=(yield El()).transaction(fs,"readwrite");return yield K.objectStore(fs).put(I,R),yield K.complete,I})).apply(this,arguments)}function td(C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,P.Z)(function*(C){const I=wo(C),L=(yield El()).transaction(fs,"readwrite");yield L.objectStore(fs).delete(I),yield L.complete})).apply(this,arguments)}function wo({appConfig:C}){return C.appId}const Fn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pa(C,I){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(C,I){const R=yield Ws(C),L=gt(I),K={method:"POST",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(ei(C.appConfig),K)).json()}catch(Me){throw Fn.create("token-subscribe-failed",{errorInfo:Me})}if(ee.error)throw Fn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Fn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Sr(C,I){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(C,I){const R=yield Ws(C),L=gt(I.subscriptionOptions),K={method:"PATCH",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${ei(C.appConfig)}/${I.token}`,K)).json()}catch(Me){throw Fn.create("token-update-failed",{errorInfo:Me})}if(ee.error)throw Fn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Fn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ps(C,I){return wu.apply(this,arguments)}function wu(){return(wu=(0,P.Z)(function*(C,I){const L={method:"DELETE",headers:yield Ws(C)};try{const ee=yield(yield fetch(`${ei(C.appConfig)}/${I}`,L)).json();if(ee.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw Fn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function ei({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Ws(C){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*({appConfig:C,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function gt({p256dh:C,auth:I,endpoint:R,vapidKey:L}){const K={web:{endpoint:R,auth:I,p256dh:C}};return L!==Xr&&(K.web.applicationPubKey=L),K}const bu=6048e5;function Fa(C){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(C){const I=yield Dl(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:li(I.getKey("auth")),p256dh:li(I.getKey("p256dh"))},L=yield yn(C.firebaseDependencies);if(L){if(Jo(L.subscriptionOptions,R))return Date.now()>=L.createTime+bu?wl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ps(C.firebaseDependencies,L.token)}catch(K){console.warn(K)}return Ce(C.firebaseDependencies,R)}return Ce(C.firebaseDependencies,R)})).apply(this,arguments)}function Cu(C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(C){const I=yield yn(C.firebaseDependencies);I&&(yield ps(C.firebaseDependencies,I.token),yield td(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function wl(C,I){return bl.apply(this,arguments)}function bl(){return(bl=(0,P.Z)(function*(C,I){try{const R=yield Sr(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield qs(C.firebaseDependencies,L),R}catch(R){throw yield Cu(C),R}})).apply(this,arguments)}function Ce(C,I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,P.Z)(function*(C,I){const L={token:yield Pa(C,I),createTime:Date.now(),subscriptionOptions:I};return yield qs(C,L),L.token})).apply(this,arguments)}function Dl(C,I){return En.apply(this,arguments)}function En(){return(En=(0,P.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mu(I)})})).apply(this,arguments)}function Jo(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Xo(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ti(C,I){if(!I.notification)return;C.notification={};const R=I.notification.title;R&&(C.notification.title=R);const L=I.notification.body;L&&(C.notification.body=L);const K=I.notification.image;K&&(C.notification.image=K)}(I,C),function Cl(C,I){!I.data||(C.data=I.data)}(I,C),function Il(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const R=I.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function nd(C){return"object"==typeof C&&!!C&&vo in C}function Tl(C,I){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<I.length&&R.push(I.charAt(L));return R.join("")}function Zs(C){return Fn.create("missing-app-config-values",{valueName:C})}Tl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _r{constructor(I,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Tu(C){if(!C||!C.options)throw Zs("App Configuration Object");if(!C.name)throw Zs("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of I)if(!R[L])throw Zs(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:K,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ci(C){return Au.apply(this,arguments)}function Au(){return(Au=(0,P.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(vl,{scope:Hs}),C.swRegistration.update().catch(()=>{})}catch(I){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function Ys(C,I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,P.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield ci(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function Al(C,I){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=Xr)})).apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(C,I){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Al(C,null==I?void 0:I.vapidKey),yield Ys(C,null==I?void 0:I.serviceWorkerRegistration),Fa(C)})).apply(this,arguments)}function La(C,I,R){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(C,I,R){const L=Ml(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[vo],message_name:R[Oa],message_time:R[Xc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ml(C){switch(C){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function rd(){return(rd=(0,P.Z)(function*(C,I){const R=I.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Gs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Xo(R)):C.onMessageHandler.next(Xo(R)));const L=R.data;nd(L)&&"1"===L[lg]&&(yield La(C,R.messageType,L))})).apply(this,arguments)}const Rl="@firebase/messaging",id=C=>{const I=new _r(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function xl(C,I){return rd.apply(this,arguments)}(I,R)),I},Do=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function Mu(C,I){return Sl.apply(this,arguments)}(I,L)}};function od(){return Co.apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sd(){(0,ue._registerComponent)(new ge.wA("messaging",id,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Do,"PRIVATE")),(0,ue.registerVersion)(Rl,"0.9.11"),(0,ue.registerVersion)(Rl,"0.9.11","esm2017")}();const Ol="analytics",Vy="firebase_id",Va="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xu="https://www.googletagmanager.com/gtag/js",Wn=new re.Yd("@firebase/analytics");function ad(C){return Promise.all(C.map(I=>I.catch(R=>R)))}function cg(C,I){const R=document.createElement("script");R.src=`${xu}?l=${C}&id=${I}`,R.async=!0,document.head.appendChild(R)}function ta(C,I,R,L,K,ee){return ud.apply(this,arguments)}function ud(){return(ud=(0,P.Z)(function*(C,I,R,L,K,ee){const Me=L[K];try{if(Me)yield I[Me];else{const et=(yield ad(R)).find(Tt=>Tt.measurementId===K);et&&(yield I[et.appId])}}catch(xe){Wn.error(xe)}C("config",K,ee)})).apply(this,arguments)}function Pl(C,I,R,L,K){return Io.apply(this,arguments)}function Io(){return(Io=(0,P.Z)(function*(C,I,R,L,K){try{let ee=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield ad(R);for(const et of Me){const Tt=xe.find(xt=>xt.measurementId===et),kt=Tt&&I[Tt.appId];if(!kt){ee=[];break}ee.push(kt)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),C("event",L,K||{})}catch(ee){Wn.error(ee)}})).apply(this,arguments)}function dg(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(xu))return I;return null}const Vn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vr=new class ni{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function na(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function cd(C){return gn.apply(this,arguments)}function gn(){return(gn=(0,P.Z)(function*(C){var I;const{appId:R,apiKey:L}=C,K={method:"GET",headers:na(L)},ee=Va.replace("{app-id}",R),Me=yield fetch(ee,K);if(200!==Me.status&&304!==Me.status){let xe="";try{const et=yield Me.json();(null===(I=et.error)||void 0===I?void 0:I.message)&&(xe=et.error.message)}catch(et){}throw Vn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function tf(C){return Si.apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(C,I=Vr,R){const{appId:L,apiKey:K,measurementId:ee}=C.options;if(!L)throw Vn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:L};throw Vn.create("no-api-key")}const Me=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Fl;return setTimeout((0,P.Z)(function*(){xe.abort()}),void 0!==R?R:6e4),Ru({appId:L,apiKey:K,measurementId:ee},Me,xe,I)})).apply(this,arguments)}function Ru(C,I,R){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:R},L,K=Vr){const{appId:ee,measurementId:Me}=C;try{yield Ft(L,I)}catch(xe){if(Me)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}try{const xe=yield cd(C);return K.deleteThrottleMetadata(ee),xe}catch(xe){if(!dd(xe)){if(K.deleteThrottleMetadata(ee),Me)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}const et=503===Number(xe.customData.httpStatus)?(0,X.$s)(R,K.intervalMillis,30):(0,X.$s)(R,K.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+et,backoffCount:R+1};return K.setThrottleMetadata(ee,Tt),Wn.debug(`Calling attemptFetch again in ${et} millis`),Ru(C,Tt,L,K)}})).apply(this,arguments)}function Ft(C,I){return new Promise((R,L)=>{const K=Math.max(I-Date.now(),0),ee=setTimeout(R,K);C.addEventListener(()=>{clearTimeout(ee),L(Vn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function dd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Fl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Ll(){return To.apply(this,arguments)}function To(){return(To=(0,P.Z)(function*(){if(!(0,X.hl)())return Wn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return Wn.warn(Vn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function ys(){return(ys=(0,P.Z)(function*(C,I,R,L,K,ee,Me){var xe;const et=tf(C);et.then(Rn=>{R[Rn.measurementId]=Rn.appId,C.options.measurementId&&Rn.measurementId!==C.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>Wn.error(Rn)),I.push(et);const Tt=Ll().then(Rn=>{if(Rn)return L.getId()}),[kt,xt]=yield Promise.all([et,Tt]);dg()||cg(ee,kt.measurementId),K("js",new Date);const Zn=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return Zn.origin="firebase",Zn.update=!0,null!=xt&&(Zn[Vy]=xt),K("config",kt.measurementId,Zn),kt.measurementId})).apply(this,arguments)}class ra{constructor(I){this.app=I}_delete(){return delete hi[this.app.options.appId],Promise.resolve()}}let hi={},Xs=[];const fi={};let eo,qi,Gi="dataLayer",Bl=!1;function Mi(C,I,R){!function Ao(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,K)=>`(${K+1}) ${L}`).join(" "),R=Vn.create("invalid-analytics-context",{errorInfo:I});Wn.warn(R.message)}}();const L=C.options.appId;if(!L)throw Vn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Vn.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=hi[L])throw Vn.create("already-exists",{id:L});if(!Bl){!function ms(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Gi);const{wrappedGtag:ee,gtagCore:Me}=function ef(C,I,R,L,K){let ee=function(...Me){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function ld(C,I,R,L){function ee(){return(ee=(0,P.Z)(function*(Me,xe,et){try{"event"===Me?yield Pl(C,I,R,xe,et):"config"===Me?yield ta(C,I,R,L,xe,et):C("set",xe)}catch(Tt){Wn.error(Tt)}})).apply(this,arguments)}return function K(Me,xe,et){return ee.apply(this,arguments)}}(ee,C,I,R),{gtagCore:ee,wrappedGtag:window[K]}}(hi,Xs,fi,Gi,"gtag");qi=ee,eo=Me,Bl=!0}return hi[L]=function Kn(C,I,R,L,K,ee,Me){return ys.apply(this,arguments)}(C,Xs,fi,I,eo,Gi,R),new ra(C)}function sa(){return(sa=(0,P.Z)(function*(C,I,R,L,K){if(K&&K.global)C("event",R,L);else{const ee=yield I;C("event",R,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function Cn(){return to.apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const no="@firebase/analytics";!function gg(){(0,ue._registerComponent)(new ge.wA(Ol,(I,{options:R})=>Mi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function C(I){try{const R=I.getProvider(Ol).getImmediate();return{logEvent:(L,K,ee)=>function pg(C,I,R,L){C=(0,X.m9)(C),function ia(C,I,R,L,K){return sa.apply(this,arguments)}(qi,hi[C.app.options.appId],I,R,L).catch(K=>Wn.error(K))}(R,L,K,ee)}}catch(R){throw Vn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(no,"0.7.7"),(0,ue.registerVersion)(no,"0.7.7","esm2017")}();var ro=k(4408),Nu=k(7565);const Ul=new class In extends Nu.v{}(class _s extends ro.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,R,L):I.flush(this)}});var mg=k(4986),jl=k(8505),Rr=k(9468),pi=k(5363);const $l=new h.GfV("7.3.0"),vs="__angularfire_symbol__analyticsIsSupportedValue",Ni="__angularfire_symbol__analyticsIsSupported",Ki="__angularfire_symbol__remoteConfigIsSupportedValue",Ba="__angularfire_symbol__remoteConfigIsSupported",Hl="__angularfire_symbol__messagingIsSupportedValue",Gl="__angularfire_symbol__messagingIsSupported";function io(C,I,R){if(I){if(1===I.length)return I[0];const ee=I.filter(Me=>Me.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ni]||(globalThis[Ni]=Cn().then(C=>globalThis[vs]=C).catch(()=>globalThis[vs]=!1)),globalThis[Gl]||(globalThis[Gl]=od().then(C=>globalThis[Hl]=C).catch(()=>globalThis[Hl]=!1)),globalThis[Ba]||(globalThis[Ba]=_o().then(C=>globalThis[Ki]=C).catch(()=>globalThis[Ki]=!1));const gd=(C,I)=>{const R=I?[I]:(0,Y.C6)(),L=[];return R.forEach(K=>{K.container.getProvider(C).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function Mo(){}class Ou{constructor(I,R=Ul){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,L){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{I.apply(this,[Me])})},R,L)}}class Zi{constructor(I){this.zone=I,this.task=null}call(I,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),R.pipe((0,jl.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ku=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ou(Zone.current)),this.insideAngular=R.run(()=>new Ou(Zone.current,mg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(h.LFG(h.R0b))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Yi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Wl(C){return Yi(),function xo(C){return function(R){return(R=R.lift(new Zi(C.ngZone))).pipe((0,Rr.R)(C.outsideAngular),(0,pi.Q)(C.insideAngular))}}(Yi())(C)}},2090:(lt,Ae,k)=>{k.d(Ae,{BH:()=>Se,LL:()=>St,ZR:()=>ae,zI:()=>me,US:()=>re,tV:()=>$,L:()=>ce,$s:()=>go,r3:()=>Xt,Sg:()=>ke,ne:()=>ht,vZ:()=>Fs,ZB:()=>J,Lj:()=>$t,pd:()=>as,m9:()=>ft,z$:()=>Be,jU:()=>rt,ru:()=>Je,d:()=>ve,xb:()=>fr,w1:()=>we,hl:()=>W,uI:()=>pe,UG:()=>De,b$:()=>Ie,G6:()=>te,Mn:()=>ze,X3:()=>pt,xO:()=>Ui,zd:()=>Fr,eu:()=>ie});var h=k(5861);const X=function(j){const V=[];let q=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[q++]=Q:Q<2048?(V[q++]=Q>>6|192,V[q++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[q++]=Q>>18|240,V[q++]=Q>>12&63|128,V[q++]=Q>>6&63|128,V[q++]=63&Q|128):(V[q++]=Q>>12|224,V[q++]=Q>>6&63|128,V[q++]=63&Q|128)}return V},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Ue=j[Q],bt=Q+1<j.length,Yt=bt?j[Q+1]:0,Ir=Q+2<j.length,zt=Ir?j[Q+2]:0;let fn=(15&Yt)<<2|zt>>6,ar=63&zt;Ir||(ar=64,bt||(fn=64)),de.push(q[Ue>>2],q[(3&Ue)<<4|Yt>>4],q[fn],q[ar])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,de=0;for(;q<j.length;){const Q=j[q++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=j[q++];V[de++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const Ir=((7&Q)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[de++]=String.fromCharCode(55296+(Ir>>10)),V[de++]=String.fromCharCode(56320+(1023&Ir))}else{const Ue=j[q++],bt=j[q++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&bt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Ue=q[j.charAt(Q++)],Yt=Q<j.length?q[j.charAt(Q)]:0;++Q;const zt=Q<j.length?q[j.charAt(Q)]:64;++Q;const Ot=Q<j.length?q[j.charAt(Q)]:64;if(++Q,null==Ue||null==Yt||null==zt||null==Ot)throw Error();de.push(Ue<<2|Yt>>4),64!==zt&&(de.push(Yt<<4&240|zt>>2),64!==Ot&&de.push(zt<<6&192|Ot))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const V=X(j);return re.encodeByteArray(V,!0)}(j).replace(/\./g,"")},$=function(j){try{return re.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!Ke(q)||(j[q]=J(j[q],V[q]));return j}function Ke(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,de))}}}function ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Ue=j.sub||j.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(bt)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function rt(){return"object"==typeof self&&self.self===self}function Je(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Be().indexOf("Electron/")>=0}function we(){const j=Be();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function ze(){return Be().indexOf("MSAppHost/")>=0}function te(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ie(){return new Promise((j,V)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Ue;V((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(q){V(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(V,q,de){super(q),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(V,q,de){this.service=V,this.serviceName=q,this.errors=de}create(V,...q){const de=q[0]||{},Q=`${this.service}/${V}`,Ue=this.errors[V],bt=Ue?function Jt(j,V){return j.replace(kn,(q,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Ue,de):"Error";return new ae(Q,`${this.serviceName}: ${bt} (${Q}).`,de)}}const kn=/\{\$([^}]+)}/g;function Xt(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function fr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Fs(j,V){if(j===V)return!0;const q=Object.keys(j),de=Object.keys(V);for(const Q of q){if(!de.includes(Q))return!1;const Ue=j[Q],bt=V[Q];if(Pr(Ue)&&Pr(bt)){if(!Fs(Ue,bt))return!1}else if(Ue!==bt)return!1}for(const Q of de)if(!q.includes(Q))return!1;return!0}function Pr(j){return null!==j&&"object"==typeof j}function Ui(j){const V=[];for(const[q,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Fr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Ue]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),V}function as(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function ht(j,V){const q=new Qr(j,V);return q.subscribe.bind(q)}class Qr{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,de){let Q;if(void 0===V&&void 0===q&&void 0===de)throw new Error("Missing Observer.");Q=function Qn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:de},void 0===Q.next&&(Q.next=oi),void 0===Q.error&&(Q.error=oi),void 0===Q.complete&&(Q.complete=oi);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(bt){}}),this.observers.push(Q),Ue}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}function go(j,V=1e3,q=2){const de=V*Math.pow(q,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function ft(j){return j&&j._delegate?j._delegate:j}function Cr(j,V){return new Promise((q,de)=>{j.onsuccess=Q=>{q(Q.target.result)},j.onerror=Q=>{var Ue;de(`${V}: ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class jt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q){return new Xe(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Xe{constructor(V){this._transaction=V,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new tt(this._store.index(V))}createIndex(V,q,de){return new tt(this._store.createIndex(V,q,de))}get(V){return Cr(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return Cr(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return Cr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Cr(this._store.clear(),"Error clearing IndexedDB object store")}}class tt{constructor(V){this._index=V}get(V){return Cr(this._index.get(V),"Error reading from IndexedDB")}}function pt(j,V,q){return new Promise((de,Q)=>{try{const Ue=indexedDB.open(j,V);Ue.onsuccess=bt=>{de(new jt(bt.target.result))},Ue.onerror=bt=>{var Yt;Q(`Error opening indexedDB: ${null===(Yt=bt.target.error)||void 0===Yt?void 0:Yt.message}`)},Ue.onupgradeneeded=bt=>{q(new jt(Ue.result),bt.oldVersion,bt.newVersion,new Xe(Ue.transaction))}}catch(Ue){Q(`Error opening indexedDB: ${Ue.message}`)}})}function $t(j){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(j){return new Promise((V,q)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Ue;q(`Error deleting indexedDB database "${j}": ${null===(Ue=Q.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(de){q(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},4050:(lt,Ae,k)=>{var h=k(5e3);let Y=null;function P(){return Y}const re=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ke(){return new H((0,h.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(n){const e=(0,h.LFG)(re).location;return new Je((0,h.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new h.OlP("appBaseHref");let Je=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(rt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(rt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(qe(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Se,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(pe),h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return new ve((0,h.LFG)(pe),(0,h.LFG)(fe))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),Oe=(()=>((Oe=Oe||{})[Oe.Short=0]="Short",Oe[Oe.Medium=1]="Medium",Oe[Oe.Long=2]="Long",Oe[Oe.Full=3]="Full",Oe))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function on(n,e){return sr((0,h.cg1)(n)[h.wAp.DateFormat],e)}function os(n,e){return sr((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function Xt(n,e){return sr((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function Gt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ae.CurrencyDecimal)return t[h.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[h.wAp.NumberSymbols][ae.Group]}return r}function as(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function sr(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Qn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const or=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ls={},Ma=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.ShortGMT=1]="ShortGMT",qt[qt.Long=2]="Long",qt[qt.Extended=3]="Extended",qt))(),at=(()=>((at=at||{})[at.FullYear=0]="FullYear",at[at.Month=1]="Month",at[at.Date=2]="Date",at[at.Hours=3]="Hours",at[at.Minutes=4]="Minutes",at[at.Seconds=5]="Seconds",at[at.FractionalSeconds=6]="FractionalSeconds",at[at.Day=7]="Day",at))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function pr(n,e,t,r){let i=function Yt(n){if(zt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(p=>+p);return ji(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(or))return function Ir(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,y,b),e}(r)}const e=new Date(n);if(!zt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ht(t,e)||e;let p,c=[];for(;e;){if(p=Ma.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const S=c.pop();if(!S)break;e=S}}let y=i.getTimezoneOffset();r&&(y=Q(r,y),i=function bt(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ue(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let b="";return c.forEach(S=>{const M=function de(n){if(q[n])return q[n];let e;switch(n){case"G":case"GG":case"GGG":e=jt(It.Eras,se.Abbreviated);break;case"GGGG":e=jt(It.Eras,se.Wide);break;case"GGGGG":e=jt(It.Eras,se.Narrow);break;case"y":e=ft(at.FullYear,1,0,!1,!0);break;case"yy":e=ft(at.FullYear,2,0,!0,!0);break;case"yyy":e=ft(at.FullYear,3,0,!1,!0);break;case"yyyy":e=ft(at.FullYear,4,0,!1,!0);break;case"Y":e=V(1);break;case"YY":e=V(2,!0);break;case"YYY":e=V(3);break;case"YYYY":e=V(4);break;case"M":case"L":e=ft(at.Month,1,1);break;case"MM":case"LL":e=ft(at.Month,2,1);break;case"MMM":e=jt(It.Months,se.Abbreviated);break;case"MMMM":e=jt(It.Months,se.Wide);break;case"MMMMM":e=jt(It.Months,se.Narrow);break;case"LLL":e=jt(It.Months,se.Abbreviated,me.Standalone);break;case"LLLL":e=jt(It.Months,se.Wide,me.Standalone);break;case"LLLLL":e=jt(It.Months,se.Narrow,me.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=ft(at.Date,1);break;case"dd":e=ft(at.Date,2);break;case"c":case"cc":e=ft(at.Day,1);break;case"ccc":e=jt(It.Days,se.Abbreviated,me.Standalone);break;case"cccc":e=jt(It.Days,se.Wide,me.Standalone);break;case"ccccc":e=jt(It.Days,se.Narrow,me.Standalone);break;case"cccccc":e=jt(It.Days,se.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=jt(It.Days,se.Abbreviated);break;case"EEEE":e=jt(It.Days,se.Wide);break;case"EEEEE":e=jt(It.Days,se.Narrow);break;case"EEEEEE":e=jt(It.Days,se.Short);break;case"a":case"aa":case"aaa":e=jt(It.DayPeriods,se.Abbreviated);break;case"aaaa":e=jt(It.DayPeriods,se.Wide);break;case"aaaaa":e=jt(It.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":e=jt(It.DayPeriods,se.Abbreviated,me.Standalone,!0);break;case"bbbb":e=jt(It.DayPeriods,se.Wide,me.Standalone,!0);break;case"bbbbb":e=jt(It.DayPeriods,se.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=jt(It.DayPeriods,se.Abbreviated,me.Format,!0);break;case"BBBB":e=jt(It.DayPeriods,se.Wide,me.Format,!0);break;case"BBBBB":e=jt(It.DayPeriods,se.Narrow,me.Format,!0);break;case"h":e=ft(at.Hours,1,-12);break;case"hh":e=ft(at.Hours,2,-12);break;case"H":e=ft(at.Hours,1);break;case"HH":e=ft(at.Hours,2);break;case"m":e=ft(at.Minutes,1);break;case"mm":e=ft(at.Minutes,2);break;case"s":e=ft(at.Seconds,1);break;case"ss":e=ft(at.Seconds,2);break;case"S":e=ft(at.FractionalSeconds,1);break;case"SS":e=ft(at.FractionalSeconds,2);break;case"SSS":e=ft(at.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Te(qt.Short);break;case"ZZZZZ":e=Te(qt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Te(qt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Te(qt.Long);break;default:return null}return q[n]=e,e}(S);b+=M?M(i,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ji(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ht(n,e){const t=function Jt(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Ls[t]=Ls[t]||{},Ls[t][e])return Ls[t][e];let r="";switch(e){case"shortDate":r=on(n,Oe.Short);break;case"mediumDate":r=on(n,Oe.Medium);break;case"longDate":r=on(n,Oe.Long);break;case"fullDate":r=on(n,Oe.Full);break;case"shortTime":r=os(n,Oe.Short);break;case"mediumTime":r=os(n,Oe.Medium);break;case"longTime":r=os(n,Oe.Long);break;case"fullTime":r=os(n,Oe.Full);break;case"short":const i=Ht(n,"shortTime"),u=Ht(n,"shortDate");r=go(Xt(n,Oe.Short),[i,u]);break;case"medium":const c=Ht(n,"mediumTime"),p=Ht(n,"mediumDate");r=go(Xt(n,Oe.Medium),[c,p]);break;case"long":const y=Ht(n,"longTime"),b=Ht(n,"longDate");r=go(Xt(n,Oe.Long),[y,b]);break;case"full":const S=Ht(n,"fullTime"),M=Ht(n,"fullDate");r=go(Xt(n,Oe.Full),[S,M])}return r&&(Ls[t][e]=r),r}function go(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dr(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ft(n,e,t=0,r=!1,i=!1){return function(u,c){let p=function Cr(n,e){switch(n){case at.FullYear:return e.getFullYear();case at.Month:return e.getMonth();case at.Date:return e.getDate();case at.Hours:return e.getHours();case at.Minutes:return e.getMinutes();case at.Seconds:return e.getSeconds();case at.FractionalSeconds:return e.getMilliseconds();case at.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===at.Hours)0===p&&-12===t&&(p=12);else if(n===at.FractionalSeconds)return function gr(n,e){return Dr(n,3).substr(0,e)}(p,e);const y=Gt(c,ae.MinusSign);return Dr(p,e,y,r,i)}}function jt(n,e,t=me.Format,r=!1){return function(i,u){return function Xe(n,e,t,r,i,u){switch(t){case It.Months:return function wt(n,e,t){const r=(0,h.cg1)(n),u=sr([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return sr(u,t)}(e,i,r)[n.getMonth()];case It.Days:return function ct(n,e,t){const r=(0,h.cg1)(n),u=sr([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return sr(u,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const b=function us(n){const e=(0,h.cg1)(n);return as(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Qn(r):[Qn(r[0]),Qn(r[1])])}(e),S=function ht(n,e,t){const r=(0,h.cg1)(n);as(r);const u=sr([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return sr(u,t)||[]}(e,i,r),M=b.findIndex(F=>{if(Array.isArray(F)){const[B,G]=F,ne=c>=B.hours&&p>=B.minutes,be=c<G.hours||c===G.hours&&p<G.minutes;if(B.hours<G.hours){if(ne&&be)return!0}else if(ne||be)return!0}else if(F.hours===c&&F.minutes===p)return!0;return!1});if(-1!==M)return S[M]}return function kn(n,e,t){const r=(0,h.cg1)(n),u=sr([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return sr(u,t)}(e,i,r)[c<12?0:1];case It.Eras:return function cn(n,e){return sr((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Te(n){return function(e,t,r){const i=-1*r,u=Gt(t,ae.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case qt.Short:return(i>=0?"+":"")+Dr(c,2,u)+Dr(Math.abs(i%60),2,u);case qt.ShortGMT:return"GMT"+(i>=0?"+":"")+Dr(c,1,u);case qt.Long:return"GMT"+(i>=0?"+":"")+Dr(c,2,u)+":"+Dr(Math.abs(i%60),2,u);case qt.Extended:return 0===r?"Z":(i>=0?"+":"")+Dr(c,2,u)+":"+Dr(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Vt(n){return ji(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function j(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=Vt(t),c=function $t(n){const e=ji(n,0,1).getDay();return ji(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return Dr(i,n,Gt(r,ae.MinusSign))}}function V(n,e=!1){return function(t,r){return Dr(Vt(t).getFullYear(),n,Gt(r,ae.MinusSign),e)}}const q={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function zt(n){return n instanceof Date&&!isNaN(n.valueOf())}let Hi=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Us{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ur=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Us(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),cs(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{cs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function cs(n,e){n.context.$implicit=e.item}let Lr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){du("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){du("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class un{constructor(){this.$implicit=null,this.ngIf=null}}function du(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function qn(n,e){return new h.vHH(2100,"")}class Yc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class sg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const hs=new sg,og=new Yc;let yo=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return hs;if((0,h.F4k)(t))return og;throw qn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})();const ug=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Yh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){var c;if(null==t||""===t||t!=t)return null;try{return pr(t,r,u||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw qn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(ug,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Gs="browser";function Tr(n){return n===Gs}function yr(n){return"server"===n}let vu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Eu((0,h.LFG)(re),window)}),n})();class Eu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ka(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qs extends class Qo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function td(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function wo(n){Eo=Eo||document.createElement("a"),Eo.setAttribute("href",n);const e=Eo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Eo,ln=null;const Ar=new h.OlP("TRANSITION_ID"),Pa=[{provide:h.ip1,useFactory:function Fn(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Ar,re,h.zs3],multi:!0}];class Ti{static init(){(0,h.VLi)(new Ti)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Sr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=new h.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ws=(()=>{class n extends ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ks))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ks(n){P().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bu=/%COMP%/g;function Ce(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ce(n,i,t):(i=i.replace(bu,n),t.push(i))}return t}function Bt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let En=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Il(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ce(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ps),h.LFG(Ws),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Jo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=gt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bt(r)):this.eventManager.addEventListener(e,t,Bt(r))}}class Cl extends Jo{constructor(e,t,r,i){super(e),this.component=r;const u=Ce(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function wl(n){return"_ngcontent-%COMP%".replace(bu,n)}(i+"-"+r.id),this.hostAttr=function bl(n){return"_nghost-%COMP%".replace(bu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Il extends Jo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ce(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nd=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Tl=["alt","control","meta","shift"],Zs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_r={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ci={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Au=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Tl.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Ys(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_r.hasOwnProperty(e)&&(e=_r[e]))}return Zs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Tl.forEach(u=>{u!=i&&ci[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Gs},{provide:h.g9A,useValue:function Ai(){qs.makeCurrent(),Ti.init()},multi:!0},{provide:re,useFactory:function Su(){return(0,h.RDi)(document),document},deps:[]}]),La=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Al(){return new h.qLn},deps:[]},{provide:zs,useClass:nd,multi:!0,deps:[re,h.R0b,h.Lbi]},{provide:zs,useClass:Au,multi:!0,deps:[re]},{provide:En,useClass:En,deps:[ps,Ws,h.AFp]},{provide:h.FYo,useExisting:En},{provide:ei,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[re]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ps,useClass:ps,deps:[zs,h.R0b]},{provide:class yn{},useClass:Sr,deps:[]}];let ea=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Ar,useExisting:h.AFp},Pa]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:La,imports:[zn,h.hGG]}),n})();"undefined"!=typeof window&&window;var Ln=k(8996),Vn=k(7669);function _t(...n){const e=(0,Vn.yG)(n);return(0,Ln.D)(n,e)}var lr=k(7579);class ni extends lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Vr=k(8306);const{isArray:na}=Array,{getPrototypeOf:cd,prototype:gn,keys:tf}=Object;function Si(n){if(1===n.length){const e=n[0];if(na(e))return{args:e,keys:null};if(function Ru(n){return n&&"object"==typeof n&&cd(n)===gn}(e)){const t=tf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var di=k(4671),Ft=k(4004);const{isArray:dd}=Array;function Ll(n){return(0,Ft.U)(e=>function Fl(n,e){return dd(e)?n(...e):n(e)}(n,e))}function To(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Kn=k(5403),ys=k(9672);function Xs(n,e,t){n?(0,ys.f)(t,n,e):e()}var fi=k(576);function Gi(n,e){const t=(0,fi.m)(n)?n:()=>n,r=i=>i.error(t());return new Vr.y(e?i=>e.schedule(r,0,i):r)}const eo=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qi=k(8189);function hd(...n){return function Bl(){return(0,qi.J)(1)}()((0,Ln.D)(n,(0,Vn.yG)(n)))}var Ao=k(8421);function Mi(n){return new Vr.y(e=>{(0,Ao.Xf)(n()).subscribe(e)})}var ia=k(515),sa=k(727),Br=k(4482);function xi(){return(0,Br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class fd extends Vr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sa.w0.EMPTY)}return e}refCount(){return xi()(this)}}function Bn(n,e){return(0,Br.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Kn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,Ao.Xf)(n(y,S)).subscribe(i=(0,Kn.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var So=k(5698);function Ri(...n){const e=(0,Vn.yG)(n);return(0,Br.e)((t,r)=>{(e?hd(n,t,e):hd(n,t)).subscribe(r)})}function oa(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,Kn.x)(c,S=>{const M=b++;y=p?n(y,S,M):(p=!0,S),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function xr(n,e){return(0,Br.e)(oa(n,e,arguments.length>=2,!0))}function zi(n,e){return(0,Br.e)((t,r)=>{let i=0;t.subscribe((0,Kn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Wi(n){return(0,Br.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Kn.x)(t,void 0,void 0,c=>{u=(0,Ao.Xf)(n(c,Wi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=k(5577);function to(n,e){return(0,fi.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function pd(n){return n<=0?()=>ia.E:(0,Br.e)((e,t)=>{let r=[];e.subscribe((0,Kn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xn(n=hg){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hg(){return new eo}function fg(n){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function no(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zi((i,u)=>n(i,u,r)):di.y,(0,So.q)(1),t?fg(e):xn(()=>new eo))}var ri=k(8505);class ro{constructor(e,t){this.id=e,this.url=t}}class _s extends ro{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nu extends ro{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class In extends ro{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ul extends ro{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aa extends ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mg extends ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl extends ro{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rr extends ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends ro{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $l{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ni{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ba{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class ql{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xn(n){return new ql(n)}const zl="ngNavigationCancelingError";function io(n){const e=Error("NavigationCancelingError: "+n);return e[zl]=!0,e}function Mo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ku(n[i],e[i]))return!1;return!0}function ku(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Yi(n){return Array.prototype.concat.apply([],n)}function md(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function gi(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Ln.D)(Promise.resolve(n)):_t(n)}const xo={exact:function I(n,e,t){if(!kt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},ua={exact:function C(n,e){return Zi(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ku(n[t],e[t]))},ignored:()=>!0};function Pu(n,e,t){return xo[t.paths](n.root,e.root,t.matrixParams)&&ua[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!kt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!kt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(kt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Lt])&&K(n.children[Lt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>ua[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return la.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ro(this)}}class et{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xn(this.parameters)),this._parameterMap}toString(){return Ua(this)}}function kt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Zn{}class Rn{parse(e){const t=new _d(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ur(e.root,!0)}`,r=function By(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Oi(t)}=${Oi(i)}`).join("&"):`${Oi(t)}=${Oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function No(n){return encodeURI(n)}(e.fragment)}`:""}`}}const la=new Rn;function Ro(n){return n.segments.map(e=>Ua(e)).join("/")}function Ur(n,e){if(!n.hasChildren())return Ro(n);if(e){const t=n.children[Lt]?Ur(n.children[Lt],!1):"",r=[];return er(n.children,(i,u)=>{u!==Lt&&r.push(`${u}:${Ur(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xt(n,e){let t=[];return er(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),er(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[Ur(n.children[Lt],!1)]:[`${i}:${Ur(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Ro(n)}/${t[0]}`:`${Ro(n)}/(${t.join("//")})`}}function mi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(n){return mi(n).replace(/%3B/gi,";")}function yd(n){return mi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kl(n){return decodeURIComponent(n)}function Zl(n){return Kl(n.replace(/\+/g,"%20"))}function Ua(n){return`${yd(n.path)}${function yg(n){return Object.keys(n).map(e=>`;${yd(e)}=${yd(n[e])}`).join("")}(n.parameters)}`}const Uy=/^[^\/()?;=#]+/;function Es(n){const e=n.match(Uy);return e?e[0]:""}const Yl=/^[^=?&#]+/,$y=/^[^&#]+/;class _d{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new xe(e,t)),r}parseSegment(){const e=Es(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new et(Kl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Es(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Es(this.remaining);i&&(r=i,this.capture(r))}e[Kl(t)]=Kl(r)}parseQueryParam(e){const t=function jy(n){const e=n.match(Yl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function _g(n){const e=n.match($y);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Zl(t),u=Zl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Es(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new xe([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Hy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rf(e,this._root).map(t=>t.value)}}function nf(n,e){if(n===e.value)return e;for(const t of e.children){const r=nf(n,t);if(r)return r}return null}function rf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rf(n,t);if(r.length)return r.unshift(e),r}return[]}class Oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vd extends Hy{constructor(e,t){super(e),this.snapshot=t,wd(this,e)}toString(){return this.snapshot.toString()}}function ja(n,e){const t=function Gy(n,e){const c=new Fu([],{},{},"",{},Lt,e,null,n.root,-1,{});return new sf("",new Oo(c,[]))}(n,e),r=new ni([new et("",{})]),i=new ni({}),u=new ni({}),c=new ni({}),p=new ni(""),y=new ca(r,i,c,p,u,Lt,e,t.root);return y.snapshot=t.root,new vd(new Oo(y,[]),t)}class ca{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ft.U)(e=>Xn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ft.U)(e=>Xn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ed(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fu{constructor(e,t,r,i,u,c,p,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sf extends Hy{constructor(e,t){super(t),this.url=e,wd(this,t)}toString(){return bd(this._root)}}function wd(n,e){e.value._routerState=n,e.children.forEach(t=>wd(n,t))}function bd(n){const e=n.children.length>0?` { ${n.children.map(bd).join(", ")} } `:"";return`${n.value}${e}`}function Dd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zi(e.params,t.params)||n.params.next(t.params),function Ou(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function of(n,e){const t=Zi(n.params,e.params)&&function Tt(n,e){return kt(n,e)&&n.every((t,r)=>Zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||of(n.parent,e.parent))}function Ql(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function af(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ql(n,r,i);return Ql(n,r)})}(n,e,t);return new Oo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ql(n,p)),c}}const r=function Wy(n){return new ca(new ni(n.url),new ni(n.params),new ni(n.queryParams),new ni(n.fragment),new ni(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ql(n,u));return new Oo(r,i)}}function da(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lu(n){return"object"==typeof n&&null!=n&&n.outlets}function vg(n,e,t,r,i){let u={};if(r&&er(r,(p,y)=>{u[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Me(t,u,i);const c=uf(n,e,t);return new Me(c,u,i)}function uf(n,e,t){const r={};return er(n.children,(i,u)=>{r[u]=i===e?t:uf(i,e,t)}),new xe(n.segments,r)}class Ky{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&da(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Lu);if(i&&i!==md(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jy(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return oo(n,e,t);const r=function yE(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Lu(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!ki(y,b,c))return u;r+=2}else{if(!ki(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new xe(n.segments.slice(r.pathIndex),n.children),oo(u,0,i)}return r.match&&0===i.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?cf(n,e,t):r.match?oo(n,0,i):cf(n,e,t)}function oo(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function Qy(n){return Lu(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return er(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Jy(n.children[c],e,u))}),er(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new xe(n.segments,i)}}function cf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Lu(u)){const y=Vu(u.outlets);return new xe(r,y)}if(0===i&&da(t[0])){r.push(new et(n.segments[e].path,df(t[0]))),i++;continue}const c=Lu(u)?u.outlets[Lt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&da(p)?(r.push(new et(c,df(p))),i+=2):(r.push(new et(c,{})),i++)}return new xe(r,{})}function Vu(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cf(new xe([],{}),0,t))}),e}function df(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function ki(n,e,t){return n==t.path&&Zi(e,t.parameters)}class wg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ko(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),er(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ko(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ko(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ko(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Hl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ki(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Dd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Dd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function Cd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Id{constructor(e,t){this.routes=e,this.module=t}}function $a(n){return"function"==typeof n}function Bu(n){return n instanceof Me}const Xl=Symbol("INITIAL_VALUE");function ha(){return Bn(n=>function ra(...n){const e=(0,Vn.yG)(n),t=(0,Vn.jO)(n),{args:r,keys:i}=Si(n);if(0===r.length)return(0,Ln.D)([],e);const u=new Vr.y(function hi(n,e,t=di.y){return r=>{Xs(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Xs(e,()=>{const b=(0,Ln.D)(n[y],e);let S=!1;b.subscribe((0,Kn.x)(r,M=>{u[y]=M,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>To(i,c):di.y));return t?u.pipe(Ll(t)):u}(n.map(e=>e.pipe((0,So.q)(1),Ri(Xl)))).pipe(xr((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Xl?i:(u===Xl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Bu(u)?i:u),e)},Xl),zi(e=>e!==Xl),(0,Ft.U)(e=>Bu(e)?e:!0===e),(0,So.q)(1)))}class Xy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ec,this.attachRef=null}}class ec{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Xy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let tc=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new gf(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ec),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class gf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ca?this.route:e===ec?this.childContexts:this.parent.get(e,t)}}let mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[tc],encapsulation:2}),n})();function nc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Td(r,yf(e,r))}}function Td(n,e){n.children&&nc(n.children,e)}function yf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function _f(n){const e=n.children&&n.children.map(_f),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=mf),t}function rn(n){return n.outlet||Lt}function vf(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const Dg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Dg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Mo)(t,n,e);if(!u)return Object.assign({},Dg);const c={};er(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function rc(n,e,t,r,i="corrected"){if(t.length>0&&function t_(n,e,t){return t.some(r=>Sd(n,e,r)&&rn(r)!==Lt)}(n,t,r)){const c=new xe(e,function Ad(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Lt){const c=new xe([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[rn(u)]=c}return i}(n,e,r,new xe(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Cg(n,e,t){return t.some(r=>Sd(n,e,r))}(n,t,r)){const c=new xe(n.segments,function e_(n,e,t,r,i,u){const c={};for(const p of r)if(Sd(n,t,p)&&!i[rn(p)]){const y=new xe([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[rn(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Sd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function n_(n,e,t,r){return!!(rn(n)===r||r!==Lt&&Sd(e,t,n))&&("**"===n.path||Uu(e,n,t).matched)}function r_(n,e,t){return 0===e.length&&!n.children[t]}class fa{constructor(e){this.segmentGroup=e||null}}class Nr{constructor(e){this.urlTree=e}}function Po(n){return Gi(new fa(n))}function ic(n){return Gi(new Nr(n))}class wf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=rc(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Lt).pipe((0,Ft.U)(u=>this.createUrlTree(Ga(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wi(u=>{if(u instanceof Nr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof fa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lt).pipe((0,Ft.U)(i=>this.createUrlTree(Ga(i),e.queryParams,e.fragment))).pipe(Wi(i=>{throw i instanceof fa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xe([],{[Lt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ft.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Ln.D)(i).pipe(to(u=>{const c=r.children[u],p=vf(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Ft.U)(y=>({segment:y,outlet:u})))}),xr((u,c)=>(u[c.outlet]=c.segment,u),{}),function pg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zi((i,u)=>n(i,u,r)):di.y,pd(1),t?fg(e):xn(()=>new eo))}())}expandSegment(e,t,r,i,u,c){return(0,Ln.D)(r).pipe(to(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Wi(b=>{if(b instanceof fa)return _t(null);throw b}))),no(p=>!!p),Wi((p,y)=>{if(p instanceof eo||"EmptyError"===p.name)return r_(t,i,u)?_t(new xe([],{})):Po(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return n_(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Po(t):Po(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ic(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const p=new xe(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=Uu(t,i,u);if(!p)return Po(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?ic(M):this.lineralizeSegments(i,M).pipe((0,Cn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?_t(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ft.U)(M=>(r._loadedConfig=M,new xe(i,{})))):_t(new xe(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=Uu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Cn.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:G}=rc(t,p,y,F),ne=new xe(B.segments,B.children);if(0===G.length&&ne.hasChildren())return this.expandChildren(M,F,ne).pipe((0,Ft.U)(Ye=>new xe(p,Ye)));if(0===F.length&&0===G.length)return _t(new xe(p,{}));const be=rn(r)===u;return this.expandSegment(M,ne,F,G,be?Lt:u,!0).pipe((0,Ft.U)(Ve=>new xe(p.concat(Ve.segments),Ve.children)))})):Po(t)}getChildConfig(e,t,r){return t.children?_t(new Id(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?_t(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ft.U)(u=>(t._loadedConfig=u,u))):function jr(n){return Gi(io(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):_t(new Id([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?_t(i.map(c=>{const p=e.get(c);let y;if(function hf(n){return n&&$a(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!$a(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return gi(y)})).pipe(ha(),(0,ri.b)(c=>{if(!Bu(c))return;const p=io(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Ft.U)(c=>!0===c)):_t(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return _t(r);if(i.numberOfChildren>1||!i.children[Lt])return Gi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return er(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new xe(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ga(n){const e={};for(const r of Object.keys(n.children)){const u=Ga(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Pi(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class Ig{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qa{constructor(e,t){this.component=e,this.route=t}}function Df(n,e,t){const r=n._root;return yi(r,e?e._root:null,t,[r.value])}function sc(n,e,t){const r=function i_(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=ko(e);return n.children.forEach(c=>{(function Ag(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function s_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kt(n.url,e.url)||!Zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!of(n,e)||!Zi(n.queryParams,e.queryParams);default:return!of(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Ig(r)):(u.data=c.data,u._resolvedData=c._resolvedData),yi(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new qa(p.outlet.component,c))}else c&&za(e,p,i),i.canActivateChecks.push(new Ig(r)),yi(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),er(u,(c,p)=>za(c,t.getContext(p),i)),i}function za(n,e,t){const r=ko(n),i=n.value;er(r,(u,c)=>{za(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new qa(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Tf{}function Af(n){return new Vr.y(e=>e.error(n))}class Sf{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=rc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new Fu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Oo(r,t),u=new sf(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=qy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=vf(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=xg(r);return function l_(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return r_(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!n_(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const B=r.length>0?md(r).parameters:{};u=new Fu(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+r.length,T(e))}else{const B=Uu(t,e,r);if(!B.matched)return null;c=B.consumedSegments,p=B.remainingSegments,u=new Fu(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+c.length,T(e))}const y=function c_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=rc(t,c,p,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(y,b);return null===B?null:[new Oo(u,B)]}if(0===y.length&&0===S.length)return[new Oo(u,[])];const M=rn(e)===i,F=this.processSegment(y,b,S,M?Lt:i);return null===F?null:[new Oo(u,F)]}}function Mg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xg(n){const e=[],t=new Set;for(const r of n){if(!Mg(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xg(r.children);e.push(new Oo(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function nt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ut(n){return Bn(e=>{const t=n(e);return t?(0,Ln.D)(t).pipe((0,Ft.U)(()=>e)):_t(e)})}class ac extends class Ji{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ju=new h.OlP("ROUTES");class $u{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ft.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Id(Yi(c.injector.get(ju,void 0,h.XFs.Self|h.XFs.Optional)).map(_f),c)}),Wi(u=>{throw t._loader$=void 0,u}));return t._loader$=new fd(i,()=>new lr.x).pipe(xi()),t._loader$}loadModuleFactory(e){return gi(e()).pipe((0,Cn.z)(t=>t instanceof h.YKP?_t(t):(0,Ln.D)(this.compiler.compileModuleAsync(t))))}}class d_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function pa(n){throw n}function Md(n,e,t){return e.parse("/")}function xd(n,e){return _t(null)}const xf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _i=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lr.x,this.errorHandler=pa,this.malformedUriErrorHandler=Md,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xd,afterPreactivation:xd},this.urlHandlingStrategy=new d_,this.routeReuseStrategy=new ac,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Wl(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $u(c,p,F=>this.triggerEvent(new $l(F)),F=>this.triggerEvent(new vs(F))),this.routerState=ja(this.currentUrlTree,this.rootComponentType),this.transitions=new ni({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zi(i=>0!==i.id),(0,Ft.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Bn(i=>{let u=!1,c=!1;return _t(i).pipe((0,ri.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bn(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Rg(p.source)&&(this.browserUrlTree=p.extractedUrl),_t(p).pipe(Bn(M=>{const F=this.transitions.getValue();return r.next(new _s(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?ia.E:Promise.resolve(M)}),function bf(n,e,t,r){return Bn(i=>function Ha(n,e,t,r,i){return new wf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ft.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ri.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function N(n,e,t,r,i){return(0,Cn.z)(u=>function u_(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Sf(n,e,t,r,i,u).recognize();return null===c?Af(new Tf):_t(c)}catch(c){return Af(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Ft.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ri.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new aa(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:G,restoredState:ne,extras:be}=p,Qe=new _s(F,this.serializeUrl(B),G,ne);r.next(Qe);const Ve=ja(B,this.rootComponentType).snapshot;return _t(Object.assign(Object.assign({},p),{targetSnapshot:Ve,urlAfterRedirects:B,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),ia.E}),ut(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,ri.b)(p=>{const y=new mg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,Ft.U)(p=>Object.assign(Object.assign({},p),{guards:Df(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function o_(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?_t(Object.assign(Object.assign({},t),{guardsResult:!0})):function Sg(n,e,t,r){return(0,Ln.D)(n).pipe((0,Cn.z)(i=>function oc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?_t(u.map(p=>{const y=sc(p,e,i);let b;if(function _E(n){return n&&$a(n.canDeactivate)}(y))b=gi(y.canDeactivate(n,e,t,r));else{if(!$a(y))throw new Error("Invalid CanDeactivate guard");b=gi(y(n,e,t,r))}return b.pipe(no())})).pipe(ha()):_t(!0)}(i.component,i.route,t,e,r)),no(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cn.z)(p=>p&&function bg(n){return"boolean"==typeof n}(p)?function Or(n,e,t,r){return(0,Ln.D)(e).pipe(to(i=>hd(function If(n,e){return null!==n&&e&&e(new Ni(n)),_t(!0)}(i.route.parent,r),function Cf(n,e){return null!==n&&e&&e(new Ba(n)),_t(!0)}(i.route,r),function Fo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Tg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Mi(()=>_t(c.guards.map(y=>{const b=sc(y,c.node,t);let S;if(function pf(n){return n&&$a(n.canActivateChild)}(b))S=gi(b.canActivateChild(r,n));else{if(!$a(b))throw new Error("Invalid CanActivateChild guard");S=gi(b(r,n))}return S.pipe(no())})).pipe(ha())));return _t(u).pipe(ha())}(n,i.path,t),function a_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _t(!0);const i=r.map(u=>Mi(()=>{const c=sc(u,e,t);let p;if(function ff(n){return n&&$a(n.canActivate)}(c))p=gi(c.canActivate(e,n));else{if(!$a(c))throw new Error("Invalid CanActivate guard");p=gi(c(e,n))}return p.pipe(no())}));return _t(i).pipe(ha())}(n,i.route,t))),no(i=>!0!==i,!0))}(r,u,n,e):_t(p)),(0,Ft.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ri.b)(p=>{if(Bu(p.guardsResult)){const b=io(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new jl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),zi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),ut(p=>{if(p.guards.canActivateChecks.length)return _t(p).pipe((0,ri.b)(y=>{const b=new Rr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Bn(y=>{let b=!1;return _t(y).pipe(function z(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return _t(t);let u=0;return(0,Ln.D)(i).pipe(to(c=>function oe(n,e,t,r){return function je(n,e,t,r){const i=nt(n);if(0===i.length)return _t({});const u={};return(0,Ln.D)(i).pipe((0,Cn.z)(c=>function Dt(n,e,t,r){const i=sc(n,e,r);return gi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ri.b)(p=>{u[c]=p}))),pd(1),(0,Cn.z)(()=>nt(u).length===i.length?_t(u):ia.E))}(n._resolve,n,e,r).pipe((0,Ft.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),qy(n,t).resolve),null)))}(c.route,r,n,e)),(0,ri.b)(()=>u++),pd(1),(0,Cn.z)(c=>u===i.length?_t(t):ia.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ri.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ri.b)(y=>{const b=new pi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),ut(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Ft.U)(p=>{const y=function zy(n,e,t){const r=Ql(n,e._root,t?t._root:void 0);return new vd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ri.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Ft.U)(r=>(new wg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ri.b)({next(){u=!0},complete(){u=!0}}),function gg(n){return(0,Br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Wi(p=>{if(c=!0,function gd(n){return n&&n[zl]}(p)){const y=Bu(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new In(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Rg(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Ul(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return ia.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nc(t),this.config=t.map(_f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function so(n,e,t,r,i){if(0===t.length)return vg(e.root,e.root,e.root,r,i);const u=function Zy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ky(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return er(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Ky(t,e,r)}(t);if(u.toRoot())return vg(e.root,e.root,new xe([],{}),r,i);const c=function Eg(n,e,t){if(n.isAbsolute)return new lf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new lf(u,u===e.root,0)}const r=da(n.commands[0])?0:1;return function Yy(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new lf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?oo(c.segmentGroup,c.index,u.commands):Jy(c.segmentGroup,c.index,u.commands);return vg(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Rf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},xf):!1===r?Object.assign({},Rd):r,Bu(t))return Pu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Pu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Nu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((G,ne)=>{b=G,S=ne});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new In(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Rg(n){return"imperative"!==n}let Ng=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new lr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Nd(this.skipLocationChange),replaceUrl:Nd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Nd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_i),h.Y36(ca),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})(),Og=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new lr.x,this.subscription=t.events.subscribe(u=>{u instanceof Nu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:Nd(this.skipLocationChange),replaceUrl:Nd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Nd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_i),h.Y36(ca),h.Y36(pe))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Nd(n){return""===n||!!n}class f_{}class EE{preload(e,t){return _t(null)}}let wE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new $u(i,r,y=>t.triggerEvent(new $l(y)),y=>t.triggerEvent(new vs(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(zi(t=>t instanceof Nu),to(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Ln.D)(i).pipe((0,qi.J)(),(0,Ft.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?_t(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_i),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(f_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),kg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ws=new h.OlP("ROUTER_CONFIGURATION"),g_=new h.OlP("ROUTER_FORROOT_GUARD"),bE=[ve,{provide:Zn,useClass:Rn},{provide:_i,useFactory:function y_(n,e,t,r,i,u,c={},p,y){const b=new _i(null,n,e,t,r,i,Yi(u));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function IE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[Zn,ec,ve,h.zs3,h.Sil,ju,ws,[class Mf{},new h.FiY],[class Nn{},new h.FiY]]},ec,{provide:ca,useFactory:function Pg(n){return n.routerState.root},deps:[_i]},wE,EE,class p_{preload(e,t){return t().pipe(Wi(()=>_t(null)))}},{provide:ws,useValue:{enableTracing:!1}}];function $C(){return new h.PXZ("Router",_i)}let ao=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bE,m_(t),{provide:g_,useFactory:CE,deps:[[_i,new h.FiY,new h.tp0]]},{provide:ws,useValue:r||{}},{provide:pe,useFactory:DE,deps:[fe,[new h.tBr(rt),new h.FiY],ws]},{provide:kg,useFactory:HC,deps:[_i,vu,ws]},{provide:f_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:EE},{provide:h.PXZ,multi:!0,useFactory:$C},[Od,{provide:h.ip1,multi:!0,useFactory:TE,deps:[Od]},{provide:v_,useFactory:__,deps:[Od]},{provide:h.tb,multi:!0,useExisting:v_}]]}}static forChild(t){return{ngModule:n,providers:[m_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g_,8),h.LFG(_i,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function HC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new kg(n,e,t)}function DE(n,e,t={}){return t.useHash?new Ie(n,e):new Je(n,e)}function CE(n){return"guarded"}function m_(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:ju,multi:!0,useValue:n}]}let Od=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(_i),c=this.injector.get(ws);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?_t(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ws),i=this.injector.get(wE),u=this.injector.get(kg),c=this.injector.get(_i),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function TE(n){return n.appInitializer.bind(n)}function __(n){return n.bootstrapListener.bind(n)}const v_=new h.OlP("Router Initializer"),AE=new h.OlP("GETS_ALL_DATE_DTO");let Lg=(()=>{class n{constructor(t){this._getsAllDateDto=t,this.date$=this._getsAllDateDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(AE))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-today-date"]],decls:7,vars:6,consts:[[1,"d-inline"],[1,"d-inline","m-lg-3","m-md-3","m-sm-3","m-xl-3"],[1,"mb-5"]],template:function(t,r){if(1&t&&(h.TgZ(0,"h1",0),h._uU(1,"Today"),h.qZA(),h.TgZ(2,"p",1),h._uU(3),h.ALo(4,"date"),h.ALo(5,"async"),h.qZA(),h._UZ(6,"hr",2)),2&t){let i;h.xp6(3),h.Oqu(h.xi3(4,1,null==(i=h.lcZ(5,4,r.date$))?null:i.dateTime,"E d LLL"))}},pipes:[Yh,yo],encapsulation:2,changeDetection:0}),n})();const GC=function(){return["/add-task"]};let SE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-home-page-add-task"]],decls:2,vars:2,consts:[["type","button",1,"btn","btn-secondary",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"button",0),h._uU(1,"Add task"),h.qZA()),2&t&&h.Q6J("routerLink",h.DdM(1,GC))},directives:[Ng],encapsulation:2,changeDetection:0}),n})();const w_=new h.OlP("GETS_ALL_PICTURE_DTO"),Vg=function(n){return[n]};function ME(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3),h._UZ(2,"img",4),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.Q6J("src",h.VKq(2,Vg,t.imageUrl),h.LSH)("alt",h.VKq(4,Vg,t.name))}}let FS=(()=>{class n{constructor(t){this._getsAllPictureDto=t,this.pictures$=this._getsAllPictureDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(w_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-three-pictures-in-arow"]],decls:3,vars:3,consts:[[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3"],["class","col mb-3",4,"ngFor","ngForOf"],[1,"col","mb-3"],[1,"card","h-100"],[1,"card-img-top","h-100",3,"src","alt"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,ME,3,6,"div",1),h.ALo(2,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,r.pictures$)))},directives:[ur],pipes:[yo],encapsulation:2,changeDetection:0}),n})(),xE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home-page"]],decls:16,vars:0,consts:[[1,"container","mt-3","mb-3"],[1,"container"],[1,"row","justify-content-md-center"],[1,"col-md-auto"],[1,"container","mt-5"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"lib-today-date"),h.qZA(),h.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),h._uU(6,"Get a clear view of the day ahead"),h.qZA(),h.TgZ(7,"div",2)(8,"div",3)(9,"p"),h._uU(10,"All your tasks that are due today will show up here."),h.qZA(),h.TgZ(11,"div",2)(12,"div",3),h._UZ(13,"lib-home-page-add-task"),h.qZA()()()()()()(),h.TgZ(14,"div",4),h._UZ(15,"lib-three-pictures-in-arow"),h.qZA())},directives:[Lg,SE,FS],encapsulation:2,changeDetection:0}),n})(),b_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn]]}),n})(),RE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn]]}),n})(),NE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,ao]]}),n})();var qC=k(4986),bn=k(5813);function D_(){return(0,Br.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function zC(n,e){return n===e}var it,Lo=k(2011),WC=(k(4087),k(3942)),_e=k(5861),uc=k(9681),Bg=k(4859),Hu=k(1877),He=k(2090),kE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ga={},kd=kd||{},vt=kE||self;function Nf(){}function C_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Of="closure_uid_"+(1e9*Math.random()>>>0),PE=0;function I_(n,e,t){return n.call.apply(n.bind,arguments)}function VS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function $r(n,e,t){return($r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I_:VS).apply(null,arguments)}function T_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Vo(){this.s=this.s,this.o=this.o}var S_={};Vo.prototype.s=!1,Vo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Wa(n){return Object.prototype.hasOwnProperty.call(n,Of)&&n[Of]||(n[Of]=++PE)}(this);delete S_[n]}},Vo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ug=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},KC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function FE(n){return Array.prototype.concat.apply([],arguments)}function M_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function jg(n){return/^[\s\xa0]*$/.test(n)}var es,x_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xi(n,e){return-1!=n.indexOf(e)}function R_(n,e){return n<e?-1:n>e?1:0}e:{var N_=vt.navigator;if(N_){var O_=N_.userAgent;if(O_){es=O_;break e}}es=""}function k_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $g(n){const e={};for(const t in n)e[t]=n[t];return e}var YC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<YC.length;u++)t=YC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function LE(n){return LE[" "](n),n}LE[" "]=Nf;var Pd,n,US=Xi(es,"Opera"),kf=Xi(es,"Trident")||Xi(es,"MSIE"),JC=Xi(es,"Edge"),VE=JC||kf,XC=Xi(es,"Gecko")&&!(Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge"))&&!(Xi(es,"Trident")||Xi(es,"MSIE"))&&!Xi(es,"Edge"),jS=Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge");function Ka(){var n=vt.document;return n?n.documentMode:void 0}e:{var P_="",Hg=(n=es,XC?/rv:([^\);]+)(\)|;)/.exec(n):JC?/Edge\/([\d\.]+)/.exec(n):kf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jS?/WebKit\/(\S+)/.exec(n):US?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hg&&(P_=Hg?Hg[1]:""),kf){var Pf=Ka();if(null!=Pf&&Pf>parseFloat(P_)){Pd=String(Pf);break e}}Pd=P_}var BE={};var UE=vt.document&&kf&&(Ka()||parseInt(Pd,10))||void 0,eI=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",Nf,e),vt.removeEventListener("test",Nf,e)}catch(t){}return n}();function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ff(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XC){e:{try{LE(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ff.Z.h.call(this)}}Hr.prototype.h=function(){this.defaultPrevented=!0},vr(Ff,Hr);var jE={2:"touch",3:"pen",4:"mouse"};Ff.prototype.h=function(){Ff.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lf="closure_listenable_"+(1e6*Math.random()|0),tI=0;function Vf(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++tI,this.ca=this.fa=!1}function Ya(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Fd(n){this.src=n,this.g={},this.h=0}function Gu(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Ug(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Ya(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cc(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Fd.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=cc(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Vf(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var qu="closure_lm_"+(1e6*Math.random()|0),V_={};function B_(n,e,t,r,i){if(r&&r.once)return Gg(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)B_(n,e[u],t,r,i);return null}return t=zg(t),n&&n[Lf]?n.N(e,t,lc(r)?!!r.capture:!!r,i):U_(n,e,t,!1,r,i)}function U_(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=lc(i)?!!i.capture:!!i,p=GE(n);if(p||(n[qu]=p=new Fd(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function j_(){var e=HE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eI||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($E(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Gg(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Gg(n,e[u],t,r,i);return null}return t=zg(t),n&&n[Lf]?n.O(e,t,lc(r)?!!r.capture:!!r,i):U_(n,e,t,!0,r,i)}function $_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)$_(n,e[u],t,r,i);else r=lc(r)?!!r.capture:!!r,t=zg(t),n&&n[Lf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cc(u=n.g[e],t,r,i))&&(Ya(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=GE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cc(e,t,r,i)),(t=-1<n?e[n]:null)&&Ld(t))}function Ld(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Lf])Gu(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($E(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=GE(e))?(Gu(t,n),0==t.h&&(t.src=null,e[qu]=null)):Ya(n)}}}function $E(n){return n in V_?V_[n]:V_[n]="on"+n}function HE(n,e){if(n.ca)n=!0;else{e=new Ff(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ld(n),n=t.call(r,e)}return n}function GE(n){return(n=n[qu])instanceof Fd?n:null}var qg="__closure_events_fn_"+(1e9*Math.random()>>>0);function zg(n){return"function"==typeof n?n:(n[qg]||(n[qg]=function(e){return n.handleEvent(e)}),n[qg])}function Gr(){Vo.call(this),this.i=new Fd(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;QC(e=new Hr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Wg(c,r,!0,e)&&i}if(i=Wg(c=e.g=n,r,!0,e)&&i,i=Wg(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Wg(c=e.g=t[u],r,!1,e)&&i}function Wg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&Gu(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}vr(Gr,Vo),Gr.prototype[Lf]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){$_(this,n,e,t,r)},Gr.prototype.M=function(){if(Gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ya(t[r]);delete n.g[e],n.h--}}this.I=null},Gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var H_=vt.JSON.stringify;function bs(){var n=G_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zE,qE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new $S,n=>n.reset());class $S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function HS(n){vt.setTimeout(()=>{throw n},0)}function Kg(n,e){zE||function rI(){var n=vt.Promise.resolve(void 0);zE=function(){n.then(iI)}}(),Bf||(zE(),Bf=!0),G_.add(n,e)}var Bf=!1,G_=new class nI{constructor(){this.h=this.g=null}add(e,t){const r=qE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iI(){for(var n;n=bs();){try{n.h.call(n.g)}catch(t){HS(t)}var e=qE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Bf=!1}function Zg(n,e){Gr.call(this),this.h=n||1,this.g=e||vt,this.j=$r(this.kb,this),this.l=Date.now()}function q_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yg(n,e,t){if("function"==typeof n)t&&(n=$r(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$r(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function WE(n){n.g=Yg(()=>{n.g=null,n.i&&(n.i=!1,WE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vr(Zg,Gr),(it=Zg.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qr(this,"tick"),this.da&&(q_(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Zg.Z.M.call(this),q_(this),delete this.g};class KE extends Vo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:WE(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uf(n){Vo.call(this),this.h=n,this.g={}}vr(Uf,Vo);var ZE=[];function z_(n,e,t,r){Array.isArray(t)||(t&&(ZE[0]=t.toString()),t=ZE);for(var i=0;i<t.length;i++){var u=B_(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function W_(n){k_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ld(e)},n),n.g={}}function Qg(){this.g=!0}function Vd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function GS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return H_(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Uf.prototype.M=function(){Uf.Z.M.call(this),W_(this)},Uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qg.prototype.Aa=function(){this.g=!1},Qg.prototype.info=function(){};var zu={},YE=null;function Jg(){return YE=YE||new Gr}function QE(n){Hr.call(this,zu.Ma,n)}function dc(n){const e=Jg();qr(e,new QE(e,n))}function JE(n,e){Hr.call(this,zu.STAT_EVENT,n),this.stat=e}function Fi(n){const e=Jg();qr(e,new JE(e,n))}function jf(n,e){Hr.call(this,zu.Na,n),this.size=e}function hc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}zu.Ma="serverreachability",vr(QE,Hr),zu.STAT_EVENT="statevent",vr(JE,Hr),zu.Na="timingevent",vr(jf,Hr);var Xg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},em={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $f(){}function XE(){}$f.prototype.h=null;var Y_,Hf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Gf(){Hr.call(this,"d")}function ew(){Hr.call(this,"c")}function qf(){}function Bd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Uf(this),this.P=tw,this.W=new Zg(n=VE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Q_}function Q_(){this.i=null,this.g="",this.h=!1}vr(Gf,Hr),vr(ew,Hr),vr(qf,$f),qf.prototype.g=function(){return new XMLHttpRequest},qf.prototype.i=function(){return{}},Y_=new qf;var tw=45e3,tm={},uo={};function Ud(n,e,t){n.K=1,n.v=am(ya(e)),n.s=t,n.U=!0,nw(n,null)}function nw(n,e){n.F=Date.now(),jd(n),n.A=ya(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),cw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Q_,n.g=cv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new KE($r(n.Ia,n,n.g),n.O)),z_(n.V,n.g,"readystatechange",n.gb),e=n.H?$g(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),dc(1),function ma(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function oI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=J_(n,t),i==uo){4==e&&(n.o=4,Fi(14),r=!1),Vd(n.j,n.m,null,"[Incomplete Response]");break}if(i==tm){n.o=4,Fi(15),Vd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vd(n.j,n.m,i,null),rm(n,i)}rw(n)&&i!=uo&&i!=tm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),pm(e),e.L=!0,Fi(11))):(Vd(n.j,n.m,t,"[Invalid Chunked Response]"),Qa(n),zf(n))}function J_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uo:(t=Number(e.substring(t,r)),isNaN(t)?tm:(r+=1)+t>e.length?uo:(e=e.substr(r,t),n.C=r+t,e))}function jd(n){n.Y=Date.now()+n.P,nm(n,n.P)}function nm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hc($r(n.eb,n),e)}function Wu(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function zf(n){0==n.l.G||n.I||av(n.l,n)}function Qa(n){Wu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,q_(n.W),W_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function rm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dw(t.i,n)))if(t.I=n.N,!n.J&&dw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=hc($r(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Qf(t),eu(t)}fm(t),Fi(18)}if(1>=nv(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Yu(t,11)}else if((n.J||t.g==n)&&Qf(t),!jg(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(Xi(G,"spdy")||Xi(G,"quic")||Xi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Ds(u,u.h),u.h=null))}if(r.D){const ne=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,Un(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=yw(r,r.H?r.la:null,r.W),c.J){fI(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(Wu(p),jd(p)),r.g=c}else sv(r);0<t.l.length&&tu(t)}else"stop"!=b[0]&&"close"!=b[0]||Yu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Yu(t,7):Ku(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}dc(4)}catch(b){}}function im(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(C_(n)||"string"==typeof n)KC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(C_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function iw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(C_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function $d(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof $d)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Wf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];fc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)fc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function fc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=Bd.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==Cs(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const S=Cs(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||VE||this.g&&(this.h.h||this.g.ga()||ii(this.g)))){this.I||4!=S||7==e||dc(8==e||0>=M?3:2),Wu(this);var t=this.g.ba();this.N=t;t:if(rw(this)){var r=ii(this.g);n="";var i=r.length,u=4==Cs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qa(this),zf(this);var c="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function K_(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jg(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Fi(12),Qa(this),zf(this);break e}Vd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rm(this,t)}this.U?(oI(this,S,c),VE&&this.i&&3==S&&(z_(this.V,this.W,"tick",this.fb),this.W.start())):(Vd(this.j,this.m,c,null),rm(this,c)),4==S&&Qa(this),this.i&&!this.I&&(4==S?av(this.l,this):(this.i=!1,jd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),Qa(this),zf(this)}}}catch(S){}},it.fb=function(){if(this.g){var n=Cs(this.g),e=this.g.ga();this.C<e.length&&(Wu(this),oI(this,n,e),this.i&&4!=n&&jd(this))}},it.cancel=function(){this.I=!0,Qa(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function sI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dc(3),Fi(17)),Qa(this),this.o=2,zf(this)):nm(this,this.Y-n)},(it=$d.prototype).R=function(){Wf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return Wf(this),this.g.concat()},it.get=function(n,e){return fc(this.h,n)?this.h[n]:e},it.set=function(n,e){fc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var sw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof lo){this.g=void 0!==e?e:n.g,sm(this,n.j),this.s=n.s,om(this,n.i),Ja(this,n.m),this.l=n.l,e=n.h;var t=new Kf;t.i=e.i,e.g&&(t.g=new $d(e.g),t.h=e.h),aw(this,t),this.o=n.o}else n&&(t=String(n).match(sw))?(this.g=!!e,sm(this,t[1]||"",!0),this.s=pc(t[2]||""),om(this,t[3]||"",!0),Ja(this,t[4]),this.l=pc(t[5]||"",!0),aw(this,t[6]||"",!0),this.o=pc(t[7]||"")):(this.g=!!e,this.h=new Kf(null,this.g))}function ya(n){return new lo(n)}function sm(n,e,t){n.j=t?pc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function om(n,e,t){n.i=t?pc(e,!0):e}function Ja(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aw(n,e,t){e instanceof Kf?(n.h=e,function qS(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(dI(this,r),cw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Hd(e,lI)),n.h=new Kf(e,n.g))}function Un(n,e,t){n.h.set(e,t)}function am(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hd(e,X_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hd(e,X_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hd(t,"/"==t.charAt(0)?uI:lw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hd(t,cI)),n.join("")};var X_=/[#\/\?@]/g,lw=/[#\?:]/g,uI=/[#\?]/g,lI=/[#\?@]/g,cI=/#/g;function Kf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new $d,n.h=0,n.i&&function ow(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function dI(n,e){Xa(n),e=Gd(n,e),fc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,fc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Wf(n)))}function ev(n,e){return Xa(n),e=Gd(n,e),fc(n.g.h,e)}function cw(n,e,t){dI(n,e),0<t.length&&(n.i=null,n.g.set(Gd(n,e),M_(t)),n.h+=t.length)}function Gd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function um(n){this.l=n||hI,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Kf.prototype).add=function(n,e){Xa(this),this.i=null,n=Gd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Xa(this),this.g.forEach(function(t,r){KC(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Xa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},it.R=function(n){Xa(this);var e=[];if("string"==typeof n)ev(this,n)&&(e=FE(e,this.g.get(Gd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=FE(e,n[t])}return e},it.set=function(n,e){return Xa(this),this.i=null,ev(this,n=Gd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var hI=10;function tv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nv(n){return n.h?1:n.g?n.g.size:0}function dw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ds(n,e){n.g?n.g.add(e):n.h=e}function fI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return M_(n.i)}function lm(){}function hw(){this.g=new lm}function fw(n,e,t){const r=t||"";try{im(n,function(i,u){let c=i;lc(i)&&(c=H_(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function qd(n){this.l=n.$b||null,this.j=n.ib||!1}function zd(n,e){Gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=iv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}um.prototype.cancel=function(){if(this.i=pI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lm.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},lm.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},vr(qd,$f),qd.prototype.g=function(){return new zd(this.l,this.j)},qd.prototype.i=function(n){return function(){return n}}({}),vr(zd,Gr);var iv=0;function cm(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yf(n)}function Yf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=zd.prototype).open=function(n,e){if(this.readyState!=iv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Yf(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zf(this)),this.readyState=iv},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yf(this)),this.g&&(this.readyState=3,Yf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cm(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zf(this):Yf(this),3==this.readyState&&cm(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,Zf(this))},it.Ta=function(n){this.g&&(this.response=n,Zf(this))},it.ha=function(){this.g&&Zf(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mI=vt.JSON.parse;function Er(n){Gr.call(this),this.headers=new $d,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pw,this.K=this.L=!1}vr(Er,Gr);var pw="",yI=/^https?$/i,dm=["POST","PUT"];function _I(n){return"content-type"==n.toLowerCase()}function Kd(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gw(n),Zd(n)}function gw(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function mw(n){if(n.h&&void 0!==kd&&(!n.C[1]||4!=Cs(n)||2!=n.ba()))if(n.v&&4==Cs(n))Yg(n.Fa,0,n);else if(qr(n,"readystatechange"),4==Cs(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(sw)[1]||null;if(!i&&vt.self&&vt.self.location){var u=vt.self.location.protocol;i=u.substr(0,u.length-1)}r=!yI.test(i?i.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var c=2<Cs(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",gw(n)}}finally{Zd(n)}}}function Zd(n,e){if(n.g){Uo(n);const t=n.g,r=n.C[0]?Nf:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Uo(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Cs(n){return n.g?n.g.readyState:0}function ii(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case pw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Yd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function gc(n){let e="";return k_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function vi(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hm(n){this.za=0,this.l=[],this.h=new Qg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vi("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vi("baseRetryDelayMs",5e3,n),this.$a=vi("retryDelaySeedMs",1e4,n),this.Ya=vi("forwardChannelMaxRetries",2,n),this.ra=vi("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new um(n&&n.concurrentRequestLimit),this.Ca=new hw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ku(n){if(mc(n),3==n.G){var e=n.V++,t=ya(n.F);Un(t,"SID",n.J),Un(t,"RID",e),Un(t,"TYPE","terminate"),_a(n,t),(e=new Bd(n,n.h,e,void 0)).K=2,e.v=am(ya(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jd(e)}lv(n)}function eu(n){n.g&&(pm(n),n.g.cancel(),n.g=null)}function mc(n){eu(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Qf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function Zu(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&tu(n)}function tu(n){tv(n.i)||n.m||(n.m=!0,Kg(n.Ha,n),n.C=0)}function yc(n,e){var t;t=e?e.m:n.V++;const r=ya(n.F);Un(r,"SID",n.J),Un(r,"RID",t),Un(r,"AID",n.U),_a(n,r),n.o&&n.s&&Yd(r,n.o,n.s),t=new Bd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_c(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ds(n.i,t),Ud(t,r,e)}function _a(n,e){n.j&&im({},function(t,r){Un(e,r,t)})}function _c(n,e,t){t=Math.min(n.l.length,t);var r=n.j?$r(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{fw(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function sv(n){n.g||n.u||(n.Y=1,Kg(n.Ga,n),n.A=0)}function fm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=hc($r(n.Ga,n),uv(n,n.A)),n.A++,0))}function pm(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function ov(n){n.g=new Bd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ya(n.oa);Un(e,"RID","rpc"),Un(e,"SID",n.J),Un(e,"CI",n.N?"0":"1"),Un(e,"AID",n.U),_a(n,e),Un(e,"TYPE","xmlhttp"),n.o&&n.s&&Yd(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=am(ya(e)),t.s=null,t.U=!0,nw(t,n)}function Qf(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function av(n,e){var t=null;if(n.g==e){Qf(n),pm(n),n.g=null;var r=2}else{if(!dw(n.i,e))return;t=e.D,fI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;qr(r=Jg(),new jf(r,t,e,i)),tu(n)}else sv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Qd(n,e){return!(nv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=hc($r(n.Ha,n,e),uv(n,n.C)),n.C++,0)))}(n,e)||2==r&&fm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Yu(n,5);break;case 4:Yu(n,10);break;case 3:Yu(n,6);break;default:Yu(n,2)}}function uv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Yu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=$r(n.jb,n);t||(t=new lo("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||sm(t,"https"),am(t)),function gI(n,e){const t=new Qg;if(vt.Image){const r=new Image;r.onload=T_(rv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=T_(rv,t,r,"TestLoadImage: error",!1,e),r.onabort=T_(rv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=T_(rv,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fi(2);n.G=0,n.j&&n.j.va(e),lv(n),mc(n)}function lv(n){n.G=0,n.I=-1,n.j&&((0!=pI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,M_(n.l),n.l.length=0),n.j.ua())}function yw(n,e,t){let r=function aI(n){return n instanceof lo?ya(n):new lo(n,void 0)}(t);if(""!=r.i)e&&om(r,e+"."+r.i),Ja(r,r.m);else{const i=vt.location;r=function Bo(n,e,t,r){var i=new lo(null,void 0);return n&&sm(i,n),e&&om(i,e),t&&Ja(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&k_(n.aa,function(i,u){Un(r,u,i)}),t=n.sa,(e=n.D)&&t&&Un(r,e,t),Un(r,"VER",n.ma),_a(n,r),r}function cv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new qd({ib:!0}):n.qa)).L=n.H,e}function _w(){}function gm(){if(kf&&!(10<=Number(UE)))throw Error("Environmental error: no available transport.")}function ts(n,e){Gr.call(this),this.g=new hm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!jg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vc(this)}function vw(n){Gf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ew(){ew.call(this),this.status=1}function vc(n){this.g=n}(it=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Y_.g(),this.C=function Z_(n){return n.h||(n.h=n.i())}(this.u?this.u:Y_),this.g.onreadystatechange=$r(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Kd(this,u)}n=t||"";const i=new $d(this.headers);r&&im(r,function(u,c){i.set(c,u)}),r=function ZC(n){e:{var e=_I;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=Ug(dm,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Uo(this),0<this.B&&((this.K=function Wd(n){return kf&&function F_(){return function BS(n){var e=BE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=x_(String(Pd)).split("."),t=x_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=R_(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||R_(0==i[2].length,0==u[2].length)||R_(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$r(this.pa,this)):this.A=Yg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Kd(this,u)}},it.pa=function(){void 0!==kd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),Zd(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zd(this,!0)),Er.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?mw(this):this.cb())},it.cb=function(){mw(this)},it.ba=function(){try{return 2<Cs(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),mI(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=hm.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Bd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=$g(u),QC(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_c(this,i,e),Un(t=ya(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),_a(this,t),this.o&&u&&Yd(t,this.o,u),Ds(this.i,i),this.Ra&&Un(t,"TYPE","init"),this.ja?(Un(t,"$req",e),Un(t,"SID","null"),i.$=!0,Ud(i,t,null)):Ud(i,t,e),this.G=2}}else 3==this.G&&(n?yc(this,n):0==this.l.length||tv(this.i)||yc(this))},it.Ga=function(){if(this.u=null,ov(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=hc($r(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fi(10),eu(this),ov(this))},it.ab=function(){null!=this.v&&(this.v=null,eu(this),fm(this),Fi(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Fi(2)):(this.h.info("Failed to ping google.com"),Fi(1))},(it=_w.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},gm.prototype.g=function(n,e){return new ts(n,e)},vr(ts,Gr),ts.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Kg($r(n.hb,n,e))),Fi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=yw(n,null,n.W),tu(n)},ts.prototype.close=function(){Ku(this.g)},ts.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Zu(this.g,e)}else this.v?((e={}).__data__=H_(n),Zu(this.g,e)):Zu(this.g,n)},ts.prototype.M=function(){this.g.j=null,delete this.j,Ku(this.g),delete this.g,ts.Z.M.call(this)},vr(vw,Gf),vr(Ew,ew),vr(vc,_w),vc.prototype.xa=function(){qr(this.g,"a")},vc.prototype.wa=function(n){qr(this.g,new vw(n))},vc.prototype.va=function(n){qr(this.g,new Ew(n))},vc.prototype.ua=function(){qr(this.g,"b")},gm.prototype.createWebChannel=gm.prototype.g,ts.prototype.send=ts.prototype.u,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,Xg.NO_ERROR=0,Xg.TIMEOUT=8,Xg.HTTP_ERROR=6,em.COMPLETE="complete",XE.EventType=Hf,Hf.OPEN="a",Hf.CLOSE="b",Hf.ERROR="c",Hf.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var vI=ga.createWebChannelTransport=function(){return new gm},ww=ga.getStatEventTarget=function(){return Jg()},dv=ga.ErrorCode=Xg,EI=ga.EventType=em,WS=ga.Event=zu,bw=ga.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hv=ga.FetchXmlHttpFactory=qd,Jd=ga.WebChannel=XE,wI=ga.XhrIo=Er;const bI="@firebase/firestore";class Ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");let Jf="9.6.10";const Qu=new Hu.Yd("@firebase/firestore");function mm(){return Qu.logLevel}function Fe(n,...e){if(Qu.logLevel<=Hu.in.DEBUG){const t=e.map(ym);Qu.debug(`Firestore (${Jf}): ${n}`,...t)}}function On(n,...e){if(Qu.logLevel<=Hu.in.ERROR){const t=e.map(ym);Qu.error(`Firestore (${Jf}): ${n}`,...t)}}function Xf(n,...e){if(Qu.logLevel<=Hu.in.WARN){const t=e.map(ym);Qu.warn(`Firestore (${Jf}): ${n}`,...t)}}function ym(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Jf}) INTERNAL ASSERTION FAILED: `+n;throw On(e),new Error(e)}function Rt(n,e){n||st()}function Ze(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends He.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Dw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ei.UNAUTHENTICATED))}shutdown(){}}class CI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Cw{constructor(e){this.t=e,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new Dw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Ei(e)}}class II{constructor(e,t,r){this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Iw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new II(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pv{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Li{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function TI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Li.A=-1;class AI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TI(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function Ec(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function vm(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Yn(0,0))}static max(){return new At(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ep(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Em(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wm{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends wm{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new en(t)}static emptyPath(){return new en([])}}const gv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends wm{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return gv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class wc{constructor(e){this.fields=e,e.sort(wr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ec(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const Aw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nu(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=Aw.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ju(n){return"string"==typeof n?cr.fromBase64String(n):cr.fromUint8Array(n)}function mv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yv(n){const e=n.mapValue.fields.__previous_value__;return mv(e)?yv(e):e}function Xd(n){const e=nu(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class _v{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}function bc(n){return null==n}function eh(n){return 0===n&&1/n==-1/0}function vv(n){return"number"==typeof n&&Number.isInteger(n)&&!eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(en.fromString(e))}static fromName(e){return new $e(en.fromString(e).popFirst(5))}static empty(){return new $e(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new en(e.slice()))}}const bm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ev={nullValue:"NULL_VALUE"};function Xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mv(n)?4:Mw(n)?9:10:st()}function jo(n,e){if(n===e)return!0;const t=Xu(n);if(t!==Xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xd(n).isEqual(Xd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=nu(r.timestampValue),c=nu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ju(n.bytesValue).isEqual(Ju(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jn(r.geoPointValue.latitude)===jn(i.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jn(r.integerValue)===jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=jn(r.doubleValue),c=jn(i.doubleValue);return u===c?eh(u)===eh(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Ec(n.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(ep(u)!==ep(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!jo(u[p],c[p])))return!1;return!0}(n,e);default:return st()}var i}function th(n,e){return void 0!==(n.values||[]).find(t=>jo(t,e))}function ru(n,e){if(n===e)return 0;const t=Xu(n),r=Xu(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=jn(i.integerValue||i.doubleValue),p=jn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return wv(n.timestampValue,e.timestampValue);case 4:return wv(Xd(n),Xd(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Ju(i),p=Ju(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Ut(c[y],p[y]);if(0!==b)return b}return Ut(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ut(jn(i.latitude),jn(u.latitude));return 0!==c?c:Ut(jn(i.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=ru(c[y],p[y]);if(b)return b}return Ut(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const M=Ut(p[S],b[S]);if(0!==M)return M;const F=ru(c[p[S]],y[b[S]]);if(0!==F)return F}return Ut(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function wv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=nu(n),r=nu(e),i=Ut(t.seconds,r.seconds);return 0!==i?i:Ut(t.nanos,r.nanos)}function Dc(n){return Dm(n)}function Dm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ju(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Dm(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${Dm(r.fields[p])}`;return u+"}"}(n.mapValue):st();var e}function tp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bv(n){return!!n&&"integerValue"in n}function np(n){return!!n&&"arrayValue"in n}function Dv(n){return!!n&&"nullValue"in n}function Sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tr(n){return!!n&&"mapValue"in n}function nh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Mw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xw(n,e){return void 0===n?e:void 0===e||ru(n,e)>0?n:e}function Cv(n,e){return void 0===n?e:void 0===e||ru(n,e)<0?n:e}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nh(t)}setAll(e){let t=wr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=nh(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());tr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){va(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new wi(nh(this.value))}}function Iv(n){const e=[];return va(n.fields,(t,r)=>{const i=new wr([t]);if(tr(r)){const u=Iv(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new wc(e)}class Tn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Tn(e,0,At.min(),At.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,At.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,At.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iu{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Tv(n){return n.fields.find(e=>2===e.kind)}function rh(n){return n.fields.filter(e=>2!==e.kind)}iu.UNKNOWN_ID=-1;class rp{constructor(e,t){this.fieldPath=e,this.kind=t}}class ip{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ip(0,wa.min())}}function Av(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new wa(i,$e.empty(),e)}function ZS(n){return new wa(n.readTime,n.key,-1)}class wa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wa(At.min(),$e.empty(),-1)}static max(){return new wa(At.max(),$e.empty(),-1)}}function Sv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}class ba{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function Rw(n,e=null,t=[],r=[],i=null,u=null,c=null){return new ba(n,e,t,r,i,u,c)}function el(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Dc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dc(r)).join(",")),e.P=t}return e.P}function Vi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!kw(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function ns(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sp(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new SI(e,t,r):"array-contains"===t?new Mv(e,r):"in"===t?new op(e,r):"not-in"===t?new RI(e,r):"array-contains-any"===t?new Ow(e,r):new Wr(e,t,r)}static V(e,t,r){return"in"===t?new MI(e,r):new xI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ru(t,this.value)):null!==t&&Xu(this.value)===Xu(t)&&this.v(ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SI extends Wr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class MI extends Wr{constructor(e,t){super(e,"in",t),this.keys=Nw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xI extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Nw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Mv extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&th(t.arrayValue,this.value)}}class op extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&th(this.value.arrayValue,t)}}class RI extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!th(this.value.arrayValue,t)}}class Ow extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>th(this.value.arrayValue,r))}}class tl{constructor(e,t){this.position=e,this.inclusive=t}}class Cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function kw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ap(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):ru(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Pw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jo(n.position[t],e.position[t]))return!1;return!0}class Ca{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function xv(n,e,t,r,i,u,c,p){return new Ca(n,e,t,r,i,u,c,p)}function nl(n){return new Ca(n)}function Ic(n){return!bc(n.limit)&&"F"===n.limitType}function up(n){return!bc(n.limit)&&"L"===n.limitType}function Cm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Im(n){for(const e of n.filters)if(e.S())return e.field;return null}function Tm(n){return null!==n.collectionGroup}function Tc(n){const e=Ze(n);if(null===e.D){e.D=[];const t=Im(e),r=Cm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Cc(t)),e.D.push(new Cc(wr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Cc(wr.keyField(),u))}}}return e.D}function Is(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=Rw(e.path,e.collectionGroup,Tc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Tc(e))t.push(new Cc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new tl(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new tl(e.startAt.position,!e.startAt.inclusive):null;e.C=Rw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Rv(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ih(n,e){return Vi(Is(n),Is(e))&&n.limitType===e.limitType}function Fw(n){return`${el(Is(n))}|lt:${n.limitType}`}function Nv(n){return`Query(target=${function Da(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Dc(r.value)}`;var r}).join(", ")}]`),bc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Dc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Dc(t)).join(",")),`Target(${e})`}(Is(n))}; limitType=${n.limitType})`}function Ov(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=ap(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Tc(t),r)||t.endAt&&!function(i,u,c){const p=ap(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Tc(t),r)));var t,r}function Lw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vw(n){return(e,t)=>{let r=!1;for(const i of Tc(n)){const u=NI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function NI(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?ru(p,y):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Bw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function Uw(n){return{integerValue:""+n}}function jw(n,e){return vv(e)?Uw(e):Bw(n,e)}class Am{constructor(){this._=void 0}}function OI(n,e,t){return n instanceof sh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Ac?Hw(n,e):n instanceof Sc?Gw(n,e):function(r,i){const u=$w(r,i),c=kv(u)+kv(r.k);return bv(u)&&bv(r.k)?Uw(c):Bw(r.M,c)}(n,e)}function kI(n,e,t){return n instanceof Ac?Hw(n,e):n instanceof Sc?Gw(n,e):t}function $w(n,e){return n instanceof Mc?bv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sh extends Am{}class Ac extends Am{constructor(e){super(),this.elements=e}}function Hw(n,e){const t=Pv(e);for(const r of n.elements)t.some(i=>jo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Sc extends Am{constructor(e){super(),this.elements=e}}function Gw(n,e){let t=Pv(e);for(const r of n.elements)t=t.filter(i=>!jo(i,r));return{arrayValue:{values:t}}}class Mc extends Am{constructor(e,t){super(),this.M=e,this.k=t}}function kv(n){return jn(n.integerValue||n.doubleValue)}function Pv(n){return np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oh{constructor(e,t){this.field=e,this.transform=t}}class zw{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cp{}function Ww(n,e,t){n instanceof Ia?function(r,i,u){const c=r.value.clone(),p=PI(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ah?function(r,i,u){if(!lp(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=PI(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(Mm(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sm(n,e,t){var i;n instanceof Ia?function(r,i,u){if(!lp(r.precondition,i))return;const c=r.value.clone(),p=Fv(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(Zw(i),c).setHasLocalMutations()}(n,e,t):n instanceof ah?function(r,i,u){if(!lp(r.precondition,i))return;const c=Fv(r.fieldTransforms,u,i),p=i.data;p.setAll(Mm(r)),p.setAll(c),i.convertToFoundDocument(Zw(i),p).setHasLocalMutations()}(n,e,t):lp(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function xc(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=$w(r.transform,i||null);null!=u&&(null==t&&(t=wi.empty()),t.set(r.field,u))}return t||null}function Kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ec(t,r,(i,u)=>function qw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ac&&r instanceof Ac||t instanceof Sc&&r instanceof Sc?Ec(t.elements,r.elements,jo):t instanceof Mc&&r instanceof Mc?jo(t.k,r.k):t instanceof sh&&r instanceof sh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Zw(n){return n.isFoundDocument()?n.version:At.min()}class Ia extends cp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ah extends cp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function Mm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PI(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,kI(c,p,t[i]))}return r}function Fv(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,OI(u,c,e))}return r}class uh extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Yw extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ct{constructor(e){this.count=e}}var br,tn;function Qw(n){switch(n){default:return st();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function dp(n){if(void 0===n)return On("GRPC error has no .code"),le.UNKNOWN;switch(n){case br.OK:return le.OK;case br.CANCELLED:return le.CANCELLED;case br.UNKNOWN:return le.UNKNOWN;case br.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case br.INTERNAL:return le.INTERNAL;case br.UNAVAILABLE:return le.UNAVAILABLE;case br.UNAUTHENTICATED:return le.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case br.NOT_FOUND:return le.NOT_FOUND;case br.ALREADY_EXISTS:return le.ALREADY_EXISTS;case br.PERMISSION_DENIED:return le.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case br.ABORTED:return le.ABORTED;case br.OUT_OF_RANGE:return le.OUT_OF_RANGE;case br.UNIMPLEMENTED:return le.UNIMPLEMENTED;case br.DATA_LOSS:return le.DATA_LOSS;default:return st()}}(tn=br||(br={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Em(this.inner)}size(){return this.innerSize}}class $n{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Wt.RED,this.left=null!=i?i:Wt.EMPTY,this.right=null!=u?u:Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Wt(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1,Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Wt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class Lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(n){return n.hasNext()?n.getNext():void 0}const FI=new $n($e.comparator);function Ts(){return FI}const Jw=new $n($e.comparator);function xm(){return Jw}function ch(){return new rl(n=>n.toString(),(n,e)=>n.isEqual(e))}const LI=new $n($e.comparator),VI=new Hn($e.comparator);function mn(...n){let e=VI;for(const t of n)e=e.add(t);return e}const hp=new Hn(Ut);function Rm(){return hp}class fp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,pp.createSynthesizedTargetChangeForCurrentChange(e,t)),new fp(At.min(),r,Rm(),Ts(),mn())}}class pp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new pp(cr.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class Nc{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Vv{constructor(e,t){this.targetId=e,this.$=t}}class Bv{constructor(e,t,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Uv{constructor(){this.B=0,this.L=hh(),this.U=cr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=mn(),t=mn(),r=mn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new pp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=hh()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class BI{constructor(e){this.nt=e,this.st=new Map,this.it=Ts(),this.rt=dh(),this.ot=new Hn(Ut)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(ns(u))if(0===r){const c=new $e(u.path);this.ct(t,c,Tn.newNoDocument(c,At.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&ns(p.target)){const y=new $e(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Tn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=mn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new fp(e,t,this.ot,this.it,r);return this.it=Ts(),this.rt=dh(),this.ot=new Hn(Ut),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Uv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Hn(Ut),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Uv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function dh(){return new $n($e.comparator)}function hh(){return new $n($e.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $I{constructor(e,t){this.databaseId=e,this.N=t}}function fh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jv(n,e){return n.N?e.toBase64():e.toUint8Array()}function Xw(n,e){return fh(n,e.toTimestamp())}function Kr(n){return Rt(!!n),At.fromTimestamp(function(e){const t=nu(e);return new Yn(t.seconds,t.nanos)}(n))}function Nm(n,e){return(t=n,new en(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eb(n){const e=en.fromString(n);return Rt(Gv(e)),e}function gp(n,e){return Nm(n.databaseId,e.path)}function su(n,e){const t=eb(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e($v(t))}function tb(n,e){return Nm(n.databaseId,e)}function HI(n){const e=eb(n);return 4===e.length?en.emptyPath():$v(e)}function Om(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $v(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mp(n,e,t){return{name:gp(n,e),fields:t.value.mapValue.fields}}function nb(n,e,t){const r=su(n,e.name),i=Kr(e.updateTime),u=new wi({mapValue:{fields:e.fields}}),c=Tn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ou(n,e){let t;if(e instanceof Ia)t={update:mp(n,e.key,e.value)};else if(e instanceof uh)t={delete:gp(n,e.key)};else if(e instanceof ah)t={update:mp(n,e.key,e.data),updateMask:KI(e.fieldMask)};else{if(!(e instanceof Yw))return st();t={verify:gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof sh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ac)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mc)return{fieldPath:u.field.canonicalString(),increment:c.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Xw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Hv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime(Kr(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),p=new sh):"appendMissingElements"in c?p=new Ac(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Sc(c.removeAllFromArray.values||[]):"increment"in c?p=new Mc(u,c.increment):st();const y=wr.fromServerFormat(c.fieldPath);return new oh(y,p)}(n,i)):[];var i;if(e.update){const i=su(n,e.update.name),u=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new wc((e.updateMask.fieldPaths||[]).map(b=>wr.fromServerFormat(b)));return new ah(i,u,c,t,r)}return new Ia(i,u,t,r)}if(e.delete){const i=su(n,e.delete);return new uh(i,t)}if(e.verify){const i=su(n,e.verify);return new Yw(i,t)}return st()}function ib(n,e){return{documents:[tb(n,e.path)]}}function sb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(Sw(M.value))return{unaryFilter:{field:gh(M.field),op:"IS_NAN"}};if(Dv(M.value))return{unaryFilter:{field:gh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Sw(M.value))return{unaryFilter:{field:gh(M.field),op:"IS_NOT_NAN"}};if(Dv(M.value))return{unaryFilter:{field:gh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gh(M.field),op:ph(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:gh((S=b).field),direction:zI(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||bc(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function ob(n){let e=HI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=ub(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Cc(Oc((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(S){let M;return M="object"==typeof S?S.value:S,bc(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new tl((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new tl(S.values||[],!S.before)}(t.endAt)),xv(e,i,c,u,p,"F",y,b)}function ub(n){return n?void 0!==n.unaryFilter?[lb(n)]:void 0!==n.fieldFilter?[WI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ub(e)).reduce((e,t)=>e.concat(t)):st():[]}function zI(n){return UI[n]}function ph(n){return jI[n]}function gh(n){return{fieldPath:n.canonicalString()}}function Oc(n){return wr.fromServerFormat(n.fieldPath)}function WI(n){return Wr.create(Oc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function lb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Oc(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Oc(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Oc(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Oc(n.unaryFilter.field);return Wr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function KI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cb(e)),e=qv(n.get(t),e);return cb(e)}function qv(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function cb(n){return n+"\x01\x01"}function co(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new en(r)}const zv=["userId","batchId"];function km(n,e){return[n,Zr(e)]}function db(n,e,t){return[n,Zr(e),t]}const ZI={},Wv=["prefixPath","collectionGroup","readTime","documentId"],YI=["prefixPath","collectionGroup","documentId"],hb=["collectionGroup","readTime","prefixPath","documentId"],QI=["canonicalId","targetId"],JI=["targetId","path"],XI=["path","targetId"],eT=["collectionId","parent"],tT=["indexId","uid"],nT=["uid","sequenceNumber"],rT=["indexId","uid","arrayValue","directionalValue","documentKey"],iT=["indexId","uid","documentKey"],fb=["userId","collectionPath","documentId"],pb=["userId","collectionPath","largestBatchId"],sT=["userId","collectionGroup","largestBatchId"],gb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mb=[...gb,"documentOverlays"],yb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oT=[...yb,"indexConfiguration","indexState","indexEntries"],_b="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class yp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new _p(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Fm(r.target.error);this.At.reject(new _p(e,i))}}static open(e,t,r,i){try{return new yp(t,e.transaction(i,r))}catch(u){throw new _p(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uT(t)}}class As{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===As.Vt((0,He.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),il(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,He.hl)())return!1;if(As.St())return!0;const e=(0,He.z$)(),t=As.Vt(e),r=0<t&&t<10,i=As.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new _p(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new _p(e,p))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,_e.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=yp.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.bt(),S)).catch(S=>(y.abort(S),he.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aT{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return il(this.Ft.delete())}}class _p extends Re{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(n){return"IndexedDbTransactionError"===n.name}class uT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),il(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),il(this.store.add(e))}get(e){return il(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),il(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),il(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Gt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new he((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=u=>{const c=Fm(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new aT(p),b=t(p.primaryKey,p.value,y);if(b instanceof he){const S=b.catch(M=>(y.done(),he.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function il(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Fm(r.target.error);t(i)}})}let vb=!1;function Fm(n){const e=As.Vt((0,He.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vb||(vb=!0,setTimeout(()=>{throw r},0)),r}}return n}class Eb extends Pm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function kr(n,e){const t=Ze(n);return As.xt(t.Ht,e)}class wb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Ww(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Sm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Sm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Ec(this.mutations,e.mutations,(t,r)=>Kw(t,r))&&Ec(this.baseMutations,e.baseMutations,(t,r)=>Kw(t,r))}}class Kv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=LI;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Kv(e,t,r,i)}}class mh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sl{constructor(e,t,r,i,u=At.min(),c=At.min(),p=cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kc{constructor(e){this.Jt=e}}function bb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:gp(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:fh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ol(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:ol(e.version)}}var i,u;return r}function Zv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ol(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pc(n){const e=new Yn(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function yh(n,e){const t=(e.baseMutations||[]).map(u=>Hv(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Hv(n.Jt,u)),i=Yn.fromMillis(e.localWriteTimeMs);return new wb(e.batchId,i,t,r)}function Ep(n){const e=Pc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pc(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Is(nl(HI(i.documents[0])))):r=Is(ob(n.query)),new sl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,cr.fromBase64String(n.resumeToken))}function Db(n,e){const t=ol(e.snapshotVersion),r=ol(e.lastLimboFreeSnapshotVersion);let i;i=ns(e.target)?ib(n.Jt,e.target):sb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lm(n){const e=ob({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Rv(e,e.limit,"L"):e}function Vm(n,e){return new mh(e.largestBatchId,Hv(n.Jt,e.overlayMutation))}function Bm(n,e){const t=e.path.lastSegment();return[n,Zr(e.path.popLast()),t]}class Um{getBundleMetadata(e,t){return _h(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Pc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return _h(e).put({bundleId:(r=t).id,createTime:ol(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Cb(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Lm(i.bundledQuery),readTime:Pc(i.readTime)};var i})}saveNamedQuery(e,t){return Cb(e).put({name:(r=t).name,readTime:ol(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function _h(n){return kr(n,"bundles")}function Cb(n){return kr(n,"namedQueries")}class jm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new jm(e,t.uid||"")}getOverlay(e,t){return vh(e).get(Bm(this.userId,t)).next(r=>r?Vm(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new mh(t,c);i.push(this.Xt(e,p))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Zr(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(vh(e).Qt("collectionPathOverlayIndex",p))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ch(),u=Zr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return vh(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=Vm(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ch();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vh(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,S)=>{const M=Vm(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return vh(e).put(function(r,i,u){const[c,p,y]=Bm(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ou(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function vh(n){return kr(n,"documentOverlays")}class Eh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),eh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ju(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Mw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function lT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $m(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=lT(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Eh.fe=new Eh;class cT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=$m(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=$m(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class dT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Hm{constructor(){this.De=new cT,this.Ce=new YS(this.De),this.xe=new dT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ss{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ss(this.indexId,this.documentKey,this.arrayValue,r)}}function al(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Fc(n.arrayValue,e.arrayValue),0!==t?t:(t=Fc(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Fc(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Tv(e);if(void 0!==t&&!this.Be(t))return!1;const r=rh(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ib{constructor(){this.qe=new Yv}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Yv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(en.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(en.comparator)).toArray()}}const Qv=new Uint8Array(0);class Tb{constructor(e){this.user=e,this.Ge=new Yv,this.Ke=new rl(t=>el(t),(t,r)=>Vi(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Zr(i)};return hT(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[vm(t),""],!1,!0);return hT(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(co(c.parent))}return r})}addFieldIndex(e,t){const r=bh(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=bh(e),i=wp(e),u=wh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wh(e);let i=!0;const u=new Map;return he.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=mn();return he.forEach(u,(p,y)=>{var b;Fe("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ve=>`${Ve.fieldPath}:${Ve.kind}`).join(",")}`} to execute ${el(t)}`);const S=function(Ve,Ye){const We=Tv(Ye);if(void 0===We)return null;for(const Et of sp(Ve,We.fieldPath))switch(Et.op){case"array-contains-any":return Et.value.arrayValue.values||[];case"array-contains":return[Et.value]}return null}(y,p),M=function(Ve,Ye){const We=new Map;for(const Et of rh(Ye))for(const dt of sp(Ve,Et.fieldPath))switch(dt.op){case"==":case"in":We.set(Et.fieldPath.canonicalString(),dt.value);break;case"not-in":case"!=":return We.set(Et.fieldPath.canonicalString(),dt.value),Array.from(We.values())}return null}(y,p),F=function(Ve,Ye){const We=[];let Et=!0;for(const Qt of rh(Ye)){let wn,_n=!0;for(const Zt of sp(Ve,Qt.fieldPath)){let Dn,ks=!0;switch(Zt.op){case"<":case"<=":Dn="nullValue"in(dt=Zt.value)?Ev:"booleanValue"in dt?{booleanValue:!1}:"integerValue"in dt||"doubleValue"in dt?{doubleValue:NaN}:"timestampValue"in dt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in dt?{stringValue:""}:"bytesValue"in dt?{bytesValue:""}:"referenceValue"in dt?tp(Ea.empty(),$e.empty()):"geoPointValue"in dt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in dt?{arrayValue:{}}:"mapValue"in dt?{mapValue:{}}:st();break;case"==":case"in":case">=":Dn=Zt.value;break;case">":Dn=Zt.value,ks=!1;break;case"!=":case"not-in":Dn=Ev}xw(wn,Dn)===Dn&&(wn=Dn,_n=ks)}if(null!==Ve.startAt)for(let Zt=0;Zt<Ve.orderBy.length;++Zt)if(Ve.orderBy[Zt].field.isEqual(Qt.fieldPath)){const Dn=Ve.startAt.position[Zt];xw(wn,Dn)===Dn&&(wn=Dn,_n=Ve.startAt.inclusive);break}if(void 0===wn)return null;We.push(wn),Et&&(Et=_n)}var dt;return new tl(We,Et)}(y,p),B=function(Ve,Ye){const We=[];let Et=!0;for(const Qt of rh(Ye)){let wn,_n=!0;for(const Zt of sp(Ve,Qt.fieldPath)){let Dn,ks=!0;switch(Zt.op){case">=":case">":Dn="nullValue"in(dt=Zt.value)?{booleanValue:!1}:"booleanValue"in dt?{doubleValue:NaN}:"integerValue"in dt||"doubleValue"in dt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in dt?{stringValue:""}:"stringValue"in dt?{bytesValue:""}:"bytesValue"in dt?tp(Ea.empty(),$e.empty()):"referenceValue"in dt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in dt?{arrayValue:{}}:"arrayValue"in dt?{mapValue:{}}:"mapValue"in dt?bm:st(),ks=!1;break;case"==":case"in":case"<=":Dn=Zt.value;break;case"<":Dn=Zt.value,ks=!1;break;case"!=":case"not-in":Dn=bm}Cv(wn,Dn)===Dn&&(wn=Dn,_n=ks)}if(null!==Ve.endAt)for(let Zt=0;Zt<Ve.orderBy.length;++Zt)if(Ve.orderBy[Zt].field.isEqual(Qt.fieldPath)){const Dn=Ve.endAt.position[Zt];Cv(wn,Dn)===Dn&&(wn=Dn,_n=Ve.endAt.inclusive);break}if(void 0===wn)return null;We.push(wn),Et&&(Et=_n)}var dt;return new tl(We,Et)}(y,p),G=this.je(p,y,F),ne=this.je(p,y,B),be=this.We(p,y,M),Qe=this.ze(p.indexId,S,G,!!F&&F.inclusive,ne,!!B&&B.inclusive,be);return he.forEach(Qe,Ve=>r.Kt(Ve,t.limit).next(Ye=>{Ye.forEach(We=>{c=c.add(new $e(co(We.documentKey)))})}))}).next(()=>c)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):Qv,B=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);S.push(...this.createRange(B,G,p.map(ne=>this.Je(e,F,ne,!0))))}return S}Je(e,t,r,i){const u=new Ss(e,$e.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Ss(e,$e.empty(),t,r);return i?u.ke():u}Ye(e){return new Ss(e,$e.empty(),Qv,Qv)}getFieldIndex(e,t){const r=new QS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Hm;for(const i of rh(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Eh.fe.Zt(u,c)}return r.Se()}He(e){const t=new Hm;return Eh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Hm);let u=0;for(const c of rh(e)){const p=r[u++];for(const y of i)if(this.tn(t,c.fieldPath)&&np(p))i=this.en(i,c,p);else{const b=y.Ne(c.kind);Eh.fe.Zt(p,b)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new Hm;y.seed(p.Se()),Eh.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bh(e),i=wp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return he.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new ip(S.sequenceNumber,new wa(Pc(S.readTime),new $e(co(S.documentKey)),S.largestBatchId)):ip.empty(),F=b.fields.map(([B,G])=>new rp(wr.fromServerFormat(B),G));return new iu(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=bh(e),u=wp(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>he.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:ol((F=r).readTime),documentKey:Zr(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),he.forEach(p,y=>this.rn(e,i,y).next(b=>{const S=this.on(u,y);return b.isEqual(S)?he.resolve():this.un(e,u,b,S)}))))})}an(e,t,r){return wh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Zr(t.key.path)})}cn(e,t,r){return wh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Zr(t.key.path)])}rn(e,t,r){const i=wh(e);let u=new Hn(al);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Zr(t.path)])},(c,p)=>{u=u.add(new Ss(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}on(e,t){let r=new Hn(al);const i=this.Ze(t,e);if(null==i)return r;const u=Tv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(np(c))for(const p of c.arrayValue.values||[])r=r.add(new Ss(t.indexId,e.key,this.He(p),i))}else r=r.add(new Ss(t.indexId,e.key,Qv,i));return r}un(e,t,r,i){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,p,y,b,S){const M=c.getIterator(),F=p.getIterator();let B=lh(M),G=lh(F);for(;B||G;){let ne=!1,be=!1;if(B&&G){const Qe=y(B,G);Qe<0?be=!0:Qe>0&&(ne=!0)}else null!=B?be=!0:ne=!0;ne?(b(G),G=lh(F)):be?(S(B),B=lh(M)):(B=lh(M),G=lh(F))}}(r,i,al,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),he.waitFor(u)}sn(e){let t=1;return wp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>al(c,p)).filter((c,p,y)=>!p||0!==al(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=al(c,e),y=al(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return u}}function hT(n){return kr(n,"collectionParents")}function wh(n){return kr(n,"indexEntries")}function bh(n){return kr(n,"indexConfiguration")}function wp(n){return kr(n,"indexState")}const Jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ab(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(S,M,F)=>(p++,F.delete()));u.push(y.next(()=>{Rt(1===p)}));const b=[];for(const S of t.mutations){const M=db(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return he.waitFor(u).next(()=>b)}function Gm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class Xv{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Xv(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Dh(e),c=ul(e);return c.add({}).next(p=>{Rt("number"==typeof p);const y=new wb(p,t,r,i),b=function(F,B,G){const ne=G.baseMutations.map(Qe=>ou(F.Jt,Qe)),be=G.mutations.map(Qe=>ou(F.Jt,Qe));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ne,mutations:be}}(this.M,this.userId,y),S=[];let M=new Hn((F,B)=>Ut(F.canonicalString(),B.canonicalString()));for(const F of i){const B=db(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,ZI))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.hn[p]=y.keys()}),he.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return ul(e).get(t).next(r=>r?(Rt(r.userId===this.userId),yh(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ul(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(Rt(p.batchId>=r),u=yh(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ul(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).qt("userMutationsIndex",t).next(r=>r.map(i=>yh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=km(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Dh(e).Wt({range:i},(c,p,y)=>{const[b,S,M]=c,F=co(S);if(b===this.userId&&t.path.isEqual(F))return ul(e).get(M).next(B=>{if(!B)throw st();Rt(B.userId===this.userId),u.push(yh(this.M,B))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);const i=[];return t.forEach(u=>{const c=km(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=Dh(e).Wt({range:p},(b,S,M)=>{const[F,B,G]=b,ne=co(B);F===this.userId&&u.path.isEqual(ne)?r=r.add(G):M.done()});i.push(y)}),he.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=km(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Hn(Ut);return Dh(e).Wt({range:c},(y,b,S)=>{const[M,F,B]=y,G=co(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(B)):S.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(ul(e).get(u).next(c=>{if(null===c)throw st();Rt(c.userId===this.userId),r.push(yh(this.M,c))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ab(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dh(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=co(u[1]);i.push(y)}else p.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return Sb(e,this.userId,t)}_n(e){return Mb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Sb(n,e,t){const r=km(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Dh(n).Wt({range:u,jt:!0},(p,y,b)=>{const[S,M,F]=p;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function ul(n){return kr(n,"mutations")}function Dh(n){return kr(n,"documentMutations")}function Mb(n){return kr(n,"mutationQueues")}class $o{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new $o(0)}static gn(){return new $o(-1)}}class xb{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new $o(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>At.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lc(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Lc(e).Wt((c,p)=>{const y=Ep(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>he.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Lc(e).Wt((r,i)=>{const u=Ep(i);t(u)})}yn(e){return e0(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}pn(e,t){return e0(e).put("targetGlobalKey",t)}In(e,t){return Lc(e).put(Db(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=el(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Lc(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=Ep(p);Vi(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=uu(e);return t.forEach(c=>{const p=Zr(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=uu(e);return he.forEach(t,u=>{const c=Zr(u.path);return he.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=uu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=uu(e);let u=mn();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=co(c[1]),S=new $e(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Zr(t.path),i=IDBKeyRange.bound([r],[vm(r)],!1,!0);let u=0;return uu(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Lc(e).get(t).next(r=>r?Ep(r):null)}}function Lc(n){return kr(n,"targets")}function e0(n){return kr(n,"targetGlobal")}function uu(n){return kr(n,"targetDocuments")}function ll(n){return qm.apply(this,arguments)}function qm(){return qm=(0,_e.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==_b)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),qm.apply(this,arguments)}function Rb([n,e],[t,r]){const i=Ut(n,t);return 0===i?Ut(e,r):i}class Nb{constructor(e){this.En=e,this.buffer=new Hn(Rb),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ob{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){au(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ll(i)}yield t.vn(e)}))}}class fT{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Li.A);const r=new Nb(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Jv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jv):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,u,c,p,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),mm()<=Hu.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class pT{constructor(e,t){this.db=e,this.garbageCollector=new fT(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return zm(e,r)}removeReference(e,t,r){return zm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zm(e,t)}Mn(e,t){return function(r,i){let u=!1;return Mb(r).zt(c=>Sb(r,c,i).next(p=>(p&&(u=!0),he.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.kn(e,(c,p)=>{if(p<=t){const y=this.Mn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),uu(e).delete([0,Zr(c.path)])))});i.push(y)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zm(e,t)}kn(e,t){const r=uu(e);let i,u=Li.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==Li.A&&t(new $e(co(i)),u),u=b,i=y):u=Li.A}).next(()=>{u!==Li.A&&t(new $e(co(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zm(n,e){return uu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zr(e.path),sequenceNumber:r}));var r}class Ch{constructor(){this.changes=new rl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gT{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vc(e).put(r)}removeEntry(e,t,r){return Vc(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Zv(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return Vc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(t))},(i,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return Vc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bc(t))},(i,u)=>{r={document:this.Fn(t,u),size:Gm(u)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.Bn(e,t,(i,u)=>{const c=this.Fn(i,u);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=Ts(),i=new $n($e.comparator);return this.Bn(e,t,(u,c)=>{const p=this.Fn(u,c);r=r.insert(u,p),i=i.insert(u,Gm(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let i=new Hn(kb);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Bc(i.first()),Bc(i.last())),c=i.getIterator();let p=c.getNext();return Vc(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&kb(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(Bc(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Zv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vc(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=Ts();for(const y of c){const b=this.Fn($e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=Ts();const c=Ih(t,r),p=Ih(t,wa.max());return Vc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,S)=>{const M=this.Fn($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new t0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ho(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}On(e,t){return Ho(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function vp(n,e){let t;if(e.document)t=nb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=Pc(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=$e.fromSegments(e.unknownDocument.path),i=Pc(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Yn(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Tn.newInvalidDocument(e)}}class t0 extends Ch{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new rl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((u,c)=>Ut(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=bb(this.qn.M,c);i=i.add(u.path.popLast()),r+=Gm(y)-p.size,t.push(this.qn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=bb(this.qn.M,c.convertToNoDocument(At.min()));t.push(this.qn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Ho(n){return kr(n,"remoteDocumentGlobal")}function Vc(n){return kr(n,"remoteDocumentsV14")}function Bc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ih(n,e){const t=e.documentKey.path.toArray();return[n,Zv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kb(n,e){const t=n.path.length-e.path.length;return 0!==t?t:$e.comparator(n,e)}class mT{constructor(e){this.M=e}kt(e,t,r,i){const u=new yp("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zv,{unique:!0}),p.createObjectStore("documentMutations"),Pb(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Pb(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zv,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return he.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&i>=7&&(c=c.next(()=>this.jn(u))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:fb});y.createIndex("collectionPathOverlayIndex",pb,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",sT,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:Wv});y.createIndex("documentKeyIndex",YI),y.createIndex("collectionGroupIndex",hb)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:tT}).createIndex("sequenceNumberIndex",nT,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:rT}).createIndex("documentKeyIndex",iT,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Gm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>he.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>he.forEach(p,y=>{Rt(y.userId===u.userId);const b=yh(this.M,y);return Ab(e,u.userId,b).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new en(c),b=[0,Zr(y)];u.push(t.get(b).next(S=>S?he.resolve():t.put({targetId:0,path:Zr(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:eT});const r=t.store("collectionParents"),i=new Yv,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Zr(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new en(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const S=co(p);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=Ep(i),c=Db(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new $e(en.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(S))}).next(()=>he.waitFor(i))}}function Pb(n){n.createObjectStore("targetDocuments",{keyPath:JI}).createIndex("documentTargetsIndex",XI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QI,{unique:!0}),n.createObjectStore("targetGlobal")}const Th="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ah{constructor(e,t,r,i,u,c,p,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=p,this.Yn=b,this.Xn=S,this.Zn=M,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=F=>Promise.resolve(),!Ah.vt())throw new Re(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pT(this,i),this.cs=t+"main",this.M=new kc(y),this.hs=new As(this.cs,this.Zn,new mT(this.M)),this.ls=new xb(this.referenceDelegate,this.M),this.fs=new gT(this.M),this.ds=new Um,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,Th);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Li(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(au(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return bp(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return Wm(e).delete(this.clientId)}Vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=kr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ss(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return he.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):bp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(le.FAILED_PRECONDITION,Th);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wm(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Eb(t,Li.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Wm(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Xv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Tb(e)}getDocumentOverlayCache(e){return jm.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?oT:13===c?yb:12===c?mb:11===c?gb:void st();var c;let p;return this.hs.runTransaction(e,i,u,y=>(p=new Eb(y,this.ts?this.ts.next():Li.A),"readwrite-primary"===t?this.Ts(p).next(b=>!!b||this.Es(p)).next(b=>{if(!b)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(le.FAILED_PRECONDITION,_b);return r(p)}).next(b=>this.Rs(p).next(()=>b)):this.Fs(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}Fs(e){return bp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(le.FAILED_PRECONDITION,Th)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bp(e).put("owner",t)}static vt(){return As.vt()}As(e){const t=bp(e);return t.get("owner").next(r=>this.bs(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(On(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,He.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return On("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(n){return kr(n,"owner")}function Wm(n){return kr(n,"clientMetadata")}function Km(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Fb{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Tm(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new $e(t)).next(r=>{let i=xm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let u=xm();return this.indexManager.getCollectionParents(e,i).next(c=>he.forEach(c,p=>{const y=(b=t,S=p.child(i),new Ca(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.Ws(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=Tn.newInvalidDocument(y),i=i.insert(y,b)),Sm(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{Ov(t,c)||(i=i.remove(u))}),i))}}class Dp{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=mn(),i=mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Dp(e,t.fromCache,r,i)}}class n0{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Zs(e,t):this.Xs.qs(e,i).next(u=>{const c=this.ti(t,u);return(Ic(t)||up(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(mm()<=Hu.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nv(t)),this.Xs.Ks(e,t,Av(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ti(e,t){let r=new Hn(Vw(e));return t.forEach((i,u)=>{Ov(e,u)&&(r=r.add(u))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Zs(e,t){return mm()<=Hu.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Nv(t)),this.Xs.Ks(e,t,wa.min())}}class yT{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new $n(Ut),this.ii=new rl(u=>el(u),Vi),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Fb(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Lb(n,e,t,r){return new yT(n,e,t,r)}function _T(n,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,_e.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(u=>(i=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=mn();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ai.qs(r,y).next(b=>({ci:b,removedBatchIds:c,addedBatchIds:p}))})})}),Cp.apply(this,arguments)}function r0(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const S=y.batch,M=S.keys();let F=he.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(p,B)).next(G=>{const ne=y.docVersions.get(B);Rt(null!==ne),G.version.compareTo(ne)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.$s.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function s0(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function o0(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;p.push(t.ls.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,G,ne;e.targetMismatches.has(S)?F=F.withResumeToken(cr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),G=F,ne=b,(0===(B=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(u,F))});let y=Ts();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(Zm(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(At.min())){const b=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return he.waitFor(p).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,y)).next(()=>y)}).then(u=>(t.si=i,u))}function Zm(n,e,t){let r=mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Ts();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function vT(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Sh(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(u=>u?(i=u,he.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new sl(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Mh(n,e,t){return a0.apply(this,arguments)}function a0(){return a0=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!au(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),a0.apply(this,arguments)}function Ip(n,e,t){const r=Ze(n);let i=At.min(),u=mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const S=Ze(p),M=S.ii.get(b);return void 0!==M?he.resolve(S.si.get(M)):S.ls.getTargetData(y,b)}(r,c,Is(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.ni.Ks(c,e,t?i:At.min(),t?u:mn())).next(p=>(Vb(r,Lw(e),p),{documents:p,hi:u})))}function Ym(n,e){const t=Ze(n),r=Ze(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function u0(n,e){const t=Ze(n),r=t.ri.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,Av(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Vb(t,e,i),i))}function Vb(n,e,t){let r=At.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function Qm(){return Qm=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);let u=mn(),c=Ts();for(const b of t){const S=e.li(b.metadata.name);b.document&&(u=u.add(S));const M=e.fi(b);M.setReadTime(e.di(b.metadata.readTime)),c=c.insert(S,M)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),y=yield Sh(i,(b=r,Is(nl(en.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Zm(b,p,c).next(S=>(p.apply(b),S)).next(S=>i.ls.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.ls.addMatchingKeys(b,u,y.targetId)).next(()=>i.ai.Gs(b,S)).next(()=>S)))}),Qm.apply(this,arguments)}function ET(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,_e.Z)(function*(n,e,t=mn()){const r=yield Sh(n,Is(Lm(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(u,e);const p=r.withResumeToken(cr.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(u,p).next(()=>i.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.ls.addMatchingKeys(u,t,r.targetId)).next(()=>i.ds.saveNamedQuery(u,e))})}),Jm.apply(this,arguments)}class Ub{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Lm(r.bundledQuery),readTime:Kr(r.readTime)}),he.resolve();var r}}class wT{constructor(){this.overlays=new $n($e.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=ch(),u=t.length+1,c=new $e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new $n((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=ch(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=ch(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=i)););return he.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mh(t,r));let u=this.mi.get(t);void 0===u&&(u=mn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class Xm{constructor(){this.gi=new Hn(Yr.yi),this.pi=new Hn(Yr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Yr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Yr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new $e(new en([])),r=new Yr(t,e),i=new Yr(t,e+1),u=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new $e(new en([])),r=new Yr(t,e),i=new Yr(t,e+1);let u=mn();return this.pi.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Yr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return $e.comparator(e.key,t.key)||Ut(e.Vi,t.Vi)}static Ii(e,t){return Ut(e.Vi,t.Vi)||$e.comparator(e.key,t.key)}}class Bi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Hn(Yr.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const u=this.vi;this.vi++;const c=new wb(u,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Yr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),u=i<0?0:i;return he.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yr(t,0),i=new Yr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);u.push(p)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);return t.forEach(i=>{const u=new Yr(i,0),c=new Yr(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],p=>{r=r.add(p.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new Yr(new $e(u),0);let p=new Hn(Ut);return this.Si.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.Vi)),!0)},c),he.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,i=>{const u=new Yr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Yr(t,0),i=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class xh{constructor(e){this.ki=e,this.docs=new $n($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Tn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=Ts();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||Sv(ZS(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bT(this)}getSize(e){return he.resolve(this.size)}}class bT extends Ch{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class DT{constructor(e){this.persistence=e,this.Oi=new rl(t=>el(t),Vi),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Xm,this.targetCount=0,this.Bi=$o.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new $o(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),he.waitFor(u).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class JS{constructor(e,t){this.Li={},this.overlays={},this.ts=new Li(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new DT(this),this.indexManager=new Ib,this.fs=new xh(r=>this.referenceDelegate.Ui(r)),this.M=new kc(t),this.ds=new Ub(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new Bi(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new Tp(this.ts.next());return this.referenceDelegate.qi(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class Tp extends Pm{constructor(e){super(),this.currentSequenceNumber=e}}class l0{constructor(e){this.persistence=e,this.Qi=new Xm,this.ji=null}static Wi(e){return new l0(e)}get zi(){if(this.ji)return this.ji;throw st()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const i=$e.fromPath(r);return this.Hi(e,i).next(u=>{u||t.removeEntry(i,At.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function ey(n,e){return`firestore_clients_${n}_${e}`}function jb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ty(n,e){return`firestore_targets_${n}_${e}`}class ny{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new ny(e,t,i.state,u):(On("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ap{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new Ap(e,r.state,i):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Rm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=vv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Rh(e,u):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ry{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ry(t.clientId,t.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iy{constructor(){this.activeTargetIds=Rm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nh{constructor(e,t,r,i,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new $n(Ut),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=ey(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new iy),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const u=e.getItem(ey(e.persistenceKey,i));if(u){const c=Rh.Ji(i,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ty(this.persistenceKey,e));if(r){const i=Ap.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ty(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(u){let c=Li.A;if(null!=u)try{const p=JSON.parse(u);Rt("number"==typeof p),c=p}catch(p){On("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Li.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new ny(this.currentUser,e,t,r),u=jb(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Yi())}pr(e){const t=jb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=ty(this.persistenceKey,e),u=new Ap(e,t,r);this.setItem(i,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Rh.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return ny.Ji(new Ei(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Ap.Ji(i,t)}wr(e){return ry.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),u=this.gr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Rm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class sy{constructor(){this.Fr=new iy,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new iy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XS{Br(e){}shutdown(){}}class c0{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const CT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class $b{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class oy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,u){const c=this.oo(e,t);Fe("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,u),this.ao(e,c,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw Xf("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}co(e,t,r,i,u){return this.ro(e,t,r,i,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}oo(e,t){return`${this.so}/v1/${t}:${CT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((u,c)=>{const p=new wI;p.listenOnce(EI.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case dv.NO_ERROR:const b=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case dv.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case dv.HTTP_ERROR:const S=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(G)>=0?G:le.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(le.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vI(),c=ww(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new hv({})),this.uo(p.initMessageHeaders,t,r),(0,He.uI)()||(0,He.b$)()||(0,He.d)()||(0,He.w1)()||(0,He.Mn)()||(0,He.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Fe("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let S=!1,M=!1;const F=new $b({jr:G=>{M?Fe("Connection","Not sending because WebChannel is closed:",G):(S||(Fe("Connection","Opening WebChannel transport."),b.open(),S=!0),Fe("Connection","WebChannel sending:",G),b.send(G))},Wr:()=>b.close()}),B=(G,ne,be)=>{G.listen(ne,Qe=>{try{be(Qe)}catch(Ve){setTimeout(()=>{throw Ve},0)}})};return B(b,Jd.EventType.OPEN,()=>{M||Fe("Connection","WebChannel transport opened.")}),B(b,Jd.EventType.CLOSE,()=>{M||(M=!0,Fe("Connection","WebChannel transport closed"),F.eo())}),B(b,Jd.EventType.ERROR,G=>{M||(M=!0,Xf("Connection","WebChannel transport errored:",G),F.eo(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),B(b,Jd.EventType.MESSAGE,G=>{var ne;if(!M){const be=G.data[0];Rt(!!be);const Qe=be,Ve=Qe.error||(null===(ne=Qe[0])||void 0===ne?void 0:ne.error);if(Ve){Fe("Connection","WebChannel received error:",Ve);const Ye=Ve.status;let We=function(dt){const Qt=br[dt];if(void 0!==Qt)return dp(Qt)}(Ye),Et=Ve.message;void 0===We&&(We=le.INTERNAL,Et="Unknown error status: "+Ye+" with message "+Ve.message),M=!0,F.eo(new Re(We,Et)),b.close()}else Fe("Connection","WebChannel received:",be),F.no(be)}}),B(c,WS.STAT_EVENT,G=>{G.stat===bw.PROXY?Fe("Connection","Detected buffering proxy"):G.stat===bw.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Zr()},0),F}}function d0(){return"undefined"!=typeof window?window:null}function ay(){return"undefined"!=typeof document?document:null}function Uc(n){return new $I(n,!0)}class Sp{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class IT{constructor(e,t,r,i,u,c,p,y){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Sp(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TT extends IT{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function rb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:st(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Rt(void 0===b||"string"==typeof b),cr.fromBase64String(b||"")):(Rt(void 0===b||b instanceof Uint8Array),cr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?le.UNKNOWN:dp(y.code);return new Re(b,y.message||"")}(c);t=new Bv(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=su(n,r.document.name),u=Kr(r.document.updateTime),c=new wi({mapValue:{fields:r.document.fields}}),p=Tn.newFoundDocument(i,u,c);t=new Nc(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=su(n,r.document),u=r.readTime?Kr(r.readTime):At.min(),c=Tn.newNoDocument(i,u);t=new Nc([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=su(n,r.document);t=new Nc([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Ct(r.count||0);t=new Vv(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?At.min():u.readTime?Kr(u.readTime):At.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Om(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=ns(p)?{documents:ib(i,p)}:{query:sb(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=jv(i,u.resumeToken):u.snapshotVersion.compareTo(At.min())>0&&(c.readTime=fh(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function ab(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Om(this.M),t.removeTarget=e,this.Oo(t)}}class AT extends IT{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function qI(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let u=Kr(r.updateTime?r.updateTime:i);return u.isEqual(At.min())&&(u=Kr(i)),new zw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.Jo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Om(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ou(this.M,r))};this.Oo(t)}}class Hb extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ro(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class Gb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(On(t),this.su=!1):Fe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ST{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(p=>{r.enqueueAndForget((0,_e.Z)(function*(){var y;cl(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,_e.Z)(function*(b){const S=Ze(b);S.lu.add(4),yield kh(S),S._u.set("Unknown"),S.lu.delete(4),yield Oh(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this._u=new Gb(r,i)}}function Oh(n){return uy.apply(this,arguments)}function uy(){return uy=(0,_e.Z)(function*(n){if(cl(n))for(const e of n.fu)yield e(!0)}),uy.apply(this,arguments)}function kh(n){return h0.apply(this,arguments)}function h0(){return h0=(0,_e.Z)(function*(n){for(const e of n.fu)yield e(!1)}),h0.apply(this,arguments)}function Mp(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),dy(t)?cy(t):Op(t).Co()&&ly(t,e))}function xp(n,e){const t=Ze(n),r=Op(t);t.hu.delete(e),r.Co()&&f0(t,e),0===t.hu.size&&(r.Co()?r.ko():cl(t)&&t._u.set("Unknown"))}function ly(n,e){n.wu.Z(e.targetId),Op(n).Qo(e)}function f0(n,e){n.wu.Z(e),Op(n).jo(e)}function cy(n){n.wu=new BI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Op(n).start(),n._u.iu()}function dy(n){return cl(n)&&!Op(n).Do()&&n.hu.size>0}function cl(n){return 0===Ze(n).lu.size}function qb(n){n.wu=void 0}function eM(n){return hy.apply(this,arguments)}function hy(){return hy=(0,_e.Z)(function*(n){n.hu.forEach((e,t)=>{ly(n,e)})}),hy.apply(this,arguments)}function tM(n,e){return zb.apply(this,arguments)}function zb(){return zb=(0,_e.Z)(function*(n,e){qb(n),dy(n)?(n._u.uu(e),cy(n)):n._u.set("Unknown")}),zb.apply(this,arguments)}function nM(n,e,t){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,_e.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Bv&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield p0(n,r)}else if(e instanceof Nc?n.wu.ut(e):e instanceof Vv?n.wu._t(e):n.wu.ht(e),!t.isEqual(At.min()))try{const r=yield s0(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.wu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.hu.get(y);b&&i.hu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.hu.get(p);if(!y)return;i.hu.set(p,y.withResumeToken(cr.EMPTY_BYTE_STRING,y.snapshotVersion)),f0(i,p);const b=new sl(y.target,p,1,y.sequenceNumber);ly(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield p0(n,r)}var r}),Wb.apply(this,arguments)}function p0(n,e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,_e.Z)(function*(n,e,t){if(!au(e))throw e;n.lu.add(1),yield kh(n),n._u.set("Offline"),t||(t=()=>s0(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Oh(n)}))}),Kb.apply(this,arguments)}function MT(n,e){return e().catch(t=>p0(n,t,e))}function Rp(n){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,_e.Z)(function*(n){const e=Ze(n),t=jc(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;rM(e);)try{const i=yield vT(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,Zb(e,i)}catch(i){yield p0(e,i)}fy(e)&&g0(e)}),Ph.apply(this,arguments)}function rM(n){return cl(n)&&n.cu.length<10}function Zb(n,e){n.cu.push(e);const t=jc(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function fy(n){return cl(n)&&!jc(n).Do()&&n.cu.length>0}function g0(n){jc(n).start()}function Yb(n){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,_e.Z)(function*(n){jc(n).Xo()}),Qb.apply(this,arguments)}function m0(n){return py.apply(this,arguments)}function py(){return py=(0,_e.Z)(function*(n){const e=jc(n);for(const t of n.cu)e.Ho(t.mutations)}),py.apply(this,arguments)}function Jb(n,e,t){return gy.apply(this,arguments)}function gy(){return gy=(0,_e.Z)(function*(n,e,t){const r=n.cu.shift(),i=Kv.from(r,e,t);yield MT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rp(n)}),gy.apply(this,arguments)}function iM(n,e){return my.apply(this,arguments)}function my(){return my=(0,_e.Z)(function*(n,e){var t;e&&jc(n).zo&&(yield(t=(0,_e.Z)(function*(r,i){if(Qw(u=i.code)&&u!==le.ABORTED){const c=r.cu.shift();jc(r).No(),yield MT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Rp(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),fy(n)&&g0(n)}),my.apply(this,arguments)}function Xb(n,e){return Np.apply(this,arguments)}function Np(){return Np=(0,_e.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=cl(t);t.lu.add(3),yield kh(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Oh(t)}),Np.apply(this,arguments)}function y0(n,e){return eD.apply(this,arguments)}function eD(){return eD=(0,_e.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield Oh(t)):e||(t.lu.add(2),yield kh(t),t._u.set("Unknown"))}),eD.apply(this,arguments)}function Op(n){return n.mu||(n.mu=function(e,t,r){const i=Ze(e);return i.tu(),new TT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:eM.bind(null,n),Jr:tM.bind(null,n),Ko:nM.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.mu.No(),dy(n)?cy(n):n._u.set("Unknown")):(yield n.mu.stop(),qb(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function jc(n){return n.gu||(n.gu=function(e,t,r){const i=Ze(e);return i.tu(),new AT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Yb.bind(null,n),Jr:iM.bind(null,n),Yo:m0.bind(null,n),Jo:Jb.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.No(),yield Rp(n)):(yield n.gu.stop(),n.cu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class _0{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new _0(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(n,e){if(On("AsyncQueue",`${e}: ${n}`),au(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Lh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=xm(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new Lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Lh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xT{constructor(){this.yu=new $n($e.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):st():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Vh{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Vh(e,t,Lh.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class v0{constructor(){this.Iu=void 0,this.listeners=[]}}class RT{constructor(){this.queries=new rl(e=>Fw(e),ih),this.onlineState="Unknown",this.Tu=new Set}}function Ms(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new v0),i)try{u.Iu=yield t.onListen(r)}catch(c){const p=Fh(c,`Initialization of query '${Nv(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&yy(t)}),E0.apply(this,arguments)}function kp(n,e){return w0.apply(this,arguments)}function w0(){return w0=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),w0.apply(this,arguments)}function NT(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&yy(t)}function b0(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function yy(n){n.Tu.forEach(e=>{e.next()})}class _y{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Vh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class OT{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class D0{constructor(e){this.M=e}li(e){return su(this.M,e)}fi(e){return e.metadata.exists?nb(this.M,e.document,!1):Tn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Kr(e)}}class tD{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nD(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=en.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new D0(this.M);for(const i of e)if(i.metadata.queries){const u=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||mn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function Bb(n,e,t,r){return Qm.apply(this,arguments)}(e.localStore,new D0(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield ET(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function nD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rD{constructor(e){this.key=e}}class vy{constructor(e){this.key=e}}class ho{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=mn(),this.mutatedKeys=mn(),this.Lu=Vw(e),this.Uu=new Lh(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new xT,i=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y=Ic(this.query)&&i.size===this.query.limit?i.last():null,b=up(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=Ov(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),ne=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let be=!1;F&&B?F.data.isEqual(B.data)?G!==ne&&(r.track({type:3,doc:B}),be=!0):this.Qu(F,B)||(r.track({type:2,doc:B}),be=!0,(y&&this.Lu(B,y)>0||b&&this.Lu(B,b)<0)&&(p=!0)):!F&&B?(r.track({type:0,doc:B}),be=!0):F&&!B&&(r.track({type:1,doc:F}),be=!0,(y||b)&&(p=!0)),be&&(B?(c=c.add(B),u=ne?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),Ic(this.query)||up(this.query))for(;c.size>this.query.limit;){const S=Ic(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Ku:r,ei:p,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((b,S)=>function(M,F){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(M)-B(F)}(b.type,S.type)||this.Lu(b.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,y=p!==this.$u;return this.$u=p,0!==u.length||y?{snapshot:new Vh(this.query,e.Uu,i,u,e.mutatedKeys,0===p,y,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new xT,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=mn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new vy(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new rD(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=mn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Vh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class kT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sM{constructor(e){this.key=e,this.Xu=!1}}class PT{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new rl(p=>Fw(p),ih),this.ea=new Map,this.na=new Set,this.sa=new $n($e.comparator),this.ia=new Map,this.ra=new Xm,this.oa={},this.ua=new Map,this.aa=$o.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function iD(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,_e.Z)(function*(n,e){const t=Sy(n);let r,i;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Yu();else{const c=yield Sh(t.localStore,Is(e));t.isPrimaryClient&&Mp(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield I0(t,e,r,"current"===p)}return i}),C0.apply(this,arguments)}function I0(n,e,t,r){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,_e.Z)(function*(n,e,t,r){n.ha=(S,M,F)=>{return(B=(0,_e.Z)(function*(G,ne,be,Qe){let Ve=ne.view.Gu(be);Ve.ei&&(Ve=yield Ip(G.localStore,ne.query,!1).then(({documents:Et})=>ne.view.Gu(Et,Ve)));const Ye=Qe&&Qe.targetChanges.get(ne.targetId),We=ne.view.applyChanges(Ve,G.isPrimaryClient,Ye);return R0(G,ne.targetId,We.zu),We.snapshot}),function(G,ne,be,Qe){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield Ip(n.localStore,e,!0),u=new ho(e,i.hi),c=u.Gu(i.documents),p=pp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);R0(n,t,y.zu);const b=new kT(e,t,u);return n.ta.set(e,b),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),y.snapshot}),Ey.apply(this,arguments)}function FT(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(u=>!ih(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),xp(t.remoteStore,r.targetId),$c(t,r.targetId)}).catch(ll))):($c(t,r.targetId),yield Mh(t.localStore,r.targetId,!0))}),sD.apply(this,arguments)}function wy(){return wy=(0,_e.Z)(function*(n,e,t){const r=k0(n);try{const i=yield function(u,c){const p=Ze(u),y=Yn.now(),b=c.reduce((M,F)=>M.add(F.key),mn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.ai.qs(M,b).next(F=>{S=F;const B=[];for(const G of c){const ne=xc(G,S.get(G.key));null!=ne&&B.push(new ah(G.key,ne,Iv(ne.value.mapValue),dr.exists(!0)))}return p.$s.addMutationBatch(M,y,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.oa[u.currentUser.toKey()];y||(y=new $n(Ut)),y=y.insert(c,p),u.oa[u.currentUser.toKey()]=y}(r,i.batchId,t),yield dl(r,i.changes),yield Rp(r.remoteStore)}catch(i){const u=Fh(i,"Failed to persist write");t.reject(u)}}),wy.apply(this,arguments)}function aD(n,e){return T0.apply(this,arguments)}function T0(){return T0=(0,_e.Z)(function*(n,e){const t=Ze(n);try{const r=yield o0(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ia.get(u);c&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Rt(c.Xu):i.removedDocuments.size>0&&(Rt(c.Xu),c.Xu=!1))}),yield dl(t,r,e)}catch(r){yield ll(r)}}),T0.apply(this,arguments)}function A0(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((u,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ze(u);p.onlineState=c;let y=!1;p.queries.forEach((b,S)=>{for(const M of S.listeners)M.Eu(c)&&(y=!0)}),y&&yy(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function S0(n,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,_e.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),u=i&&i.key;if(u){let c=new $n($e.comparator);c=c.insert(u,Tn.newNoDocument(u,At.min()));const p=mn().add(u),y=new fp(At.min(),new Map,new Hn(Ut),c,p);yield aD(r,y),r.sa=r.sa.remove(u),r.ia.delete(e),fD(r)}else yield Mh(r.localStore,e,!1).then(()=>$c(r,e,t)).catch(ll)}),Pp.apply(this,arguments)}function uD(n,e){return M0.apply(this,arguments)}function M0(){return M0=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield r0(t.localStore,e);dD(t,r,null),cD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dl(t,i)}catch(i){yield ll(i)}}),M0.apply(this,arguments)}function lD(n,e,t){return by.apply(this,arguments)}function by(){return by=(0,_e.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,c){const p=Ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.$s.lookupMutationBatch(y,c).next(S=>(Rt(null!==S),b=S.keys(),p.$s.removeMutationBatch(y,S))).next(()=>p.$s.performConsistencyCheck(y)).next(()=>p.ai.qs(y,b))})}(r.localStore,e);dD(r,e,t),cD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dl(r,i)}catch(i){yield ll(i)}}),by.apply(this,arguments)}function x0(){return x0=(0,_e.Z)(function*(n,e){const t=Ze(n);cl(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Fh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),x0.apply(this,arguments)}function cD(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function dD(n,e,t){const r=Ze(n);let i=r.oa[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function $c(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||hD(n,r)})}function hD(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(xp(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),fD(n))}function R0(n,e,t){for(const r of t)r instanceof rD?(n.ra.addReference(r.key,e),VT(n,r)):r instanceof vy?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||hD(n,r.key)):st()}function VT(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.na.add(r),fD(n))}function fD(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new $e(en.fromString(e)),r=n.aa.next();n.ia.set(r,new sM(t)),n.sa=n.sa.insert(t,r),Mp(n.remoteStore,new sl(Is(nl(t.path)),r,2,Li.A))}}function dl(n,e,t){return pD.apply(this,arguments)}function pD(){return pD=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,y)=>{c.push(r.ha(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=Dp.Js(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,_e.Z)(function*(y,b){const S=Ze(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>he.forEach(b,F=>he.forEach(F.zs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>he.forEach(F.Hs,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!au(M))throw M;Fe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.si.get(F),ne=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.si=S.si.insert(F,ne)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),pD.apply(this,arguments)}function oM(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,_e.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield _T(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new Re(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dl(t,r.ci)}var i}),gD.apply(this,arguments)}function BT(n,e){const t=Ze(n),r=t.ia.get(e);if(r&&r.Xu)return mn().add(r.key);{let i=mn();const u=t.ea.get(e);if(!u)return i;for(const c of u){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function Dy(n,e){return N0.apply(this,arguments)}function N0(){return N0=(0,_e.Z)(function*(n,e){const t=Ze(n),r=yield Ip(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&R0(t,e.targetId,i.zu),i}),N0.apply(this,arguments)}function UT(n,e){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,_e.Z)(function*(n,e){const t=Ze(n);return u0(t.localStore,e).then(r=>dl(t,r))}),Cy.apply(this,arguments)}function Hc(n,e,t,r){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(c,p){const y=Ze(c),b=Ze(y.$s);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.ln(S,p).next(M=>M?y.ai.qs(S,M):he.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Rp(i.remoteStore):"acknowledged"===t||"rejected"===t?(dD(i,e,r||null),cD(i,e),p=e,Ze(Ze(i.localStore).$s).dn(p)):st(),yield dl(i,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Iy.apply(this,arguments)}function Fp(){return Fp=(0,_e.Z)(function*(n,e){const t=Ze(n);if(Sy(t),k0(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mD(t,r.toArray());t.ca=!0,yield y0(t.remoteStore,!0);for(const u of i)Mp(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>($c(t,c),Mh(t.localStore,c,!0))),xp(t.remoteStore,c)}),yield i,yield mD(t,r),function(u){const c=Ze(u);c.ia.forEach((p,y)=>{xp(c.remoteStore,y)}),c.ra.bi(),c.ia=new Map,c.sa=new $n($e.comparator)}(t),t.ca=!1,yield y0(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function mD(n,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const c of e){let p;const y=r.ea.get(c);if(y&&0!==y.length){p=yield Sh(r.localStore,Is(y[0]));for(const b of y){const S=r.ta.get(b),M=yield Dy(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield Ym(r.localStore,c);p=yield Sh(r.localStore,b),yield I0(r,Ty(b),c,!1)}i.push(p)}return r.Zu.Ko(u),i}),Lp.apply(this,arguments)}function Ty(n){return xv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ay(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Os()}function aM(n,e,t,r){return yD.apply(this,arguments)}function yD(){return yD=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);if(i.ca)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield u0(i.localStore,Lw(u[0])),p=fp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield dl(i,c,p);break}case"rejected":yield Mh(i.localStore,e,!0),$c(i,e,r);break;default:st()}}),yD.apply(this,arguments)}function uM(n,e,t){return _D.apply(this,arguments)}function _D(){return _D=(0,_e.Z)(function*(n,e,t){const r=Sy(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const u=yield Ym(r.localStore,i),c=yield Sh(r.localStore,u);yield I0(r,Ty(u),c.targetId,!1),Mp(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield Mh(r.localStore,i,!1).then(()=>{xp(r.remoteStore,i),$c(r,i)}).catch(ll))}}),_D.apply(this,arguments)}function Sy(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S0.bind(null,e),e.Zu.Ko=NT.bind(null,e.eventManager),e.Zu.la=b0.bind(null,e.eventManager),e}function k0(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lD.bind(null,e),e}class vD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Uc(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Lb(this.persistence,new n0,e.initialUser,this.M)}_a(e){return new JS(l0.Wi,this.M)}da(e){return new sy}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ED extends vD{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield k0(r.ga.syncEngine),yield Rp(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return Lb(this.persistence,new n0,e.initialUser,this.M)}wa(e){return new Ob(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new Ah(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,d0(),ay(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new sy}}class wD extends ED{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof Nh&&(r.sharedClientState.syncEngine={kr:Hc.bind(null,i),Mr:aM.bind(null,i),Or:uM.bind(null,i),Os:Ay.bind(null,i),Nr:UT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,_e.Z)(function*(c){yield function O0(n,e){return Fp.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=d0();if(!Nh.vt(t))throw new Re(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nh(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class My{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>A0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=oM.bind(null,r.syncEngine),yield y0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new RT}createDatastore(e){const t=Uc(e.databaseInfo.databaseId),r=new oy(e.databaseInfo);return new Hb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>A0(this.syncEngine,p,0),c=c0.vt()?new c0:new XS,new ST(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const S=new PT(r,i,u,c,p,y);return b&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ze(t);Fe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield kh(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function P0(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $T{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new zr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new OT(JSON.parse(u),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,_e.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class bD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(u,c){const p=Ze(u),y=Om(p.M)+"/documents",b={documents:c.map(B=>gp(p.M,B))},S=yield p.co("BatchGetDocuments",y,b),M=new Map;S.forEach(B=>{const G=function GI(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=su(t,r.found.name),u=Kr(r.found.updateTime),c=new wi({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=su(t,r.missing),u=Kr(r.readTime);return Tn.newNoDocument(i,u)}(n,e):st()}(p.M,B);M.set(G.key.toString(),G)});const F=[];return c.forEach(B=>{const G=M.get(B.toString());Rt(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=$e.fromPath(i);e.mutations.push(new Yw(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(i,u){const c=Ze(i),p=Om(c.M)+"/documents",y={writes:u.map(b=>ou(c.M,b))};yield c.ro("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Re(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class F0{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Sp(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new bD(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ca(u)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Qw(t)}return!1}}class lM{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ei.UNAUTHENTICATED,this.clientId=AI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Fh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function L0(n,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(u){r.isEqual(u)||(yield _T(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Vp.apply(this,arguments)}function DD(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CD(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Xb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Xb(e.remoteStore,u)),n.onlineComponents=e}),V0.apply(this,arguments)}function CD(n){return ID.apply(this,arguments)}function ID(){return ID=(0,_e.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield L0(n,new vD)),n.offlineComponents}),ID.apply(this,arguments)}function B0(n){return U0.apply(this,arguments)}function U0(){return U0=(0,_e.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield DD(n,new My)),n.onlineComponents}),U0.apply(this,arguments)}function TD(n){return CD(n).then(e=>e.persistence)}function AD(n){return CD(n).then(e=>e.localStore)}function HT(n){return B0(n).then(e=>e.remoteStore)}function SD(n){return B0(n).then(e=>e.syncEngine)}function Bp(n){return MD.apply(this,arguments)}function MD(){return MD=(0,_e.Z)(function*(n){const e=yield B0(n),t=e.eventManager;return t.onListen=iD.bind(null,e.syncEngine),t.onUnlisten=FT.bind(null,e.syncEngine),t}),MD.apply(this,arguments)}function qT(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,p,y){const b=new xy({next:M=>{u.enqueueAndForget(()=>kp(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new _y(nl(c.path),b,{includeMetadataChanges:!0,Du:!0});return Ms(i,S)}(yield Bp(n),n.asyncQueue,e,t,r)})),r.promise}function s(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,u,c,p,y){const b=new xy({next:M=>{u.enqueueAndForget(()=>kp(i,S)),M.fromCache&&"server"===p.source?y.reject(new Re(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new _y(c,b,{includeMetadataChanges:!0,Du:!0});return Ms(i,S)}(yield Bp(n),n.asyncQueue,e,t,r)})),r.promise}const g=new Map;function v(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w(n,e,t,r){if(!0===e&&!0===r)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function D(n){if(!$e.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function A(n){if($e.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function x(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function O(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=x(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function U(n,e){if(e<=0)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Z{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,w("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ye{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z({}),this._settingsFrozen=!1,e instanceof Ea?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DI;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Iw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=g.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),g.delete(e),t.terminate())}(this),Promise.resolve()}}class Ne{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ee(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ne(this.firestore,e,this._key)}}class Ge{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ge(this.firestore,e,this._query)}}class Ee extends Ge{constructor(e,t,r){super(e,t,nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new $e(e))}withConverter(e){return new Ee(this.firestore,e,this._path)}}function mt(n,e,...t){if(n=(0,He.m9)(n),v("collection","path",e),n instanceof ye){const r=en.fromString(e,...t);return A(r),new Ee(n,null,r)}{if(!(n instanceof Ne||n instanceof Ee))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return A(r),new Ee(n.firestore,null,r)}}function sn(n,e,...t){if(n=(0,He.m9)(n),1===arguments.length&&(e=AI.R()),v("doc","path",e),n instanceof ye){const r=en.fromString(e,...t);return D(r),new Ne(n,null,new $e(r))}{if(!(n instanceof Ne||n instanceof Ee))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return D(r),new Ne(n.firestore,n instanceof Ee?n.converter:null,new $e(r))}}function is(n,e){return n=(0,He.m9)(n),e=(0,He.m9)(e),(n instanceof Ne||n instanceof Ee)&&(e instanceof Ne||e instanceof Ee)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hl(n,e){return n=(0,He.m9)(n),e=(0,He.m9)(e),n instanceof Ge&&e instanceof Ge&&n.firestore===e.firestore&&ih(n._query,e._query)&&n.converter===e.converter}class j0{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Sp(this,"async_queue_retry"),this.Ua=()=>{const t=ay();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=ay();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=ay();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new zr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!au(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,On("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=_0.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(i),i}qa(){this.Fa&&st()}verifyOperationInProgress(){}ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Up(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class $0{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class An extends ye{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new j0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ry(this),this._firestoreClient.terminate()}}function nr(n){return n._firestoreClient||Ry(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ry(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _v(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new lM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function fM(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield L0(n,t),yield DD(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function pM(n){if(n._initialized||n._terminated)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(cr.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jp{constructor(e){this._methodName=e}}class ND{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const bO=/^__.*__$/;class DO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ah(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ia(e,this.data,t,this.fieldTransforms)}}class gM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ah(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class OD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new OD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return FD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(mM(this.Ya)&&bO.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class CO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Uc(e)}uc(e,t,r,i=!1){return new OD({Ya:e,methodName:t,oc:r,path:wr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function $p(n){const e=n._freezeSettings(),t=Uc(n._databaseId);return new CO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kD(n,e,t,r,i,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,i);ZT("Data must be an object, but it was:",c,r);const p=vM(r,c);let y,b;if(u.merge)y=new wc(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=YT(e,M,t);if(!c.contains(F))throw new Re(le.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);wM(S,F)||S.push(F)}y=new wc(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new DO(new wi(p),y,b)}class G0 extends jp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G0}}function yM(n,e,t){return new OD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class zT extends jp{_toFieldTransform(e){return new oh(e.path,new sh)}isEqual(e){return e instanceof zT}}class IO extends jp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=yM(this,e,!0),r=this.ac.map(u=>Hp(u,t)),i=new Ac(r);return new oh(e.path,i)}isEqual(e){return this===e}}class TO extends jp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=yM(this,e,!0),r=this.ac.map(u=>Hp(u,t)),i=new Sc(r);return new oh(e.path,i)}isEqual(e){return this===e}}class AO extends jp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Mc(e.M,jw(e.M,this.cc));return new oh(e.path,t)}isEqual(e){return this===e}}function WT(n,e,t,r){const i=n.uc(1,e,t);ZT("Data must be an object, but it was:",i,r);const u=[],c=wi.empty();va(r,(y,b)=>{const S=PD(e,y,t);b=(0,He.m9)(b);const M=i.nc(S);if(b instanceof G0)u.push(S);else{const F=Hp(b,M);null!=F&&(u.push(S),c.set(S,F))}});const p=new wc(u);return new gM(c,p,i.fieldTransforms)}function KT(n,e,t,r,i,u){const c=n.uc(1,e,t),p=[YT(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(YT(e,u[F])),y.push(u[F+1]);const b=[],S=wi.empty();for(let F=p.length-1;F>=0;--F)if(!wM(b,p[F])){const B=p[F];let G=y[F];G=(0,He.m9)(G);const ne=c.nc(B);if(G instanceof G0)b.push(B);else{const be=Hp(G,ne);null!=be&&(b.push(B),S.set(B,be))}}const M=new wc(b);return new gM(S,M,c.fieldTransforms)}function _M(n,e,t,r=!1){return Hp(t,n.uc(r?4:3,e))}function Hp(n,e){if(EM(n=(0,He.m9)(n)))return ZT("Unsupported field value:",e,n),vM(n,e);if(n instanceof jp)return function(t,r){if(!mM(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Hp(c,r.sc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,He.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Yn.fromDate(t);return{timestampValue:fh(r.M,i)}}if(t instanceof Yn){const i=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fh(r.M,i)}}if(t instanceof ND)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:jv(r.M,t._byteString)};if(t instanceof Ne){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${x(t)}`)}(n,e)}function vM(n,e){const t={};return Em(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,(r,i)=>{const u=Hp(i,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function EM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof ND||n instanceof fl||n instanceof Ne||n instanceof jp)}function ZT(n,e,t){if(!EM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=x(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function YT(n,e,t){if((e=(0,He.m9)(e))instanceof Gc)return e._internalPath;if("string"==typeof e)return PD(n,e);throw FD("Field path arguments must be of type string or ",n,!1,void 0,t)}const SO=new RegExp("[~\\*/\\[\\]]");function PD(n,e,t){if(e.search(SO)>=0)throw FD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch(r){throw FD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(le.INVALID_ARGUMENT,p+n+y)}function wM(n,e){return n.some(t=>t.isEqual(e))}class q0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class MO extends q0{data(){return super.data()}}function LD(n,e){return"string"==typeof e?PD(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}class Gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qc extends q0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class z0 extends qc{data(e={}){return super.data(e)}}class Bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new z0(this._firestore,this._userDataWriter,r.key,r,new Gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new z0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new z0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:xO(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function bM(n,e){return n instanceof qc&&e instanceof qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bh&&e instanceof Bh&&n._firestore===e._firestore&&hl(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function DM(n){if(up(n)&&0===n.explicitOrderBy.length)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W0{}function Uh(n,...e){for(const t of e)n=t._apply(n);return n}class RO extends W0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=$p(e.firestore),r=function(i,u,c,p,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){MM(S,b);const B=[];for(const G of S)B.push(SM(p,i,G));M={arrayValue:{values:B}}}else M=SM(p,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||MM(S,b),M=_M(c,"where",S,"in"===b||"not-in"===b);const F=Wr.create(y,b,M);return function(B,G){if(G.S()){const be=Im(B);if(null!==be&&!be.isEqual(G.field))throw new Re(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${G.field.toString()}'`);const Qe=Cm(B);null!==Qe&&xM(0,G.field,Qe)}const ne=function(be,Qe){for(const Ve of be.filters)if(Qe.indexOf(Ve.op)>=0)return Ve.op;return null}(B,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ne)throw new Re(le.INVALID_ARGUMENT,ne===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ge(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class OO extends W0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Cc(i,u);return function(p,y){if(null===Cm(p)){const b=Im(p);null!==b&&xM(0,b,y.field)}}(r,c),c}(e._query,this.hc,this.dc);return new Ge(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ca(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CM extends W0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Ge(e.firestore,e.converter,Rv(e._query,this._c,this.wc))}}class IM extends W0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=AM(e,this.type,this.mc,this.gc);return new Ge(e.firestore,e.converter,(i=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class TM extends W0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=AM(e,this.type,this.mc,this.gc);return new Ge(e.firestore,e.converter,(i=t,new Ca((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function AM(n,e,t,r){if(t[0]=(0,He.m9)(t[0]),t[0]instanceof q0)return function(i,u,c,p,y){if(!p)throw new Re(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of Tc(i))if(S.field.isKeyField())b.push(tp(u,p.key));else{const M=p.data.field(S.field);if(mv(M))throw new Re(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Re(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new tl(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=$p(n.firestore);return function(u,c,p,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(le.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const G=b[B];if(M[B].field.isKeyField()){if("string"!=typeof G)throw new Re(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!Tm(u)&&-1!==G.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const ne=u.path.child(en.fromString(G));if(!$e.isDocumentKey(ne))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const be=new $e(ne);F.push(tp(c,be))}else{const ne=_M(p,y,G);F.push(ne)}}return new tl(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function SM(n,e,t){if("string"==typeof(t=(0,He.m9)(t))){if(""===t)throw new Re(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tm(e)&&-1!==t.indexOf("/"))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!$e.isDocumentKey(r))throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tp(n,new $e(r))}if(t instanceof Ne)return tp(n,t._key);throw new Re(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${x(t)}.`)}function MM(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xM(n,e,t){if(!t.isEqual(e))throw new Re(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QT{convertValue(e,t="none"){switch(Xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return va(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ND(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){const t=nu(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);Rt(Gv(r));const i=new Ea(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return i.isEqual(t)||On(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function VD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jO extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}}class RM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$p(e)}set(e,t,r){this._verifyNotCommitted();const i=jh(e,this._firestore),u=VD(i.converter,t,r),c=kD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=jh(e,this._firestore);let c;return c="string"==typeof(t=(0,He.m9)(t))||t instanceof Gc?KT(this._dataReader,"WriteBatch.update",u._key,t,r,i):WT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jh(e,this._firestore);return this._mutations=this._mutations.concat(new uh(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jh(n,e){if((n=(0,He.m9)(n)).firestore!==e)throw new Re(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qp extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}}function NM(n,e,t){n=O(n,Ne);const r=O(n.firestore,An),i=VD(n.converter,e,t);return Ny(r,[kD($p(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function OM(n,e,t,...r){n=O(n,Ne);const i=O(n.firestore,An),u=$p(i);let c;return c="string"==typeof(e=(0,He.m9)(e))||e instanceof Gc?KT(u,"updateDoc",n._key,e,t,r):WT(u,"updateDoc",n._key,e),Ny(i,[c.toMutation(n._key,dr.exists(!0))])}function kM(n,...e){var t,r,i;n=(0,He.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Up(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Up(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof Ne)b=O(n.firestore,An),S=nl(n._key.path),y={next:M=>{e[c]&&e[c](JT(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=O(n,Ge);b=O(M.firestore,An),S=M._query;const F=new qp(b);y={next:B=>{e[c]&&e[c](new Bh(b,F,M,B))},error:e[c+1],complete:e[c+2]},DM(n._query)}return function(M,F,B,G){const ne=new xy(G),be=new _y(F,ne,B);return M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ms(yield Bp(M),be)})),()=>{ne.pa(),M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return kp(yield Bp(M),be)}))}}(nr(b),S,p,y)}function Ny(n,e){return function(t,r){const i=new zr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function oD(n,e,t){return wy.apply(this,arguments)}(yield SD(t),r,i)})),i.promise}(nr(n),e)}function JT(n,e,t){const r=t.docs.get(e._key),i=new qp(n);return new qc(n,i,e._key,r,new Gp(t.hasPendingWrites,t.fromCache),e.converter)}class QO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$p(e)}get(e){const t=jh(e,this._firestore),r=new jO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new q0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new q0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=jh(e,this._firestore),u=VD(i.converter,t,r),c=kD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=jh(e,this._firestore);let c;return c="string"==typeof(t=(0,He.m9)(t))||t instanceof Gc?KT(this._dataReader,"Transaction.update",u._key,t,r,i):WT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jh(e,this._firestore),r=new qp(this._firestore);return super.get(e).then(i=>new qc(this._firestore,r,t._key,i._document,new Gp(!1,!1),t.converter))}}function XT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function FM(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function LM(){if(!function Tw(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jf=uc.SDK_VERSION,(0,uc._registerComponent)(new Bg.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new An(i,new Cw(t.getProvider("auth-internal")),new pv(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,uc.registerVersion)(bI,"3.4.7",n),(0,uc.registerVersion)(bI,"3.4.7","esm2017")}();class K0{constructor(e){this._delegate=e}static fromBase64String(e){return LM(),new K0(fl.fromBase64String(e))}static fromUint8Array(e){return FM(),new K0(fl.fromUint8Array(e))}toBase64(){return LM(),this._delegate.toBase64()}toUint8Array(){return FM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(n){return function ok(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ak{enableIndexedDbPersistence(e,t){return function pO(n,e){pM(n=O(n,An));const t=nr(n),r=n._freezeSettings(),i=new My;return fM(t,i,new ED(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gO(n){pM(n=O(n,An));const e=nr(n),t=n._freezeSettings(),r=new My;return fM(e,r,new wD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mO(n){if(n._initialized&&!n._terminated)throw new Re(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!As.vt())return Promise.resolve();const i=r+"main";yield As.delete(i)}),function(r){return t.apply(this,arguments)})(Km(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Le(n,e,t,r={}){var i;const u=(n=O(n,ye))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Xf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Ei.MOCK_USER;else{c=(0,He.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ei(y)}n._authCredentials=new CI(new Dw(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function _O(n){return function GT(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield TD(n),t=yield HT(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.lu.delete(0),Oh(i)}(t)}))}(nr(n=O(n,An)))}(this._delegate)}disableNetwork(){return function vO(n){return function cM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield TD(n),t=yield HT(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const u=Ze(i);u.lu.add(0),yield kh(u),u._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(nr(n=O(n,An)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,w("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yO(n){return function(e){const t=new zr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function LT(n,e){return x0.apply(this,arguments)}(yield SD(e),t)})),t.promise}(nr(n=O(n,An)))}(this._delegate)}onSnapshotsInSync(e){return function YO(n,e){return function o(n,e){const t=new xy(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Bp(n),i=t,Ze(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Bp(n),i=t,void Ze(r).Tu.delete(i);var r,i}))}}(nr(n=O(n,An)),Up(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oy(this,mt(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ta(this,sn(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function Kt(n,e){if(n=O(n,ye),v("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ge(n,null,(t=e,new Ca(en.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JO(n,e){return function a(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(i=n,B0(i).then(u=>u.datastore));var i;new F0(n.asyncQueue,r,e,t).run()})),t.promise}(nr(n=O(n,An)),t=>e(new QO(n,t)))}(this._delegate,t=>e(new BM(this,t)))}batch(){return nr(this._delegate),new UM(new RM(this._delegate,e=>Ny(this._delegate,e)))}loadBundle(e){return function EO(n,e){const t=nr(n=O(n,An)),r=new $0;return function l(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return P0(y,b);if(y instanceof ArrayBuffer)return P0(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new $T(y,c);var y}(t,Uc(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function jT(n,e,t){const r=Ze(n);var i;(i=(0,_e.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,B){const G=Ze(F),ne=Kr(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",be=>G.ds.getBundleMetadata(be,B.id)).then(be=>!!be&&be.createTime.compareTo(ne)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(nD(y));const b=new tD(y,u.localStore,c.M);let S=yield c.fa();for(;S;){const F=yield b.Nu(S);F&&p._updateProgress(F),S=yield c.fa()}const M=yield b.complete();return yield dl(u,M.Ou,void 0),yield function(F,B){const G=Ze(F);return G.persistence.runTransaction("Save bundle","readwrite",ne=>G.ds.saveBundleMetadata(ne,B))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.Mu)}catch(y){return Xf("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield SD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function wO(n,e){return function d(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.ds.getNamedQuery(u,r))}(yield AD(n),e)}))}(nr(n=O(n,An)),e).then(t=>t?new Ge(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class BD extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new K0(new fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ta.forKey(t,this.firestore,null)}}class BM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}get(e){const t=Wp(e);return this._delegate.get(t).then(r=>new Z0(this._firestore,new qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Wp(e);return r?(XT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Wp(e);return this._delegate.delete(t),this}}class UM{constructor(e){this._delegate=e}set(e,t,r){const i=Wp(e);return r?(XT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new z0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Y0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new zp(e,new BD(e),t),i.set(t,u)),u}}zp.INSTANCES=new WeakMap;class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ta(t,new Ne(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Ta(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oy(this.firestore,mt(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,He.m9)(e))instanceof Ne&&is(this._delegate,e)}set(e,t){t=XT("DocumentReference.set",t);try{return t?NM(this._delegate,e,t):NM(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?OM(this._delegate,e):OM(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KO(n){return Ny(O(n.firestore,An),[new uh(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=jM(e),r=$M(e,i=>new Z0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function HO(n){n=O(n,Ne);const e=O(n.firestore,An),t=nr(e),r=new qp(e);return function dM(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const p=yield function(y,b){const S=Ze(y);return S.persistence.runTransaction("read document","readonly",M=>S.ai.Bs(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=Fh(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield AD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qc(e,r,n._key,i,new Gp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function GO(n){n=O(n,Ne);const e=O(n.firestore,An);return qT(nr(e),n._key,{source:"server"}).then(t=>JT(e,n,t))}(this._delegate):function $O(n){n=O(n,Ne);const e=O(n.firestore,An);return qT(nr(e),n._key).then(t=>JT(e,n,t))}(this._delegate),t.then(r=>new Z0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function jM(n){for(const e of n)if("object"==typeof e&&!eA(e))return e;return{}}function $M(n,e){var t,r;let i;return i=eA(n[0])?n[0]:eA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Z0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bM(this._delegate,e._delegate)}}class Y0 extends Z0{data(e){const t=this._delegate.data(e);return function _m(n,e){n||st()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}where(e,t,r){try{return new Rs(this.firestore,Uh(this._delegate,function NO(n,e,t){const r=e,i=LD("where",n);return new RO(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Uh(this._delegate,function kO(n,e="asc"){const t=e,r=LD("orderBy",n);return new OO(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Uh(this._delegate,function PO(n){return U("limit",n),new CM("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Uh(this._delegate,function FO(n){return U("limitToLast",n),new CM("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Uh(this._delegate,function LO(...n){return new IM("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Uh(this._delegate,function VO(...n){return new IM("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Uh(this._delegate,function BO(...n){return new TM("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Uh(this._delegate,function UO(...n){return new TM("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return hl(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function zO(n){n=O(n,Ge);const e=O(n.firestore,An),t=nr(e),r=new qp(e);return function hM(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,u,c){try{const p=yield Ip(i,u,!0),y=new ho(u,p.hi),b=y.Gu(p.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const y=Fh(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield AD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function WO(n){n=O(n,Ge);const e=O(n.firestore,An),t=nr(e),r=new qp(e);return s(t,n._query,{source:"server"}).then(i=>new Bh(e,r,n,i))}(this._delegate):function qO(n){n=O(n,Ge);const e=O(n.firestore,An),t=nr(e),r=new qp(e);return DM(n._query),s(t,n._query).then(i=>new Bh(e,r,n,i))}(this._delegate),t.then(r=>new tA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=jM(e),r=$M(e,i=>new tA(this.firestore,new Bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kM(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}class lk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Y0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Y0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Y0(this._firestore,r))})}isEqual(e){return bM(this._delegate,e._delegate)}}class Oy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ta(this.firestore,e):null}doc(e){try{return new Ta(this.firestore,void 0===e?sn(this._delegate):sn(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function ZO(n,e){const t=O(n.firestore,An),r=sn(n),i=VD(n.converter,e);return Ny(t,[kD($p(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ta(this.firestore,t))}isEqual(e){return is(this._delegate,e._delegate)}withConverter(e){return new Oy(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function Wp(n){return O(n,Ne)}class nA{constructor(...e){this._delegate=new Gc(...e)}static documentId(){return new nA(wr.keyField().canonicalString())}isEqual(e){return(e=(0,He.m9)(e))instanceof Gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ek(){return new zT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kp(e)}static delete(){const e=function XO(){return new G0("deleteField")}();return e._methodName="FieldValue.delete",new Kp(e)}static arrayUnion(...e){const t=function tk(...n){return new IO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kp(t)}static arrayRemove(...e){const t=function nk(...n){return new TO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kp(t)}static increment(e){const t=function rk(n){return new AO("increment",n)}(e);return t._methodName="FieldValue.increment",new Kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ck={Firestore:VM,GeoPoint:ND,Timestamp:Yn,Blob:K0,Transaction:BM,WriteBatch:UM,DocumentReference:Ta,DocumentSnapshot:Z0,Query:Rs,QueryDocumentSnapshot:Y0,QuerySnapshot:tA,CollectionReference:Oy,FieldPath:nA,FieldValue:Kp,setLogLevel:function uk(n){!function KS(n){Qu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function hk(n){(function dk(n,e){n.INTERNAL.registerComponent(new Bg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ck)))})(n,(e,t)=>new VM(e,t,new ak)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(WC.Z);var HM=k(6451),UD=k(5363),fk=k(6063);class rA extends lr.x{constructor(e=1/0,t=1/0,r=fk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var pk=k(3099);function GM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pk.B)({connector:()=>new rA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qM(n,e){return(0,fi.m)(e)?Bn(()=>n,e):Bn(()=>n)}var iA=k(9468);k(5867);const WM=new Map,vk={activated:!1,tokenObservers:[]},Ek={initialized:!1,enabled:!1};function bi(n){return WM.get(n)||vk}function lu(n,e){WM.set(n,e)}function $D(){return Ek}class Ik{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new He.BH,yield function Tk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new He.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new He.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ZM(n){if(!bi(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function uA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw Ns.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Ns.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw Ns.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),lA.apply(this,arguments)}function Rk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Q0="firebase-app-check-store";let qD=null;function QM(){return qD||(qD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ns.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Q0,{keyPath:"compositeKey"})}}catch(t){e(Ns.create("storage-open",{originalErrorMessage:t.message}))}}),qD)}function cA(){return cA=(0,_e.Z)(function*(n,e){const r=(yield QM()).transaction(Q0,"readwrite"),u=r.objectStore(Q0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Ns.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),cA.apply(this,arguments)}const J0=new Hu.Yd("@firebase/app-check");function tx(n,e){return(0,He.hl)()?function Pk(n,e){return function JM(n,e){return cA.apply(this,arguments)}(function ex(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{J0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nx(){return $D().enabled}function rx(){return pA.apply(this,arguments)}function pA(){return pA=(0,_e.Z)(function*(){const n=$D();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),pA.apply(this,arguments)}const jk={error:"UNKNOWN_ERROR"};function $k(n){return He.US.encodeString(JSON.stringify(n),!1)}function zD(n){return gA.apply(this,arguments)}function gA(){return gA=(0,_e.Z)(function*(n,e=!1){const t=n.app;ZM(t);const r=bi(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&WD(y)&&(i=y)}if(!e&&i&&WD(i))return{token:i.token};let p,c=!1;if(nx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uA(Rk(t,yield rx()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield tx(t,y),lu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?J0.warn(y.message):J0.error(y),u=y}return i?(p={token:i.token},lu(t,Object.assign(Object.assign({},r),{token:i})),yield tx(t,i)):p=Gk(u),c&&sx(t,p),p}),gA.apply(this,arguments)}function yA(n,e){const t=bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),lu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ix(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function Hk(n){const{app:e}=n;return new Ik((0,_e.Z)(function*(){let r;if(r=bi(e).token?yield zD(n,!0):yield zD(n),r.error)throw r.error}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),lu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sx(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function WD(n){return n.expireTimeMillis-Date.now()>0}function Gk(n){return{token:$k(jk),error:n}}class qk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)yA(this.app,t.next);return Promise.resolve()}}const fx="app-check-internal";!function sP(){(0,uc._registerComponent)(new Bg.wA("app-check",n=>function zk(n,e){return new qk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fx).initialize()})),(0,uc._registerComponent)(new Bg.wA(fx,n=>function Wk(n){return{getToken:e=>zD(n,e),addTokenListener:e=>function mA(n,e,t,r){const{app:i}=n,u=bi(i),c={next:t,error:r,type:e};if(lu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&WD(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>yA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,uc.registerVersion)("@firebase/app-check","0.5.5")}();class wA{constructor(){return(0,bn.vb)("app-check")}}"undefined"!=typeof window&&window;var cP=k(127);const gx=new h.OlP("angularfire2.auth.use-emulator"),mx=new h.OlP("angularfire2.auth.settings"),yx=new h.OlP("angularfire2.auth.tenant-id"),_x=new h.OlP("angularfire2.auth.langugage-code"),vx=new h.OlP("angularfire2.auth.use-device-language"),Ex=new h.OlP("angularfire.auth.persistence"),wx=(n,e,t,r,i,u,c,p)=>(0,Lo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let bx=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B){const G=new lr.x,ne=_t(void 0).pipe((0,UD.Q)(c.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Ft.U)(()=>(0,Lo.on)(t,u,r)),(0,Ft.U)(be=>wx(be,u,p,b,S,M,y,F)),GM({bufferSize:1,refCount:!1}));if(yr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_t(null);else{ne.pipe(no()).subscribe();const Qe=ne.pipe(Bn(We=>We.getRedirectResult().then(Et=>Et,()=>null)),bn.iC,GM({bufferSize:1,refCount:!1})),Ve=ne.pipe(Bn(We=>new Vr.y(Et=>({unsubscribe:u.runOutsideAngular(()=>We.onAuthStateChanged(dt=>Et.next(dt),dt=>Et.error(dt),()=>Et.complete()))})))),Ye=ne.pipe(Bn(We=>new Vr.y(Et=>({unsubscribe:u.runOutsideAngular(()=>We.onIdTokenChanged(dt=>Et.next(dt),dt=>Et.error(dt),()=>Et.complete()))}))));this.authState=Qe.pipe(qM(Ve),(0,iA.R)(c.outsideAngular),(0,UD.Q)(c.insideAngular)),this.user=Qe.pipe(qM(Ye),(0,iA.R)(c.outsideAngular),(0,UD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Bn(We=>We?(0,Ln.D)(We.getIdToken()):_t(null))),this.idTokenResult=this.user.pipe(Bn(We=>We?(0,Ln.D)(We.getIdTokenResult()):_t(null))),this.credential=(0,HM.T)(Qe,G,this.authState.pipe(zi(We=>!We))).pipe((0,Ft.U)(We=>(null==We?void 0:We.user)?We:null),(0,iA.R)(c.outsideAngular),(0,UD.Q)(c.insideAngular))}return(0,Lo.pX)(this,ne,u,{spy:{apply:(be,Qe,Ve)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&Ve.then(Ye=>G.next(Ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lo.Dh),h.LFG(Lo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(bn.HU),h.LFG(gx,8),h.LFG(mx,8),h.LFG(yx,8),h.LFG(_x,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Dx(n,e){return function hP(n,e=qC.z){return new Vr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function DA(n,e){return Dx(n,e).pipe((0,Ft.U)(t=>({payload:t,type:"query"})))}function ZD(n,e){return DA(n,e).pipe(Ri(void 0),D_(),(0,Ft.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function Cx(n,e,t){return ZD(n,t).pipe(xr((r,i)=>function pP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function OE(n,e=di.y){return n=null!=n?n:zC,(0,Br.e)((t,r)=>{let i,u=!0;t.subscribe((0,Kn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,Ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function CA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Ix(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ri(void 0),D_(),zi(([r,i])=>i.length>0||!r),(0,Ft.U)(([r,i])=>i),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return DA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),bn.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new Ax(this.ref.doc(e),this.afs)}}class Ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=xx(r,t);return new Tx(i,u,this.afs)}snapshotChanges(){return function fP(n,e){return Dx(n,e).pipe(Ri(void 0),D_(),(0,Ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ln.D)(this.ref.get(e)).pipe(bn.iC)}}class mP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zi(t=>t.length>0),bn.iC):ZD(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ix(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return DA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),bn.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(bn.iC)}}const Sx=new h.OlP("angularfire2.enableFirestorePersistence"),Mx=new h.OlP("angularfire2.firestore.persistenceSettings"),yP=new h.OlP("angularfire2.firestore.settings"),_P=new h.OlP("angularfire2.firestore.use-emulator");function xx(n,e=(t=>t)){return{query:e(n),ref:n}}let YD=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B,G,ne,be,Qe,Ve){this.schedulers=y;const Ye=(0,Lo.on)(t,p,r),We=S;M&&wx(Ye,p,F,G,ne,be,B,Qe),[this.firestore,this.persistenceEnabled$]=(0,Lo.cc)(`${Ye.name}.firestore`,"AngularFirestore",Ye.name,()=>{const Et=p.runOutsideAngular(()=>Ye.firestore());if(u&&Et.settings(u),We&&Et.useEmulator(...We),i&&!yr(c)){const dt=()=>{try{return(0,Ln.D)(Et.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Qt){return"undefined"!=typeof console&&console.warn(Qt),_t(!1)}};return[Et,p.runOutsideAngular(dt)]}return[Et,_t(!1)]},[u,We,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=xx(i,r),p=this.schedulers.ngZone.run(()=>u);return new Tx(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new mP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Ax(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lo.Dh),h.LFG(Lo.xv,8),h.LFG(Sx,8),h.LFG(yP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(bn.HU),h.LFG(Mx,8),h.LFG(_P,8),h.LFG(bx,8),h.LFG(gx,8),h.LFG(mx,8),h.LFG(yx,8),h.LFG(_x,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IA=(()=>{class n{constructor(){cP.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:Mx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[YD]}),n})();const Rx=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(p=>u[p]!==c[p]))(t,i,e))};let Nx=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("image-lists").valueChanges({idField:"id"}).pipe((0,Ft.U)(r=>Rx(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YD))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),vP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Nx,{provide:w_,useExisting:Nx}],imports:[[IA]]}),n})(),Ox=(()=>{class n{constructor(t){this._client=t}getAll(){return _t({dateTime:new Date})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YD))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),TA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ox,{provide:AE,useExisting:Ox}],imports:[[IA]]}),n})(),EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,ao.forChild([{path:"",component:xE}]),b_,RE,NE,vP,TA,ao]]}),n})();const kx=new h.OlP("GETS_ALL_TASK_DTO"),AA=new h.OlP("REMOVES_TASK_DTO"),Px=new h.OlP("SETS_TASK_DTO"),SA=new h.OlP("TASK_DTO_STORAGE"),QD=new h.OlP("REMOVED_TASK_DTO_STORAGE");class wP{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const bP={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const rr="undefined"!=typeof window&&window||{};var JD=(()=>(function(n){n.isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5"}(JD||(JD={})),JD))();let Go;function MA(){if(void 0===rr.document)return"bs4";const n=rr.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),rr.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=rr.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(rr.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(rr.document.head.removeChild(n),"bs4"):(rr.document.head.removeChild(n),"bs5")}function zc(){return void 0===rr||(void 0===rr.__theme?(Go||(Go=MA()),"bs3"===Go):"bs3"===rr.__theme)}function Lx(){return!zc()&&(Go||(Go=MA()),"bs4"===Go)}function X0(){return{isBs3:zc(),isBs4:Lx(),isBs5:!zc()&&!Lx()&&(Go||(Go=MA()),"bs5"===Go)}}function SP(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(u){const c=this[i];this[i]=u,c!==u&&this[r+n]&&this[r+n].emit(u)}})}}"undefined"==typeof console||console;let xA,RP=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{xA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){xA=!1}let Bx=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Tr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!xA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ux=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function OP(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function NP(n){try{return n.frameElement}catch(e){return null}}(function jP(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===$x(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=$x(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function BP(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function UP(n){return!function PP(n){return function LP(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function kP(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function FP(n){return function VP(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||jx(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jx(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function $x(n){if(!jx(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Hx(n){return null!=n&&"false"!=`${n}`}class $P{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,So.q)(1)).subscribe(e)}}let HP=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new $P(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ux),h.LFG(h.R0b),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GP=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=Hx(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=Hx(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(HP),h.Y36(re))},n.\u0275dir=h.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[h.TTD]}),n})(),Gx=(()=>{class n{static forRoot(){return{ngModule:n,providers:[RP,Bx,Ux]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zn]]}),n})();var qP=k(1144);const zP=["addListener","removeListener"],WP=["addEventListener","removeEventListener"],KP=["on","off"];function XD(n,e,t,r){if((0,fi.m)(t)&&(r=t,t=void 0),r)return XD(n,e,t).pipe(Ll(r));const[i,u]=function QP(n){return(0,fi.m)(n.addEventListener)&&(0,fi.m)(n.removeEventListener)}(n)?WP.map(c=>p=>n[c](e,p,t)):function ZP(n){return(0,fi.m)(n.addListener)&&(0,fi.m)(n.removeListener)}(n)?zP.map(qx(n,e)):function YP(n){return(0,fi.m)(n.on)&&(0,fi.m)(n.off)}(n)?KP.map(qx(n,e)):[];if(!i&&(0,qP.z)(n))return(0,Cn.z)(c=>XD(c,e,t))((0,Ao.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Vr.y(c=>{const p=(...y)=>c.next(1<y.length?y:y[0]);return i(p),()=>u(p)})}function qx(n,e){return t=>r=>n[t](e,r)}var JP=k(4408);const eE={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=eE;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new sa.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=eE;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=eE;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var e1=k(7565);const n1=new class t1 extends e1.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class XP extends JP.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=eE.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(eE.cancelAnimationFrame(t),e._scheduled=void 0)}});var eC=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(eC||(eC={})),eC))(),tE=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(tE||(tE={})),tE))();function Zp(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function RA(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===Zp(t,"position")?RA(t):t:r?r.ownerDocument.documentElement:document.documentElement}function NA(n){return null!==n.parentNode?NA(n.parentNode):n}function tC(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function r1(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||RA(n.firstElementChild)===n)}(c)?c:RA(c);const p=NA(n);return p.host?tC(p.host,e):tC(n,NA(e).host)}function zx(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===Zp(e,"transform");)e=e.parentElement;return e||document.documentElement}function Wx(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function Kx(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function Zx(n){const e=n.body,t=n.documentElement;return{height:Kx("Height",e,t),width:Kx("Width",e,t)}}function nE(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function ir(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function Yx(n){const e=n.getBoundingClientRect();if(!(e&&ir(e.top)&&ir(e.left)&&ir(e.bottom)&&ir(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?Zx(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||ir(e.right)&&ir(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||ir(e.bottom)&&ir(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,p=n.offsetHeight-u;if(c||p){const y=Zp(n);c-=Wx(y,"x"),p-=Wx(y,"y"),t.width-=c,t.height-=p}return nE(t)}function OA(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function kA(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=Zp(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:kA(OA(n))}function PA(n,e,t=!1){var r,i,u,c,p,y;const b="HTML"===e.nodeName,S=Yx(n),M=Yx(e),B=(kA(n),Zp(e)),G=parseFloat(B.borderTopWidth),ne=parseFloat(B.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const be=nE({top:(null!==(u=S.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(p=S.left)&&void 0!==p?p:0)-(null!==(y=M.left)&&void 0!==y?y:0)-ne,width:S.width,height:S.height});if(be.marginTop=0,be.marginLeft=0,b){const Qe=parseFloat(B.marginTop),Ve=parseFloat(B.marginLeft);ir(be.top)&&(be.top-=G-Qe),ir(be.bottom)&&(be.bottom-=G-Qe),ir(be.left)&&(be.left-=ne-Ve),ir(be.right)&&(be.right-=ne-Ve),be.marginTop=Qe,be.marginLeft=Ve}return be}function Qx(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function Jx(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===Zp(n,"position")||Jx(OA(n)))}function FA(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?zx(n):tC(n,e);if("viewport"===r)u=function o1(n,e=!1){const t=n.ownerDocument.documentElement,r=PA(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:Qx(t),p=e?0:Qx(t,"left");return nE({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:p-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let p;"scrollParent"===r?(p=kA(OA(e)),"BODY"===p.nodeName&&(p=n.ownerDocument.documentElement)):p="window"===r?n.ownerDocument.documentElement:r;const y=PA(p,c,i);if(y&&"HTML"===p.nodeName&&!Jx(c)){const{height:b,width:S}=Zx(n.ownerDocument);ir(u.top)&&ir(y.top)&&ir(y.marginTop)&&(u.top+=y.top-y.marginTop),ir(u.top)&&(u.bottom=Number(b)+Number(y.top)),ir(u.left)&&ir(y.left)&&ir(y.marginLeft)&&(u.left+=y.left-y.marginLeft),ir(u.top)&&(u.right=Number(S)+Number(y.left))}else y&&(u=y)}return ir(u.left)&&(u.left+=t),ir(u.top)&&(u.top+=t),ir(u.right)&&(u.right-=t),ir(u.bottom)&&(u.bottom-=t),u}function a1({width:n,height:e}){return n*e}function Xx(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var p,y,b,S,M,F,B,G,ne,be,Qe,Ve;if(-1===n.indexOf("auto"))return n;const Ye=FA(t,r,c,u),We={top:{width:null!==(p=null==Ye?void 0:Ye.width)&&void 0!==p?p:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==Ye?void 0:Ye.top)&&void 0!==b?b:0)},right:{width:(null!==(S=null==Ye?void 0:Ye.right)&&void 0!==S?S:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==Ye?void 0:Ye.height)&&void 0!==F?F:0},bottom:{width:null!==(B=null==Ye?void 0:Ye.width)&&void 0!==B?B:0,height:(null!==(G=null==Ye?void 0:Ye.bottom)&&void 0!==G?G:0)-(null!==(ne=null==e?void 0:e.bottom)&&void 0!==ne?ne:0)},left:{width:(null!==(be=e.left)&&void 0!==be?be:0)-(null!==(Qe=null==Ye?void 0:Ye.left)&&void 0!==Qe?Qe:0),height:null!==(Ve=null==Ye?void 0:Ye.height)&&void 0!==Ve?Ve:0}},Et=Object.keys(We).map(_n=>Object.assign(Object.assign({position:_n},We[_n]),{area:a1(We[_n])})).sort((_n,Zt)=>Zt.area-_n.area);let dt=Et.filter(({width:_n,height:Zt})=>_n>=t.clientWidth&&Zt>=t.clientHeight);dt=dt.filter(({position:_n})=>i.some(Zt=>Zt===_n));const Qt=dt.length>0?dt[0].position:Et[0].position,wn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${X0().isBs5?tE[Qt]:Qt}`),Qt+(wn?`-${wn}`:"")}const nC=(n,e=0)=>n?parseFloat(n):e;function eR(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=nC(null==t?void 0:t.marginTop)+nC(null==t?void 0:t.marginBottom),i=nC(null==t?void 0:t.marginLeft)+nC(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function tR(n,e,t){return PA(e,t?zx(n):tC(n,e),t)}function LA(n,e,t){var r,i,u;const c=t.split(" ")[0],p=eR(n),y={width:p.width,height:p.height},b=-1!==["right","left"].indexOf(c),S=b?"top":"left",M=b?"left":"top",F=b?"height":"width",B=b?"width":"height";return y[S]=(null!==(r=e[S])&&void 0!==r?r:0)+e[F]/2-p[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-p[B]:null!==(u=e[function l1(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function nR(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const d1={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function rC(n,e){return!!X0().isBs5&&d1[e].includes(n)}function rR(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function s1(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function p1(n){var e,t,r,i,u,c;let p=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),S=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),B=b?"left":"top",G=b?"bottom":"right",ne=eR(y)[S],be=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-ne<(null!==(t=p[F])&&void 0!==t?t:0)&&(p[F]-=(null!==(r=p[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-ne)),Number(n.offsets.host[F])+Number(ne)>(null!==(u=p[G])&&void 0!==u?u:0)&&(p[F]+=Number(n.offsets.host[F])+Number(ne)-Number(p[G])),p=nE(p);const Qe=Zp(n.instance.target),Ve=parseFloat(Qe[`margin${M}`])||0,Ye=parseFloat(Qe[`border${M}Width`])||0;let We;if(be){const dt=parseFloat(Qe.borderRadius)||0,Qt=Number(Ve+Ye+dt);We=F===be?Number(n.offsets.host[F])+Qt:Number(n.offsets.host[F])+Number(n.offsets.host[S]-Qt)}else We=Number(n.offsets.host[F])+Number(n.offsets.host[S]/2-ne/2);let Et=We-(null!==(c=p[F])&&void 0!==c?c:0)-Ve-Ye;return Et=Math.max(Math.min(p[S]-(ne+5),Et),0),n.offsets.arrow={[F]:Math.round(Et),[B]:""},n.instance.arrow=y,n}function g1(n){if(n.offsets.target=nE(n.offsets.target),!nR(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),LA(n.instance.target,n.offsets.host,n.placement)),n;const e=FA(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const p=Xx("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,p];return y.forEach((b,S)=>{var M,F,B,G,ne,be,Qe,Ve,Ye,We,Et,dt,Qt,wn,_n,Zt;if(t!==b||y.length===S+1)return;t=n.placement.split(" ")[0];const Dn="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(B=n.offsets.target.left)&&void 0!==B?B:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(ne=n.offsets.target.bottom)&&void 0!==ne?ne:0)>Math.floor(null!==(be=n.offsets.host.top)&&void 0!==be?be:0)||"bottom"===t&&Math.floor(null!==(Qe=n.offsets.target.top)&&void 0!==Qe?Qe:0)<Math.floor(null!==(Ve=n.offsets.host.bottom)&&void 0!==Ve?Ve:0),ks=Math.floor(null!==(Ye=n.offsets.target.left)&&void 0!==Ye?Ye:0)<Math.floor(null!==(We=e.left)&&void 0!==We?We:0),ml=Math.floor(null!==(Et=n.offsets.target.right)&&void 0!==Et?Et:0)>Math.floor(null!==(dt=e.right)&&void 0!==dt?dt:0),fE=Math.floor(null!==(Qt=n.offsets.target.top)&&void 0!==Qt?Qt:0)<Math.floor(null!==(wn=e.top)&&void 0!==wn?wn:0),pE=Math.floor(null!==(_n=n.offsets.target.bottom)&&void 0!==_n?_n:0)>Math.floor(null!==(Zt=e.bottom)&&void 0!==Zt?Zt:0),ot="left"===t&&ks||"right"===t&&ml||"top"===t&&fE||"bottom"===t&&pE,yt=-1!==["top","bottom"].indexOf(t),Mt=yt&&"left"===r&&ks||yt&&"right"===r&&ml||!yt&&"left"===r&&fE||!yt&&"right"===r&&pE;(Dn||ot||Mt)&&((Dn||ot)&&(t=y[S+1]),Mt&&(r=function c1(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),LA(n.instance.target,n.offsets.host,n.placement)))}),n}function y1(n){var e;if(!nR(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const p=FA(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(S){var M,F,B,G;let ne=n.offsets.target[S];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)<(null!==(F=p[S])&&void 0!==F?F:0)&&(ne=Math.max(null!==(B=n.offsets.target[S])&&void 0!==B?B:0,null!==(G=p[S])&&void 0!==G?G:0)),{[S]:ne}},secondary(S){var M,F,B,G;const ne="right"===S,be=ne?"left":"top";let Ve=n.offsets.target[be];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)>(null!==(F=p[S])&&void 0!==F?F:0)&&(Ve=Math.min(null!==(B=n.offsets.target[be])&&void 0!==B?B:0,(null!==(G=p[S])&&void 0!==G?G:0)-n.offsets.target[ne?"width":"height"])),{[be]:Ve}}};return["left","right","top","bottom"].forEach(S=>{const M=-1!==["left","top","start"].indexOf(S)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(S))}),n}function _1(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,p=-1!==["bottom","top"].indexOf(r),y=p?"left":"top",b=p?"width":"height",S={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?S.start[y]:S.end[y]})}return n}const E1=new class v1{position(e,t){return this.offset(e,t)}offset(e,t){return tR(t,e)}positionElements(e,t,r,i,u){const c=[g1,_1,y1,p1],y=function m1(n,e,t,r){if(!n||!e)return;const i=tR(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const p=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return p&&(c=p[1]+(p[2]?` ${p[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=Xx(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:LA(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,eC[r],u);if(y)return c.reduce((b,S)=>S(b),y)}};function w1(n,e,t,r,i,u){const c=E1.positionElements(n,e,t,r,i);if(!c)return;const p=function u1(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);rR(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${p.left}px, ${p.top}px, 0px)`},u),c.instance.arrow&&rR(c.instance.arrow,c.offsets.arrow,u),function f1(n,e){const t=n.instance.target;let r=t.className;const i=X0().isBs5?tE[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function h1(n){return X0().isBs5?rC(n,"end")?"ms-2":rC(n,"start")?"me-2":rC(n,"top")?"mb-2":rC(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let iC=(()=>{class n{constructor(t,r,i){this.update$$=new lr.x,this.positionElements=new Map,this.isDisabled=!1,Tr(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,HM.T)(XD(window,"scroll",{passive:!0}),XD(window,"resize",{passive:!0}),_t(0,n1),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{w1(sC(u.target),sC(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(sC(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(sC(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(h.FYo),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sC(n){return"string"==typeof n?document.querySelector(n):n instanceof h.SBq?n.nativeElement:null!=n?n:null}class rE{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class b1{constructor(e,t,r,i,u,c,p,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=p,this._posService=y,this.onBeforeShow=new h.vpe,this.onShown=new h.vpe,this.onBeforeHide=new h.vpe,this.onHidden=new h.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=h.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof h.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,p;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(p=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===p||p.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function DP(n,e){const t=function Fx(n,e=bP){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new wP(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(p=>i.push(p())),u.length=0};return t.forEach(p=>{const y=p.open===p.close,b=y?e.toggle:e.show;if(!y&&p.close&&e.hide){const S=n.listen(r,p.close,e.hide);u.push(()=>S)}b&&i.push(n.listen(r,p.open,()=>b(c)))}),()=>{i.forEach(p=>p())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function CP(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function IP(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new rE([]);if(e instanceof h.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new rE([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new rE([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=h.zs3.create({providers:this._providers,parent:this._injector}),p=u.create(c);return Object.assign(p.instance,r),this._applicationRef.attachView(p.hostView),new rE([[p.location.nativeElement]],p.hostView,p)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new rE([i])}}let iE=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new b1(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(h.zs3),h.LFG(iC),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D1=["*"];let VA=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),iR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const oC={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},C1=new h.OlP("override-default-config");let I1=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,zc()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,zc()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(iR),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},!1,h.Jf7)("keydown.esc",function(u){return r.onEsc(u)},!1,h.Jf7),2&t&&h.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:D1,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0)(1,"div",1),h.Hsn(2),h.qZA()()),2&t&&h.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[GP],encapsulation:2}),n})(),T1=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),zc()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class MP{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=rr),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function AP(){const n=X0(),e=Object.keys(n).find(t=>n[t]);return JD[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),A1=1,UA=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new h.vpe,this.onShown=new h.vpe,this.onHide=new h.vpe,this.onHidden=new h.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},oC,i):oC}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||A1++;return this.config=this.modalDefaultOption?Object.assign({},oC,this.modalDefaultOption,r):Object.assign({},oC,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(T1).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const p of this.config.providers)i.provide(p);const u=new VA,c=i.provide({provide:iR,useValue:this.config}).provide({provide:VA,useValue:u}).attach(I1).to("body");return u.hide=()=>{var p;return null===(p=c.instance)||void 0===p?void 0:p.hide()},u.setClass=p=>{c.instance&&(c.instance.config.class=p)},u.onHidden=new h.vpe,u.onHide=new h.vpe,this.copyEvent(i.onBeforeHide,u.onHide),this.copyEvent(i.onHidden,u.onHidden),c.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),u.content=i.getInnerComponent(),u.id=null===(r=c.instance.config)||void 0===r?void 0:r.id),u}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(u=>{var c;return(null===(c=u.instance)||void 0===c?void 0:c.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var u;return(null===(u=i.instance)||void 0===u?void 0:u.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,u)=>{i.instance&&(i.instance.level=u+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(iE),h.LFG(C1,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();Gx.forRoot();let S1=(()=>{class n{static forRoot(){return{ngModule:n,providers:[UA,iE,iC]}}static forChild(){return{ngModule:n,providers:[UA,iE,iC]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Gx]]}),n})();function M1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){const u=h.CHM(t).ngIf;return h.oxw().confirm(u.id)}),h._uU(1,"Delete Task"),h.qZA()}}let x1=(()=>{class n{constructor(t,r,i,u){this._getTaskFromMemoryStorage=t,this._removesTaskDto=r,this.modalRef=i,this._removedTaskDtoStorage=u,this.task$=this._getTaskFromMemoryStorage.asObservable()}confirm(t){var r=this;return(0,_e.Z)(function*(){var i;r._removesTaskDto.remove(t),r._removedTaskDtoStorage.next({idRemoved:t}),null===(i=r.modalRef)||void 0===i||i.hide(),yield function R1(n){return new Promise(e=>setTimeout(e,n))}(5e3),r._removedTaskDtoStorage.next(void 0)})()}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(SA),h.Y36(AA),h.Y36(VA),h.Y36(QD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-confirm-delete-task"]],decls:16,vars:6,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0)(1,"h4",1),h._uU(2,"Delete Task"),h.qZA(),h.TgZ(3,"button",2),h.NdJ("click",function(){return null==r.modalRef?null:r.modalRef.hide()}),h.TgZ(4,"span",3),h._uU(5,"\xd7"),h.qZA()()(),h.TgZ(6,"div",4),h._uU(7),h.ALo(8,"async"),h.qZA(),h.TgZ(9,"div",5)(10,"p"),h._uU(11,"Do you want to confirm?"),h.qZA(),h.TgZ(12,"button",6),h.NdJ("click",function(){return null==r.modalRef?null:r.modalRef.hide()}),h._uU(13,"Cancel"),h.qZA(),h.YNc(14,M1,2,0,"button",7),h.ALo(15,"async"),h.qZA()),2&t){let i;h.xp6(7),h.hij(" You tying delete: ",null==(i=h.lcZ(8,2,r.task$))?null:i.text," "),h.xp6(7),h.Q6J("ngIf",h.lcZ(15,4,r.task$))}},directives:[Lr],pipes:[yo],encapsulation:2,changeDetection:0}),n})();class uC{}const Wc="*";function sR(n,e=null){return{type:2,steps:n,options:e}}function lC(n){return{type:6,styles:n,offset:null}}function oR(n){Promise.resolve(null).then(n)}class sE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){oR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class aR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?oR(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const k1=function(n){return{dropdown:n}},P1=["*"],uR=[lC({height:0,overflow:"hidden"}),function O1(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",lC({height:"*",overflow:"hidden"}))];let Yp=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new h.vpe,this.isDisabledChange=new h.vpe,this.toggleClick=new h.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),L1=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(uR),this._subscription=t.isOpenChange.subscribe(p=>{this.isOpen=p;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!zc()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Yp),h.Y36(h.sBO),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(uC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:P1,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&(h.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),h.Q6J("ngClass",h.VKq(7,k1,"down"===r.direction)))},directives:[Hi],encapsulation:2,changeDetection:0}),n})(),V1=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lR=(()=>{class n{constructor(t,r,i,u,c,p,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=p,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(uR),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:Yp,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!zc()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(zi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(L1).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){zc()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.s_b),h.Y36(iE),h.Y36(Yp),h.Y36(V1),h.Y36(uC))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&h.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&h.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[h._Bn([Yp])]}),n})(),B1=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Yp),h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),U1=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(p=>{this.isOpen=p,p?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(p=>this.isDisabled=p||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(lR),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(Yp))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u)}),2&t&&h.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),j1=(()=>{class n{static forRoot(){return{ngModule:n,providers:[iE,iC,Yp]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zn]]}),n})();function $1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",11)(1,"li",12)(2,"button",13),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw().onDeleteTaskClicked(i)}),h._uU(3," Delete Task "),h.qZA()()()}}const H1=function(n){return{"bg-success":n}},G1=function(n){return{"text-decoration-line-through":n}};function q1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",2)(1,"div",3)(2,"input",4),h.NdJ("change",function(){const u=h.CHM(t).$implicit;return h.oxw().onCheckedCheckboxed(u)}),h.qZA(),h.TgZ(3,"p",5),h._uU(4),h.qZA()(),h.TgZ(5,"div",6)(6,"div",7)(7,"button",8),h._uU(8," ... "),h._UZ(9,"span",9),h.qZA(),h.YNc(10,$1,4,0,"ul",10),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("ngClass",h.VKq(5,H1,!0===t.isChecked))("value",t.id)("checked",t.isChecked),h.xp6(1),h.Q6J("ngClass",h.VKq(7,G1,!0===t.isChecked)),h.xp6(1),h.hij(" ",t.text," ")}}let cR=(()=>{class n{constructor(t,r,i,u,c){this._getsAllTaskDto=t,this._removesTaskDto=r,this._setsTaskDto=i,this.modalService=u,this._setTaskToInMemoryStorage=c,this.tasks$=this._getsAllTaskDto.getAll()}onCheckedCheckboxed(t){this._setsTaskDto.set(!1===t.isChecked?{id:t.id,isChecked:!0}:{id:t.id,isChecked:!1})}onDeleteTaskClicked(t){this.modalRef=this.modalService.show(x1,{class:"modal-sm"}),this._setTaskToInMemoryStorage.next(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kx),h.Y36(AA),h.Y36(Px),h.Y36(UA),h.Y36(SA))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-show-all-tasks"]],decls:3,vars:3,consts:[[1,"list-group"],["class","list-group-item d-flex",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex"],[1,"p-2","bd-highlight"],["type","checkbox","aria-label","...",1,"form-check-input","me-1","rounded-circle",3,"ngClass","value","checked","change"],[1,"d-inline",3,"ngClass"],[1,"ms-auto","p-2","bd-highlight"],["dropdown","",1,"btn-group","ml"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-outline-secondary","border-0"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"ul",0),h.YNc(1,q1,11,9,"li",1),h.ALo(2,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,r.tasks$)))},directives:[ur,Hi,lR,U1,B1],pipes:[yo],encapsulation:2,changeDetection:0}),n})(),dR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Qp=(()=>{class n extends dR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const pl=new h.OlP("NgValueAccessor"),K1={provide:pl,useExisting:(0,h.Gpc)(()=>cC),multi:!0},Y1=new h.OlP("CompositionEventMode");let cC=(()=>{class n extends dR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Z1(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Y1,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([K1]),h.qOj]}),n})();const ss=new h.OlP("NgValidators"),Hh=new h.OlP("NgAsyncValidators");function bR(n){return null!=n}function DR(n){const e=(0,h.QGY)(n)?(0,Ln.D)(n):n;return(0,h.CqO)(e),e}function CR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function IR(n,e){return e.map(t=>t(n))}function TR(n){return n.map(e=>function J1(n){return!n.validate}(e)?e:t=>e.validate(t))}function $A(n){return null!=n?function AR(n){if(!n)return null;const e=n.filter(bR);return 0==e.length?null:function(t){return CR(IR(t,e))}}(TR(n)):null}function HA(n){return null!=n?function SR(n){if(!n)return null;const e=n.filter(bR);return 0==e.length?null:function(t){return function z1(...n){const e=(0,Vn.jO)(n),{args:t,keys:r}=Si(n),i=new Vr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,Ao.Xf)(t[S]).subscribe((0,Kn.x)(u,F=>{M||(M=!0,b--),p[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?To(r,p):p),u.complete())}))}});return e?i.pipe(Ll(e)):i}(IR(t,e).map(DR)).pipe((0,Ft.U)(CR))}}(TR(n)):null}function MR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xR(n){return n._rawValidators}function RR(n){return n._rawAsyncValidators}function GA(n){return n?Array.isArray(n)?n:[n]:[]}function hC(n,e){return Array.isArray(n)?n.includes(e):n===e}function NR(n,e){const t=GA(e);return GA(n).forEach(i=>{hC(t,i)||t.push(i)}),t}function OR(n,e){return GA(e).filter(t=>!hC(n,t))}class kR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$A(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Gh extends kR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Os extends kR{get formDirective(){return null}get path(){return null}}class PR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let FR=(()=>{class n extends PR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),LR=(()=>{class n extends PR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Os,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function oE(n,e){WA(n,e),e.valueAccessor.writeValue(n.value),function oF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BR(n,e)})}(n,e),function uF(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function aF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),yC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function mC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WA(n,e){const t=xR(n);null!==e.validator?n.setValidators(MR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=RR(n);null!==e.asyncValidator?n.setAsyncValidators(MR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();mC(e._rawValidators,i),mC(e._rawAsyncValidators,i)}function yC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=xR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=RR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return mC(e._rawValidators,r),mC(e._rawAsyncValidators,r),t}function BR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const aE="VALID",_C="INVALID",ky="PENDING",uE="DISABLED";function JA(n){return(vC(n)?n.validators:n)||null}function HR(n){return Array.isArray(n)?$A(n):n||null}function XA(n,e){return(vC(e)?e.asyncValidators:n)||null}function GR(n){return Array.isArray(n)?HA(n):n||null}function vC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const qR=n=>n instanceof nS,eS=n=>n instanceof EC;function zR(n){return qR(n)?n.value:n.getRawValue()}function WR(n,e){const t=eS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function KR(n,e){eS(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class tS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=HR(this._rawValidators),this._composedAsyncValidatorFn=GR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===aE}get invalid(){return this.status===_C}get pending(){return this.status==ky}get disabled(){return this.status===uE}get enabled(){return this.status!==uE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=HR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=GR(e)}addValidators(e){this.setValidators(NR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OR(e,this._rawAsyncValidators))}hasValidator(e){return hC(this._rawValidators,e)}hasAsyncValidator(e){return hC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ky,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aE||this.status===ky)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uE:aE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ky,this._hasOwnPendingAsyncValidator=!0;const t=DR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function hF(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=eS(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof pF)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?uE:this.errors?_C:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ky)?ky:this._anyControlsHaveStatus(_C)?_C:aE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nS extends tS{constructor(e=null,t,r){super(JA(t),XA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class EC extends tS{constructor(e,t,r){super(JA(t),XA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){KR(this,e),Object.keys(e).forEach(r=>{WR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=zR(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class pF extends tS{constructor(e,t,r){super(JA(t),XA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){KR(this,e),e.forEach((r,i)=>{WR(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>zR(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const iS=new h.OlP("NgModelWithFormControlWarning"),DF={provide:Os,useExisting:(0,h.Gpc)(()=>wC)};let wC=(()=>{class n extends Os{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return oE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gC(t.control||null,t,!1),YA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function $R(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(gC(r||null,t),qR(i)&&(oE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function UR(n,e){WA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function lF(n,e){return yC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){WA(this.form,this),this._oldForm&&yC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ss,10),h.Y36(Hh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([DF]),h.qOj,h.TTD]}),n})();const TF={provide:Gh,useExisting:(0,h.Gpc)(()=>aS)};let aS=(()=>{class n extends Gh{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ZA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===cC?t=u:function dF(n){return Object.getPrototypeOf(n.constructor)===Qp}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function KA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function pC(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Os,13),h.Y36(ss,10),h.Y36(Hh,10),h.Y36(pl,10),h.Y36(iS,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([TF]),h.qOj,h.TTD]}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[tN]]}),n})(),HF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iS,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[$F]}),n})();const yN=new h.OlP("ADDS_TASK_DTO");let GF=(()=>{class n{constructor(t,r,i){this._addsTaskDto=t,this.router=r,this._removedTaskDtoStorage=i,this.formTask=new EC({text:new nS})}onAddtaskClicked(t){var r;this._addsTaskDto.add({text:null===(r=this.formTask.get("text"))||void 0===r?void 0:r.value,isChecked:!1}),this.formTask.reset(),this.router.navigate(["all-tasks"])}onCancelButtonClicked(){this.router.navigate(["/all-tasks"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yN),h.Y36(_i),h.Y36(QD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-add-task-form"]],decls:7,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["formControlName","text","rows","3",1,"form-control"],["type","submit",1,"btn","btn-secondary","m-1",3,"disabled"],["type","button",1,"btn","btn-outline-secondary","m-1",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"form",0),h.NdJ("ngSubmit",function(){return r.onAddtaskClicked(r.formTask)}),h.TgZ(1,"div",1),h._UZ(2,"textarea",2),h.qZA(),h.TgZ(3,"button",3),h._uU(4,"Add task"),h.qZA(),h.TgZ(5,"button",4),h.NdJ("click",function(){return r.onCancelButtonClicked()}),h._uU(6,"Cancel"),h.qZA()()),2&t&&(h.Q6J("formGroup",r.formTask),h.xp6(3),h.Q6J("disabled",r.formTask.value.text<=0))},directives:[XR,LR,wC,cC,FR,aS],encapsulation:2,changeDetection:0}),n})(),qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-task-form-page"]],decls:10,vars:0,consts:[[1,"container","mt-3","mb-3"],[1,"row"],[1,"col-11"],[1,"col-5"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"lib-today-date"),h.qZA(),h.TgZ(2,"div",0)(3,"div",1)(4,"div",2),h._UZ(5,"lib-show-all-tasks"),h.qZA()()(),h.TgZ(6,"div",0)(7,"div",1)(8,"div",3),h._UZ(9,"lib-add-task-form"),h.qZA()()())},directives:[Lg,cR,GF],encapsulation:2,changeDetection:0}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,HF,ao]]}),n})(),cE=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,Ft.U)(r=>Rx(r,t)))}remove(t){this._client.doc("tasks/"+t).delete()}set(t){this._client.doc("tasks/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YD))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[cE,{provide:yN,useExisting:cE},{provide:kx,useExisting:cE},{provide:AA,useExisting:cE},{provide:Px,useExisting:cE}],imports:[[IA]]}),n})(),vN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,S1.forRoot(),j1.forRoot()]]}),n})(),EN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,ao]]}),n})(),wN=(()=>{class n extends rA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),bN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wN,{provide:SA,useExisting:wN}],imports:[[]]}),n})(),DN=(()=>{class n extends rA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),CN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[DN,{provide:QD,useExisting:DN}],imports:[[]]}),n})(),WF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,ao.forChild([{path:"",component:qF}]),zF,_N,vN,EN,b_,bN,TA,CN]]}),n})();var IN=k(655);function KF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",2),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).close()}),h.TgZ(1,"span",3),h._uU(2,"\xd7"),h.qZA(),h.TgZ(3,"span",4),h._uU(4,"Close"),h.qZA()()}}function ZF(n,e){if(1&n&&(h.TgZ(0,"div",1),h.YNc(1,KF,5,0,"ng-template",0),h.Hsn(2),h.qZA()),2&n){const t=h.oxw();h.Tol("alert alert-"+t.type),h.Q6J("ngClass",t.classes),h.xp6(1),h.Q6J("ngIf",t.dismissible)}}const YF=["*"];let QF=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JF=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new h.vpe,this.onClosed=new h.vpe,this.classes="",this.dismissibleChange=new h.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(QF),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:YF,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,ZF,3,4,"ng-template",0)),2&t&&h.Q6J("ngIf",r.isOpen)},directives:[Lr,Hi],encapsulation:2,changeDetection:0}),(0,IN.gn)([SP(),(0,IN.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),TN=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zn]]}),n})();function XF(n,e){1&n&&(h.TgZ(0,"div")(1,"alert",1),h._uU(2,"1 task deleted!"),h.qZA()())}let eL=(()=>{class n{constructor(t){this._removedTaskDtoStorage=t,this.removedTask$=this._removedTaskDtoStorage.asObservable()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(QD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-alert"]],decls:2,vars:3,consts:[[4,"ngIf"],["type","success"]],template:function(t,r){if(1&t&&(h.YNc(0,XF,3,0,"div",0),h.ALo(1,"async")),2&t){let i;h.Q6J("ngIf",null!=(null==(i=h.lcZ(1,1,r.removedTask$))?null:i.idRemoved))}},directives:[Lr,JF],pipes:[yo],encapsulation:2,changeDetection:0}),n})(),tL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list-of-tasks-page"]],decls:12,vars:0,consts:[[1,"position-relative","position-relative-example"],[1,"position-absolute","top-0","end-0"],[1,"w-10","p-1"],[1,"container","mt-3","mb-3"],[1,"row"],[1,"col-11"],[1,"container"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._UZ(3,"lib-alert"),h.qZA()()(),h.TgZ(4,"div",3),h._UZ(5,"lib-today-date"),h.qZA(),h.TgZ(6,"div",3)(7,"div",4)(8,"div",5),h._UZ(9,"lib-show-all-tasks"),h.qZA()()(),h.TgZ(10,"div",6),h._UZ(11,"lib-home-page-add-task"),h.qZA())},directives:[eL,Lg,cR,SE],encapsulation:2,changeDetection:0}),n})(),nL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,TN.forRoot()]]}),n})(),rL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zn,TN.forRoot(),ao.forChild([{path:"",component:tL}]),b_,vN,_N,NE,bN,TA,nL,CN]]}),n})();const iL=[{path:"",loadChildren:()=>EP},{path:"add-task",loadChildren:()=>WF},{path:"all-tasks",loadChildren:()=>rL}];let sL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ao.forRoot(iL)],ao]}),n})();const oL=function(){return["/"]};let aL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-navbar"]],decls:4,vars:2,consts:[[1,"navbar","navbar-expand-md","navbar-dark",2,"background-color","#7749f8"],[1,"container"],[1,"navbar-brand","fw-bold","pe-auto",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),h._uU(3," AWESOME TO DO APP "),h.qZA()()()),2&t&&(h.xp6(2),h.Q6J("routerLink",h.DdM(1,oL)))},directives:[Og],encapsulation:2,changeDetection:0}),n})(),uL=(()=>{class n{constructor(){this.title="tasks"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"lib-navbar")(1,"router-outlet")},directives:[aL,tc],styles:[""]}),n})();const nn=!1;function AN(n){return new h.vHH(3e3,nn)}function $L(){return"undefined"!=typeof window&&void 0!==window.document}function dS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function qh(n){switch(n.length){case 0:return new sE;case 1:return n[0];default:return new aR(n)}}function SN(n,e,t,r,i={},u={}){const c=[],p=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,B=F&&b||{};Object.keys(S).forEach(G=>{let ne=G,be=S[G];if("offset"!==G)switch(ne=e.normalizePropertyName(ne,c),be){case"!":be=i[G];break;case Wc:be=u[G];break;default:be=e.normalizeStyleValue(G,ne,be,c)}B[ne]=be}),F||p.push(B),b=B,y=M}),c.length)throw function RL(n){return new h.vHH(3502,nn)}();return p}function hS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fS(t,"destroy",n)))}}function fS(n,e,t){const r=t.totalTime,u=pS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function pS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function qo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function MN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let gS=(n,e)=>!1,xN=(n,e,t)=>[],RN=null;function mS(n){const e=n.parentNode||n.host;return e===RN?null:e}(dS()||"undefined"!=typeof Element)&&($L()?(RN=(()=>document.documentElement)(),gS=(n,e)=>{for(;e;){if(e===n)return!0;e=mS(e)}return!1}):gS=(n,e)=>n.contains(e),xN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Xp=null,NN=!1;function ON(n){Xp||(Xp=function GL(){return"undefined"!=typeof document?document.body:null}()||{},NN=!!Xp.style&&"WebkitAppearance"in Xp.style);let e=!0;return Xp.style&&!function HL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xp.style,!e&&NN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Xp.style)),e}const kN=gS,PN=xN;let FN=(()=>{class n{validateStyleProperty(t){return ON(t)}matchesElement(t,r){return!1}containsElement(t,r){return kN(t,r)}getParentElement(t){return mS(t)}query(t,r,i){return PN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new sE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yS=(()=>{class n{}return n.NOOP=new FN,n})();const _S="ng-enter",DC="ng-leave",CC="ng-trigger",IC=".ng-trigger",VN="ng-animating",vS=".ng-animating";function eg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ES(parseFloat(e[1]),e[2])}function ES(n,e){return"s"===e?1e3*n:n}function TC(n,e,t){return n.hasOwnProperty("duration")?n:function WL(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(AN()),{duration:0,delay:0,easing:""};i=ES(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=ES(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function lL(){return new h.vHH(3100,nn)}()),p=!0),u<0&&(e.push(function cL(){return new h.vHH(3101,nn)}()),p=!0),p&&e.splice(y,0,AN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Py(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function zh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Py(n,t);return t}function UN(n,e,t){return t?e+":"+t+";":""}function jN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=UN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=UN(0,YL(t),n.style[t]));n.setAttribute("style",e)}function gl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=bS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),dS()&&jN(n))}function tg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=bS(t);n.style[r]=""}),dS()&&jN(n))}function dE(n){return Array.isArray(n)?1==n.length?n[0]:sR(n):n}const wS=new RegExp("{{\\s*(.+?)\\s*}}","g");function $N(n){let e=[];if("string"==typeof n){let t;for(;t=wS.exec(n);)e.push(t[1]);wS.lastIndex=0}return e}function AC(n,e,t){const r=n.toString(),i=r.replace(wS,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function hL(n){return new h.vHH(3003,nn)}()),p=""),p.toString()});return i==r?n:i}function SC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const ZL=/-+([a-z0-9])/g;function bS(n){return n.replace(ZL,(...e)=>e[1].toUpperCase())}function YL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fL(n){return new h.vHH(3004,nn)}()}}function HN(n,e){return window.getComputedStyle(n)[e]}function nV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function rV(n,e,t){if(":"==n[0]){const y=function iV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function AL(n){return new h.vHH(3016,nn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function TL(n){return new h.vHH(3015,nn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(GN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(GN(c,i))}(r,t,e)):t.push(n),t}const NC=new Set(["true","1"]),OC=new Set(["false","0"]);function GN(n,e){const t=NC.has(n)||OC.has(n),r=NC.has(e)||OC.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?NC.has(n):OC.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?NC.has(e):OC.has(e)),c&&p}}const sV=new RegExp("s*:selfs*,?","g");function DS(n,e,t,r){return new oV(n).build(e,t,r)}class oV{constructor(e){this._driver=e}build(e,t,r){const i=new lV(t);this._resetContextStyleTimingState(i);const u=zo(this,dE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function gL(){return new h.vHH(3006,nn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function mL(){return new h.vHH(3007,nn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(kC(p)){const y=p;Object.keys(y).forEach(b=>{$N(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(SC(u.values()),t.errors.push(function yL(n,e){return new h.vHH(3008,nn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=zo(this,dE(e.animation),t);return{type:1,matchers:nV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ng(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>zo(this,r,t)),options:ng(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=zo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:ng(e.options)}}visitAnimate(e,t){const r=function dV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return CS(TC(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=CS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||TC(r,e),CS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:lC({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=lC(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Wc?r.push(c):t.errors.push(function _L(n){return new h.vHH(3002,nn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(kC(c)){const p=c,y=p.easing;if(y&&(u=y,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function vL(n,e,t,r,i){return new h.vHH(3010,nn)}()),S=!1),u=b.startTime),S&&(y[p]={startTime:u,endTime:i}),t.options&&function KL(n,e,t){const r=e.params||{},i=$N(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function dL(n){return new h.vHH(3001,nn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function EL(){return new h.vHH(3011,nn)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const S=e.steps.map(Qe=>{const Ve=this._makeStyleAst(Qe,t);let Ye=null!=Ve.offset?Ve.offset:function cV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(kC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(kC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ve.styles),We=0;return null!=Ye&&(u++,We=Ve.offset=Ye),y=y||We<0||We>1,p=p||We<b,b=We,c.push(We),Ve});y&&t.errors.push(function wL(){return new h.vHH(3012,nn)}()),p&&t.errors.push(function bL(){return new h.vHH(3200,nn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function DL(){return new h.vHH(3202,nn)}()):0==u&&(F=1/(M-1));const B=M-1,G=t.currentTime,ne=t.currentAnimateTimings,be=ne.duration;return S.forEach((Qe,Ve)=>{const Ye=F>0?Ve==B?1:F*Ve:c[Ve],We=Ye*be;t.currentTime=G+ne.delay+We,ne.duration=We,this._validateStyleAst(Qe,t),Qe.offset=Ye,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:zo(this,dE(e.animation),t),options:ng(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ng(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ng(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function aV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(sV,"")),n=n.replace(/@\*/g,IC).replace(/@\w+/g,t=>IC+"-"+t.substr(1)).replace(/:animating/g,vS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,qo(t.collectedStyles,t.currentQuerySelector,{});const p=zo(this,dE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:ng(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function CL(){return new h.vHH(3013,nn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:TC(e.timings,t.errors,!0);return{type:12,animation:zo(this,dE(e.animation),t),timings:r,options:null}}}class lV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function kC(n){return!Array.isArray(n)&&"object"==typeof n}function ng(n){return n?(n=Py(n)).params&&(n.params=function uV(n){return n?Py(n):null}(n.params)):n={},n}function CS(n,e,t){return{duration:n,delay:e,easing:t}}function IS(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class PC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const pV=new RegExp(":enter","g"),mV=new RegExp(":leave","g");function TS(n,e,t,r,i,u={},c={},p,y,b=[]){return(new yV).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class yV{buildKeyframes(e,t,r,i,u,c,p,y,b,S=[]){b=b||new PC;const M=new AS(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),zo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(p).length){let B;for(let G=F.length-1;G>=0;G--){const ne=F[G];if(ne.element===t){B=ne;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([p],null,M.errors,y)}return F.length?F.map(B=>B.buildKeyframes()):[IS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?eg(r.duration):null,p=null!=r.delay?eg(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),zo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=FC);const c=eg(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>zo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?eg(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),zo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return TC(t.params?AC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?eg(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=FC);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),zo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;zo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const FC={};class AS{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=FC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new LC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=eg(r.duration)),null!=r.delay&&(i.delay=eg(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=AC(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new AS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=FC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new _V(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(pV,"."+this._enterClassName)).replace(mV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function IL(n){return new h.vHH(3014,nn)}()),p}}class LC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new LC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Wc,this._currentKeyframe[t]=Wc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function vV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Wc})):zh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const y=AC(c[p],u,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Wc),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=zh(p,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==Wc&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?SC(e.values()):[],c=t.size?SC(t.values()):[];if(r){const p=i[0],y=Py(p);p.offset=0,y.offset=1,i=[p,y]}return IS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class _V extends LC{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=zh(e[0],!1);y.offset=0,u.push(y);const b=zh(e[0],!1);b.offset=WN(p),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=zh(e[M],!1);F.offset=WN((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return IS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function WN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class SS{}class EV extends SS{normalizePropertyName(e,t){return bS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(wV[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function pL(n,e){return new h.vHH(3005,nn)}())}return c+u}}const wV=(()=>function bV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function KN(n,e,t,r,i,u,c,p,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const MS={};class ZN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function DV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||MS,G=this.buildStyles(r,p&&p.params||MS,M),ne=y&&y.params||MS,be=this.buildStyles(i,ne,M),Qe=new Set,Ve=new Map,Ye=new Map,We="void"===i,Et={params:Object.assign(Object.assign({},F),ne)},dt=S?[]:TS(e,t,this.ast.animation,u,c,G,be,Et,b,M);let Qt=0;if(dt.forEach(_n=>{Qt=Math.max(_n.duration+_n.delay,Qt)}),M.length)return KN(t,this._triggerName,r,i,We,G,be,[],[],Ve,Ye,Qt,M);dt.forEach(_n=>{const Zt=_n.element,Dn=qo(Ve,Zt,{});_n.preStyleProps.forEach(ml=>Dn[ml]=!0);const ks=qo(Ye,Zt,{});_n.postStyleProps.forEach(ml=>ks[ml]=!0),Zt!==t&&Qe.add(Zt)});const wn=SC(Qe.values());return KN(t,this._triggerName,r,i,We,G,be,dt,wn,Ve,Ye,Qt)}}class CV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Py(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let y=c[p];y.length>1&&(y=AC(y,i,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class TV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new CV(i.style,i.options&&i.options.params||{},r)}),YN(this.states,"true","1"),YN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ZN(e,i,this.states))}),this.fallbackTransition=function AV(n,e,t){return new ZN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function YN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const SV=new PC;class MV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=DS(this._driver,t,r,[]);if(r.length)throw function NL(n){return new h.vHH(3503,nn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=SN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=TS(this._driver,t,u,_S,DC,{},{},r,SV,i),c.forEach(S=>{const M=qo(p,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function OL(){return new h.vHH(3300,nn)}()),c=[]),i.length)throw function kL(n){return new h.vHH(3504,nn)}();p.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,Wc)})});const b=qh(c.map(S=>{const M=p.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function PL(n){return new h.vHH(3301,nn)}();return t}listen(e,t,r,i){const u=pS(t,"","","");return hS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const QN="ng-animate-queued",xS="ng-animate-disabled",kV=[],JN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Aa="__ng_removed";class RS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function BV(n){return null!=n?n:null}(r?e.value:e),r){const u=Py(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const hE="void",NS=new RS(hE);class FV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function FL(n,e){return new h.vHH(3302,nn)}();if(null==r||0==r.length)throw function LL(n){return new h.vHH(3303,nn)}();if(!function UV(n){return"start"==n||"done"==n}(r))throw function VL(n,e){return new h.vHH(3400,nn)}();const u=qo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=qo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Sa(e,CC),Sa(e,CC+"-"+t),p[t]=NS),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function BL(n){return new h.vHH(3401,nn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new OS(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Sa(e,CC),Sa(e,CC+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new RS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=NS),b.value!==hE&&y.value===b.value){if(!function HV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const ne=[],be=u.matchStyles(y.value,y.params,ne),Qe=u.matchStyles(b.value,b.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{tg(e,be),gl(e,Qe)})}return}const F=qo(this._engine.playersByElement,e,[]);F.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let B=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!B){if(!i)return;B=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(Sa(e,QN),c.onStart(()=>{Fy(e,QN)})),c.onDone(()=>{let ne=this.players.indexOf(c);ne>=0&&this.players.splice(ne,1);const be=this._engine.playersByElement.get(e);if(be){let Qe=be.indexOf(c);Qe>=0&&be.splice(Qe,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,IC,!0);r.forEach(i=>{if(i[Aa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,hE,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&qh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||NS,S=new RS(hE),M=new OS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Aa];(!u||u===JN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=pS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,hS(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class LV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new FV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(VC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!VC(t))return;const u=t[Aa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sa(e,xS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Fy(e,xS))}removeNode(e,t,r,i){if(VC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Aa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return VC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,IC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,vS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return qh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Aa];if(r&&r.setForRemoval){if(e[Aa]=JN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(xS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Sa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?qh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function UL(n){return new h.vHH(3402,nn)}()}_flushAnimations(e,t){const r=new PC,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(ot=>{S.add(ot);const yt=this.driver.query(ot,".ng-animate-queued",!0);for(let Mt=0;Mt<yt.length;Mt++)S.add(yt[Mt])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=tO(F,this.collectedEnterElements),G=new Map;let ne=0;B.forEach((ot,yt)=>{const Mt=_S+ne++;G.set(yt,Mt),ot.forEach(hn=>Sa(hn,Mt))});const be=[],Qe=new Set,Ve=new Set;for(let ot=0;ot<this.collectedLeaveElements.length;ot++){const yt=this.collectedLeaveElements[ot],Mt=yt[Aa];Mt&&Mt.setForRemoval&&(be.push(yt),Qe.add(yt),Mt.hasAnimation?this.driver.query(yt,".ng-star-inserted",!0).forEach(hn=>Qe.add(hn)):Ve.add(yt))}const Ye=new Map,We=tO(F,Array.from(Qe));We.forEach((ot,yt)=>{const Mt=DC+ne++;Ye.set(yt,Mt),ot.forEach(hn=>Sa(hn,Mt))}),e.push(()=>{B.forEach((ot,yt)=>{const Mt=G.get(yt);ot.forEach(hn=>Fy(hn,Mt))}),We.forEach((ot,yt)=>{const Mt=Ye.get(yt);ot.forEach(hn=>Fy(hn,Mt))}),be.forEach(ot=>{this.processLeaveNode(ot)})});const Et=[],dt=[];for(let ot=this._namespaceList.length-1;ot>=0;ot--)this._namespaceList[ot].drainQueuedTransitions(t).forEach(Mt=>{const hn=Mt.player,Di=Mt.element;if(Et.push(hn),this.collectedEnterElements.length){const Ps=Di[Aa];if(Ps&&Ps.setForMove){if(Ps.previousTriggersValues&&Ps.previousTriggersValues.has(Mt.triggerName)){const rg=Ps.previousTriggersValues.get(Mt.triggerName),Kh=this.statesByElement.get(Mt.element);Kh&&Kh[Mt.triggerName]&&(Kh[Mt.triggerName].value=rg)}return void hn.destroy()}}const yl=!M||!this.driver.containsElement(M,Di),Wo=Ye.get(Di),Wh=G.get(Di),hr=this._buildInstruction(Mt,r,Wh,Wo,yl);if(hr.errors&&hr.errors.length)return void dt.push(hr);if(yl)return hn.onStart(()=>tg(Di,hr.fromStyles)),hn.onDestroy(()=>gl(Di,hr.toStyles)),void i.push(hn);if(Mt.isFallbackTransition)return hn.onStart(()=>tg(Di,hr.fromStyles)),hn.onDestroy(()=>gl(Di,hr.toStyles)),void i.push(hn);const hO=[];hr.timelines.forEach(Ps=>{Ps.stretchStartingKeyframe=!0,this.disabledNodes.has(Ps.element)||hO.push(Ps)}),hr.timelines=hO,r.append(Di,hr.timelines),c.push({instruction:hr,player:hn,element:Di}),hr.queriedElements.forEach(Ps=>qo(p,Ps,[]).push(hn)),hr.preStyleProps.forEach((Ps,rg)=>{const Kh=Object.keys(Ps);if(Kh.length){let ig=y.get(rg);ig||y.set(rg,ig=new Set),Kh.forEach(PS=>ig.add(PS))}}),hr.postStyleProps.forEach((Ps,rg)=>{const Kh=Object.keys(Ps);let ig=b.get(rg);ig||b.set(rg,ig=new Set),Kh.forEach(PS=>ig.add(PS))})});if(dt.length){const ot=[];dt.forEach(yt=>{ot.push(function jL(n,e){return new h.vHH(3505,nn)}())}),Et.forEach(yt=>yt.destroy()),this.reportError(ot)}const Qt=new Map,wn=new Map;c.forEach(ot=>{const yt=ot.element;r.has(yt)&&(wn.set(yt,yt),this._beforeAnimationBuild(ot.player.namespaceId,ot.instruction,Qt))}),i.forEach(ot=>{const yt=ot.element;this._getPreviousPlayers(yt,!1,ot.namespaceId,ot.triggerName,null).forEach(hn=>{qo(Qt,yt,[]).push(hn),hn.destroy()})});const _n=be.filter(ot=>rO(ot,y,b)),Zt=new Map;eO(Zt,this.driver,Ve,b,Wc).forEach(ot=>{rO(ot,y,b)&&_n.push(ot)});const ks=new Map;B.forEach((ot,yt)=>{eO(ks,this.driver,new Set(ot),y,"!")}),_n.forEach(ot=>{const yt=Zt.get(ot),Mt=ks.get(ot);Zt.set(ot,Object.assign(Object.assign({},yt),Mt))});const ml=[],fE=[],pE={};c.forEach(ot=>{const{element:yt,player:Mt,instruction:hn}=ot;if(r.has(yt)){if(S.has(yt))return Mt.onDestroy(()=>gl(yt,hn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(hn.totalTime),void i.push(Mt);let Di=pE;if(wn.size>1){let Wo=yt;const Wh=[];for(;Wo=Wo.parentNode;){const hr=wn.get(Wo);if(hr){Di=hr;break}Wh.push(Wo)}Wh.forEach(hr=>wn.set(hr,Di))}const yl=this._buildAnimation(Mt.namespaceId,hn,Qt,u,ks,Zt);if(Mt.setRealPlayer(yl),Di===pE)ml.push(Mt);else{const Wo=this.playersByElement.get(Di);Wo&&Wo.length&&(Mt.parentPlayer=qh(Wo)),i.push(Mt)}}else tg(yt,hn.fromStyles),Mt.onDestroy(()=>gl(yt,hn.toStyles)),fE.push(Mt),S.has(yt)&&i.push(Mt)}),fE.forEach(ot=>{const yt=u.get(ot.element);if(yt&&yt.length){const Mt=qh(yt);ot.setRealPlayer(Mt)}}),i.forEach(ot=>{ot.parentPlayer?ot.syncPlayerEvents(ot.parentPlayer):ot.destroy()});for(let ot=0;ot<be.length;ot++){const yt=be[ot],Mt=yt[Aa];if(Fy(yt,DC),Mt&&Mt.hasAnimation)continue;let hn=[];if(p.size){let yl=p.get(yt);yl&&yl.length&&hn.push(...yl);let Wo=this.driver.query(yt,vS,!0);for(let Wh=0;Wh<Wo.length;Wh++){let hr=p.get(Wo[Wh]);hr&&hr.length&&hn.push(...hr)}}const Di=hn.filter(yl=>!yl.destroyed);Di.length?jV(this,yt,Di):this.processLeaveNode(yt)}return be.length=0,ml.forEach(ot=>{this.players.push(ot),ot.onDone(()=>{ot.destroy();const yt=this.players.indexOf(ot);this.players.splice(yt,1)}),ot.play()}),ml}elementContainsData(e,t){let r=!1;const i=t[Aa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==hE;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=qo(r,b,[]);this._getPreviousPlayers(b,S,c,p,t.toState).forEach(B=>{const G=B.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),B.destroy(),M.push(B)})}tg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(G=>{const ne=G.element;S.add(ne);const be=ne[Aa];if(be&&be.removedBeforeQueried)return new sE(G.duration,G.delay);const Qe=ne!==y,Ve=function $V(n){const e=[];return nO(n,e),e}((r.get(ne)||kV).map(Qt=>Qt.getRealPlayer())).filter(Qt=>!!Qt.element&&Qt.element===ne),Ye=u.get(ne),We=c.get(ne),Et=SN(0,this._normalizer,0,G.keyframes,Ye,We),dt=this._buildPlayer(G,Et,Ve);if(G.subTimeline&&i&&M.add(ne),Qe){const Qt=new OS(e,p,ne);Qt.setRealPlayer(dt),b.push(Qt)}return dt});b.forEach(G=>{qo(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function VV(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),S.forEach(G=>Sa(G,VN));const B=qh(F);return B.onDestroy(()=>{S.forEach(G=>Fy(G,VN)),gl(y,t.toStyles)}),M.forEach(G=>{qo(i,G,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sE(e.duration,e.delay)}}class OS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>hS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function VC(n){return n&&1===n.nodeType}function XN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function eO(n,e,t,r,i){const u=[];t.forEach(y=>u.push(XN(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Aa]=PV,c.push(b))}),n.set(b,S)});let p=0;return t.forEach(y=>XN(y,u[p++])),c}function tO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function Sa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Fy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function jV(n,e,t){qh(t).onDone(()=>n.processLeaveNode(e))}function nO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof aR?nO(r.players,e):e.push(r)}}function rO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class BC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new LV(e,t,r),this._timelineEngine=new MV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],S=DS(this._driver,u,y,[]);if(y.length)throw function xL(n,e){return new h.vHH(3404,nn)}();p=function IV(n,e,t){return new TV(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=MN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=MN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let qV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(tg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tg(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function kS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];zV(i)&&(e=e||{},e[i]=n[i])}return e}function zV(n){return"display"===n||"position"===n}class iO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:HN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class WV{validateStyleProperty(e){return ON(e)}matchesElement(e,t){return!1}containsElement(e,t){return kN(e,t)}getParentElement(e){return mS(e)}query(e,t,r){return PN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof iO);(function QL(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(G=>b[G]=B[G])}),t=function JL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(y){p[y]=HN(n,y)})}}return e}(e,t=t.map(F=>zh(F,!1)),b);const M=function GV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kS(e[0]),e.length>1&&(r=kS(e[e.length-1]))):e&&(t=kS(e)),t||r?new qV(n,t,r):null}(e,t);return new iO(e,t,y,M)}}let KV=(()=>{class n extends uC{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?sR(t):t;return sO(this._renderer,null,r,"register",[i]),new ZV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ZV extends class N1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new YV(this._id,e,t||{},this._renderer)}}class YV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function sO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const oO="@.disabled";let QV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new aO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(y),new JV(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(BC),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class aO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==oO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class JV extends aO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function XV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function eB(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let tB=(()=>{class n extends BC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re),h.LFG(yS),h.LFG(SS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const uO=new h.OlP("AnimationModuleType"),lO=[{provide:uC,useClass:KV},{provide:SS,useFactory:function nB(){return new EV}},{provide:BC,useClass:tB},{provide:h.FYo,useFactory:function rB(n,e,t){return new QV(n,e,t)},deps:[En,BC,h.R0b]}],cO=[{provide:yS,useFactory:()=>new WV},{provide:uO,useValue:"BrowserAnimations"},...lO],iB=[{provide:yS,useClass:FN},{provide:uO,useValue:"NoopAnimations"},...lO];let sB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?iB:cO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:cO,imports:[ea]}),n})();const dO_firebaseConfig={apiKey:"AIzaSyA4Tz-4_pCoShUWfwqtX6VgLgbnuu4dPUA",authDomain:"tasks-4bd2d.firebaseapp.com",projectId:"tasks-4bd2d",storageBucket:"tasks-4bd2d.appspot.com",messagingSenderId:"1089299502470",appId:"1:1089299502470:web:4a429aa80599680ef3c807",measurementId:"G-X1ZS33XM3P"};let oB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[uL]}),n.\u0275inj=h.cJS({providers:[],imports:[[ea,sL,sB,EN,Lo.hO.initializeApp(dO_firebaseConfig)]]}),n})();(0,h.G48)(),Sl().bootstrapModule(oB).catch(n=>console.error(n))},5867:(lt,Ae,k)=>{k.d(Ae,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=k(9681);(0,h.registerVersion)("firebase","9.6.10","app")},127:(lt,Ae,k)=>{k.d(Ae,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(lt,Ae,k)=>{k.r(Ae);var h=k(5861),Y=k(3942),P=k(2090),ue=k(9681),X=k(655),ge=k(1877),re=k(4859);const ke=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new ge.Yd("@firebase/auth");function Je(_,...f){rt.logLevel<=ge.in.ERROR&&rt.error(`Auth (${ue.SDK_VERSION}): ${_}`,...f)}function Ie(_,...f){throw qe(_,...f)}function ve(_,...f){return qe(_,...f)}function we(_,f,m){const E=Object.assign(Object.assign({},Be()),{[f]:m});return new P.LL("auth","Firebase",E).create(f,{appName:_.name})}function ze(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ie(_,"argument-error"),we(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(_,...f){if("string"!=typeof _){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return pe.create(_,...f)}function te(_,f,...m){if(!_)throw qe(f,...m)}function W(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Je(f),new Error(f)}function ie(_,f){_||W(f)}const me=new Map;function se(_){ie(_ instanceof Function,"Expected a class definition");let f=me.get(_);return f?(ie(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,me.set(_,f),f)}function St(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Jt(){return"http:"===kn()||"https:"===kn()}function kn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(f,m){this.shortDelay=f,this.longDelay=m,ie(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ct(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,f){ie(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ci{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},os=new cn(3e4,6e4);function Xt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Gt(_,f,m,E){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(_,f,m,E,T={}){return si(_,T,(0,h.Z)(function*(){let N={},z={};E&&("GET"===f?z=E:N={body:JSON.stringify(E)});const oe=(0,P.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),je=yield _._getAdditionalHeaders();return je["Content-Type"]="application/json",_.languageCode&&(je["X-Firebase-Locale"]=_.languageCode),Ci.fetch()(Fr(_,_.config.apiHost,m,oe),Object.assign({method:f,headers:je,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function si(_,f,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(_,f,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},on),f);try{const T=new as(_),N=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw us(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const oe=N.ok?z.errorMessage:z.error.message,[je,nt]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw us(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===je)throw us(_,"email-already-in-use",z);const Dt=E[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw we(_,Dt,nt);Ie(_,Dt)}}catch(T){if(T instanceof P.ZR)throw T;Ie(_,"network-request-failed")}})).apply(this,arguments)}function Pr(_,f,m,E){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(_,f,m,E,T={}){const N=yield Gt(_,f,m,E,T);return"mfaPendingCredential"in N&&Ie(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Fr(_,f,m,E){const T=`${f}${m}?${E}`;return _.config.emulator?dn(_.config,T):`${_.config.apiScheme}://${T}`}class as{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),os.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function us(_,f,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=ve(_,f,E);return T.customData._tokenResponse=m,T}function Qr(){return(Qr=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function sr(_,f){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function oi(_,f){return po.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Ma(){return(Ma=(0,h.Z)(function*(_,f=!1){const m=(0,P.m9)(_),E=yield m.getIdToken(f),T=at(E);te(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:T,token:E,authTime:vn(qt(T.auth_time)),issuedAtTime:vn(qt(T.iat)),expirationTime:vn(qt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(_){return 1e3*Number(_)}function at(_){const[f,m,E]=_.split(".");if(void 0===f||void 0===m||void 0===E)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(m);return T?JSON.parse(T):(Je("Failed to decode base64 JWT payload"),null)}catch(T){return Je("Caught error parsing JWT payload as JSON",T),null}}function pr(_,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,h.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof P.ZR&&Ht(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Ht({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class go{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Dr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gr(_){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(_){var f;const m=_.auth,E=yield _.getIdToken(),T=yield pr(_,oi(m,{idToken:E}));te(null==T?void 0:T.users.length,m,"internal-error");const N=T.users[0];_._notifyReloadListener(N);const z=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Te(N.providerUserInfo):[],oe=Xe(_.providerData,z),Dt=!!_.isAnonymous&&!(_.email&&N.passwordHash||(null==oe?void 0:oe.length)),ut={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new Dr(N.createdAt,N.lastLoginAt),isAnonymous:Dt};Object.assign(_,ut)})).apply(this,arguments)}function jt(){return(jt=(0,h.Z)(function*(_){const f=(0,P.m9)(_);yield gr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Xe(_,f){return[..._.filter(E=>!f.some(T=>T.providerId===E.providerId)),...f]}function Te(_){return _.map(f=>{var{providerId:m}=f,E=(0,X._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function pt(){return(pt=(0,h.Z)(function*(_,f){const m=yield si(_,{},(0,h.Z)(function*(){const E=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:N}=_.config,z=Fr(_,T,"/v1/token",`key=${N}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Ci.fetch()(z,{method:"POST",headers:oe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function It(_){const f=at(_);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,h.Z)(function*(){return te(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:z}=yield function tt(_,f){return pt.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(T,N,Number(z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:T,expirationTime:N}=m,z=new $t;return E&&(te("string"==typeof E,"internal-error",{appName:f}),z.refreshToken=E),T&&(te("string"==typeof T,"internal-error",{appName:f}),z.accessToken=T),N&&(te("number"==typeof N,"internal-error",{appName:f}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return W("not implemented")}}function Vt(_,f){te("string"==typeof _||void 0===_,"internal-error",{appName:f})}class j{constructor(f){var{uid:m,auth:E,stsTokenManager:T}=f,N=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new go(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Dr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const E=yield pr(m,m.stsTokenManager.getToken(m.auth,f));return te(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Ls(_){return Ma.apply(this,arguments)}(this,f)}reload(){return function Cr(_){return jt.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),T=!0),m&&(yield gr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield pr(f,function ht(_,f){return Qr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,T,N,z,oe,je,nt,Dt;const ut=null!==(E=m.displayName)&&void 0!==E?E:void 0,Nn=null!==(T=m.email)&&void 0!==T?T:void 0,Ji=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ac=null!==(z=m.photoURL)&&void 0!==z?z:void 0,ju=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,$u=null!==(je=m._redirectEventId)&&void 0!==je?je:void 0,Mf=null!==(nt=m.createdAt)&&void 0!==nt?nt:void 0,d_=null!==(Dt=m.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:pa,emailVerified:Md,isAnonymous:xd,providerData:xf,stsTokenManager:Rd}=m;te(pa&&Rd,f,"internal-error");const _i=$t.fromJSON(this.name,Rd);te("string"==typeof pa,f,"internal-error"),Vt(ut,f.name),Vt(Nn,f.name),te("boolean"==typeof Md,f,"internal-error"),te("boolean"==typeof xd,f,"internal-error"),Vt(Ji,f.name),Vt(ac,f.name),Vt(ju,f.name),Vt($u,f.name),Vt(Mf,f.name),Vt(d_,f.name);const Rf=new j({uid:pa,auth:f,email:Nn,emailVerified:Md,displayName:ut,isAnonymous:xd,photoURL:ac,phoneNumber:Ji,tenantId:ju,stsTokenManager:_i,createdAt:Mf,lastLoginAt:d_});return xf&&Array.isArray(xf)&&(Rf.providerData=xf.map(Rg=>Object.assign({},Rg))),$u&&(Rf._redirectEventId=$u),Rf}static _fromIdTokenResponse(f,m,E=!1){return(0,h.Z)(function*(){const T=new $t;T.updateFromServerResponse(m);const N=new j({uid:m.localId,auth:f,stsTokenManager:T,isAnonymous:E});return yield gr(N),N})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,h.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function de(_,f,m){return`firebase:${_}:${f}:${m}`}class Q{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:T,name:N}=this.auth;this.fullUserKey=de(this.userKey,T.apiKey,N),this.fullPersistenceKey=de("persistence",T.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?j._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Q(se(q),f,E);const T=(yield Promise.all(m.map(function(){var nt=(0,h.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let N=T[0]||se(q);const z=de(E,f.config.apiKey,f.name);let oe=null;for(const nt of m)try{const Dt=yield nt._get(z);if(Dt){const ut=j._fromJSON(f,Dt);nt!==N&&(oe=ut),N=nt;break}}catch(Dt){}const je=T.filter(nt=>nt._shouldAllowMigration);return N._shouldAllowMigration&&je.length?(N=je[0],oe&&(yield N._set(z,oe.toJSON())),yield Promise.all(m.map(function(){var nt=(0,h.Z)(function*(Dt){if(Dt!==N)try{yield Dt._remove(z)}catch(ut){}});return function(Dt){return nt.apply(this,arguments)}}())),new Q(N,f,E)):new Q(N,f,E)})()}}function Ue(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(zt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(bt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ot(f))return"Blackberry";if(fn(f))return"Webos";if(Yt(f))return"Safari";if((f.includes("chrome/")||Ir(f))&&!f.includes("edge/"))return"Chrome";if(Sn(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function bt(_=(0,P.z$)()){return/firefox\//i.test(_)}function Yt(_=(0,P.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ir(_=(0,P.z$)()){return/crios\//i.test(_)}function zt(_=(0,P.z$)()){return/iemobile/i.test(_)}function Sn(_=(0,P.z$)()){return/android/i.test(_)}function Ot(_=(0,P.z$)()){return/blackberry/i.test(_)}function fn(_=(0,P.z$)()){return/webos/i.test(_)}function ar(_=(0,P.z$)()){return/iphone|ipad|ipod/i.test(_)}function ls(_=(0,P.z$)()){return ar(_)||Sn(_)||fn(_)||Ot(_)||/windows phone/i.test(_)||zt(_)}function Ra(_,f=[]){let m;switch(_){case"Browser":m=Ue((0,P.z$)());break;case"Worker":m=`${Ue((0,P.z$)())}-${_}`;break;default:m=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class ai{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pt(this),this.idTokenSubscription=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,N;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,f),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var E;let T=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==T?void 0:T._redirectEventId,oe=yield m.tryRedirectSignIn(f);(!N||N===z)&&(null==oe?void 0:oe.user)&&(T=oe.user)}return T?T._redirectEventId?(te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){try{yield gr(f)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function wt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const E=f?(0,P.m9)(f):null;return E&&te(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return f&&te(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,h.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&se(f)||m._popupRedirectResolver;te(E,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[se(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,T){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return te(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,E,T):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ra(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function Pe(_){return(0,P.m9)(_)}class Pt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Gn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class an{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return W("not implemented")}_getIdTokenResponse(f){return W("not implemented")}_linkToIdToken(f,m){return W("not implemented")}_getReauthenticationResolver(f){return W("not implemented")}}function Pn(_,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:resetPassword",Xt(_,f))})).apply(this,arguments)}function Nt(_,f){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Hi(_,f){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",Xt(_,f))})).apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPassword",Xt(_,f))})).apply(this,arguments)}function cs(_,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:sendOobCode",Xt(_,f))})).apply(this,arguments)}function Lr(_,f){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function du(_,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function Ii(_,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function Kc(_,f){return js.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",Xt(_,f))})).apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithEmailLink",Xt(_,f))})).apply(this,arguments)}class pu extends an{constructor(f,m,E,T=null){super("password",E),this._email=f,this._password=m,this._tenantId=T}static _fromEmailAndPassword(f,m){return new pu(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new pu(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Us(_,f){return ur.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function fu(_,f){return Jr.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Nt(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Zh(_,f){return Zc.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function qn(_,f){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithIdp",Xt(_,f))})).apply(this,arguments)}class hs extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new hs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T}=m,N=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const z=new hs(E,T);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,qn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,P.xO)(m)}return f}}function og(_,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:sendVerificationCode",Xt(_,f))})).apply(this,arguments)}function $s(){return($s=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Xt(_,f))})).apply(this,arguments)}function Qc(){return(Qc=(0,h.Z)(function*(_,f){const m=yield Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Xt(_,f));if(m.temporaryProof)throw us(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ug={USER_NOT_FOUND:"user-not-found"};function Jc(){return(Jc=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithPhoneNumber",Xt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ug)})).apply(this,arguments)}class Zo extends an{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Zo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Zo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function _l(_,f){return $s.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function ag(_,f){return Qc.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Yh(_,f){return Jc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}=f;return E||m||T||N?new Zo({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}):null}}class _o{constructor(f){var m,E,T,N,z,oe;const je=(0,P.zd)((0,P.pd)(f)),nt=null!==(m=je.apiKey)&&void 0!==m?m:null,Dt=null!==(E=je.oobCode)&&void 0!==E?E:null,ut=function Ly(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=je.mode)&&void 0!==T?T:null);te(nt&&Dt&&ut,"argument-error"),this.apiKey=nt,this.operation=ut,this.code=Dt,this.continueUrl=null!==(N=je.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=je.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=je.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const m=function gu(_){const f=(0,P.zd)((0,P.pd)(_)).link,m=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,E=(0,P.zd)((0,P.pd)(_)).deep_link_id;return(E?(0,P.zd)((0,P.pd)(E)).link:null)||E||m||f||_}(f);try{return new _o(m)}catch(E){return null}}}let vl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return pu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=_o.parseLink(E);return te(T,"argument-error"),pu._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xr extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Yo extends Xr{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return te("providerId"in m&&"signInMethod"in m,"argument-error"),hs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Yo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Yo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:N,nonce:z,providerId:oe}=f;if(!E&&!T&&!m&&!N||!oe)return null;try{return new Yo(oe)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:N})}catch(je){return null}}}let vo=(()=>{class _ extends Xr{constructor(){super("facebook.com")}static credential(m){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Oa=(()=>{class _ extends Xr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Xc=(()=>{class _ extends Xr{constructor(){super("github.com")}static credential(m){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class zn extends an{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,qn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T,pendingToken:N}=m;return E&&T&&N&&E===T?new zn(E,N):null}static _create(f,m){return new zn(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends Hs{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return li.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return li.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=zn.fromJSON(f);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return zn._create(E,m)}catch(T){return null}}}let mu=(()=>{class _ extends Xr{constructor(){super("twitter.com")}static credential(m,E){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function yu(_,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signUp",Xt(_,f))})).apply(this,arguments)}class yr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,T=!1){return(0,h.Z)(function*(){const N=yield j._fromIdTokenResponse(f,E,T),z=Jh(E);return new yr({user:N,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const T=Jh(E);return new yr({user:f,providerId:T,_tokenResponse:E,operationType:m})})()}}function Jh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ed(){return(ed=(0,h.Z)(function*(_){var f;const m=Pe(_);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new yr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield yu(m,{returnSecureToken:!0}),T=yield yr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class vu extends P.ZR{constructor(f,m,E,T){var N;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,vu.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,T){return new vu(f,m,E,T)}}function Eu(_,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?vu._fromErrorAndOperation(_,N,f,E):N})}function fs(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function El(){return(El=(0,h.Z)(function*(_,f){const m=(0,P.m9)(_);yield qs(!0,m,f);const{providerUserInfo:E}=yield sr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),T=fs(E||[]);return m.providerData=m.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(_,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(_,f,m=!1){const E=yield pr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return yr._forOperation(_,"link",E)})).apply(this,arguments)}function qs(_,f,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(_,f,m){yield gr(f);const T=!1===_?"provider-already-linked":"no-such-provider";te(fs(f.providerData).has(m)===_,f.auth,T)})).apply(this,arguments)}function td(_,f){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(_,f,m=!1){const{auth:E}=_,T="reauthenticate";try{const N=yield pr(_,Eu(E,T,f,_),m);te(N.idToken,E,"internal-error");const z=at(N.idToken);te(z,E,"internal-error");const{sub:oe}=z;return te(_.uid===oe,E,"user-mismatch"),yr._forOperation(_,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ie(E,"user-mismatch"),N}})).apply(this,arguments)}function wo(_,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(_,f,m=!1){const E="signIn",T=yield Eu(_,E,f),N=yield yr._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Fn(_,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(_,f){return wo(Pe(_),f)})).apply(this,arguments)}function Ti(_,f){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(_,f){const m=(0,P.m9)(_);return yield qs(!1,m,f.providerId),yn(m,f)})).apply(this,arguments)}function zs(_,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(_,f){return td((0,P.m9)(_),f)})).apply(this,arguments)}function wu(_,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(_,f){return Pr(_,"POST","/v1/accounts:signInWithCustomToken",Xt(_,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(_,f){const m=Pe(_),E=yield wu(m,{token:f,returnSecureToken:!0}),T=yield yr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class gt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?bu._fromServerResponse(f,m):Ie(f,"internal-error")}}class bu extends gt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new bu(m)}}function Fa(_,f,m){var E;te((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Cu(){return(Cu=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_),T={requestType:"PASSWORD_RESET",email:f};m&&Fa(E,T,m),yield du(E,T)})).apply(this,arguments)}function wl(){return(wl=(0,h.Z)(function*(_,f,m){yield Pn((0,P.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ce(){return(Ce=(0,h.Z)(function*(_,f){yield Hi((0,P.m9)(_),{oobCode:f})})).apply(this,arguments)}function Bt(_,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,h.Z)(function*(_,f){const m=(0,P.m9)(_),E=yield Pn(m,{oobCode:f}),T=E.requestType;switch(te(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,m,"internal-error");default:te(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=gt._fromServerResponse(Pe(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(_,f){const{data:m}=yield Bt((0,P.m9)(_),f);return m.email})).apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(_,f,m){const E=Pe(_),T=yield yu(E,{returnSecureToken:!0,email:f,password:m}),N=yield yr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function nd(){return(nd=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};te(m.handleCodeInApp,E,"argument-error"),m&&Fa(E,T,m),yield Ii(E,T)})).apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_),T=vl.credentialWithLink(f,m||St());return te(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Fn(E,T)})).apply(this,arguments)}function _r(_,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:createAuthUri",Xt(_,f))})).apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(_,f){const E={identifier:f,continueUri:Jt()?St():"http://localhost"},{signinMethods:T}=yield _r((0,P.m9)(_),E);return T||[]})).apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(_,f){const m=(0,P.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Fa(m.auth,T,f);const{email:N}=yield Lr(m.auth,T);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&Fa(E.auth,N,m);const{email:z}=yield Kc(E.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Sl(_,f){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(_,f){return Gt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ml(){return(Ml=(0,h.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,P.m9)(_),N={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},z=yield pr(E,Sl(E.auth,N));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const oe=E.providerData.find(({providerId:je})=>"password"===je);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Rl(_,f,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(_,f,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const z=yield pr(_,Nt(E,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Do{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class sd extends Do{constructor(f,m,E,T){super(f,m,E),this.username=T}}class od extends Do{constructor(f,m){super(f,"facebook.com",m)}}class Co extends sd{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Qs extends Do{constructor(f,m){super(f,"google.com",m)}}class Nl extends sd{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Mr(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function id(_){var f,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(f=at(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new Do(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new od(N,T);case"github.com":return new Co(N,T);case"google.com":return new Qs(N,T);case"twitter.com":return new Nl(N,T,_.screenName||null);case"custom":case"anonymous":return new Do(N,null);default:return new Do(N,E,T)}}(m)}class gs{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new gs("enroll",f)}static _fromMfaPendingCredential(f){return new gs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return gs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return gs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Va{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Pe(f),T=m.customData._serverResponse,N=(T.mfaInfo||[]).map(oe=>gt._fromServerResponse(E,oe));te(T.mfaPendingCredential,E,"internal-error");const z=gs._fromMfaPendingCredential(T.mfaPendingCredential);return new Va(z,N,function(){var oe=(0,h.Z)(function*(je){const nt=yield je._process(E,z);delete T.mfaInfo,delete T.mfaPendingCredential;const Dt=Object.assign(Object.assign({},T),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(m.operationType){case"signIn":const ut=yield yr._fromIdTokenResponse(E,m.operationType,Dt);return yield E._updateCurrentUser(ut.user),ut;case"reauthenticate":return te(m.user,E,"internal-error"),yr._forOperation(m.user,m.operationType,Dt);default:Ie(E,"internal-error")}});return function(je){return oe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function Wn(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:start",Xt(_,f))}class ms{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>gt._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new ms(f)}getSession(){var f=this;return(0,h.Z)(function*(){return gs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,h.Z)(function*(){const T=f,N=yield E.getSession(),z=yield pr(E.user,T._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){const E="string"==typeof f?f:f.uid,T=yield m.user.getIdToken(),N=yield pr(m.user,function cg(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(_,f))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const ta=new WeakMap,Pl="__sak";class Io{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vn=(()=>{class _ extends Io{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ld(){const _=(0,P.z$)();return Yt(_)||ar(_)}()&&function Jn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ls(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),N=this.localCache[E];T!==N&&m(E,N,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((oe,je,nt)=>{this.notifyListeners(oe,nt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(T);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const N=()=>{const oe=this.storage.getItem(T);!E&&this.localCache[T]===oe||this.notifyListeners(T,oe)},z=this.storage.getItem(T);!function xa(){return(0,P.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,N=this;return(0,h.Z)(function*(){yield T().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,h.Z)(function*(){const N=yield E().call(T,m);return T.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,T=this;return(0,h.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),lr=(()=>{class _ extends Io{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Vr=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const T=m,{eventId:N,eventType:z,data:oe}=T.data,je=E.handlersMap[z];if(!(null==je?void 0:je.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const nt=Array.from(je).map(function(){var ut=(0,h.Z)(function*(Nn){return Nn(T.origin,oe)});return function(Nn){return ut.apply(this,arguments)}}()),Dt=yield function ni(_){return Promise.all(_.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(nt);T.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:Dt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function na(_="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return _+m}class cd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var T=this;return(0,h.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,oe;return new Promise((je,nt)=>{const Dt=na("",20);N.port1.start();const ut=setTimeout(()=>{nt(new Error("unsupported_event"))},E);oe={messageChannel:N,onMessage(Nn){const Ji=Nn;if(Ji.data.eventId===Dt)switch(Ji.data.status){case"ack":clearTimeout(ut),z=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),je(Ji.data.response);break;default:clearTimeout(ut),clearTimeout(z),nt(new Error("invalid_response"))}}},T.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),T.target.postMessage({eventType:f,eventId:Dt,data:m},[N.port2])}).finally(()=>{oe&&T.removeMessageHandler(oe)})})()}}function gn(){return window}function Si(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function di(){return(di=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Fl="firebaseLocalStorageDb",To="firebaseLocalStorage",Kn="fbase_key";class ys{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ra(_,f){return _.transaction([To],f?"readwrite":"readonly").objectStore(To)}function Xs(){const _=indexedDB.open(Fl,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(To,{keyPath:Kn})}catch(T){m(T)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains(To)?f(E):(E.close(),yield function hi(){const _=indexedDB.deleteDatabase(Fl);return new ys(_).toPromise()}(),f(yield Xs()))}))})}function fi(_,f,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(_,f,m){const E=ra(_,!0).put({[Kn]:f,value:m});return new ys(E).toPromise()})).apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(_,f){const m=ra(_,!1).get(f),E=yield new ys(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function qi(_,f){const m=ra(_,!0).delete(f);return new ys(m).toPromise()}const Mi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Xs()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(T++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Si()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Vr._getInstance(function dd(){return Si()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(T,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(T,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Ru(){return di.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new cd(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ft(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Xs();return yield fi(m,Pl,"1"),yield qi(m,Pl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(N=>fi(N,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const T=yield E._withRetries(N=>function Vl(_,f){return eo.apply(this,arguments)}(N,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(T=>qi(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(z=>{const oe=ra(z,!1).getAll();return new ys(oe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:z,value:oe}of E)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(oe)&&(m.notifyListeners(z,oe),T.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ia(_,f){return Gt(_,"POST","/v2/accounts/mfaSignIn:start",Xt(_,f))}function xi(){return(xi=(0,h.Z)(function*(_){return(yield Gt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bn(_){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=T=>{const N=ve("internal-error");N.customData=T,m(N)},E.type="text/javascript",E.charset="UTF-8",function fd(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function So(_){return`__${_}${Math.floor(1e6*Math.random())}`}const xr=1e12;class zi{constructor(f){this.auth=f,this.counter=xr,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Wi(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||xr;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||xr))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(f||xr))||void 0===E||E.execute(),""})()}}class Wi{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;te(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cn(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const to=So("rcb"),pd=new cn(3e4,6e4);class hg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(f,m=""){return te(function fg(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const N=gn().setTimeout(()=>{T(ve(f,"network-request-failed"))},pd.get());gn()[to]=()=>{gn().clearTimeout(N),delete gn()[to];const oe=gn().grecaptcha;if(!oe)return void T(ve(f,"internal-error"));const je=oe.render;oe.render=(nt,Dt)=>{const ut=je(nt,Dt);return this.counter++,ut},this.hostLanguage=m,E(oe)},Bn(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:to,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),T(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!gn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pg{load(f){return(0,h.Z)(function*(){return new zi(f)})()}clearedOneInstance(){}}const no="recaptcha",ri={theme:"light",type:"image"};class gg{constructor(f,m=Object.assign({},ri),E){this.parameters=m,this.type=no,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pe(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pg:new hg,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const z=oe=>{!oe||(f.tokenChangeListeners.delete(z),N(oe))};f.tokenChangeListeners.add(z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=gn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){te(Jt()&&!Si(),f.auth,"internal-error"),yield function ro(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Br(_){return xi.apply(this,arguments)}(f.auth);te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _s{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Zo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function In(){return(In=(0,h.Z)(function*(_,f,m){const E=Pe(_),T=yield Rr(E,f,(0,P.m9)(m));return new _s(T,N=>Fn(E,N))})).apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_);yield qs(!1,E,"phone");const T=yield Rr(E.auth,f,(0,P.m9)(m));return new _s(T,N=>Ti(E,N))})).apply(this,arguments)}function jl(){return(jl=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_),T=yield Rr(E.auth,f,(0,P.m9)(m));return new _s(T,N=>zs(E,N))})).apply(this,arguments)}function Rr(_,f,m){return pi.apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(_,f,m){var E;const T=yield m.verify();try{let N;if(te("string"==typeof T,_,"argument-error"),te(m.type===no,_,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const z=N.session;if("phoneNumber"in N)return te("enroll"===z.type,_,"internal-error"),(yield Wn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===z.type,_,"internal-error");const oe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return te(oe,_,"missing-multi-factor-info"),(yield ia(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield og(_,{phoneNumber:N.phoneNumber,recaptchaToken:T});return z}}finally{m._reset()}})).apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(_,f){yield yn((0,P.m9)(_),f)})).apply(this,arguments)}let Ni=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Pe(m)}verifyPhoneNumber(m,E){return Rr(this.auth,m,(0,P.m9)(E))}static credential(m,E){return Zo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Zo._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Ki(_,f){return f?se(f):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ba extends an{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return qn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return qn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return qn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Hl(_){return wo(_.auth,new Ba(_),_.bypassAuthState)}function Gl(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),td(m,new Ba(_),_.bypassAuthState)}function Lt(_){return ql.apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),yn(m,new Ba(_),_.bypassAuthState)})).apply(this,arguments)}class Xn{constructor(f,m,E,T,N=!1){this.auth=f,this.resolver=E,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(E,T){f.pendingPromise={resolve:E,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:N,tenantId:z,error:oe,type:je}=f;if(oe)return void m.reject(oe);const nt={auth:m.auth,requestUri:E,sessionId:T,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(je)(nt))}catch(Dt){m.reject(Dt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Hl;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return Gl;default:Ie(this.auth,"internal-error")}}resolve(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zl=new cn(2e3,1e4);function gd(){return(gd=(0,h.Z)(function*(_,f,m){const E=Pe(_);ze(_,f,Hs);const T=Ki(E,m);return new Yi(E,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Ou(){return(Ou=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_);ze(E.auth,f,Hs);const T=Ki(E.auth,m);return new Yi(E.auth,"reauthViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_);ze(E.auth,f,Hs);const T=Ki(E.auth,m);return new Yi(E.auth,"linkViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}let Yi=(()=>{class _ extends Xn{constructor(m,E,T,N,z){super(m,E,N,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return te(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ie(1===m.filter.length,"Popup operations only handle one event");const E=na();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,zl.get())};m()}}return _.currentPopupAction=null,_})();const Qi=new Map;class er extends Xn{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Qi.get(m.auth._key());if(!E){try{const N=(yield function gi(_,f){return Wl.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(N)}catch(T){E=()=>Promise.reject(T)}Qi.set(m.auth._key(),E)}return m.bypassAuthState||Qi.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const T=yield E.auth._redirectUserForId(f.eventId);if(T)return E.user=T,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Wl(){return(Wl=(0,h.Z)(function*(_,f){const m=I(f),E=C(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function xo(_,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(_,f){return C(_)._set(I(f),"true")})).apply(this,arguments)}function C(_){return se(_._redirectPersistence)}function I(_){return de("pendingRedirect",_.config.apiKey,_.name)}function K(){return(K=(0,h.Z)(function*(_,f,m){const E=Pe(_);ze(_,f,Hs);const T=Ki(E,m);return yield xo(T,E),T._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_);ze(E.auth,f,Hs);const T=Ki(E.auth,m);yield xo(T,E.auth);const N=yield Ro(E);return T._openRedirect(E.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(_,f,m){const E=(0,P.m9)(_);ze(E.auth,f,Hs);const T=Ki(E.auth,m);yield qs(!1,E,f.providerId),yield xo(T,E.auth);const N=yield Ro(E);return T._openRedirect(E.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(_,f){return yield Pe(_)._initializationPromise,Rn(_,f,!1)})).apply(this,arguments)}function Rn(_,f){return la.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(_,f,m=!1){const E=Pe(_),T=Ki(E,f),z=yield new er(E,T,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,f)),z})).apply(this,arguments)}function Ro(_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(_){const f=na(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Oi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Kl(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yd(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!yd(f)){const T=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(ve(this.auth,T))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(No(f))}saveEventToCache(f){this.cachedEventUids.add(No(f)),this.lastProcessedEventTime=Date.now()}}function No(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function yd({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Zl(_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(_,f={}){return Gt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const yg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,By=/^https?/;function Es(){return(Es=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Zl(_);for(const m of f)try{if(Yl(m))return}catch(E){}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function Yl(_){const f=St(),{protocol:m,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!By.test(m))return!1;if(yg.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const jy=new cn(3e4,6e4);function $y(){const _=gn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let _d=null;function Hy(_){return _d=_d||function _g(_){return new Promise((f,m)=>{var E,T,N;function z(){$y(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{$y(),m(ve(_,"network-request-failed"))},timeout:jy.get()})}if(null===(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=gn().gapi)||void 0===N?void 0:N.load)){const oe=So("iframefcb");return gn()[oe]=()=>{gapi.load?z():m(ve(_,"network-request-failed"))},Bn(`https://apis.google.com/js/api.js?onload=${oe}`).catch(je=>m(je))}z()}}).catch(f=>{throw _d=null,f})}(_),_d}const nf=new cn(5e3,15e3),ko={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ja(_){const f=_.config;te(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?dn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ue.SDK_VERSION},T=vd.get(_.config.apiHost);T&&(E.eid=T);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,P.xO)(E).slice(1)}`}function ca(){return ca=(0,h.Z)(function*(_){const f=yield Hy(_),m=gn().gapi;return te(m,_,"internal-error"),f.open({where:document.body,url:ja(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ko,dontclear:!0},E=>new Promise(function(){var T=(0,h.Z)(function*(N,z){yield E.restyle({setHideOnLeave:!1});const oe=ve(_,"network-request-failed"),je=gn().setTimeout(()=>{z(oe)},nf.get());function nt(){gn().clearTimeout(je),N(E)}E.ping(nt).then(nt,()=>{z(oe)})});return function(N,z){return T.apply(this,arguments)}}()))}),ca.apply(this,arguments)}const qy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function af(_,f,m,E,T,N){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:T};if(f instanceof Hs){f.setDefaultLanguage(_.languageCode),z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[je,nt]of Object.entries(N||{}))z[je]=nt}if(f instanceof Xr){const je=f.getScopes().filter(nt=>""!==nt);je.length>0&&(z.scopes=je.join(","))}_.tenantId&&(z.tid=_.tenantId);const oe=z;for(const je of Object.keys(oe))void 0===oe[je]&&delete oe[je];return`${function Wy({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,P.xO)(oe).slice(1)}`}const so="webStorageSupport";class uf extends class vg{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new uf(f)}_finalizeEnroll(f,m,E){return function ad(_,f){return Gt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(_,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function sa(_,f){return Gt(_,"POST","/v2/accounts/mfaSignIn:finalize",Xt(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ky=(()=>{class _{constructor(){}static assertion(m){return uf._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Zy="@firebase/auth",lf="0.19.11";class Eg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var T;f((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oo(){return window}function Vu(){return(Vu=(0,h.Z)(function*(_,f,m){var E;const{BuildInfo:T}=oo();ie(f.sessionId,"AuthEvent did not contain a session ID");const N=yield $a(f.sessionId),z={};return ar()?z.ibi=T.packageName:Sn()?z.apn=T.packageName:Ie(_,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=N,af(_,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function ki(){return(ki=(0,h.Z)(function*(_){const{BuildInfo:f}=oo(),m={};ar()?m.iosBundleId=f.packageName:Sn()?m.androidPackageName=f.packageName:Ie(_,"operation-not-supported-in-this-environment"),yield Zl(_,m)})).apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(_,f,m){const{cordova:E}=oo();let T=()=>{};try{yield new Promise((N,z)=>{let oe=null;function je(){var ut;N();const Nn=null===(ut=E.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Nn&&Nn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function nt(){oe||(oe=window.setTimeout(()=>{z(ve(_,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===(null==document?void 0:document.visibilityState)&&nt()}f.addPassiveListener(je),document.addEventListener("resume",nt,!1),Sn()&&document.addEventListener("visibilitychange",Dt,!1),T=()=>{f.removePassiveListener(je),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",Dt,!1),oe&&window.clearTimeout(oe)}})}finally{T()}})).apply(this,arguments)}function $a(_){return bg.apply(this,arguments)}function bg(){return(bg=(0,h.Z)(function*(_){const f=Bu(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bu(_){if(ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Qy(_){(0,ue._registerComponent)(new re.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:N,authDomain:z}=E.options;return((oe,je)=>{te(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),te(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const nt={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ra(_)},Dt=new ai(oe,je,nt);return function ae(_,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(se);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(Dt,m),Dt})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new re.wA("auth-internal",f=>{const m=Pe(f.getProvider("auth").getImmediate());return new Eg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Zy,lf,function Yy(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(Zy,lf,"esm2017")}("Browser");class ff extends Oi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Xl(_){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(_){const f=yield tc()._get(gf(_));return f&&(yield tc()._remove(gf(_))),f})).apply(this,arguments)}function ec(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function tc(){return se(Vn)}function gf(_){return de("authEvent",_.config.apiKey,_.name)}function Td(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...m]=_.split("?");return(0,P.zd)(m.join("?"))}function vf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Ad(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Cg(_=(0,P.z$)()){return!("file:"!==Ad()&&"ionic:"!==Ad()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nr(){try{const _=self.localStorage,f=na();if(_)return _.setItem(f,"1"),_.removeItem(f),!function fa(_=(0,P.z$)()){return function n_(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function r_(_=(0,P.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,P.hl)()}catch(_){return Po()&&(0,P.hl)()}return!1}function Po(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ic(){return(function t_(){return"http:"===Ad()||"https:"===Ad()}()||(0,P.ru)()||Cg())&&!function Sd(){return(0,P.b$)()||(0,P.UG)()}()&&Nr()&&!Po()}function Ef(){return Cg()&&"undefined"!=typeof document}function Ha(){return(Ha=(0,h.Z)(function*(){return!!Ef()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Pi={LOCAL:"local",NONE:"none",SESSION:"session"},Ga=te,bf="persistence";function qa(_){return Df.apply(this,arguments)}function Df(){return(Df=(0,h.Z)(function*(_){yield _._initializationPromise;const f=sc(),m=de(bf,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function sc(){var _;try{return(null===(_=function wf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const i_=te;class yi{constructor(){this.browserResolver=se(class da{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=Rn}_openPopup(f,m,E,T){var N=this;return(0,h.Z)(function*(){var z;ie(null===(z=N.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=af(f,m,E,St(),T);return function Dd(_,f,m,E=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const je=Object.assign(Object.assign({},qy),{width:E.toString(),height:T.toString(),top:N,left:z}),nt=(0,P.z$)().toLowerCase();m&&(oe=Ir(nt)?"_blank":m),bt(nt)&&(f=f||"http://localhost",je.scrollbars="yes");const Dt=Object.entries(je).reduce((Nn,[Ji,ac])=>`${Nn}${Ji}=${ac},`,"");if(function cu(_=(0,P.z$)()){var f;return ar(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(nt)&&"_self"!==oe)return function of(_,f){const m=document.createElement("a");m.href=_,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",oe),new bd(null);const ut=window.open(f||"",oe,Dt);te(ut,_,"popup-blocked");try{ut.focus()}catch(Nn){}return new bd(ut)}(f,oe,na())})()}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(f),function tf(_){gn().location.href=_}(af(f,m,E,St(),T)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:T,promise:N}=this.eventManagers[m];return T?Promise.resolve(T):(ie(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const E=yield function Gy(_){return ca.apply(this,arguments)}(f),T=new Oi(f);return E.register("authEvent",N=>(te(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:T},m.iframes[f._key()]=E,T})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(so,{type:so},T=>{var N;const z=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[so];void 0!==z&&m(!!z),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Uy(_){return Es.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return ls()||Yt()||ar()}}),this.cordovaResolver=se(class _f{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rn}_initialize(f){var m=this;return(0,h.Z)(function*(){const E=f._key();let T=m.eventManagers.get(E);return T||(T=new ff(f),m.eventManagers.set(E,T),m.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){!function Id(_){var f,m,E,T,N,z,oe,je,nt,Dt;const ut=oo();te("function"==typeof(null===(f=null==ut?void 0:ut.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(m=null==ut?void 0:ut.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(N=null===(T=null===(E=null==ut?void 0:ut.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(je=null===(oe=null===(z=null==ut?void 0:ut.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===je?void 0:je.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Dt=null===(nt=null==ut?void 0:ut.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===Dt?void 0:Dt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield N._initialize(f);yield z.initialized(),z.resetRedirect(),function Pu(){Qi.clear()}(),yield N._originValidation(f);const oe=function pf(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:ec(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(f,E,T);yield function _E(_,f){return tc()._set(gf(_),f)}(f,oe);const je=yield function cf(_,f,m){return Vu.apply(this,arguments)}(f,oe,m),nt=yield function Jl(_){const{cordova:f}=oo();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let T=null;E?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function mo(_=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(je);return function wg(_,f,m){return Cd.apply(this,arguments)}(f,z,nt)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function df(_){return ki.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:N}=oo(),z=setTimeout((0,h.Z)(function*(){yield Xl(f),m.onEvent(vf())}),500),oe=function(){var Dt=(0,h.Z)(function*(ut){clearTimeout(z);const Nn=yield Xl(f);let Ji=null;Nn&&(null==ut?void 0:ut.url)&&(Ji=function Xy(_,f){var m,E;const T=function nc(_){const f=Td(_),m=f.link?decodeURIComponent(f.link):void 0,E=Td(m).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Td(T).link||T||E||m||_}(f);if(T.includes("/__/auth/callback")){const N=Td(T),z=N.firebaseError?function mf(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],je=oe?ve(oe):null;return je?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Nn,ut.url)),m.onEvent(Ji||vf())});return function(Nn){return Dt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const je=T,nt=`${N.packageName.toLowerCase()}://`;oo().handleOpenURL=function(){var Dt=(0,h.Z)(function*(ut){if(ut.toLowerCase().startsWith(nt)&&oe({url:ut}),"function"==typeof je)try{je(ut)}catch(Nn){console.error(Nn)}});return function(ut){return Dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=Rn}_initialize(f){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,E,T)})()}_openRedirect(f,m,E,T){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,E,T)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ef()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return i_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const m=yield function jr(){return Ha.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Ag(_){return _.unwrap()}function za(_){return Sg(_)}function Sg(_){const{_tokenResponse:f}=_ instanceof P.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ni.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Oa;break;case"facebook.com":E=vo;break;case"github.com":E=Xc;break;case"twitter.com":E=mu;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:oe,nonce:je}=f;return N||z||T||oe?oe?m.startsWith("saml.")?zn._create(m,oe):hs._fromParams({providerId:m,signInMethod:m,pendingToken:oe,idToken:T,accessToken:N}):new Yo(m).credential({idToken:T,accessToken:N,rawNonce:je}):null}return _ instanceof P.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Or(_,f){return f.catch(m=>{throw m instanceof P.ZR&&function o_(_,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new a_(_,function xu(_,f){var m;const E=(0,P.m9)(_),T=f;return te(f.customData.operationType,E,"argument-error"),te(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Va._fromError(E,T)}(_,f));else if(E){const T=Sg(f),N=f;T&&(N.credential=T,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:za(m),additionalUserInfo:Mr(m),user:Fo.getOrCreate(T)}})}function Cf(_,f){return If.apply(this,arguments)}function If(){return(If=(0,h.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Or(_,m.confirm(E))}})).apply(this,arguments)}class a_{constructor(f,m){this.resolver=m,this.auth=function s_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Or(Ag(this.auth),this.resolver.resolveSignIn(f))}}class Fo{constructor(f){this._delegate=f,this.multiFactor=function ud(_){const f=(0,P.m9)(_);return ta.has(f)||ta.set(f,ms._fromUser(f)),ta.get(f)}(f)}static getOrCreate(f){return Fo.USER_MAP.has(f)||Fo.USER_MAP.set(f,new Fo(f)),Fo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,h.Z)(function*(){return Or(m.auth,Ti(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,h.Z)(function*(){return Cf(E.auth,function Ul(_,f,m){return aa.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,h.Z)(function*(){return Or(m.auth,function Zi(_,f,m){return ku.apply(this,arguments)}(m._delegate,f,yi))})()}linkWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield qa(Pe(m.auth)),function et(_,f,m){return function Tt(_,f,m){return kt.apply(this,arguments)}(_,f,m)}(m._delegate,f,yi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,h.Z)(function*(){return Or(m.auth,zs(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Cf(this.auth,function mg(_,f,m){return jl.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Or(this.auth,function Mo(_,f,m){return Ou.apply(this,arguments)}(this._delegate,f,yi))}reauthenticateWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield qa(Pe(m.auth)),function ee(_,f,m){return function Me(_,f,m){return xe.apply(this,arguments)}(_,f,m)}(m._delegate,f,yi)})()}sendEmailVerification(f){return function Ai(_,f){return Al.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,h.Z)(function*(){return yield function ka(_,f){return El.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function xl(_,f){return Rl((0,P.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function rd(_,f){return Rl((0,P.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function $l(_,f){return vs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ea(_,f){return Ml.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Su(_,f,m){return Mu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fo.USER_MAP=new WeakMap;const oc=te;let Tf=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;oc(T,"invalid-api-key",{appName:m.name}),oc(T,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?yi:void 0;this._delegate=E.initialize({options:{persistence:u_(T,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function pn(_,f,m){const E=Pe(_);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),N=mr(f),{host:z,port:oe}=function Vs(_){const f=mr(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const N=T[1];return{host:N,port:Gn(E.substr(N.length+1))}}{const[N,z]=E.split(":");return{host:N,port:Gn(z)}}}(f);E.config.emulator={url:`${N}//${z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function $i(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function bl(_,f){return Ce.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Bt(this._delegate,m)}confirmPasswordReset(m,E){return function Iu(_,f,m){return wl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,h.Z)(function*(){return Or(T._delegate,function Xo(_,f,m){return ti.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Au(_,f){return Ys.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Tl(_,f){const m=_o.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){oc(ic(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function xt(_,f){return Zn.apply(this,arguments)}(m._delegate,yi);return E?Or(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Dg(_,f){Pe(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:N,error:z,complete:oe}=Af(m,E,T);return this._delegate.onAuthStateChanged(N,z,oe)}onIdTokenChanged(m,E,T){const{next:N,error:z,complete:oe}=Af(m,E,T);return this._delegate.onIdTokenChanged(N,z,oe)}sendSignInLinkToEmail(m,E){return function Il(_,f,m){return nd.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Du(_,f,m){return Cu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let T;switch(function Ig(_,f){Ga(Object.values(Pi).includes(f),_,"invalid-persistence-type"),(0,P.b$)()?Ga(f!==Pi.SESSION,_,"unsupported-persistence-type"):(0,P.UG)()?Ga(f===Pi.NONE,_,"unsupported-persistence-type"):Po()?Ga(f===Pi.NONE||f===Pi.LOCAL&&(0,P.hl)(),_,"unsupported-persistence-type"):Ga(f===Pi.NONE||Nr(),_,"unsupported-persistence-type")}(E._delegate,m),m){case Pi.SESSION:T=lr;break;case Pi.LOCAL:T=(yield se(Mi)._isAvailable())?Mi:Vn;break;case Pi.NONE:T=q;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Or(this._delegate,function _u(_){return ed.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Or(this._delegate,Fn(this._delegate,m))}signInWithCustomToken(m){return Or(this._delegate,function Ws(_,f){return Ks.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Or(this._delegate,function Cl(_,f,m){return Fn((0,P.m9)(_),vl.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Or(this._delegate,function Tu(_,f,m){return Zs.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Cf(this._delegate,function Nu(_,f,m){return In.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return oc(ic(),E._delegate,"operation-not-supported-in-this-environment"),Or(E._delegate,function io(_,f,m){return gd.apply(this,arguments)}(E._delegate,m,yi))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return oc(ic(),E._delegate,"operation-not-supported-in-this-environment"),yield qa(E._delegate),function R(_,f,m){return function L(_,f,m){return K.apply(this,arguments)}(_,f,m)}(E._delegate,m,yi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function En(_,f){return Jo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Pi,_})();function Af(_,f,m){let E=_;"function"!=typeof _&&({next:E,error:f,complete:m}=_);const T=E;return{next:z=>T(z&&Fo.getOrCreate(z)),error:f,complete:m}}function u_(_,f){const m=function Tg(_,f){const m=sc();if(!m)return[];const E=de(bf,_,f);switch(m.getItem(E)){case Pi.NONE:return[q];case Pi.LOCAL:return[Mi,lr];case Pi.SESSION:return[lr];default:return[]}}(_,f);if("undefined"!=typeof self&&!m.includes(Mi)&&m.push(Mi),"undefined"!=typeof window)for(const E of[Vn,lr])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class Sf{constructor(){this.providerId="phone",this._delegate=new Ni(Ag(Y.Z.auth()))}static credential(f,m){return Ni.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Sf.PHONE_SIGN_IN_METHOD=Ni.PHONE_SIGN_IN_METHOD,Sf.PROVIDER_ID=Ni.PROVIDER_ID;const l_=te;class c_{constructor(f,m,E=Y.Z.app()){var T;l_(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new gg(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xg(_){_.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Tf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vl,FacebookAuthProvider:vo,GithubAuthProvider:Xc,GoogleAuthProvider:Oa,OAuthProvider:Yo,SAMLAuthProvider:li,PhoneAuthProvider:Sf,PhoneMultiFactorGenerator:Ky,RecaptchaVerifier:c_,TwitterAuthProvider:mu,Auth:Tf,AuthCredential:an,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(lt,Ae,k)=>{k.d(Ae,{y:()=>$});var h=k(2961),Y=k(727),P=k(8822),ue=k(4671);var re=k(2416),fe=k(576),ce=k(2806);let $=(()=>{class Se{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const pe=new Se;return pe.source=this,pe.operator=Be,pe}subscribe(Be,pe,De){const rt=function Ke(Se){return Se&&Se instanceof h.Lv||function J(Se){return Se&&(0,fe.m)(Se.next)&&(0,fe.m)(Se.error)&&(0,fe.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(Be)?Be:new h.Hp(Be,pe,De);return(0,ce.x)(()=>{const{operator:Je,source:Ie}=this;rt.add(Je?Je.call(rt,Ie):Ie?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Be){try{return this._subscribe(Be)}catch(pe){Be.error(pe)}}forEach(Be,pe){return new(pe=H(pe))((De,rt)=>{const Je=new h.Hp({next:Ie=>{try{Be(Ie)}catch(ve){rt(ve),Je.unsubscribe()}},error:rt,complete:De});this.subscribe(Je)})}_subscribe(Be){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Be)}[P.L](){return this}pipe(...Be){return function ge(Se){return 0===Se.length?ue.y:1===Se.length?Se[0]:function(Be){return Se.reduce((pe,De)=>De(pe),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((pe,De)=>{let rt;this.subscribe(Je=>rt=Je,Je=>De(Je),()=>pe(rt))})}}return Se.create=ke=>new Se(ke),Se})();function H(Se){var ke;return null!==(ke=null!=Se?Se:re.v.Promise)&&void 0!==ke?ke:Promise}},7579:(lt,Ae,k)=>{k.d(Ae,{x:()=>re});var h=k(8306),Y=k(727);const ue=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),ge=k(2806);let re=(()=>{class ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const J=new fe(this,this);return J.operator=H,J}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:J}=this;for(;J.length;)J.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:J,isStopped:Ke,observers:Se}=this;return J||Ke?Y.Lc:(this.currentObservers=null,Se.push(H),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:J,thrownError:Ke,isStopped:Se}=this;J?H.error(Ke):Se&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return ce.create=($,H)=>new fe($,H),ce})();class fe extends re{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===J||J.call(H,$)}error($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===J||J.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,J;return null!==(J=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==J?J:Y.Lc}}},2961:(lt,Ae,k)=>{k.d(Ae,{Hp:()=>Be,Lv:()=>J});var h=k(576),Y=k(727),P=k(2416),ue=k(7849);function X(){}const ge=ce("C",void 0,void 0);function ce(Ie,ve,we){return{kind:Ie,value:ve,error:we}}var $=k(3410),H=k(2806);class J extends Y.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Y.Nn)(ve)&&ve.add(this)):this.destination=Je}static create(ve,we,ze){return new Be(ve,we,ze)}next(ve){this.isStopped?rt(function fe(Ie){return ce("N",Ie,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?rt(function re(Ie){return ce("E",void 0,Ie)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?rt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Se(Ie,ve){return Ke.call(Ie,ve)}class ke{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(ze){pe(ze)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(ze){pe(ze)}else pe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){pe(we)}}}class Be extends J{constructor(ve,we,ze){let qe;if(super(),(0,h.m)(ve)||!ve)qe={next:null!=ve?ve:void 0,error:null!=we?we:void 0,complete:null!=ze?ze:void 0};else{let te;this&&P.v.useDeprecatedNextContext?(te=Object.create(ve),te.unsubscribe=()=>this.unsubscribe(),qe={next:ve.next&&Se(ve.next,te),error:ve.error&&Se(ve.error,te),complete:ve.complete&&Se(ve.complete,te)}):qe=ve}this.destination=new ke(qe)}}function pe(Ie){P.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ie):(0,ue.h)(Ie)}function rt(Ie,ve){const{onStoppedNotification:we}=P.v;we&&$.z.setTimeout(()=>we(Ie,ve))}const Je={closed:!0,next:X,error:function De(Ie){throw Ie},complete:X}},727:(lt,Ae,k)=>{k.d(Ae,{Lc:()=>ge,w0:()=>X,Nn:()=>re});var h=k(576);const P=(0,k(3888).d)(ce=>function(H){ce(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((J,Ke)=>`${Ke+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=k(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:J}=this;if((0,h.m)(J))try{J()}catch(Se){$=Se instanceof P?Se.errors:[Se]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Se of Ke)try{fe(Se)}catch(ke){$=null!=$?$:[],ke instanceof P?$=[...$,...ke.errors]:$.push(ke)}}if($)throw new P($)}}add($){var H;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,ue.P)(H,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const ce=new X;return ce.closed=!0,ce})();const ge=X.EMPTY;function re(ce){return ce instanceof X||ce&&"closed"in ce&&(0,h.m)(ce.remove)&&(0,h.m)(ce.add)&&(0,h.m)(ce.unsubscribe)}function fe(ce){(0,h.m)(ce)?ce():ce.unsubscribe()}},2416:(lt,Ae,k)=>{k.d(Ae,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ae,k)=>{k.d(Ae,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(lt,Ae,k)=>{k.d(Ae,{D:()=>ve});var h=k(8421),Y=k(5363),P=k(9468),ge=k(8306),fe=k(2202),ce=k(576),$=k(9672);function J(we,ze){if(!we)throw new Error("Iterable cannot be null");return new ge.y(qe=>{(0,$.f)(qe,ze,()=>{const te=we[Symbol.asyncIterator]();(0,$.f)(qe,ze,()=>{te.next().then(W=>{W.done?qe.complete():qe.next(W.value)})},0,!0)})})}var Ke=k(3670),Se=k(8239),ke=k(1144),Be=k(6495),pe=k(2206),De=k(4532),rt=k(3260);function ve(we,ze){return ze?function Ie(we,ze){if(null!=we){if((0,Ke.c)(we))return function ue(we,ze){return(0,h.Xf)(we).pipe((0,P.R)(ze),(0,Y.Q)(ze))}(we,ze);if((0,ke.z)(we))return function re(we,ze){return new ge.y(qe=>{let te=0;return ze.schedule(function(){te===we.length?qe.complete():(qe.next(we[te++]),qe.closed||this.schedule())})})}(we,ze);if((0,Se.t)(we))return function X(we,ze){return(0,h.Xf)(we).pipe((0,P.R)(ze),(0,Y.Q)(ze))}(we,ze);if((0,pe.D)(we))return J(we,ze);if((0,Be.T)(we))return function H(we,ze){return new ge.y(qe=>{let te;return(0,$.f)(qe,ze,()=>{te=we[fe.h](),(0,$.f)(qe,ze,()=>{let W,ie;try{({value:W,done:ie}=te.next())}catch(me){return void qe.error(me)}ie?qe.complete():qe.next(W)},0,!0)}),()=>(0,ce.m)(null==te?void 0:te.return)&&te.return()})}(we,ze);if((0,rt.L)(we))return function Je(we,ze){return J((0,rt.Q)(we),ze)}(we,ze)}throw(0,De.z)(we)}(we,ze):(0,h.Xf)(we)}},8421:(lt,Ae,k)=>{k.d(Ae,{Xf:()=>Ke});var h=k(655),Y=k(1144),P=k(8239),ue=k(8306),X=k(3670),ge=k(2206),re=k(4532),fe=k(6495),ce=k(3260),$=k(576),H=k(7849),J=k(8822);function Ke(Ie){if(Ie instanceof ue.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Se(Ie){return new ue.y(ve=>{const we=Ie[J.L]();if((0,$.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Y.z)(Ie))return function ke(Ie){return new ue.y(ve=>{for(let we=0;we<Ie.length&&!ve.closed;we++)ve.next(Ie[we]);ve.complete()})}(Ie);if((0,P.t)(Ie))return function Be(Ie){return new ue.y(ve=>{Ie.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,H.h)})}(Ie);if((0,ge.D)(Ie))return De(Ie);if((0,fe.T)(Ie))return function pe(Ie){return new ue.y(ve=>{for(const we of Ie)if(ve.next(we),ve.closed)return;ve.complete()})}(Ie);if((0,ce.L)(Ie))return function rt(Ie){return De((0,ce.Q)(Ie))}(Ie)}throw(0,re.z)(Ie)}function De(Ie){return new ue.y(ve=>{(function Je(Ie,ve){var we,ze,qe,te;return(0,h.mG)(this,void 0,void 0,function*(){try{for(we=(0,h.KL)(Ie);!(ze=yield we.next()).done;)if(ve.next(ze.value),ve.closed)return}catch(W){qe={error:W}}finally{try{ze&&!ze.done&&(te=we.return)&&(yield te.call(we))}finally{if(qe)throw qe.error}}ve.complete()})})(Ie,ve).catch(we=>ve.error(we))})}},6451:(lt,Ae,k)=>{k.d(Ae,{T:()=>ge});var h=k(8189),Y=k(8421),P=k(515),ue=k(7669),X=k(8996);function ge(...re){const fe=(0,ue.yG)(re),ce=(0,ue._6)(re,1/0),$=re;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,h.J)(ce)((0,X.D)($,fe)):P.E}},5403:(lt,Ae,k)=>{k.d(Ae,{x:()=>Y});var h=k(2961);function Y(ue,X,ge,re,fe){return new P(ue,X,ge,re,fe)}class P extends h.Lv{constructor(X,ge,re,fe,ce,$){super(X),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=ge?function(H){try{ge(H)}catch(J){X.error(J)}}:super._next,this._error=fe?function(H){try{fe(H)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(lt,Ae,k)=>{k.d(Ae,{U:()=>P});var h=k(4482),Y=k(5403);function P(ue,X){return(0,h.e)((ge,re)=>{let fe=0;ge.subscribe((0,Y.x)(re,ce=>{re.next(ue.call(X,ce,fe++))}))})}},8189:(lt,Ae,k)=>{k.d(Ae,{J:()=>P});var h=k(5577),Y=k(4671);function P(ue=1/0){return(0,h.z)(Y.y,ue)}},5577:(lt,Ae,k)=>{k.d(Ae,{z:()=>fe});var h=k(4004),Y=k(8421),P=k(4482),ue=k(9672),X=k(5403),re=k(576);function fe(ce,$,H=1/0){return(0,re.m)($)?fe((J,Ke)=>(0,h.U)((Se,ke)=>$(J,Se,Ke,ke))((0,Y.Xf)(ce(J,Ke))),H):("number"==typeof $&&(H=$),(0,P.e)((J,Ke)=>function ge(ce,$,H,J,Ke,Se,ke,Be){const pe=[];let De=0,rt=0,Je=!1;const Ie=()=>{Je&&!pe.length&&!De&&$.complete()},ve=ze=>De<J?we(ze):pe.push(ze),we=ze=>{Se&&$.next(ze),De++;let qe=!1;(0,Y.Xf)(H(ze,rt++)).subscribe((0,X.x)($,te=>{null==Ke||Ke(te),Se?ve(te):$.next(te)},()=>{qe=!0},void 0,()=>{if(qe)try{for(De--;pe.length&&De<J;){const te=pe.shift();ke?(0,ue.f)($,ke,()=>we(te)):we(te)}Ie()}catch(te){$.error(te)}}))};return ce.subscribe((0,X.x)($,ve,()=>{Je=!0,Ie()})),()=>{null==Be||Be()}}(J,Ke,ce,H)))}},5363:(lt,Ae,k)=>{k.d(Ae,{Q:()=>ue});var h=k(9672),Y=k(4482),P=k(5403);function ue(X,ge=0){return(0,Y.e)((re,fe)=>{re.subscribe((0,P.x)(fe,ce=>(0,h.f)(fe,X,()=>fe.next(ce),ge),()=>(0,h.f)(fe,X,()=>fe.complete(),ge),ce=>(0,h.f)(fe,X,()=>fe.error(ce),ge)))})}},3099:(lt,Ae,k)=>{k.d(Ae,{B:()=>ge});var h=k(8996),Y=k(5698),P=k(7579),ue=k(2961),X=k(4482);function ge(fe={}){const{connector:ce=(()=>new P.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:J=!0}=fe;return Ke=>{let Se=null,ke=null,Be=null,pe=0,De=!1,rt=!1;const Je=()=>{null==ke||ke.unsubscribe(),ke=null},Ie=()=>{Je(),Se=Be=null,De=rt=!1},ve=()=>{const we=Se;Ie(),null==we||we.unsubscribe()};return(0,X.e)((we,ze)=>{pe++,!rt&&!De&&Je();const qe=Be=null!=Be?Be:ce();ze.add(()=>{pe--,0===pe&&!rt&&!De&&(ke=re(ve,J))}),qe.subscribe(ze),Se||(Se=new ue.Hp({next:te=>qe.next(te),error:te=>{rt=!0,Je(),ke=re(Ie,$,te),qe.error(te)},complete:()=>{De=!0,Je(),ke=re(Ie,H),qe.complete()}}),(0,h.D)(we).subscribe(Se))})(Ke)}}function re(fe,ce,...$){return!0===ce?(fe(),null):!1===ce?null:ce(...$).pipe((0,Y.q)(1)).subscribe(()=>fe())}},9468:(lt,Ae,k)=>{k.d(Ae,{R:()=>Y});var h=k(4482);function Y(P,ue=0){return(0,h.e)((X,ge)=>{ge.add(P.schedule(()=>X.subscribe(ge),ue))})}},5698:(lt,Ae,k)=>{k.d(Ae,{q:()=>ue});var h=k(515),Y=k(4482),P=k(5403);function ue(X){return X<=0?()=>h.E:(0,Y.e)((ge,re)=>{let fe=0;ge.subscribe((0,P.x)(re,ce=>{++fe<=X&&(re.next(ce),X<=fe&&re.complete())}))})}},8505:(lt,Ae,k)=>{k.d(Ae,{b:()=>X});var h=k(576),Y=k(4482),P=k(5403),ue=k(4671);function X(ge,re,fe){const ce=(0,h.m)(ge)||re||fe?{next:ge,error:re,complete:fe}:ge;return ce?(0,Y.e)(($,H)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let Ke=!0;$.subscribe((0,P.x)(H,Se=>{var ke;null===(ke=ce.next)||void 0===ke||ke.call(ce,Se),H.next(Se)},()=>{var Se;Ke=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),H.complete()},Se=>{var ke;Ke=!1,null===(ke=ce.error)||void 0===ke||ke.call(ce,Se),H.error(Se)},()=>{var Se,ke;Ke&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(ke=ce.finalize)||void 0===ke||ke.call(ce)}))}):ue.y}},4408:(lt,Ae,k)=>{k.d(Ae,{o:()=>X});var h=k(727);class Y extends h.w0{constructor(re,fe){super()}schedule(re,fe=0){return this}}const P={setInterval(ge,re,...fe){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,re,...fe):setInterval(ge,re,...fe)},clearInterval(ge){const{delegate:re}=P;return((null==re?void 0:re.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class X extends Y{constructor(re,fe){super(re,fe),this.scheduler=re,this.work=fe,this.pending=!1}schedule(re,fe=0){if(this.closed)return this;this.state=re;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId($,this.id,fe),this}requestAsyncId(re,fe,ce=0){return P.setInterval(re.flush.bind(re,this),ce)}recycleAsyncId(re,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;P.clearInterval(fe)}execute(re,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(re,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,fe){let $,ce=!1;try{this.work(re)}catch(H){ce=!0,$=H||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:re,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=re&&(this.id=this.recycleAsyncId(fe,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ae,k)=>{k.d(Ae,{v:()=>P});var h=k(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,re){return new this.schedulerActionCtor(this,X).schedule(re,ge)}}Y.now=h.l.now;class P extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,re){for(;X=ge.shift();)X.unsubscribe();throw re}}}},4986:(lt,Ae,k)=>{k.d(Ae,{z:()=>P});var h=k(4408);const P=new(k(7565).v)(h.o)},6063:(lt,Ae,k)=>{k.d(Ae,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,Ae,k)=>{k.d(Ae,{z:()=>h});const h={setTimeout(Y,P,...ue){const{delegate:X}=h;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,P,...ue):setTimeout(Y,P,...ue)},clearTimeout(Y){const{delegate:P}=h;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(lt,Ae,k)=>{k.d(Ae,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ae,k)=>{k.d(Ae,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ae,k)=>{k.d(Ae,{_6:()=>ge,jO:()=>ue,yG:()=>X});var h=k(576);function P(re){return re[re.length-1]}function ue(re){return(0,h.m)(P(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,h.m)(re.schedule)}(P(re))?re.pop():void 0}function ge(re,fe){return"number"==typeof P(re)?re.pop():fe}},8737:(lt,Ae,k)=>{function h(Y,P){if(Y){const ue=Y.indexOf(P);0<=ue&&Y.splice(ue,1)}}k.d(Ae,{P:()=>h})},3888:(lt,Ae,k)=>{function h(Y){const ue=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(Ae,{d:()=>h})},2806:(lt,Ae,k)=>{k.d(Ae,{x:()=>P,O:()=>ue});var h=k(2416);let Y=null;function P(X){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:re,error:fe}=Y;if(Y=null,re)throw fe}}else X()}function ue(X){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(lt,Ae,k)=>{function h(Y,P,ue,X=0,ge=!1){const re=P.schedule(function(){ue(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!ge)return re}k.d(Ae,{f:()=>h})},4671:(lt,Ae,k)=>{function h(Y){return Y}k.d(Ae,{y:()=>h})},1144:(lt,Ae,k)=>{k.d(Ae,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(lt,Ae,k)=>{k.d(Ae,{D:()=>Y});var h=k(576);function Y(P){return Symbol.asyncIterator&&(0,h.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(lt,Ae,k)=>{function h(Y){return"function"==typeof Y}k.d(Ae,{m:()=>h})},3670:(lt,Ae,k)=>{k.d(Ae,{c:()=>P});var h=k(8822),Y=k(576);function P(ue){return(0,Y.m)(ue[h.L])}},6495:(lt,Ae,k)=>{k.d(Ae,{T:()=>P});var h=k(2202),Y=k(576);function P(ue){return(0,Y.m)(null==ue?void 0:ue[h.h])}},8239:(lt,Ae,k)=>{k.d(Ae,{t:()=>Y});var h=k(576);function Y(P){return(0,h.m)(null==P?void 0:P.then)}},3260:(lt,Ae,k)=>{k.d(Ae,{Q:()=>P,L:()=>ue});var h=k(655),Y=k(576);function P(X){return(0,h.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,h.qq)(re.read());if(ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{re.releaseLock()}})}function ue(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(lt,Ae,k)=>{k.d(Ae,{A:()=>Y,e:()=>P});var h=k(576);function Y(ue){return(0,h.m)(null==ue?void 0:ue.lift)}function P(ue){return X=>{if(Y(X))return X.lift(function(ge){try{return ue(ge,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(lt,Ae,k)=>{k.d(Ae,{h:()=>P});var h=k(2416),Y=k(3410);function P(ue){Y.z.setTimeout(()=>{const{onUnhandledError:X}=h.v;if(!X)throw ue;X(ue)})}},4532:(lt,Ae,k)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>h})},655:(lt,Ae,k)=>{function ue(W,ie){var me={};for(var se in W)Object.prototype.hasOwnProperty.call(W,se)&&ie.indexOf(se)<0&&(me[se]=W[se]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(se=Object.getOwnPropertySymbols(W);Oe<se.length;Oe++)ie.indexOf(se[Oe])<0&&Object.prototype.propertyIsEnumerable.call(W,se[Oe])&&(me[se[Oe]]=W[se[Oe]])}return me}function X(W,ie,me,se){var St,Oe=arguments.length,ae=Oe<3?ie:null===se?se=Object.getOwnPropertyDescriptor(ie,me):se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ae=Reflect.decorate(W,ie,me,se);else for(var Jt=W.length-1;Jt>=0;Jt--)(St=W[Jt])&&(ae=(Oe<3?St(ae):Oe>3?St(ie,me,ae):St(ie,me))||ae);return Oe>3&&ae&&Object.defineProperty(ie,me,ae),ae}function re(W,ie){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(W,ie)}function fe(W,ie,me,se){return new(me||(me=Promise))(function(ae,St){function Jt(wt){try{ct(se.next(wt))}catch(cn){St(cn)}}function kn(wt){try{ct(se.throw(wt))}catch(cn){St(cn)}}function ct(wt){wt.done?ae(wt.value):function Oe(ae){return ae instanceof me?ae:new me(function(St){St(ae)})}(wt.value).then(Jt,kn)}ct((se=se.apply(W,ie||[])).next())})}function pe(W){return this instanceof pe?(this.v=W,this):new pe(W)}function De(W,ie,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,se=me.apply(W,ie||[]),ae=[];return Oe={},St("next"),St("throw"),St("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function St(dn){se[dn]&&(Oe[dn]=function(Ci){return new Promise(function(on,os){ae.push([dn,Ci,on,os])>1||Jt(dn,Ci)})})}function Jt(dn,Ci){try{!function kn(dn){dn.value instanceof pe?Promise.resolve(dn.value.v).then(ct,wt):cn(ae[0][2],dn)}(se[dn](Ci))}catch(on){cn(ae[0][3],on)}}function ct(dn){Jt("next",dn)}function wt(dn){Jt("throw",dn)}function cn(dn,Ci){dn(Ci),ae.shift(),ae.length&&Jt(ae[0][0],ae[0][1])}}function Je(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function J(W){var ie="function"==typeof Symbol&&Symbol.iterator,me=ie&&W[ie],se=0;if(me)return me.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&se>=W.length&&(W=void 0),{value:W&&W[se++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(ae){me[ae]=W[ae]&&function(St){return new Promise(function(Jt,kn){!function Oe(ae,St,Jt,kn){Promise.resolve(kn).then(function(ct){ae({value:ct,done:Jt})},St)}(Jt,kn,(St=W[ae](St)).done,St.value)})}}}k.d(Ae,{_T:()=>ue,gn:()=>X,w6:()=>re,mG:()=>fe,qq:()=>pe,FC:()=>De,KL:()=>Je})},5e3:(lt,Ae,k)=>{k.d(Ae,{deG:()=>hg,tb:()=>gy,AFp:()=>g0,ip1:()=>Zb,CZH:()=>fy,hGG:()=>TD,z2F:()=>S0,sBO:()=>hD,Sil:()=>Fh,_Vd:()=>mh,EJc:()=>y0,SBq:()=>vp,qLn:()=>Or,vpe:()=>Ho,tBr:()=>Ur,XFs:()=>ht,OlP:()=>xn,zs3:()=>Bo,ZZ4:()=>F0,aQg:()=>Vp,soG:()=>Np,YKP:()=>al,h0i:()=>Ss,PXZ:()=>C0,R0b:()=>Ms,FiY:()=>mi,Lbi:()=>Jb,g9A:()=>py,Qsj:()=>Pc,FYo:()=>ol,JOm:()=>oe,tp0:()=>No,Rgc:()=>Ih,dDg:()=>D0,q4F:()=>Vm,GfV:()=>Lm,s_b:()=>Ah,ifc:()=>qt,eFA:()=>Ey,G48:()=>x0,Gpc:()=>H,X6Q:()=>LT,_c5:()=>U0,VLi:()=>rD,c2e:()=>my,zSh:()=>nm,wAp:()=>Ct,vHH:()=>ke,cg1:()=>Mm,kL8:()=>Fv,dqk:()=>Ht,sIi:()=>Kd,CqO:()=>nu,QGY:()=>cr,F4k:()=>Aw,RDi:()=>fs,AaK:()=>fe,qOj:()=>zd,TTD:()=>vo,_Bn:()=>il,xp6:()=>kE,uIk:()=>hm,Tol:()=>el,ekj:()=>Sv,Suo:()=>Bb,Xpm:()=>Vt,lG2:()=>Yt,Yz7:()=>on,cJS:()=>Xt,oAB:()=>Q,Yjl:()=>Ir,Y36:()=>Ut,_UZ:()=>Em,qZA:()=>va,TgZ:()=>ep,EpF:()=>Tw,n5z:()=>fd,LFG:()=>et,$8M:()=>So,$Z:()=>Ec,NdJ:()=>jn,CRH:()=>Qm,oxw:()=>Ea,ALo:()=>qm,lcZ:()=>Nb,xi3:()=>Ob,Hsn:()=>vv,F$t:()=>eh,Q6J:()=>vm,DdM:()=>wp,VKq:()=>Jv,iGM:()=>u0,Jf7:()=>Mg,CHM:()=>Dl,LSH:()=>Uu,YNc:()=>cv,_uU:()=>xv,Oqu:()=>nl,hij:()=>Ic});var h=k(7579),Y=k(727),P=k(8306),ue=k(6451),X=k(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return fe(this())},s}function J(s){return Ke(s)?s():s}function Ke(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class ke extends Error{constructor(o,a){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function ve(s,o){const a=o?` in ${o}`:"";throw new ke(-201,`No provider for ${De(s)} found${a}`)}function ct(s,o){null==s&&function wt(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gt(s){return fr(s,Ui)||fr(s,as)}function fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Pr(s){return s&&(s.hasOwnProperty(Fr)||s.hasOwnProperty(us))?s[Fr]:null}const Ui=ge({\u0275prov:ge}),Fr=ge({\u0275inj:ge}),as=ge({ngInjectableDef:ge}),us=ge({ngInjectorDef:ge});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Qr;function Qn(s){const o=Qr;return Qr=s,o}function oi(s,o,a){const l=Gt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==o?o:void ve(fe(s),"Injector")}function vn(s){return{toString:s}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),qt=(()=>{return(s=qt||(qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qt;var s})();const at="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=at||"undefined"!=typeof global&&global||It||pr,gr={},ft=[],Cr=ge({\u0275cmp:ge}),jt=ge({\u0275dir:ge}),Xe=ge({\u0275pipe:ge}),Te=ge({\u0275mod:ge}),tt=ge({\u0275fac:ge}),pt=ge({__NG_ELEMENT_ID__:ge});let $t=0;function Vt(s){return vn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qt.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=$t++,l.inputs=bt(s.inputs,a),l.outputs=bt(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return zt(s)||function Sn(s){return s[jt]||null}(s)}function q(s){return function Ot(s){return s[Xe]||null}(s)}const de={};function Q(s){return vn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function bt(s,o){if(null==s)return gr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Yt=Vt;function Ir(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[Cr]||null}function fn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return a}function Ii(s){return Array.isArray(s)&&"object"==typeof s[1]}function ui(s){return Array.isArray(s)&&!0===s[1]}function Kc(s){return 0!=(8&s.flags)}function js(s){return 2==(2&s.flags)}function fu(s){return 1==(1&s.flags)}function Jr(s){return null!==s.template}function Zh(s){return 0!=(512&s[2])}function Xr(s,o){return s.hasOwnProperty(tt)?s[tt]:null}class Yo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function vo(){return Oa}function Oa(s){return s.type.prototype.ngOnChanges&&(s.setInput=lg),Xc}function Xc(){const s=Gs(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===gr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function lg(s,o,a,l){const d=Gs(s)||function li(s,o){return s[zn]=o}(s,{previous:gr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new Yo(D&&D.currentValue,o,v===gr),s[l]=o}vo.ngInherit=!0;const zn="__ngSimpleChanges__";function Gs(s){return s[zn]||null}let Eu;function fs(s){Eu=s}function yn(s){return!!s.listen}const Qo={createRenderer:(s,o)=>function ka(){return void 0!==Eu?Eu:"undefined"!=typeof document?document:void 0}()};function ln(s){for(;Array.isArray(s);)s=s[0];return s}function wo(s,o){return ln(o[s])}function Ar(s,o){return ln(o[s.index])}function Pa(s,o){return s.data[o]}function Ti(s,o){return s[o]}function Sr(s,o){const a=o[s];return Ii(a)?a:a[0]}function zs(s){return 4==(4&s[2])}function ps(s){return 128==(128&s[2])}function ei(s,o){return null==o?null:s[o]}function Ws(s){s[18]=0}function Ks(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const gt={lFrame:Do(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Iu(){return gt.bindingsEnabled}function Ce(){return gt.lFrame.lView}function Bt(){return gt.lFrame.tView}function Dl(s){return gt.lFrame.contextLView=s,s[8]}function En(){let s=Jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Jo(){return gt.lFrame.currentTNode}function ti(s,o){const a=gt.lFrame;a.currentTNode=s,a.isParent=o}function Cl(){return gt.lFrame.isParent}function Il(){gt.lFrame.isParent=!1}function Tu(){return gt.isInCheckNoChangesMode}function Zs(s){gt.isInCheckNoChangesMode=s}function _r(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ys(){return gt.lFrame.bindingIndex++}function Ai(s){const o=gt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Mu(s,o){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=s,La(o)}function La(s){gt.lFrame.currentDirectiveIndex=s}function Ml(){return gt.lFrame.currentQueryIndex}function xl(s){gt.lFrame.currentQueryIndex=s}function rd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Rl(s,o,a){if(a&ht.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&ht.Host||(d=rd(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=gt.lFrame=id();return l.currentTNode=o,l.lView=s,!0}function bo(s){const o=id(),a=s[1];gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function id(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?Do(s):o}function Do(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function sd(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const od=sd;function Co(){const s=sd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Mr(){return gt.lFrame.selectedIndex}function Js(s){gt.lFrame.selectedIndex=s}function Mn(){const s=gt.lFrame;return Pa(s.tView,s.selectedIndex)}function gs(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Va(s,o,a){ad(s,o,3,a)}function xu(s,o,a,l){(3&s[2])===a&&ad(s,o,a,l)}function Wn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function ad(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(cg(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function cg(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ta{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function _t(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];ni(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function lr(s){return 3===s||4===s||6===s}function ni(s){return 64===s.charCodeAt(0)}function Vr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||na(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function na(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function cd(s){return-1!==s}function gn(s){return 32767&s}function Si(s,o){let a=function tf(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Ru=!0;function di(s){const o=Ru;return Ru=s,o}let Ll=0;function Kn(s,o){const a=ra(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ys(l.data,s),ys(o,null),ys(l.blueprint,null));const d=hi(s,o),g=s.injectorIndex;if(cd(d)){const v=gn(d),w=Si(d,o),D=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|D[v+A]}return o[g+8]=d,g}function ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ra(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function hi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Xs(s,o,a){!function To(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(pt)&&(l=a[pt]),null==l&&(l=a[pt]=Ll++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Gi(s,o,a){if(a&ht.Optional)return s;ve(o,"NodeInjector")}function Vl(s,o,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const d=s[9],g=Qn(void 0);try{return d?d.get(o,l,a&ht.Optional):oi(o,l,a&ht.Optional)}finally{Qn(g)}}return Gi(l,o,a)}function eo(s,o,a,l=ht.Default,d){if(null!==s){const g=function ia(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pt)?s[pt]:void 0;return"number"==typeof o?o>=0?255&o:Bl:o}(a);if("function"==typeof g){if(!Rl(o,s,l))return l&ht.Host?Gi(d,a,l):Vl(o,a,l,d);try{const v=g(l);if(null!=v||l&ht.Optional)return v;ve(a)}finally{od()}}else if("number"==typeof g){let v=null,w=ra(s,o),D=-1,A=l&ht.Host?o[16][6]:null;for((-1===w||l&ht.SkipSelf)&&(D=-1===w?hi(s,o):o[w+8],-1!==D&&Br(l,!1)?(v=o[1],w=gn(D),o=Si(D,o)):w=-1);-1!==w;){const x=o[1];if(sa(g,w,x.data)){const O=hd(w,o,a,v,l,A);if(O!==qi)return O}D=o[w+8],-1!==D&&Br(l,o[1].data[w+8]===A)&&sa(g,w,o)?(v=x,w=gn(D),o=Si(D,o)):w=-1}}}return Vl(o,a,l,d)}const qi={};function Bl(){return new xi(En(),Ce())}function hd(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=Ao(w,v,a,null==l?js(w)&&Ru:l!=v&&0!=(3&w.type),d&ht.Host&&g===w);return null!==x?Mi(o,v,x,w):qi}function Ao(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,U=d?w+x:s.directiveEnd;for(let Z=l?w:w+x;Z<U;Z++){const ye=v[Z];if(Z<D&&a===ye||Z>=D&&ye.type===a)return Z}if(d){const Z=v[D];if(Z&&Jr(Z)&&Z.type===a)return D}return null}function Mi(s,o,a,l){let d=s[a];const g=o.data;if(function ud(s){return s instanceof ta}(d)){const v=d;v.resolving&&function rt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${a}`)}(De(g[a]));const w=di(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Qn(v.injectImpl):null;Rl(s,l,ht.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function kl(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Oa(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Qn(D),di(w),v.resolving=!1,od()}}return d}function sa(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Br(s,o){return!(s&ht.Self||s&ht.Host&&o)}class xi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return eo(this._tNode,this._lView,o,l,a)}}function fd(s){return vn(()=>{const o=s.prototype.constructor,a=o[tt]||Bn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[tt]||Bn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Bn(s){return Ke(s)?()=>{const o=Bn(J(s));return o&&o()}:Xr(s)}function So(s){return function fi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(lr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(En(),s)}const oa="__parameters__";function Cn(s,o,a){return vn(()=>{const l=function Wi(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,A,x){const O=D.hasOwnProperty(oa)?D[oa]:Object.defineProperty(D,oa,{value:[]})[oa];for(;O.length<=x;)O.push(null);return(O[x]=O[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class xn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hg=new xn("AnalyzeForEntryComponents");function Rr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Rr(l,o)):o!==s&&o.push(l)}return o}function pi(s,o){s.forEach(a=>Array.isArray(a)?pi(a,o):o(a))}function $l(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function vs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ni(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Xn(s,o,a){let l=io(s,o);return l>=0?s[1|l]=a:(l=~l,function Hl(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function zl(s,o){const a=io(s,o);if(a>=0)return s[1|a]}function io(s,o){return function Mo(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const xo={},ua="__NG_DI_FLAG__",Pu="ngTempTokenPath",I=/\n/gm,L="__source",K=ge({provide:String,useValue:ge});let ee;function Me(s){const o=ee;return ee=s,o}function xe(s,o=ht.Default){if(void 0===ee)throw new ke(203,"");return null===ee?oi(s,void 0,o):ee.get(s,o&ht.Optional?null:void 0,o)}function et(s,o=ht.Default){return(function sr(){return Qr}()||xe)(J(s),o)}const kt=et;function xt(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let d,g=ht.Default;for(let v=0;v<l.length;v++){const w=l[v],D=Rn(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(et(d,g))}else o.push(et(l))}return o}function Zn(s,o){return s[ua]=o,s.prototype[ua]=o,s}function Rn(s){return s[ua]}const Ur=Zn(Cn("Inject",s=>({token:s})),-1),mi=Zn(Cn("Optional"),8),No=Zn(Cn("SkipSelf"),4);class Dd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function so(s){return s instanceof Dd?s.changingThisBreaksApplicationSecurity:s}const oo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,cf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function Uu(s){const o=function fa(){const s=Ce();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function da(s,o){const a=function Lu(s){return s instanceof Dd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?so(s):function Vu(s){return(s=String(s)).match(oo)||s.match(cf)?s:"unsafe:"+s}(pe(s))}const Ef="__ngContext__";function jr(s,o){s[Ef]=o}function wf(s){const o=function Ha(s){return s[Ef]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function za(s){return s.ngOriginalError}function Sg(s,...o){s.error(...o)}class Or{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function o_(s){return s&&s.ngErrorLogger||Sg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&za(o);for(;a&&za(a);)a=za(a);return a||null}}const c_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Mg(s){return s.ownerDocument.defaultView}function m(s){return s instanceof Function?s():s}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function nt(s,o){return undefined(s,o)}function Nn(s){const o=s[3];return ui(o)?o[3]:o}function ju(s){return Mf(s[13])}function $u(s){return Mf(s[4])}function Mf(s){for(;null!==s&&!ui(s);)s=s[4];return s}function pa(s,o,a,l,d){if(null!=l){let g,v=!1;ui(l)?g=l:Ii(l)&&(v=!0,l=l[0]);const w=ln(l);0===s&&null!==a?null==d?g_(o,a,w):ws(o,a,w,d||null,!0):1===s&&null!==a?ws(o,a,w,d||null,!0):2===s?function v_(s,o,a){const l=ao(s,o);l&&function $C(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function GC(s,o,a,l,d){const g=a[7];g!==ln(a)&&pa(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];Fg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function Rd(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function vu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function vE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ks(d,-1)),a.splice(l,1)}function h_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&vE(d,l),o>0&&(s[a-1][4]=l[4]);const g=vs(s,10+o);!function _i(s,o){Fg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function f_(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&Fg(s,o,a,3,null,null),function Ng(s){let o=s[13];if(!o)return p_(s[1],s);for(;o;){let a=null;if(Ii(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ii(o)&&p_(o[1],o),o=o[3];null===o&&(o=s),Ii(o)&&p_(o[1],o),a=o&&o[4]}o=a}}(o)}}function p_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function wE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof ta)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function EE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):ln(o[v]),D=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],D,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ui(o[3])){a!==o[3]&&vE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function kg(s,o,a){return function jC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===qt.None||d===qt.Emulated)return null}return Ar(l,a)}(s,o.parent,a)}function ws(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function g_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function bE(s,o,a,l,d){null!==l?ws(s,o,a,l,d):g_(s,o,a)}function ao(s,o){return yn(s)?s.parentNode(o):o.parentNode}function DE(s,o,a){return m_(s,o,a)}let m_=function CE(s,o,a){return 40&s.type?Ar(s,a):null};function Pg(s,o,a,l){const d=kg(s,l,o),g=o[11],w=DE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)bE(g,d,a[D],w,!1);else bE(g,d,a,w,!1)}function Od(s,o){if(null!==o){const a=o.type;if(3&a)return Ar(o,s);if(4&a)return __(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Od(s,l);{const d=s[o.index];return ui(d)?__(-1,d):ln(d)}}if(32&a)return nt(o,s)()||ln(s[o.index]);{const l=TE(s,o);return null!==l?Array.isArray(l)?l[0]:Od(Nn(s[16]),l):Od(s,o.next)}}return null}function TE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function __(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Od(l,d)}return o[7]}function E_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&jr(ln(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)E_(s,o,a.child,l,d,g,!1),pa(o,s,d,w,g);else if(32&D){const A=nt(a,l);let x;for(;x=A();)pa(o,s,d,x,g);pa(o,s,d,w,g)}else 16&D?Lg(s,o,l,a,d,g):pa(o,s,d,w,g);a=v?a.projectionNext:a.next}}function Fg(s,o,a,l,d,g){E_(a,l,s.firstChild,o,d,g,!1)}function Lg(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)pa(o,s,d,D[A],g);else E_(s,o,D,v[3],d,g,!0)}function w_(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Vg(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function ME(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const xE="ng-template";function b_(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==ME(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function RE(s){return 4===s.type&&s.value!==xE}function NE(s,o,a){return o===(4!==s.type||a?s.value:xE)}function qC(s,o,a){let l=4;const d=s.attrs||[],g=function Lo(s){for(let o=0;o<s.length;o++)if(lr(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!NE(s,D,a)||""===D&&1===o.length){if(bn(l))return!1;v=!0}}else{const A=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!b_(s.attrs,A,a)){if(bn(l))return!1;v=!0}continue}const O=D_(8&l?"class":D,d,RE(s),a);if(-1===O){if(bn(l))return!1;v=!0;continue}if(""!==A){let U;U=O>g?"":d[O+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==ME(Z,A,0)||2&l&&A!==U){if(bn(l))return!1;v=!0}}}}else{if(!v&&!bn(l)&&!bn(D))return!1;if(v&&bn(D))continue;v=!1,l=D|1&l}}return bn(l)||v}function bn(s){return 0==(1&s)}function D_(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function LS(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function OE(s,o,a=!1){for(let l=0;l<o.length;l++)if(qC(s,o[l],a))return!0;return!1}function WC(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function _e(s,o){return s?":not("+o.trim()+")":o}function uc(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!bn(v)&&(o+=_e(g,d),d=""),l=v,g=g||!bn(l);a++}return""!==d&&(o+=_e(g,d)),o}const He={};function kE(s){ga(Bt(),Ce(),Mr()+s,Tu())}function ga(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Va(o,g,a)}else{const g=s.preOrderHooks;null!==g&&xu(o,g,0,a)}Js(a)}function kd(s,o){return s<<17|o<<2}function vt(s){return s>>17&32767}function lc(s){return 2|s}function Wa(s){return(131068&s)>>2}function Of(s,o){return-131069&s|o<<2}function I_(s){return 1|s}function jE(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];xl(d),v.contentQueries(2,o[g],g)}}}function Vf(s,o,a,l,d,g,v,w,D,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,Ws(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function Ya(s,o,a,l,d){let g=s.data[o];if(null===g)g=function Fd(s,o,a,l,d){const g=Jo(),v=Cl(),D=s.data[o]=function Gr(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function Al(){return gt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Xo(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ti(g,!0),g}function Gu(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function cc(s,o,a){bo(o);try{const l=s.viewQuery;null!==l&&Gf(1,l,a);const d=s.template;null!==d&&B_(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&jE(s,o),s.staticViewQueries&&Gf(2,s.viewQuery,a);const g=s.components;null!==g&&function tI(s,o){for(let a=0;a<o.length;a++)JE(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Co()}}function qu(s,o,a,l){const d=o[2];if(256==(256&d))return;bo(o);const g=Tu();try{Ws(o),function Au(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&B_(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Va(o,A,null)}else{const A=s.preOrderHooks;null!==A&&xu(o,A,0,null),Wn(o,0)}if(function Jg(s){for(let o=ju(s);null!==o;o=$u(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Ks(g,1),d[2]|=1024}}}(o),function YE(s){for(let o=ju(s);null!==o;o=$u(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ps(l)&&qu(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&jE(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&Va(o,A)}else{const A=s.contentHooks;null!==A&&xu(o,A,1),Wn(o,1)}!function Ff(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Js(~d);else{const g=d,v=a[++l],w=a[++l];Mu(v,g),w(2,o[g])}}}finally{Js(-1)}}(s,o);const w=s.components;null!==w&&function Lf(s,o){for(let a=0;a<o.length;a++)QE(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&Gf(2,D,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&Va(o,A)}else{const A=s.viewHooks;null!==A&&xu(o,A,2),Wn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ks(o[3],-1))}finally{Co()}}function V_(s,o,a,l){const d=o[10],g=!Tu(),v=zs(o);try{g&&!v&&d.begin&&d.begin(),v&&cc(s,o,l),qu(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function B_(s,o,a,l,d){const g=Mr(),v=2&l;try{Js(-1),v&&o.length>20&&ga(s,o,20,Tu()),a(l,d)}finally{Js(g)}}function j_(s,o,a){!Iu()||(function Zg(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Kn(a,o),jr(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],A=Jr(D);A&&Qg(o,a,D);const x=Mi(o,s,w,a);jr(x,o),null!==v&&Vd(0,w-d,x,D,0,v),A&&(Sr(a.index,o)[8]=x)}}(s,o,a,Ar(a,o)),128==(128&a.flags)&&function q_(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Sl(){return gt.lFrame.currentDirectiveIndex}();try{Js(v);for(let D=l;D<d;D++){const A=s.data[D],x=o[D];La(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Yg(A,x)}}finally{Js(-1),La(w)}}(s,o,a))}function Gg(s,o,a=Ar){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function $_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ld(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ld(s,o,a,l,d,g,v,w,D,A){const x=20+l,O=x+d,U=function $E(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:He);return a}(x,O),Z="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Z,incompleteFirstPass:!1}}function zg(s,o,a,l){const d=qf(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&Bd(s).push(l,d.length-1))}function qr(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Bf(s,o,a,l){let d=!1;if(Iu()){const g=function WE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];OE(a,v.selectors,!1)&&(d||(d=[]),Xs(Kn(a,o),s,v.type),Jr(v)?(KE(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,z_(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const O=g[x];O.providersResolver&&O.providersResolver(O)}let w=!1,D=!1,A=Gu(s,o,g.length,null);for(let x=0;x<g.length;x++){const O=g[x];a.mergedAttrs=Vr(a.mergedAttrs,O.hostAttrs),W_(s,a,o,A,O),ZE(A,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const U=O.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),A++}!function Wg(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],O=x.inputs,U=null===g||RE(o)?null:sI(O,g);v.push(U),w=qr(O,A,w),D=qr(x.outputs,A,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function Uf(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new ke(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Vr(a.mergedAttrs,a.attrs),d}function G_(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function iI(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function Yg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function KE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ZE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Jr(o)&&(a[""]=s)}}function z_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function W_(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Xr(d.type)),v=new ta(g,Jr(d),null);s.blueprint[l]=v,a[l]=v,G_(s,o,0,l,Gu(s,a,d.hostVars,He),d)}function Qg(s,o,a){const l=Ar(o,s),d=$_(a),g=s[10],v=jf(s,Vf(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function ma(s,o,a,l,d,g){const v=Ar(s,o);!function K_(s,o,a,l,d,g,v){if(null==g)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?pe(g):v(g,l||"",d);yn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function Vd(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const A=v[D++],x=v[D++],O=v[D++];null!==w?l.setInput(a,O,A,x):a[x]=O}}}function sI(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function zu(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function QE(s,o){const a=Sr(o,s);if(ps(a)){const l=a[1];80&a[2]?qu(l,a,l.template,a[8]):a[5]>0&&dc(a)}}function dc(s){for(let l=ju(s);null!==l;l=$u(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];qu(v,g,v.template,g[8])}else g[5]>0&&dc(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Sr(a[l],s);ps(d)&&d[5]>0&&dc(d)}}function JE(s,o){const a=Sr(o,s),l=a[1];(function Fi(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),cc(l,a,a[8])}function jf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function hc(s){for(;s;){s[2]|=64;const o=Nn(s);if(Zh(s)&&!o)return s;s=o}return null}function $f(s,o,a){const l=o[10];l.begin&&l.begin();try{qu(s,o,s.template,a)}catch(d){throw tw(o,d),d}finally{l.end&&l.end()}}function Z_(s){!function em(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=wf(a),d=l[1];V_(d,l,d.template,a)}}(s[8])}function Gf(s,o,a){xl(0),o(s,a)}const Y_=(()=>Promise.resolve(null))();function qf(s){return s[7]||(s[7]=[])}function Bd(s){return s.cleanup||(s.cleanup=[])}function tw(s,o){const a=s[9],l=a?a.get(Or,null):null;l&&l.handleError(o)}function tm(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],A=s.data[v];null!==A.setInput?A.setInput(D,d,l,w):D[w]=d}}function uo(s,o,a){const l=wo(o,s);!function xd(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Ud(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=ce(d,w):2==g&&(l=ce(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const J_=new xn("INJECTOR",-1);class jd{get(o,a=xo){if(a===xo){const l=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw l.name="NullInjectorError",l}return a}}const nm=new xn("Set Injector scope."),Wu={},zf={};let Qa;function rm(){return void 0===Qa&&(Qa=new jd),Qa}function iw(s,o=null,a=null,l){const d=im(s,o,a,l);return d._resolveInjectorDefTypes(),d}function im(s,o=null,a=null,l){return new $d(s,a,o||rm(),l)}class $d{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&pi(a,w=>this.processProvider(w,o,a)),pi([o],w=>this.processInjectorType(w,[],g)),this.records.set(J_,lo(void 0,this));const v=this.records.get(nm);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=xo,l=ht.Default){this.assertNotDestroyed();const d=Me(this),g=Qn(void 0);try{if(!(l&ht.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function aI(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(o)&&Gt(o);w=D&&this.injectableDefInScope(D)?lo(Wf(o),Wu):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&ht.Self?rm():this.parent).get(o,a=l&ht.Optional&&a===xo?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Pu]=v[Pu]||[]).unshift(fe(o)),d)throw v;return function la(s,o,a,l){const d=s[Pu];throw o[L]&&d.unshift(o[L]),s.message=function Ro(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Pu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Qn(g),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(fe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=Pr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=Pr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{pi(d.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===x&&(x=[]),x.push(O))})}finally{}if(void 0!==x)for(let O=0;O<x.length;O++){const{ngModule:U,providers:Z}=x[O];pi(Z,ye=>this.processProvider(ye,U,Z||ft))}}this.injectorDefTypes.add(v);const D=Xr(v)||(()=>new v);this.records.set(v,lo(D,Wu));const A=d.providers;if(null!=A&&!w){const x=o;pi(A,O=>this.processProvider(O,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=Ja(o=J(o))?o:J(o&&o.provide);const g=function sw(s,o,a){return ya(s)?lo(void 0,s.useValue):lo(ow(s),Wu)}(o);if(Ja(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=lo(void 0,Wu,!0),v.factory=()=>xt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Wu&&(a.value=zf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function am(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Wf(s){const o=Gt(s),a=null!==o?o.factory:Xr(s);if(null!==a)return a;if(s instanceof xn)throw new ke(204,!1);if(s instanceof Function)return function fc(s){const o=s.length;if(o>0)throw Ni(o,"?"),new ke(204,!1);const a=function si(s){const o=s&&(s[Ui]||s[as]);if(o){const a=function Fs(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ke(204,!1)}function ow(s,o,a){let l;if(Ja(s)){const d=J(s);return Xr(d)||Wf(d)}if(ya(s))l=()=>J(s.useValue);else if(function om(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...xt(s.deps||[]));else if(function sm(s){return!(!s||!s.useExisting)}(s))l=()=>et(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function Un(s){return!!s.deps}(s))return Xr(d)||Wf(d);l=()=>new d(...xt(s.deps))}return l}function lo(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function ya(s){return null!==s&&"object"==typeof s&&K in s}function Ja(s){return"function"==typeof s}let Bo=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return iw({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return iw({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=xo,s.NULL=new jd,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>et(J_)}),s.__NG_ELEMENT_ID__=-1,s})();function gI(s,o){gs(wf(s)[1],En())}function zd(s){let o=function qd(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Jr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=cm(s.inputs),v.declaredInputs=cm(s.declaredInputs),v.outputs=cm(s.outputs);const w=d.hostBindings;w&&mI(s,w);const D=d.viewQuery,A=d.contentQueries;if(D&&Zf(s,D),A&&Yf(s,A),re(s.inputs,d.inputs),re(s.declaredInputs,d.declaredInputs),re(s.outputs,d.outputs),Jr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===zd&&(a=!1)}}o=Object.getPrototypeOf(o)}!function iv(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Vr(d.hostAttrs,a=Vr(a,d.hostAttrs))}}(l)}function cm(s){return s===gr?{}:s===ft?[]:s}function Zf(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Yf(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function mI(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let dm=null;function Wd(){if(!dm){const s=Ht.Symbol;if(s&&s.iterator)dm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(dm=l)}}}return dm}function Kd(s){return!!Zd(s)&&(Array.isArray(s)||!(s instanceof Map)&&Wd()in s)}function Zd(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Uo(s,o,a){return s[o]=a}function ii(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function hm(s,o,a,l){const d=Ce();return ii(d,Ys(),o)&&(Bt(),ma(Mn(),d,s,o,a,l)),hm}function cv(s,o,a,l,d,g,v,w){const D=Ce(),A=Bt(),x=s+20,O=A.firstCreatePass?function yw(s,o,a,l,d,g,v,w,D){const A=o.consts,x=Ya(o,s,4,v||null,ei(A,w));Bf(o,a,x,ei(A,D)),gs(o,x);const O=x.tViews=Ld(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),O.queries=o.queries.embeddedTView(x)),x}(x,A,D,o,a,l,d,g,v):A.data[x];ti(O,!1);const U=D[11].createComment("");Pg(A,D,U,O),jr(U,D),jf(D,D[x]=zu(U,D,U,O)),fu(O)&&j_(A,D,O),null!=v&&Gg(D,O,w)}function Ut(s,o=ht.Default){const a=Ce();return null===a?et(s,o):eo(En(),a,J(s),o)}function Ec(){throw new Error("invalid")}function vm(s,o,a){const l=Ce();return ii(l,Ys(),o)&&function bs(s,o,a,l,d,g,v,w){const D=Ar(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(tm(s,a,x,l,d),js(o)&&function nI(s,o){const a=Sr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function H_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,yn(g)?g.setProperty(D,l,d):ni(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Bt(),Mn(),l,s,o,l[11],a,!1),vm}function Yn(s,o,a,l,d){const v=d?"class":"style";tm(s,a,o.inputs[v],v,l)}function ep(s,o,a,l){const d=Ce(),g=Bt(),v=20+s,w=d[11],D=d[v]=Rd(w,o,function Vy(){return gt.lFrame.currentNamespace}()),A=g.firstCreatePass?function At(s,o,a,l,d,g,v){const w=o.consts,A=Ya(o,s,2,d,ei(w,g));return Bf(o,a,A,ei(w,v)),null!==A.attrs&&Ud(A,A.attrs,!1),null!==A.mergedAttrs&&Ud(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];ti(A,!0);const x=A.mergedAttrs;null!==x&&_t(w,D,x);const O=A.classes;null!==O&&Vg(w,D,O);const U=A.styles;return null!==U&&w_(w,D,U),64!=(64&A.flags)&&Pg(g,d,D,A),0===function Fa(){return gt.lFrame.elementDepthCount}()&&jr(D,d),function Du(){gt.lFrame.elementDepthCount++}(),fu(A)&&(j_(g,d,A),function U_(s,o,a){if(Kc(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&Gg(d,A),ep}function va(){let s=En();Cl()?Il():(s=s.parent,ti(s,!1));const o=s;!function Cu(){gt.lFrame.elementDepthCount--}();const a=Bt();return a.firstCreatePass&&(gs(a,s),Kc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ef(s){return 0!=(16&s.flags)}(o)&&Yn(a,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function dg(s){return 0!=(32&s.flags)}(o)&&Yn(a,o,Ce(),o.stylesWithoutHost,!1),va}function Em(s,o,a,l){return ep(s,o,a,l),va(),Em}function Tw(){return Ce()}function cr(s){return!!s&&"function"==typeof s.then}function Aw(s){return!!s&&"function"==typeof s.subscribe}const nu=Aw;function jn(s,o,a,l){const d=Ce(),g=Bt(),v=En();return function yv(s,o,a,l,d,g,v,w){const D=fu(l),x=s.firstCreatePass&&Bd(s),O=o[8],U=qf(o);let Z=!0;if(3&l.type||w){const Ne=Ar(l,o),Ge=w?w(Ne):Ne,Ee=U.length,mt=w?Kt=>w(ln(Kt[l.index])):l.index;if(yn(a)){let Kt=null;if(!w&&D&&(Kt=function mv(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=g,Kt.__ngLastListenerFn__=g,Z=!1;else{g=_v(l,o,O,g,!1);const sn=a.listen(Ge,d,g);U.push(g,sn),x&&x.push(d,mt,Ee,Ee+1)}}else g=_v(l,o,O,g,!0),Ge.addEventListener(d,g,v),U.push(g),x&&x.push(d,mt,Ee,v)}else g=_v(l,o,O,g,!1);const ye=l.outputs;let Le;if(Z&&null!==ye&&(Le=ye[d])){const Ne=Le.length;if(Ne)for(let Ge=0;Ge<Ne;Ge+=2){const is=o[Le[Ge]][Le[Ge+1]].subscribe(g),hl=U.length;U.push(g,is),x&&x.push(d,l.index,hl,-(hl+1))}}}(g,d,d[11],v,s,o,!!a,l),jn}function Xd(s,o,a,l){try{return!1!==a(l)}catch(d){return tw(s,d),!1}}function _v(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?Sr(s.index,o):o;0==(32&o[2])&&hc(w);let D=Xd(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)D=Xd(o,0,A,v)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Ea(s=1){return function Qs(s){return(gt.lFrame.contextLView=function Nl(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function bc(s,o){let a=null;const l=function zC(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?OE(s,g,!0):WC(l,g))return d}else a=d}return a}function eh(s){const o=Ce()[16][6];if(!o.projection){const l=o.projection=Ni(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?bc(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function vv(s,o=0,a){const l=Ce(),d=Bt(),g=Ya(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),Il(),64!=(64&g.flags)&&function AE(s,o,a){Lg(o[11],0,o,a,kg(s,a,o),DE(a.parent||o[6],a,o))}(d,l,g)}function Dv(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?vt(g):Wa(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];Sw(s[w],o)&&(D=!0,s[w+1]=l?I_(x):lc(x)),w=l?vt(x):Wa(x)}D&&(s[a+1]=l?lc(g):I_(g))}function Sw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&io(s,o)>=0}const tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nh(s){return s.substring(tr.key,tr.keyEnd)}function Cv(s,o){const a=tr.textEnd;return a===o?-1:(o=tr.keyEnd=function Tv(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,tr.key=o,a),iu(s,o,a))}function iu(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function Sv(s,o){return function Vi(s,o,a,l){const d=Ce(),g=Bt(),v=Ai(2);g.firstUpdatePass&&Wr(g,s,v,l),o!==He&&ii(d,v,o)&&Cc(g,g.data[Mr()],d,d[11],s,d[v+1]=function Pw(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(so(s)))),s}(o,a),l,v)}(s,o,null,!0),Sv}function el(s){!function ns(s,o,a,l){const d=Bt(),g=Ai(2);d.firstUpdatePass&&Wr(d,null,g,l);const v=Ce();if(a!==He&&ii(v,g,a)){const w=d.data[Mr()];if(Ca(w,l)&&!sp(d,g)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=ce(D,a||"")),Yn(d,w,v,a,l)}else!function tl(s,o,a,l,d,g,v,w){d===He&&(d=ft);let D=0,A=0,x=0<d.length?d[0]:null,O=0<g.length?g[0]:null;for(;null!==x||null!==O;){const U=D<d.length?d[D+1]:void 0,Z=A<g.length?g[A+1]:void 0;let Le,ye=null;x===O?(D+=2,A+=2,U!==Z&&(ye=O,Le=Z)):null===O||null!==x&&x<O?(D+=2,ye=x):(A+=2,ye=O,Le=Z),null!==ye&&Cc(s,o,a,l,ye,Le,v,w),x=D<d.length?d[D]:null,O=A<g.length?g[A]:null}}(d,w,v,v[11],v[g+1],v[g+1]=function RI(s,o,a){if(null==a||""===a)return ft;const l=[],d=so(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(Xn,Da,s,!0)}function Da(s,o){for(let a=function xw(s){return function Tn(s){tr.key=0,tr.keyEnd=0,tr.value=0,tr.valueEnd=0,tr.textEnd=s.length}(s),Cv(s,iu(s,0,tr.textEnd))}(o);a>=0;a=Cv(o,a))Xn(s,nh(o),!0)}function sp(s,o){return o>=s.expandoStartIndex}function Wr(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Mr()],v=sp(s,a);Ca(g,l)&&null===o&&!v&&(o=!1),o=function SI(s,o,a,l){const d=function ea(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=op(a=Mv(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Mv(d,s,o,a,l),null===g){let D=function MI(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Wa(l))return s[vt(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=Mv(null,s,o,D[1],l),D=op(D,o.attrs,l),function xI(s,o,a,l){s[vt(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function Nw(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=op(l,s[g].hostAttrs,a);return op(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function bv(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=vt(v),D=Wa(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const O=a;x=O[1],(null===x||io(O,x)>0)&&(A=!0)}else x=a;if(d)if(0!==D){const U=vt(s[w+1]);s[l+1]=kd(U,w),0!==U&&(s[U+1]=Of(s[U+1],l)),s[w+1]=function C_(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=kd(w,0),0!==w&&(s[w+1]=Of(s[w+1],l)),w=l;else s[l+1]=kd(D,0),0===w?w=l:s[D+1]=Of(s[D+1],l),D=l;A&&(s[l+1]=lc(s[l+1])),Dv(s,x,l,!0),Dv(s,x,l,!1),function np(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&io(g,o)>=0&&(a[l+1]=I_(a[l+1]))}(o,x,s,l,g),v=kd(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function Mv(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=op(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function op(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xn(s,v,!!a||o[++g]))}return void 0===s?null:s}function Cc(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,A=D[w+1];ap(function PE(s){return 1==(1&s)}(A)?kw(D,o,a,d,Wa(A),v):void 0)||(ap(g)||function Nf(s){return 2==(2&s)}(A)&&(g=kw(D,null,a,d,w,v)),function SE(s,o,a,l,d){const g=yn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:oe.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=oe.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,wo(Mr(),a),d,g))}function kw(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],A=Array.isArray(D),x=A?D[1]:D,O=null===x;let U=a[d+1];U===He&&(U=O?ft:void 0);let Z=O?zl(U,l):x===l?U:void 0;if(A&&!ap(Z)&&(Z=zl(D,l)),ap(Z)&&(w=Z,v))return w;const ye=s[d+1];d=v?vt(ye):Wa(ye)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=zl(D,l))}return w}function ap(s){return void 0!==s}function Ca(s,o){return 0!=(s.flags&(o?16:32))}function xv(s,o=""){const a=Ce(),l=Bt(),d=s+20,g=l.firstCreatePass?Ya(l,d,1,o,null):l.data[d],v=a[d]=function Md(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);Pg(l,a,v,g),ti(g,!1)}function nl(s){return Ic("",s,""),nl}function Ic(s,o,a){const l=Ce(),d=function eu(s,o,a,l){return ii(s,Ys(),a)?o+pe(a)+l:He}(l,s,o,a);return d!==He&&uo(l,Mr(),d),Ic}const xc=void 0;var Zw=["en",[["a","p"],["AM","PM"],xc],[["AM","PM"],xc,xc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xc,"{1} 'at' {0}",xc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kw(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ia={};function Mm(s){const o=function br(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=uh(o);if(a)return a;const l=o.split("-")[0];if(a=uh(l),a)return a;if("en"===l)return Zw;throw new Error(`Missing locale data for the locale "${s}".`)}function Fv(s){return Mm(s)[Ct.PluralCase]}function uh(s){return s in Ia||(Ia[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),Ia[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const dp="en-US";let Lv=dp;function Pm(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Pm(s[g],o,a,l,d);else{const g=Bt(),v=Ce();let w=Ja(s)?s:J(s.provide),D=ow(s);const A=En(),x=1048575&A.providerIndexes,O=A.directiveStart,U=A.providerIndexes>>20;if(Ja(s)||!s.multi){const Z=new ta(D,d,Ut),ye=As(w,o,d?x:x+U,O);-1===ye?(Xs(Kn(A,v),g,w),he(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Z),v.push(Z)):(a[ye]=Z,v[ye]=Z)}else{const Z=As(w,o,x+U,O),ye=As(w,o,x,x+U),Le=Z>=0&&a[Z],Ne=ye>=0&&a[ye];if(d&&!Ne||!d&&!Le){Xs(Kn(A,v),g,w);const Ge=function uT(s,o,a,l,d){const g=new ta(s,a,Ut);return g.multi=[],g.index=o,g.componentProviders=0,yp(g,d,l&&!a),g}(d?_p:aT,a.length,d,l,D);!d&&Ne&&(a[ye].providerFactory=Ge),he(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Ge),v.push(Ge)}else he(g,s,Z>-1?Z:ye,yp(a[d?ye:Z],D,!d&&l));!d&&l&&Ne&&a[ye].componentProviders++}}}function he(s,o,a,l){const d=Ja(o),g=function aw(s){return!!s.useClass}(o);if(d||g){const D=(g?J(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,D]):A[x+1].push(l,D)}else A.push(a,D)}}}function yp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function As(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function aT(s,o,a,l){return au(this.multi,[])}function _p(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Mi(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),au(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],au(d,g);return g}function au(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function il(s,o=[]){return a=>{a.providersResolver=(l,d)=>function _b(s,o,a){const l=Bt();if(l.firstCreatePass){const d=Jr(s);Pm(a,l.data,l.blueprint,d,!0),Pm(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Fm{}class Kv{resolveComponentFactory(o){throw function Eb(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let mh=(()=>{class s{}return s.NULL=new Kv,s})();function sl(){return kc(En(),Ce())}function kc(s,o){return new vp(Ar(s,o))}let vp=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=sl,s})();function bb(s){return s instanceof vp?s.nativeElement:s}class ol{}let Pc=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Ep(){const s=Ce(),a=Sr(En().index,s);return function yh(s){return s[11]}(Ii(a)?a:s)}(),s})(),Db=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class Lm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Vm=new Lm("13.2.7"),Bm={};function Um(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(ln(g)),ui(g))for(let w=10;w<g.length;w++){const D=g[w],A=D[1].firstChild;null!==A&&Um(D[1],D,A,l)}const v=a.type;if(8&v)Um(s,o,a.child,l);else if(32&v){const w=nt(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=TE(o,a);if(Array.isArray(w))l.push(...w);else{const D=Nn(o[16]);Um(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class _h{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Um(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ui(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(h_(o,l),vs(a,l))}this._attachedToViewContainer=!1}f_(this._lView[1],this._lView)}onDestroy(o){zg(this._lView[1],this._lView,null,o)}markForCheck(){hc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$f(this._lView[1],this._lView,this.context)}checkNoChanges(){!function XE(s,o,a){Zs(!0);try{$f(s,o,a)}finally{Zs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rg(s,o){Fg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class Cb extends _h{constructor(o){super(o),this._view=o}detectChanges(){Z_(this._view)}checkNoChanges(){!function Hf(s){Zs(!0);try{Z_(s)}finally{Zs(!1)}}(this._view)}get context(){return null}}class jm extends mh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=zt(o);return new $m(a,this.ngModule)}}function vh(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class $m extends Fm{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Bg(s){return s.map(uc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return vh(this.componentDef.inputs)}get outputs(){return vh(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function lT(s,o){return{get:(a,l,d)=>{const g=s.get(a,Bm,d);return g!==Bm||l===Bm?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(ol,Qo),w=g.get(Db,null),D=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function qg(s,o,a){if(yn(s))return s.selectRootElement(o,a===qt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):Rd(v.createRenderer(null,this.componentDef),A,function Eh(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),O=this.componentDef.onPush?576:528,U=function fw(s,o){return{components:[],scheduler:s||c_,clean:Y_,playerHandler:o||null,flags:0}}(),Z=Ld(0,null,null,1,0,null,null,null,null,null),ye=Vf(null,Z,U,O,null,null,v,D,w,g);let Le,Ne;bo(ye);try{const Ge=function lm(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=Ya(v,20,2,"#host",null),A=D.mergedAttrs=o.hostAttrs;null!==A&&(Ud(D,A,!0),null!==s&&(_t(d,s,A),null!==D.classes&&Vg(d,s,D.classes),null!==D.styles&&w_(d,s,D.styles)));const x=l.createRenderer(s,o),O=Vf(a,$_(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(Xs(Kn(D,a),v,o.type),KE(v,D),z_(D,a.length,1)),jf(a,O),a[20]=O}(x,this.componentDef,ye,v,D);if(x)if(l)_t(D,x,["ng-version",Vm.full]);else{const{attrs:Ee,classes:mt}=function Hu(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!bn(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ee&&_t(D,x,Ee),mt&&mt.length>0&&Vg(D,x,mt.join(" "))}if(Ne=Pa(Z,20),void 0!==a){const Ee=Ne.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Kt=a[mt];Ee.push(null!=Kt?Array.from(Kt):null)}}Le=function hw(s,o,a,l,d){const g=a[1],v=function rI(s,o,a){const l=En();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),W_(s,l,o,Gu(s,o,1,null),a));const d=Mi(o,s,l.directiveStart,l);jr(d,o);const g=Ar(l,o);return g&&jr(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=En();o.contentQueries(1,v,D.directiveStart)}const w=En();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Js(w.index),G_(a[1],w,0,w.directiveStart,w.directiveEnd,o),Yg(o,v)),v}(Ge,this.componentDef,ye,U,[gI]),cc(Z,ye,null)}finally{Co()}return new dT(this.componentType,Le,kc(Ne,ye),ye,Ne)}}class dT extends class vb{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Cb(d),this.componentType=o}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ss{}class al{}const Fc=new Map;class wh extends Ss{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jm(this);const l=fn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=im(o,a,[{provide:Ss,useValue:this},{provide:mh,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Bo.THROW_IF_NOT_FOUND,l=ht.Default){return o===Bo||o===Ss||o===J_?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class bh extends al{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function Yv(s){const o=new Set;!function a(l){const d=fn(l,!0),g=d.id;null!==g&&(function Ib(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(g,Fc.get(g),l),Fc.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new wh(this.moduleType,o)}}function wp(s,o,a){const l=_r()+s,d=Ce();return d[l]===He?Uo(d,l,a?o.call(a):o()):function Cs(s,o){return s[o]}(d,l)}function Jv(s,o,a,l){return xb(Ce(),_r(),s,o,a,l)}function $o(s,o){const a=s[o];return a===He?void 0:a}function xb(s,o,a,l,d,g){const v=o+a;return ii(s,v,d)?Uo(s,v+1,g?l.call(g,d):l(d)):$o(s,v+1)}function Lc(s,o,a,l,d,g,v){const w=o+a;return function gc(s,o,a,l){const d=ii(s,o,a);return ii(s,o+1,l)||d}(s,w,d,g)?Uo(s,w+2,v?l.call(v,d,g):l(d,g)):$o(s,w+2)}function qm(s,o){const a=Bt();let l;const d=s+20;a.firstCreatePass?(l=function Rb(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Xr(l.type)),v=Qn(Ut);try{const w=di(!1),D=g();return di(w),function _w(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Ce(),d,D),D}finally{Qn(v)}}function Nb(s,o,a){const l=s+20,d=Ce(),g=Ti(d,l);return Ch(d,l)?xb(d,_r(),o,g.transform,a,g):g.transform(a)}function Ob(s,o,a,l){const d=s+20,g=Ce(),v=Ti(g,d);return Ch(g,d)?Lc(g,_r(),o,v.transform,a,l,v):v.transform(a,l)}function Ch(s,o){return s[1].data[o].pure}function t0(s){return o=>{setTimeout(s,void 0,o)}}const Ho=class gT extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),A=l;if(o&&"object"==typeof o){const O=o;w=null===(d=O.next)||void 0===d?void 0:d.bind(O),D=null===(g=O.error)||void 0===g?void 0:g.bind(O),A=null===(v=O.complete)||void 0===v?void 0:v.bind(O)}this.__isAsync&&(D=t0(D),w&&(w=t0(w)),A&&(A=t0(A)));const x=super.subscribe({next:w,error:D,complete:A});return o instanceof Y.w0&&o.add(x),x}};function Vc(){return this._results[Wd()]()}class Bc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wd(),l=Bc.prototype;l[a]||(l[a]=Vc)}get changes(){return this._changes||(this._changes=new Ho)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Rr(o);(this._changesDetected=!function jl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ih=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pb,s})();const kb=Ih,mT=class extends kb{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Vf(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),cc(a,l,o),new _h(l)}};function Pb(){return Th(En(),Ce())}function Th(s,o){return 4&s.type?new mT(o,s,kc(s,o)):null}let Ah=(()=>{class s{}return s.__NG_ELEMENT_ID__=bp,s})();function bp(){return n0(En(),Ce())}const Wm=Ah,Km=class extends Wm{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return kc(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){const o=hi(this._hostTNode,this._hostLView);if(cd(o)){const a=Si(o,this._hostLView),l=gn(o);return new xi(a[1].data[l+8],a)}return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Fb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function aa(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const O=a||{};w=O.index,l=O.injector,d=O.projectableNodes,g=O.ngModuleRef}const D=v?o:new $m(zt(o)),A=l||this.parentInjector;if(!g&&null==D.ngModule){const U=(v?A:this.parentInjector).get(Ss,null);U&&(g=U)}const x=D.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function wu(s){return ui(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const O=l[3],U=new Km(O,O[6],O[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Og(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],$l(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Nd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=__(g,v),D=l[11],A=ao(D,v[7]);return null!==A&&function Rf(s,o,a,l,d,g){l[0]=d,l[6]=o,Fg(s,l,a,1,d,g)}(d,v[6],D,l,A,w),o.attachToViewContainerRef(),$l(Dp(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Fb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=h_(this._lContainer,a);l&&(vs(Dp(this._lContainer),a),f_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=h_(this._lContainer,a);return l&&null!=vs(Dp(this._lContainer),a)?new _h(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Fb(s){return s[8]}function Dp(s){return s[8]||(s[8]=[])}function n0(s,o){let a;const l=o[s.index];if(ui(l))a=l;else{let d;if(8&s.type)d=ln(l);else{const g=o[11];d=g.createComment("");const v=Ar(s,o);ws(g,ao(g,v),d,function HC(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=zu(l,o,d,s),jf(o,a)}return new Km(a,s,o)}class Cp{constructor(o){this.queryList=o,this.matches=null}clone(){return new Cp(this.queryList)}setDirty(){this.queryList.setDirty()}}class r0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new r0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Xm(o,a).matches&&this.queries[a].setDirty()}}class s0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class o0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new o0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Zm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Zm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,vT(a,g)),this.matchTNodeWithReadOption(o,a,Ao(a,o,g,!1,!1))}else l===Ih?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ao(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===vp||d===Ah||d===Ih&&4&a.type)this.addMatch(a.index,-2);else{const g=Ao(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function vT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Mh(s,o,a,l){return-1===a?function Sh(s,o){return 11&s.type?kc(s,o):4&s.type?Th(s,o):null}(o,s):-2===a?function a0(s,o,a){return a===vp?kc(o,s):a===Ih?Th(o,s):a===Ah?n0(o,s):void 0}(s,o,l):Mi(s,s[1],a,o)}function Ip(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const A=v[D];w.push(A<0?null:Mh(o,g[A],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function Ym(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Ip(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const A=g[w+1],x=o[-D];for(let O=10;O<x.length;O++){const U=x[O];U[17]===U[3]&&Ym(U[1],U,A,l)}if(null!==x[9]){const O=x[9];for(let U=0;U<O.length;U++){const Z=O[U];Ym(Z[1],Z,A,l)}}}}}return l}function u0(s){const o=Ce(),a=Bt(),l=Ml();xl(l+1);const d=Xm(a,l);if(s.dirty&&zs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Ym(a,o,l,[]):Ip(a,o,d,l);s.reset(g,bb),s.notifyOnChanges()}return!0}return!1}function Bb(s,o,a,l){const d=Bt();if(d.firstCreatePass){const g=En();(function Ub(s,o,a){null===s.queries&&(s.queries=new o0),s.queries.track(new Zm(o,a))})(d,new s0(o,a,l),g.index),function wT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Jm(s,o,a){const l=new Bc(4==(4&a));zg(s,o,l,l.destroy),null===o[19]&&(o[19]=new r0),o[19].queries.push(new Cp(l))}(d,Ce(),a)}function Qm(){return function ET(s,o){return s[19].queries[o].queryList}(Ce(),Ml())}function Xm(s,o){return s.queries.getByIndex(o)}function Ph(...s){}const Zb=new xn("Application Initializer");let fy=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ph,this.reject=Ph,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(cr(g))a.push(g);else if(nu(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(et(Zb,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const g0=new xn("AppId",{providedIn:"root",factory:function Yb(){return`${m0()}${m0()}${m0()}`}});function m0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const py=new xn("Platform Initializer"),Jb=new xn("Platform ID"),gy=new xn("appBootstrapListener");let my=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();const Np=new xn("LocaleId",{providedIn:"root",factory:()=>kt(Np,ht.Optional|ht.SkipSelf)||function Xb(){return"undefined"!=typeof $localize&&$localize.locale||dp}()}),y0=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _0{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Fh=(()=>{class s{compileModuleSync(a){return new bh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(fn(a).declarations).reduce((v,w)=>{const D=zt(w);return D&&v.push(new $m(D)),v},[]);return new _0(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Vh=(()=>Promise.resolve(0))();function v0(s){"undefined"==typeof Zone?Vh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ms{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function RT(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function NT(s){const o=()=>{!function w0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,b0(s),s.isCheckStableRunning=!0,kp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),b0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return yy(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),_y(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return yy(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),_y(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,b0(s),kp(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ms.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ms.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,E0,Ph,Ph);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const E0={};function kp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function b0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function yy(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function _y(s){s._nesting--,kp(s)}class OT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let D0=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ms.assertNotInAngularZone(),v0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())v0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(et(Ms))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),tD=(()=>{class s{constructor(){this._applications=new Map,vy.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return vy.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();class nD{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function rD(s){vy=s}let ho,vy=new nD;const iD=new xn("AllowMultipleToken");class C0{constructor(o,a){this.name=o,this.token=a}}function Ey(s,o,a=[]){const l=`Platform: ${o}`,d=new xn(l);return(g=[])=>{let v=oD();if(!v||v.injector.get(iD,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:nm,useValue:"platform"});!function I0(s){if(ho&&!ho.destroyed&&!ho.injector.get(iD,!1))throw new ke(400,"");ho=s.get(wy);const o=s.get(py,null);o&&o.forEach(a=>a())}(Bo.create({providers:w,name:l}))}return function FT(s){const o=oD();if(!o)throw new ke(401,"");return o}()}}function oD(){return ho&&!ho.destroyed?ho:null}let wy=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function aD(s,o){let a;return a="noop"===s?new OT:("zone.js"===s?void 0:s)||new Ms({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Ms,useValue:w}];return w.run(()=>{const A=Bo.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(A),O=x.injector.get(Or,null);if(!O)throw new ke(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{O.handleError(Z)}});x.onDestroy(()=>{Pp(this._modules,x),U.unsubscribe()})}),function T0(s,o,a){try{const l=a();return cr(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(O,w,()=>{const U=x.injector.get(fy);return U.runInitializers(),U.donePromise.then(()=>(function lh(s){ct(s,"Expected localeId to be defined"),"string"==typeof s&&(Lv=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Np,dp)||dp),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=A0({},l);return function kT(s,o,a){const l=new bh(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(S0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(et(Bo))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();function A0(s,o){return Array.isArray(o)?o.reduce(A0,s):Object.assign(Object.assign({},s),o)}let S0=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),D=new P.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ms.assertNotInAngularZone(),v0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ue.T)(w,D.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let d;d=a instanceof Fm?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function PT(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ss),w=d.create(Bo.NULL,[],l||d.selector,g),D=w.location.nativeElement,A=w.injector.get(D0,null),x=A&&w.injector.get(tD);return A&&x&&x.registerApplication(D,A),w.onDestroy(()=>{this.detachView(w.hostView),Pp(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Pp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gy,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(et(Ms),et(Bo),et(Or),et(mh),et(fy))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let lD=!0,by=!1;function LT(){return by=!0,lD}function x0(){if(by)throw new Error("Cannot enable prod mode after platform setup.");lD=!1}let hD=(()=>{class s{}return s.__NG_ELEMENT_ID__=R0,s})();function R0(s){return function VT(s,o,a){if(js(s)&&!a){const l=Sr(s.index,o);return new _h(l,l)}return 47&s.type?new _h(o[16],o):null}(En(),Ce(),16==(16&s))}class Sy{constructor(){}supports(o){return Kd(o)}create(o){return new jT(o)}}const k0=(s,o)=>o;class jT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||k0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<My(l,d,g)?a:l,w=My(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=w-d,x=D-d;if(A!=x){for(let U=0;U<A;U++){const Z=U<g.length?g[U]:g[U]=0,ye=Z+U;x<=ye&&ye<A&&(g[U]=Z+1)}g[v.previousIndex]=x-A}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Kd(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function mw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Wd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new vD(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new wD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class vD{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class wD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ED,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function My(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class P0{constructor(){}supports(o){return o instanceof Map||Zd(o)}create(){return new xy}}class xy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Zd(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new $T(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class $T{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bD(){return new F0([new Sy])}let F0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||bD()),deps:[[s,new No,new mi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ke(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:bD}),s})();function L0(){return new Vp([new P0])}let Vp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||L0()),deps:[[s,new No,new mi]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new ke(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:L0}),s})();const U0=Ey(null,"core",[{provide:Jb,useValue:"unknown"},{provide:wy,deps:[Bo]},{provide:tD,deps:[]},{provide:my,deps:[]}]);let TD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(et(S0))},s.\u0275mod=Q({type:s}),s.\u0275inj=Xt({}),s})()},3942:(lt,Ae,k)=>{k.d(Ae,{Z:()=>ke});var h=k(2090),Y=k(4859),P=k(9681),ue=k(1877);class X{constructor(pe,De){this._delegate=pe,this.firebase=De,(0,P._addComponent)(pe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(pe,De=P._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(pe);return!Je.isInitialized()&&"EXPLICIT"===(null===(rt=Je.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:De})}_removeServiceInstance(pe,De=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(De)}_addComponent(pe){(0,P._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,P._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Be=function fe(Be){const pe={},De={__esModule:!0,initializeApp:function Ie(qe,te={}){const W=P.initializeApp(qe,te);if((0,h.r3)(pe,W.name))return pe[W.name];const ie=new Be(W,De);return pe[W.name]=ie,ie},app:Je,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we(qe){const te=qe.name,W=te.replace("-compat","");if(P._registerComponent(qe)&&"PUBLIC"===qe.type){const ie=(me=Je())=>{if("function"!=typeof me[W])throw re.create("invalid-app-argument",{appName:te});return me[W]()};void 0!==qe.serviceProps&&(0,h.ZB)(ie,qe.serviceProps),De[W]=ie,Be.prototype[W]=function(...me){return this._getService.bind(this,te).apply(this,qe.multipleInstances?me:[])}}return"PUBLIC"===qe.type?De[W]:null},removeApp:function rt(qe){delete pe[qe]},useAsService:function ze(qe,te){return"serverAuth"===te?null:te},modularAPIs:P}};function Je(qe){if(!(0,h.r3)(pe,qe=qe||P._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:qe});return pe[qe]}return De.default=De,Object.defineProperty(De,"apps",{get:function ve(){return Object.keys(pe).map(qe=>pe[qe])}}),Je.App=Be,De}(X);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function pe(De){(0,h.ZB)(Be,De)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Be}(),H=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=$;!function Se(Be){(0,P.registerVersion)("@firebase/app-compat","0.1.21",Be)}()},9681:(lt,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Pr,_DEFAULT_ENTRY_NAME:()=>kn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Ci,_apps:()=>wt,_clearComponents:()=>Gt,_components:()=>cn,_getProvider:()=>os,_registerComponent:()=>on,_removeServiceInstance:()=>Xt,deleteApp:()=>us,getApp:()=>Fr,getApps:()=>as,initializeApp:()=>Ui,onLog:()=>sr,registerVersion:()=>Qr,setLogLevel:()=>Qn});var h=k(5861),Y=k(4859),P=k(1877),ue=k(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ge(Xe){const Te=Xe.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(tt)){const pt=tt.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(tt=>tt).join(" ")}}const re="@firebase/app",ce=new P.Yd("@firebase/app"),kn="[DEFAULT]",ct={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wt=new Map,cn=new Map;function dn(Xe,Te){try{Xe.container.addComponent(Te)}catch(tt){ce.debug(`Component ${Te.name} failed to register with FirebaseApp ${Xe.name}`,tt)}}function Ci(Xe,Te){Xe.container.addOrOverwriteComponent(Te)}function on(Xe){const Te=Xe.name;if(cn.has(Te))return ce.debug(`There were multiple attempts to register component ${Te}.`),!1;cn.set(Te,Xe);for(const tt of wt.values())dn(tt,Xe);return!0}function os(Xe,Te){const tt=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Xe.container.getProvider(Te)}function Xt(Xe,Te,tt=kn){os(Xe,Te).clearInstance(tt)}function Gt(){cn.clear()}const si=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fs{constructor(Te,tt,pt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const Pr="9.6.10";function Ui(Xe,Te={}){"object"!=typeof Te&&(Te={name:Te});const tt=Object.assign({name:kn,automaticDataCollectionEnabled:!1},Te),pt=tt.name;if("string"!=typeof pt||!pt)throw si.create("bad-app-name",{appName:String(pt)});const $t=wt.get(pt);if($t){if((0,ue.vZ)(Xe,$t.options)&&(0,ue.vZ)(tt,$t.config))return $t;throw si.create("duplicate-app",{appName:pt})}const Vt=new Y.H0(pt);for(const V of cn.values())Vt.addComponent(V);const j=new Fs(Xe,tt,Vt);return wt.set(pt,j),j}function Fr(Xe=kn){const Te=wt.get(Xe);if(!Te)throw si.create("no-app",{appName:Xe});return Te}function as(){return Array.from(wt.values())}function us(Xe){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(Xe){const Te=Xe.name;wt.has(Te)&&(wt.delete(Te),yield Promise.all(Xe.container.getProviders().map(tt=>tt.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Qr(Xe,Te,tt){var pt;let $t=null!==(pt=ct[Xe])&&void 0!==pt?pt:Xe;tt&&($t+=`-${tt}`);const Vt=$t.match(/\s|\//),j=Te.match(/\s|\//);if(Vt||j){const V=[`Unable to register library "${$t}" with version "${Te}":`];return Vt&&V.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Vt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void ce.warn(V.join(" "))}on(new Y.wA(`${$t}-version`,()=>({library:$t,version:Te}),"VERSION"))}function sr(Xe,Te){if(null!==Xe&&"function"!=typeof Xe)throw si.create("invalid-log-argument");(0,P.Am)(Xe,Te)}function Qn(Xe){(0,P.Ub)(Xe)}const vn="firebase-heartbeat-store";let or=null;function Ls(){return or||(or=(0,ue.X3)("firebase-heartbeat-database",1,(Xe,Te)=>{0===Te&&Xe.createObjectStore(vn)}).catch(Xe=>{throw si.create("storage-open",{originalErrorMessage:Xe.message})})),or}function qt(){return(qt=(0,h.Z)(function*(Xe){try{return(yield Ls()).transaction(vn).objectStore(vn).get(pr(Xe))}catch(Te){throw si.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function at(Xe,Te){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(Xe,Te){try{const pt=(yield Ls()).transaction(vn,"readwrite");return yield pt.objectStore(vn).put(Te,pr(Xe)),pt.complete}catch(tt){throw si.create("storage-set",{originalErrorMessage:tt.message})}})).apply(this,arguments)}function pr(Xe){return`${Xe.name}!${Xe.options.appId}`}class go{constructor(Te){this.container=Te,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new ft(tt),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Te=this;return(0,h.Z)(function*(){const pt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Dr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Te._heartbeatsCache.heartbeats.some(Vt=>Vt.date===$t))return Te._heartbeatsCache.heartbeats.push({date:$t,agent:pt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Vt=>{const j=new Date(Vt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,h.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const tt=Dr(),{heartbeatsToSend:pt,unsentEntries:$t}=function gr(Xe,Te=1024){const tt=[];let pt=Xe.slice();for(const $t of Xe){const Vt=tt.find(j=>j.agent===$t.agent);if(Vt){if(Vt.dates.push($t.date),Cr(tt)>Te){Vt.dates.pop();break}}else if(tt.push({agent:$t.agent,dates:[$t.date]}),Cr(tt)>Te){tt.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:pt}}(Te._heartbeatsCache.heartbeats),Vt=(0,ue.L)(JSON.stringify({version:2,heartbeats:pt}));return Te._heartbeatsCache.lastSentHeartbeatDate=tt,$t.length>0?(Te._heartbeatsCache.heartbeats=$t,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Vt})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class ft{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,h.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function Ma(Xe){return qt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var tt=this;return(0,h.Z)(function*(){var pt;if(yield tt._canUseIndexedDBPromise){const Vt=yield tt.read();return at(tt.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Vt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var tt=this;return(0,h.Z)(function*(){var pt;if(yield tt._canUseIndexedDBPromise){const Vt=yield tt.read();return at(tt.app,{lastSentHeartbeatDate:null!==(pt=Te.lastSentHeartbeatDate)&&void 0!==pt?pt:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Te.heartbeats]})}})()}}function Cr(Xe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function jt(Xe){on(new Y.wA("platform-logger",Te=>new X(Te),"PRIVATE")),on(new Y.wA("heartbeat",Te=>new go(Te),"PRIVATE")),Qr(re,"0.7.20",Xe),Qr(re,"0.7.20","esm2017"),Qr("fire-js","")}("")},4859:(lt,Ae,k)=>{k.d(Ae,{wA:()=>P,H0:()=>fe});var h=k(5861),Y=k(2090);class P{constructor($,H,J){this.name=$,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class X{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const J=new Y.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:H});Ke&&J.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const J=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ke=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(Ke)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function re(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(H){}for(const[H,J]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:Ke});J.resolve(Se)}catch(Se){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...H.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:J,options:H});for(const[Se,ke]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&ke.resolve(Ke);return Ke}onInit($,H){var J;const Ke=this.normalizeInstanceIdentifier(H),Se=null!==(J=this.onInitCallbacks.get(Ke))&&void 0!==J?J:new Set;Se.add($),this.onInitCallbacks.set(Ke,Se);const ke=this.instances.get(Ke);return ke&&$(ke,Ke),()=>{Se.delete($)}}invokeOnInitCallbacks($,H){const J=this.onInitCallbacks.get(H);if(J)for(const Ke of J)try{Ke($,H)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ue?void 0:ce),options:H}),this.instances.set($,J),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch(Ke){}var ce;return J||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new X($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ae,k)=>{k.d(Ae,{in:()=>Y,Yd:()=>re,Ub:()=>fe,Am:()=>ce});const h=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ue=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=($,H,...J)=>{if(H<$.logLevel)return;const Ke=(new Date).toISOString(),Se=X[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${Ke}]  ${$.name}:`,...J)};class re{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?P[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function fe($){h.forEach(H=>{H.setLogLevel($)})}function ce($,H){for(const J of h){let Ke=null;H&&H.level&&(Ke=P[H.level]),J.userLogHandler=null===$?null:(Se,ke,...Be)=>{const pe=Be.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(rt){return null}}).filter(De=>De).join(" ");ke>=(null!=Ke?Ke:Se.logLevel)&&$({level:Y[ke].toLowerCase(),message:pe,args:Be,type:Se.name})}}}},5861:(lt,Ae,k)=>{function h(P,ue,X,ge,re,fe,ce){try{var $=P[fe](ce),H=$.value}catch(J){return void X(J)}$.done?ue(H):Promise.resolve(H).then(ge,re)}function Y(P){return function(){var ue=this,X=arguments;return new Promise(function(ge,re){var fe=P.apply(ue,X);function ce(H){h(fe,ge,re,ce,$,"next",H)}function $(H){h(fe,ge,re,ce,$,"throw",H)}ce(void 0)})}}k.d(Ae,{Z:()=>Y})}},lt=>{lt(lt.s=4050)}]);