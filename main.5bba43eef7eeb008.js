"use strict";(self.webpackChunktasks=self.webpackChunktasks||[]).push([[179],{2011:(ut,Ae,k)=>{k.d(Ae,{hO:()=>We,xv:()=>le,Dh:()=>he,GT:()=>ge,cc:()=>Se,on:()=>$,pX:()=>X});var h=k(5e3),Y=k(127),O=k(5813);ut=k.hmd(ut);const ue=["ngOnDestroy"],X=(be,tt,Ye,Ie={})=>new Proxy(be,{get:(_e,Ee)=>Ye.runOutsideAngular(()=>{var Ge;if(be[Ee])return(null===(Ge=null==Ie?void 0:Ie.spy)||void 0===Ge?void 0:Ge.get)&&Ie.spy.get(Ee,be[Ee]),be[Ee];if(ue.indexOf(Ee)>-1)return()=>{};const He=tt.toPromise().then(te=>{const W=te&&te[Ee];return"function"==typeof W?W.bind(te):W&&W.then?W.then(ie=>Ye.run(()=>ie)):Ye.run(()=>W)});return new Proxy(()=>{},{get:(te,W)=>He[W],apply:(te,W,ie)=>He.then(me=>{var se;const Ne=me&&me(...ie);return(null===(se=null==Ie?void 0:Ie.spy)||void 0===se?void 0:se.apply)&&Ie.spy.apply(Ee,ie,Ne),Ne})})})}),ge=(be,tt)=>{tt.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Ie=>{Object.defineProperty(be.prototype,Ie,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Ie))})})};class re{constructor(tt){return tt}}const he=new h.OlP("angularfire2.app.options"),le=new h.OlP("angularfire2.app.name");function $(be,tt,Ye){const _e="object"==typeof Ye&&Ye||{};_e.name=_e.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Ge=Y.Z.apps.filter(He=>He&&He.name===_e.name)[0]||tt.runOutsideAngular(()=>Y.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new re(Ge)}const H=(be,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...tt)},J={provide:re,useFactory:$,deps:[he,h.R0b,[new h.FiY,le]]};let We=(()=>{class be{constructor(Ye){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Ye.toString())}static initializeApp(Ye,Ie){return{ngModule:be,providers:[{provide:he,useValue:Ye},{provide:le,useValue:Ie}]}}}return be.\u0275fac=function(Ye){return new(Ye||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[J]}),be})();function Se(be,tt,Ye,Ie,_e){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===be)||[];if(Ee)return function Oe(be,tt){try{return be.toString()===tt.toString()}catch(Ye){return be===tt}}(_e,Ge)||(fe("error",`${tt} was already initialized on the ${Ye} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:Ge})),Ee;{const He=Ie();return globalThis.\u0275AngularfireInstanceCache.push([be,He,_e]),He}}const Ve=!!ut.hot,fe=(be,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ae,k)=>{k.d(Ae,{q4:()=>Bl,iC:()=>Gl,HU:()=>Lu,vb:()=>ud,JM:()=>ro});var h=k(5e3),Y=k(5867),O=k(5861),ue=k(9681),X=k(2090),ge=k(4859),re=k(1877);const he="@firebase/installations",H="w:0.5.7",J="FIS_v2",be=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Ye({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function _e(C,I){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(C,I){const L=(yield I.json()).error;return be.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function He(C,{refreshToken:I}){const R=Ge(C);return R.append("Authorization",function me(C){return`${J} ${C}`}(I)),R}function te(C){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function se(C,I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:R}){const L=Ye(C),K=Ge(C),ee=I.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&K.append("x-firebase-client",It)}const xe={method:"POST",headers:K,body:JSON.stringify({fid:R,authVersion:J,appId:C.appId,sdkVersion:H})},Je=yield te(()=>fetch(L,xe));if(Je.ok){const It=yield Je.json();return{fid:It.fid||R,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ie(It.authToken)}}throw yield _e("Create Installation",Je)})).apply(this,arguments)}function ae(C){return new Promise(I=>{setTimeout(I,C)})}const Xt=/^[cdef][\w-]{21}$/;function lt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function vt(C){return function Tt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Xt.test(R)?R:""}catch(C){return""}}function cn(C){return`${C.appName}!${C.appId}`}const dn=new Map;function Ai(C,I){const R=cn(C);en(R,I),function qt(C,I){const R=function ii(){return!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=C=>{en(C.data.key,C.data.fid)}),dr}();R&&R.postMessage({key:C,fid:I}),function Ps(){0===dn.size&&dr&&(dr.close(),dr=null)}()}(R,I)}function en(C,I){const R=dn.get(C);if(R)for(const L of R)L(I)}let dr=null;const Pr="firebase-installations-store";let ls=null;function cs(){return ls||(ls=(0,X.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(Pr)})),ls}function dt(C,I){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,O.Z)(function*(C,I){const R=cn(C),K=(yield cs()).transaction(Pr,"readwrite"),ee=K.objectStore(Pr),Me=yield ee.get(R);return yield ee.put(I,R),yield K.complete,(!Me||Me.fid!==I.fid)&&Ai(C,I.fid),I})).apply(this,arguments)}function er(C){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(C){const I=cn(C),L=(yield cs()).transaction(Pr,"readwrite");yield L.objectStore(Pr).delete(I),yield L.complete})).apply(this,arguments)}function si(C,I){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(C,I){const R=cn(C),K=(yield cs()).transaction(Pr,"readwrite"),ee=K.objectStore(Pr),Me=yield ee.get(R),xe=I(Me);return void 0===xe?yield ee.delete(R):yield ee.put(xe,R),yield K.complete,xe&&(!Me||Me.fid!==xe.fid)&&Ai(C,xe.fid),xe})).apply(this,arguments)}function vn(C){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(C){let I;const R=yield si(C.appConfig,L=>{const K=Fs(L),ee=xa(C,K);return I=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function Fs(C){return Ht(C||{fid:lt(),registrationStatus:0})}function xa(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(be.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function zt(C,I){return ot.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Dt(C)}:{installationEntry:I}}function ot(){return(ot=(0,O.Z)(function*(C,I){try{const R=yield se(C,I);return dt(C.appConfig,R)}catch(R){throw tt(R)&&409===R.customData.serverCode?yield er(C.appConfig):yield dt(C.appConfig,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Dt(C){return hr.apply(this,arguments)}function hr(){return(hr=(0,O.Z)(function*(C){let I=yield Wi(C.appConfig);for(;1===I.registrationStatus;)yield ae(100),I=yield Wi(C.appConfig);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield vn(C);return L||R}return I})).apply(this,arguments)}function Wi(C){return si(C,I=>{if(!I)throw be.create("installation-not-found");return Ht(I)})}function Ht(C){return function yo(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function br(C,I){return fr.apply(this,arguments)}function fr(){return(fr=(0,O.Z)(function*({appConfig:C,heartbeatServiceProvider:I},R){const L=ht(C,R),K=He(C,R),ee=I.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&K.append("x-firebase-client",It)}const xe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},Je=yield te(()=>fetch(L,xe));if(Je.ok)return Ie(yield Je.json());throw yield _e("Generate Auth Token",Je)})).apply(this,arguments)}function ht(C,{fid:I}){return`${Ye(C)}/${I}/authTokens:generate`}function Dr(C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(C,I=!1){let R;const L=yield si(C.appConfig,ee=>{if(!Lt(ee))throw be.create("not-registered");const Me=ee.authToken;if(!I&&j(Me))return ee;if(1===Me.requestStatus)return R=Qe(C,I),ee;{if(!navigator.onLine)throw be.create("app-offline");const xe=q(ee);return R=ft(C,xe),xe}});return R?yield R:L.authToken})).apply(this,arguments)}function Qe(C,I){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(C,I){let R=yield Xe(C.appConfig);for(;1===R.authToken.requestStatus;)yield ae(100),R=yield Xe(C.appConfig);const L=R.authToken;return 0===L.requestStatus?Dr(C,I):L})).apply(this,arguments)}function Xe(C){return si(C,I=>{if(!Lt(I))throw be.create("not-registered");return function de(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function ft(C,I){return $t.apply(this,arguments)}function $t(){return($t=(0,O.Z)(function*(C,I){try{const R=yield br(C,I),L=Object.assign(Object.assign({},I),{authToken:R});return yield dt(C.appConfig,L),R}catch(R){if(!tt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield dt(C.appConfig,L)}else yield er(C.appConfig);throw R}})).apply(this,arguments)}function Lt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function q(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Be(){return(Be=(0,O.Z)(function*(C){const I=C,{installationEntry:R,registrationPromise:L}=yield vn(I);return L?L.catch(console.error):Dr(I).catch(console.error),R.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(C,I=!1){const R=C;return yield Cr(R),(yield Dr(R,I)).token})).apply(this,arguments)}function Cr(C){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,O.Z)(function*(C){const{registrationPromise:I}=yield vn(C);I&&(yield I)})).apply(this,arguments)}function Zn(C){return be.create("missing-app-config-values",{valueName:C})}const Na="installations",ke=C=>{const I=C.getProvider("app").getImmediate(),R=function ds(C){if(!C||!C.options)throw Zn("App Configuration");if(!C.name)throw Zn("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!C.options[R])throw Zn(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},kt=C=>{const I=C.getProvider("app").getImmediate(),R=(0,ue._getProvider)(I,Na).getImmediate();return{getId:()=>function Q(C){return Be.apply(this,arguments)}(R),getToken:K=>function Et(C){return Yt.apply(this,arguments)}(R,K)}};(function gn(){(0,ue._registerComponent)(new ge.wA(Na,ke,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",kt,"PRIVATE"))})(),(0,ue.registerVersion)(he,"0.5.7"),(0,ue.registerVersion)(he,"0.5.7","esm2017");const pr="@firebase/remote-config",Pn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nh{constructor(I,R,L,K){this.client=I,this.storage=R,this.storageCache=L,this.logger=K}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,K=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${K}.`),K}fetch(I){var R=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(K&&R.isCachedDataFresh(I.cacheMaxAgeMillis,L))return K;I.eTag=K&&K.eTag;const ee=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function $c(C=navigator){return C.languages&&C.languages[0]||C.language}class _u{constructor(I,R,L,K,ee,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=L,this.projectId=K,this.apiKey=ee,this.appId=Me}fetch(I){var R=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},Je={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:K,app_id:R.appId,language_code:$c()},It={method:"POST",headers:xe,body:JSON.stringify(Je)},Ot=fetch(Me,It),St=new Promise((gi,Li)=>{I.signal.addEventListener(()=>{const Oo=new Error("The operation was aborted.");Oo.name="AbortError",Li(Oo)})});let zn;try{yield Promise.race([Ot,St]),zn=yield Ot}catch(gi){let Li="fetch-client-network";throw"AbortError"===gi.name&&(Li="fetch-timeout"),Pn.create(Li,{originalErrorMessage:gi.message})}let Mn=zn.status;const ca=zn.headers.get("ETag")||void 0;let No,Vr;if(200===zn.status){let gi;try{gi=yield zn.json()}catch(Li){throw Pn.create("fetch-client-parse",{originalErrorMessage:Li.message})}No=gi.entries,Vr=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===Vr?Mn=500:"NO_CHANGE"===Vr?Mn=304:("NO_TEMPLATE"===Vr||"EMPTY_CONFIG"===Vr)&&(No={}),304!==Mn&&200!==Mn)throw Pn.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:ca,config:No}})()}}class Up{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:L}){var K=this;return(0,O.Z)(function*(){yield function Hn(C,I){return new Promise((R,L)=>{const K=Math.max(I-Date.now(),0),ee=setTimeout(R,K);C.addEventListener(()=>{clearTimeout(ee),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const ee=yield K.client.fetch(I);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Hc(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(I,Me)}})()}}class ka{constructor(I,R,L,K,ee){this.app=I,this._client=R,this._storageCache=L,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gl(C,I){const R=C.target.error||void 0;return Pn.create(I,{originalErrorMessage:R&&R.message})}const js="app_namespace_store";class Oh{constructor(I,R,L,K=function Hp(){return new Promise((C,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{I(gl(L,"storage-open"))},R.onsuccess=L=>{C(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(js,{keyPath:"compositeKey"})}}catch(R){I(Pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([js],"readonly").objectStore(js),Je=R.createCompositeKey(I);try{const It=xe.get(Je);It.onerror=Ot=>{ee(gl(Ot,"storage-get"))},It.onsuccess=Ot=>{const St=Ot.target.result;K(St?St.value:void 0)}}catch(It){ee(Pn.create("storage-get",{originalErrorMessage:It&&It.message}))}})})()}set(I,R){var L=this;return(0,O.Z)(function*(){const K=yield L.openDbPromise;return new Promise((ee,Me)=>{const Je=K.transaction([js],"readwrite").objectStore(js),It=L.createCompositeKey(I);try{const Ot=Je.put({compositeKey:It,value:R});Ot.onerror=St=>{Me(gl(St,"storage-set"))},Ot.onsuccess=()=>{ee()}}catch(Ot){Me(Pn.create("storage-set",{originalErrorMessage:Ot&&Ot.message}))}})})()}delete(I){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const xe=L.transaction([js],"readwrite").objectStore(js),Je=R.createCompositeKey(I);try{const It=xe.delete(Je);It.onerror=Ot=>{ee(gl(Ot,"storage-delete"))},It.onsuccess=()=>{K()}}catch(It){ee(Pn.create("storage-delete",{originalErrorMessage:It&&It.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class qc{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,O.Z)(function*(){const R=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),K=I.storage.getActiveConfig(),ee=yield R;ee&&(I.lastFetchStatus=ee);const Me=yield L;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const xe=yield K;xe&&(I.activeConfig=xe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function vo(){return kh.apply(this,arguments)}function kh(){return(kh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Yo(){(0,ue._registerComponent)(new ge.wA("remote-config",function C(I,{instanceIdentifier:R}){const L=I.getProvider("app").getImmediate(),K=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,X.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:xe}=L.options;if(!ee)throw Pn.create("registration-project-id");if(!Me)throw Pn.create("registration-api-key");if(!xe)throw Pn.create("registration-app-id");const Je=new Oh(xe,L.name,R=R||"firebase"),It=new qc(Je),Ot=new re.Yd(pr);Ot.logLevel=re.in.ERROR;const St=new _u(K,ue.SDK_VERSION,R,ee,Me,xe),zn=new Up(St,Je),Mn=new Nh(zn,Je,It,Ot),ca=new ka(L,Mn,It,Je,Ot);return function Si(C){const I=(0,X.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(ca),ca},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(pr,"0.3.6"),(0,ue.registerVersion)(pr,"0.3.6","esm2017")}();const ml="/firebase-messaging-sw.js",$s="/firebase-cloud-messaging-push-scope",Qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Eo="google.c.a.c_id",Fa="google.c.a.c_l",zc="google.c.a.ts",Gp="google.c.a.e";var Hs=(()=>{return(C=Hs||(Hs={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Hs;var C})();function ui(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vu(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),K=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)K[ee]=L.charCodeAt(ee);return K}const Eu="fcm_token_details_db",gr="fcm_token_object_Store";function Ph(C){return wu.apply(this,arguments)}function wu(){return wu=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Eu))return null;let I=null;return(yield(0,X.X3)(Eu,5,function(){var L=(0,O.Z)(function*(K,ee,Me,xe){var Je;if(ee<2||!K.objectStoreNames.contains(gr))return;const It=xe.objectStore(gr),Ot=yield It.index("fcmSenderId").get(C);if(yield It.clear(),Ot)if(2===ee){const St=Ot;if(!St.auth||!St.p256dh||!St.endpoint)return;I={token:St.fcmToken,createTime:null!==(Je=St.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:ui(St.vapidKey)}}}else if(3===ee){const St=Ot;I={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ui(St.auth),p256dh:ui(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ui(St.vapidKey)}}}else if(4===ee){const St=Ot;I={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ui(St.auth),p256dh:ui(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ui(St.vapidKey)}}}});return function(K,ee,Me,xe){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(Eu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Wc(I)?I:null}),wu.apply(this,arguments)}function Wc(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const ms="firebase-messaging-store";let La=null;function yl(){return La||(La=(0,X.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(ms)})),La}function yn(C){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(C){const I=bo(C),L=yield(yield yl()).transaction(ms).objectStore(ms).get(I);if(L)return L;{const K=yield Ph(C.appConfig.senderId);if(K)return yield Gs(C,K),K}})).apply(this,arguments)}function Gs(C,I){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(C,I){const R=bo(C),K=(yield yl()).transaction(ms,"readwrite");return yield K.objectStore(ms).put(I,R),yield K.complete,I})).apply(this,arguments)}function Kc(C){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(C){const I=bo(C),L=(yield yl()).transaction(ms,"readwrite");yield L.objectStore(ms).delete(I),yield L.complete})).apply(this,arguments)}function bo({appConfig:C}){return C.appId}const Fn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Va(C,I){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(C,I){const R=yield zs(C),L=pt(I),K={method:"POST",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(Jr(C.appConfig),K)).json()}catch(Me){throw Fn.create("token-subscribe-failed",{errorInfo:Me})}if(ee.error)throw Fn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Fn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Ar(C,I){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(C,I){const R=yield zs(C),L=pt(I.subscriptionOptions),K={method:"PATCH",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${Jr(C.appConfig)}/${I.token}`,K)).json()}catch(Me){throw Fn.create("token-update-failed",{errorInfo:Me})}if(ee.error)throw Fn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Fn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ys(C,I){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(C,I){const L={method:"DELETE",headers:yield zs(C)};try{const ee=yield(yield fetch(`${Jr(C.appConfig)}/${I}`,L)).json();if(ee.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw Fn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Jr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function zs(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*({appConfig:C,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function pt({p256dh:C,auth:I,endpoint:R,vapidKey:L}){const K={web:{endpoint:R,auth:I,p256dh:C}};return L!==Qr&&(K.web.applicationPubKey=L),K}const Iu=6048e5;function Ba(C){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,O.Z)(function*(C){const I=yield El(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:ui(I.getKey("auth")),p256dh:ui(I.getKey("p256dh"))},L=yield yn(C.firebaseDependencies);if(L){if(Xo(L.subscriptionOptions,R))return Date.now()>=L.createTime+Iu?_l(C,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield ys(C.firebaseDependencies,L.token)}catch(K){console.warn(K)}return De(C.firebaseDependencies,R)}return De(C.firebaseDependencies,R)})).apply(this,arguments)}function Au(C){return Su.apply(this,arguments)}function Su(){return(Su=(0,O.Z)(function*(C){const I=yield yn(C.firebaseDependencies);I&&(yield ys(C.firebaseDependencies,I.token),yield Kc(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function _l(C,I){return vl.apply(this,arguments)}function vl(){return(vl=(0,O.Z)(function*(C,I){try{const R=yield Ar(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield Gs(C.firebaseDependencies,L),R}catch(R){throw yield Au(C),R}})).apply(this,arguments)}function De(C,I){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(C,I){const L={token:yield Va(C,I),createTime:Date.now(),subscriptionOptions:I};return yield Gs(C,L),L.token})).apply(this,arguments)}function El(C,I){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vu(I)})})).apply(this,arguments)}function Xo(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function ea(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Xr(C,I){if(!I.notification)return;C.notification={};const R=I.notification.title;R&&(C.notification.title=R);const L=I.notification.body;L&&(C.notification.body=L);const K=I.notification.image;K&&(C.notification.image=K)}(I,C),function wl(C,I){!I.data||(C.data=I.data)}(I,C),function bl(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const R=I.fcmOptions.link;R&&(C.fcmOptions.link=R);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function Zc(C){return"object"==typeof C&&!!C&&Eo in C}function Dl(C,I){const R=[];for(let L=0;L<C.length;L++)R.push(C.charAt(L)),L<I.length&&R.push(I.charAt(L));return R.join("")}function Ks(C){return Fn.create("missing-app-config-values",{valueName:C})}Dl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mr{constructor(I,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Mu(C){if(!C||!C.options)throw Ks("App Configuration Object");if(!C.name)throw Ks("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const L of I)if(!R[L])throw Ks(L);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:K,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function li(C){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(ml,{scope:$s}),C.swRegistration.update().catch(()=>{})}catch(I){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function Zs(C,I){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield li(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function Cl(C,I){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,O.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=Qr)})).apply(this,arguments)}function Il(){return(Il=(0,O.Z)(function*(C,I){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Cl(C,null==I?void 0:I.vapidKey),yield Zs(C,null==I?void 0:I.serviceWorkerRegistration),Ba(C)})).apply(this,arguments)}function Ua(C,I,R){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(C,I,R){const L=Tl(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[Eo],message_name:R[Fa],message_time:R[zc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tl(C){switch(C){case Hs.NOTIFICATION_CLICKED:return"notification_open";case Hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yc(){return(Yc=(0,O.Z)(function*(C,I){const R=I.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Hs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ea(R)):C.onMessageHandler.next(ea(R)));const L=R.data;Zc(L)&&"1"===L[Gp]&&(yield Ua(C,R.messageType,L))})).apply(this,arguments)}const Sl="@firebase/messaging",Qc=C=>{const I=new mr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Al(C,I){return Yc.apply(this,arguments)}(I,R)),I},Co=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function Nu(C,I){return Il.apply(this,arguments)}(I,L)}};function Xc(){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Jc(){(0,ue._registerComponent)(new ge.wA("messaging",Qc,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Co,"PRIVATE")),(0,ue.registerVersion)(Sl,"0.9.11"),(0,ue.registerVersion)(Sl,"0.9.11","esm2017")}();const xl="analytics",Dy="firebase_id",ja="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ou="https://www.googletagmanager.com/gtag/js",Gn=new re.Yd("@firebase/analytics");function ed(C){return Promise.all(C.map(I=>I.catch(R=>R)))}function qp(C,I){const R=document.createElement("script");R.src=`${Ou}?l=${C}&id=${I}`,R.async=!0,document.head.appendChild(R)}function na(C,I,R,L,K,ee){return td.apply(this,arguments)}function td(){return(td=(0,O.Z)(function*(C,I,R,L,K,ee){const Me=L[K];try{if(Me)yield I[Me];else{const Je=(yield ed(R)).find(It=>It.measurementId===K);Je&&(yield I[Je.appId])}}catch(xe){Gn.error(xe)}C("config",K,ee)})).apply(this,arguments)}function Nl(C,I,R,L,K){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(C,I,R,L,K){try{let ee=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const xe=yield ed(R);for(const Je of Me){const It=xe.find(St=>St.measurementId===Je),Ot=It&&I[It.appId];if(!Ot){ee=[];break}ee.push(Ot)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),C("event",L,K||{})}catch(ee){Gn.error(ee)}})).apply(this,arguments)}function zp(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(Ou))return I;return null}const Vn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fr=new class ei{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function ra(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function rd(C){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(C){var I;const{appId:R,apiKey:L}=C,K={method:"GET",headers:ra(L)},ee=ja.replace("{app-id}",R),Me=yield fetch(ee,K);if(200!==Me.status&&304!==Me.status){let xe="";try{const Je=yield Me.json();(null===(I=Je.error)||void 0===I?void 0:I.message)&&(xe=Je.error.message)}catch(Je){}throw Vn.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:xe})}return Me.json()})).apply(this,arguments)}function Vh(C){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(C,I=Fr,R){const{appId:L,apiKey:K,measurementId:ee}=C.options;if(!L)throw Vn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:L};throw Vn.create("no-api-key")}const Me=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Ol;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==R?R:6e4),ku({appId:L,apiKey:K,measurementId:ee},Me,xe,I)})).apply(this,arguments)}function ku(C,I,R){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:R},L,K=Fr){const{appId:ee,measurementId:Me}=C;try{yield Bt(L,I)}catch(xe){if(Me)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}try{const xe=yield rd(C);return K.deleteThrottleMetadata(ee),xe}catch(xe){if(!id(xe)){if(K.deleteThrottleMetadata(ee),Me)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:ee,measurementId:Me};throw xe}const Je=503===Number(xe.customData.httpStatus)?(0,X.$s)(R,K.intervalMillis,30):(0,X.$s)(R,K.intervalMillis),It={throttleEndTimeMillis:Date.now()+Je,backoffCount:R+1};return K.setThrottleMetadata(ee,It),Gn.debug(`Calling attemptFetch again in ${Je} millis`),ku(C,It,L,K)}})).apply(this,arguments)}function Bt(C,I){return new Promise((R,L)=>{const K=Math.max(I-Date.now(),0),ee=setTimeout(R,K);C.addEventListener(()=>{clearTimeout(ee),L(Vn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function id(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Ol{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function kl(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(){if(!(0,X.hl)())return Gn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return Gn.warn(Vn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(C,I,R,L,K,ee,Me){var xe;const Je=Vh(C);Je.then(Mn=>{R[Mn.measurementId]=Mn.appId,C.options.measurementId&&Mn.measurementId!==C.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Gn.error(Mn)),I.push(Je);const It=kl().then(Mn=>{if(Mn)return L.getId()}),[Ot,St]=yield Promise.all([Je,It]);zp()||qp(ee,Ot.measurementId),K("js",new Date);const zn=null!==(xe=null==Me?void 0:Me.config)&&void 0!==xe?xe:{};return zn.origin="firebase",zn.update=!0,null!=St&&(zn[Dy]=St),K("config",Ot.measurementId,zn),Ot.measurementId})).apply(this,arguments)}class ia{constructor(I){this.app=I}_delete(){return delete di[this.app.options.appId],Promise.resolve()}}let di={},Js=[];const hi={};let Xs,Yi,Zi="dataLayer",Fl=!1;function Oi(C,I,R){!function So(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,K)=>`(${K+1}) ${L}`).join(" "),R=Vn.create("invalid-analytics-context",{errorInfo:I});Gn.warn(R.message)}}();const L=C.options.appId;if(!L)throw Vn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Vn.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=di[L])throw Vn.create("already-exists",{id:L});if(!Fl){!function vs(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(Zi);const{wrappedGtag:ee,gtagCore:Me}=function Lh(C,I,R,L,K){let ee=function(...Me){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function nd(C,I,R,L){function ee(){return(ee=(0,O.Z)(function*(Me,xe,Je){try{"event"===Me?yield Nl(C,I,R,xe,Je):"config"===Me?yield na(C,I,R,L,xe,Je):C("set",xe)}catch(It){Gn.error(It)}})).apply(this,arguments)}return function K(Me,xe,Je){return ee.apply(this,arguments)}}(ee,C,I,R),{gtagCore:ee,wrappedGtag:window[K]}}(di,Js,hi,Zi,"gtag");Yi=ee,Xs=Me,Fl=!0}return di[L]=function qn(C,I,R,L,K,ee,Me){return Es.apply(this,arguments)}(C,Js,hi,I,Xs,Zi,R),new ia(C)}function oa(){return(oa=(0,O.Z)(function*(C,I,R,L,K){if(K&&K.global)C("event",R,L);else{const ee=yield I;C("event",R,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function Dn(){return eo.apply(this,arguments)}function eo(){return(eo=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const to="@firebase/analytics";!function Yp(){(0,ue._registerComponent)(new ge.wA(xl,(I,{options:R})=>Oi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function C(I){try{const R=I.getProvider(xl).getImmediate();return{logEvent:(L,K,ee)=>function Zp(C,I,R,L){C=(0,X.m9)(C),function sa(C,I,R,L,K){return oa.apply(this,arguments)}(Yi,di[C.app.options.appId],I,R,L).catch(K=>Gn.error(K))}(R,L,K,ee)}}catch(R){throw Vn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(to,"0.7.7"),(0,ue.registerVersion)(to,"0.7.7","esm2017")}();var no=k(4408),Pu=k(7565);const Ll=new class Cn extends Pu.v{}(class ws extends no.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,R,L):I.flush(this)}});var Qp=k(4986),Vl=k(8505),xr=k(9468),fi=k(5363);const Bl=new h.GfV("7.3.0"),bs="__angularfire_symbol__analyticsIsSupportedValue",Fi="__angularfire_symbol__analyticsIsSupported",Xi="__angularfire_symbol__remoteConfigIsSupportedValue",$a="__angularfire_symbol__remoteConfigIsSupported",Ul="__angularfire_symbol__messagingIsSupportedValue",jl="__angularfire_symbol__messagingIsSupported";function ro(C,I,R){if(I){if(1===I.length)return I[0];const ee=I.filter(Me=>Me.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Fi]||(globalThis[Fi]=Dn().then(C=>globalThis[bs]=C).catch(()=>globalThis[bs]=!1)),globalThis[jl]||(globalThis[jl]=Xc().then(C=>globalThis[Ul]=C).catch(()=>globalThis[Ul]=!1)),globalThis[$a]||(globalThis[$a]=vo().then(C=>globalThis[Xi]=C).catch(()=>globalThis[Xi]=!1));const ud=(C,I)=>{const R=I?[I]:(0,Y.C6)(),L=[];return R.forEach(K=>{K.container.getProvider(C).instances.forEach(Me=>{L.includes(Me)||L.push(Me)})}),L};function xo(){}class Fu{constructor(I,R=Ll){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,L){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{I.apply(this,[Me])})},R,L)}}class es{constructor(I){this.zone=I,this.task=null}call(I,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo)),R.pipe((0,Vl.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lu=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fu(Zone.current)),this.insideAngular=R.run(()=>new Fu(Zone.current,Qp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(h.LFG(h.R0b))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ts(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Gl(C){return ts(),function Ro(C){return function(R){return(R=R.lift(new es(C.ngZone))).pipe((0,xr.R)(C.outsideAngular),(0,fi.Q)(C.insideAngular))}}(ts())(C)}},2090:(ut,Ae,k)=>{k.d(Ae,{BH:()=>Se,LL:()=>Tt,ZR:()=>ae,zI:()=>me,US:()=>re,tV:()=>$,L:()=>le,$s:()=>yo,r3:()=>en,Sg:()=>Oe,ne:()=>dt,vZ:()=>Ps,ZB:()=>J,Lj:()=>$t,pd:()=>ls,m9:()=>ht,z$:()=>Ve,jU:()=>tt,ru:()=>Ye,d:()=>_e,xb:()=>dr,w1:()=>Ee,hl:()=>W,uI:()=>fe,UG:()=>be,b$:()=>Ie,G6:()=>te,Mn:()=>Ge,X3:()=>ft,xO:()=>zi,zd:()=>Pr,eu:()=>ie});var h=k(5861);const X=function(j){const V=[];let q=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[q++]=Q:Q<2048?(V[q++]=Q>>6|192,V[q++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[q++]=Q>>18|240,V[q++]=Q>>12&63|128,V[q++]=Q>>6&63|128,V[q++]=63&Q|128):(V[q++]=Q>>12|224,V[q++]=Q>>6&63|128,V[q++]=63&Q|128)}return V},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Be=j[Q],Et=Q+1<j.length,Yt=Et?j[Q+1]:0,Cr=Q+2<j.length,Wt=Cr?j[Q+2]:0;let pn=(15&Yt)<<2|Wt>>6,nr=63&Wt;Cr||(nr=64,Et||(pn=64)),de.push(q[Be>>2],q[(3&Be)<<4|Yt>>4],q[pn],q[nr])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,de=0;for(;q<j.length;){const Q=j[q++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Be=j[q++];V[de++]=String.fromCharCode((31&Q)<<6|63&Be)}else if(Q>239&&Q<365){const Cr=((7&Q)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[de++]=String.fromCharCode(55296+(Cr>>10)),V[de++]=String.fromCharCode(56320+(1023&Cr))}else{const Be=j[q++],Et=j[q++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Be)<<6|63&Et)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Be=q[j.charAt(Q++)],Yt=Q<j.length?q[j.charAt(Q)]:0;++Q;const Wt=Q<j.length?q[j.charAt(Q)]:64;++Q;const Nt=Q<j.length?q[j.charAt(Q)]:64;if(++Q,null==Be||null==Yt||null==Wt||null==Nt)throw Error();de.push(Be<<2|Yt>>4),64!==Wt&&(de.push(Yt<<4&240|Wt>>2),64!==Nt&&de.push(Wt<<6&192|Nt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){return function(j){const V=X(j);return re.encodeByteArray(V,!0)}(j).replace(/\./g,"")},$=function(j){try{return re.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!We(q)||(j[q]=J(j[q],V[q]));return j}function We(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,de))}}}function Oe(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Be=j.sub||j.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},j);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Et)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ye(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Ve().indexOf("Electron/")>=0}function Ee(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ge(){return Ve().indexOf("MSAppHost/")>=0}function te(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ie(){return new Promise((j,V)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Be;V((null===(Be=Q.error)||void 0===Be?void 0:Be.message)||"")}}catch(q){V(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(V,q,de){super(q),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(V,q,de){this.service=V,this.serviceName=q,this.errors=de}create(V,...q){const de=q[0]||{},Q=`${this.service}/${V}`,Be=this.errors[V],Et=Be?function Xt(j,V){return j.replace(kn,(q,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Be,de):"Error";return new ae(Q,`${this.serviceName}: ${Et} (${Q}).`,de)}}const kn=/\{\$([^}]+)}/g;function en(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function dr(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Ps(j,V){if(j===V)return!0;const q=Object.keys(j),de=Object.keys(V);for(const Q of q){if(!de.includes(Q))return!1;const Be=j[Q],Et=V[Q];if(kr(Be)&&kr(Et)){if(!Ps(Be,Et))return!1}else if(Be!==Et)return!1}for(const Q of de)if(!q.includes(Q))return!1;return!0}function kr(j){return null!==j&&"object"==typeof j}function zi(j){const V=[];for(const[q,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Pr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Be]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Be)}}),V}function ls(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function dt(j,V){const q=new Zr(j,V);return q.subscribe.bind(q)}class Zr{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,de){let Q;if(void 0===V&&void 0===q&&void 0===de)throw new Error("Missing Observer.");Q=function Kn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:de},void 0===Q.next&&(Q.next=si),void 0===Q.error&&(Q.error=si),void 0===Q.complete&&(Q.complete=si);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(Et){}}),this.observers.push(Q),Be}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function si(){}function yo(j,V=1e3,q=2){const de=V*Math.pow(q,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function ht(j){return j&&j._delegate?j._delegate:j}function Dr(j,V){return new Promise((q,de)=>{j.onsuccess=Q=>{q(Q.target.result)},j.onerror=Q=>{var Be;de(`${V}: ${null===(Be=Q.target.error)||void 0===Be?void 0:Be.message}`)}})}class Ut{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q){return new Qe(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Qe{constructor(V){this._transaction=V,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new Xe(this._store.index(V))}createIndex(V,q,de){return new Xe(this._store.createIndex(V,q,de))}get(V){return Dr(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return Dr(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return Dr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Dr(this._store.clear(),"Error clearing IndexedDB object store")}}class Xe{constructor(V){this._index=V}get(V){return Dr(this._index.get(V),"Error reading from IndexedDB")}}function ft(j,V,q){return new Promise((de,Q)=>{try{const Be=indexedDB.open(j,V);Be.onsuccess=Et=>{de(new Ut(Et.target.result))},Be.onerror=Et=>{var Yt;Q(`Error opening indexedDB: ${null===(Yt=Et.target.error)||void 0===Yt?void 0:Yt.message}`)},Be.onupgradeneeded=Et=>{q(new Ut(Be.result),Et.oldVersion,Et.newVersion,new Qe(Be.transaction))}}catch(Be){Q(`Error opening indexedDB: ${Be.message}`)}})}function $t(j){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(j){return new Promise((V,q)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Be;q(`Error deleting indexedDB database "${j}": ${null===(Be=Q.target.error)||void 0===Be?void 0:Be.message}`)}}catch(de){q(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},2766:(ut,Ae,k)=>{var h=k(5e3);let Y=null;function O(){return Y}const re=new h.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function le(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const $=new h.OlP("Location Initialized");let H=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function We(){return new H((0,h.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(re).location;return new Ye((0,h.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const tt=new h.OlP("appBaseHref");let Ye=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ve(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ve(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(he),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(He(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Se,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(he))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,h.LFG)(fe),(0,h.LFG)(he))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),Ne=(()=>((Ne=Ne||{})[Ne.Short=0]="Short",Ne[Ne.Medium=1]="Medium",Ne[Ne.Long=2]="Long",Ne[Ne.Full=3]="Full",Ne))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function on(n,e){return er((0,h.cg1)(n)[h.wAp.DateFormat],e)}function us(n,e){return er((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function en(n,e){return er((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function qt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ae.CurrencyDecimal)return t[h.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[h.wAp.NumberSymbols][ae.Group]}return r}function ls(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function er(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Kn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const tr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fs={},xa=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zt=(()=>((zt=zt||{})[zt.Short=0]="Short",zt[zt.ShortGMT=1]="ShortGMT",zt[zt.Long=2]="Long",zt[zt.Extended=3]="Extended",zt))(),ot=(()=>((ot=ot||{})[ot.FullYear=0]="FullYear",ot[ot.Month=1]="Month",ot[ot.Date=2]="Date",ot[ot.Hours=3]="Hours",ot[ot.Minutes=4]="Minutes",ot[ot.Seconds=5]="Seconds",ot[ot.FractionalSeconds=6]="FractionalSeconds",ot[ot.Day=7]="Day",ot))(),Dt=(()=>((Dt=Dt||{})[Dt.DayPeriods=0]="DayPeriods",Dt[Dt.Days=1]="Days",Dt[Dt.Months=2]="Months",Dt[Dt.Eras=3]="Eras",Dt))();function hr(n,e,t,r){let i=function Yt(n){if(Wt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(p=>+p);return Wi(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(tr))return function Cr(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,y,b),e}(r)}const e=new Date(n);if(!Wt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ht(t,e)||e;let p,c=[];for(;e;){if(p=xa.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const S=c.pop();if(!S)break;e=S}}let y=i.getTimezoneOffset();r&&(y=Q(r,y),i=function Et(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Be(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Q(e,i)-i))}(i,r,!0));let b="";return c.forEach(S=>{const M=function de(n){if(q[n])return q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ut(Dt.Eras,se.Abbreviated);break;case"GGGG":e=Ut(Dt.Eras,se.Wide);break;case"GGGGG":e=Ut(Dt.Eras,se.Narrow);break;case"y":e=ht(ot.FullYear,1,0,!1,!0);break;case"yy":e=ht(ot.FullYear,2,0,!0,!0);break;case"yyy":e=ht(ot.FullYear,3,0,!1,!0);break;case"yyyy":e=ht(ot.FullYear,4,0,!1,!0);break;case"Y":e=V(1);break;case"YY":e=V(2,!0);break;case"YYY":e=V(3);break;case"YYYY":e=V(4);break;case"M":case"L":e=ht(ot.Month,1,1);break;case"MM":case"LL":e=ht(ot.Month,2,1);break;case"MMM":e=Ut(Dt.Months,se.Abbreviated);break;case"MMMM":e=Ut(Dt.Months,se.Wide);break;case"MMMMM":e=Ut(Dt.Months,se.Narrow);break;case"LLL":e=Ut(Dt.Months,se.Abbreviated,me.Standalone);break;case"LLLL":e=Ut(Dt.Months,se.Wide,me.Standalone);break;case"LLLLL":e=Ut(Dt.Months,se.Narrow,me.Standalone);break;case"w":e=j(1);break;case"ww":e=j(2);break;case"W":e=j(1,!0);break;case"d":e=ht(ot.Date,1);break;case"dd":e=ht(ot.Date,2);break;case"c":case"cc":e=ht(ot.Day,1);break;case"ccc":e=Ut(Dt.Days,se.Abbreviated,me.Standalone);break;case"cccc":e=Ut(Dt.Days,se.Wide,me.Standalone);break;case"ccccc":e=Ut(Dt.Days,se.Narrow,me.Standalone);break;case"cccccc":e=Ut(Dt.Days,se.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=Ut(Dt.Days,se.Abbreviated);break;case"EEEE":e=Ut(Dt.Days,se.Wide);break;case"EEEEE":e=Ut(Dt.Days,se.Narrow);break;case"EEEEEE":e=Ut(Dt.Days,se.Short);break;case"a":case"aa":case"aaa":e=Ut(Dt.DayPeriods,se.Abbreviated);break;case"aaaa":e=Ut(Dt.DayPeriods,se.Wide);break;case"aaaaa":e=Ut(Dt.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":e=Ut(Dt.DayPeriods,se.Abbreviated,me.Standalone,!0);break;case"bbbb":e=Ut(Dt.DayPeriods,se.Wide,me.Standalone,!0);break;case"bbbbb":e=Ut(Dt.DayPeriods,se.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ut(Dt.DayPeriods,se.Abbreviated,me.Format,!0);break;case"BBBB":e=Ut(Dt.DayPeriods,se.Wide,me.Format,!0);break;case"BBBBB":e=Ut(Dt.DayPeriods,se.Narrow,me.Format,!0);break;case"h":e=ht(ot.Hours,1,-12);break;case"hh":e=ht(ot.Hours,2,-12);break;case"H":e=ht(ot.Hours,1);break;case"HH":e=ht(ot.Hours,2);break;case"m":e=ht(ot.Minutes,1);break;case"mm":e=ht(ot.Minutes,2);break;case"s":e=ht(ot.Seconds,1);break;case"ss":e=ht(ot.Seconds,2);break;case"S":e=ht(ot.FractionalSeconds,1);break;case"SS":e=ht(ot.FractionalSeconds,2);break;case"SSS":e=ht(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Te(zt.Short);break;case"ZZZZZ":e=Te(zt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Te(zt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Te(zt.Long);break;default:return null}return q[n]=e,e}(S);b+=M?M(i,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Wi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ht(n,e){const t=function Xt(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Fs[t]=Fs[t]||{},Fs[t][e])return Fs[t][e];let r="";switch(e){case"shortDate":r=on(n,Ne.Short);break;case"mediumDate":r=on(n,Ne.Medium);break;case"longDate":r=on(n,Ne.Long);break;case"fullDate":r=on(n,Ne.Full);break;case"shortTime":r=us(n,Ne.Short);break;case"mediumTime":r=us(n,Ne.Medium);break;case"longTime":r=us(n,Ne.Long);break;case"fullTime":r=us(n,Ne.Full);break;case"short":const i=Ht(n,"shortTime"),u=Ht(n,"shortDate");r=yo(en(n,Ne.Short),[i,u]);break;case"medium":const c=Ht(n,"mediumTime"),p=Ht(n,"mediumDate");r=yo(en(n,Ne.Medium),[c,p]);break;case"long":const y=Ht(n,"longTime"),b=Ht(n,"longDate");r=yo(en(n,Ne.Long),[y,b]);break;case"full":const S=Ht(n,"fullTime"),M=Ht(n,"fullDate");r=yo(en(n,Ne.Full),[S,M])}return r&&(Fs[t][e]=r),r}function yo(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function br(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ht(n,e,t=0,r=!1,i=!1){return function(u,c){let p=function Dr(n,e){switch(n){case ot.FullYear:return e.getFullYear();case ot.Month:return e.getMonth();case ot.Date:return e.getDate();case ot.Hours:return e.getHours();case ot.Minutes:return e.getMinutes();case ot.Seconds:return e.getSeconds();case ot.FractionalSeconds:return e.getMilliseconds();case ot.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===ot.Hours)0===p&&-12===t&&(p=12);else if(n===ot.FractionalSeconds)return function fr(n,e){return br(n,3).substr(0,e)}(p,e);const y=qt(c,ae.MinusSign);return br(p,e,y,r,i)}}function Ut(n,e,t=me.Format,r=!1){return function(i,u){return function Qe(n,e,t,r,i,u){switch(t){case Dt.Months:return function vt(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return er(u,t)}(e,i,r)[n.getMonth()];case Dt.Days:return function lt(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return er(u,t)}(e,i,r)[n.getDay()];case Dt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const b=function cs(n){const e=(0,h.cg1)(n);return ls(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Kn(r):[Kn(r[0]),Kn(r[1])])}(e),S=function dt(n,e,t){const r=(0,h.cg1)(n);ls(r);const u=er([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return er(u,t)||[]}(e,i,r),M=b.findIndex(F=>{if(Array.isArray(F)){const[B,G]=F,ne=c>=B.hours&&p>=B.minutes,we=c<G.hours||c===G.hours&&p<G.minutes;if(B.hours<G.hours){if(ne&&we)return!0}else if(ne||we)return!0}else if(F.hours===c&&F.minutes===p)return!0;return!1});if(-1!==M)return S[M]}return function kn(n,e,t){const r=(0,h.cg1)(n),u=er([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return er(u,t)}(e,i,r)[c<12?0:1];case Dt.Eras:return function cn(n,e){return er((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Te(n){return function(e,t,r){const i=-1*r,u=qt(t,ae.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case zt.Short:return(i>=0?"+":"")+br(c,2,u)+br(Math.abs(i%60),2,u);case zt.ShortGMT:return"GMT"+(i>=0?"+":"")+br(c,1,u);case zt.Long:return"GMT"+(i>=0?"+":"")+br(c,2,u)+":"+br(Math.abs(i%60),2,u);case zt.Extended:return 0===r?"Z":(i>=0?"+":"")+br(c,2,u)+":"+br(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Lt(n){return Wi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function j(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=Lt(t),c=function $t(n){const e=Wi(n,0,1).getDay();return Wi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();i=1+Math.round(p/6048e5)}return br(i,n,qt(r,ae.MinusSign))}}function V(n,e=!1){return function(t,r){return br(Lt(t).getFullYear(),n,qt(r,ae.MinusSign),e)}}const q={};function Q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Wt(n){return n instanceof Date&&!isNaN(n.valueOf())}let hs=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Bs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Bs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),fs(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{fs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function fs(n,e){n.context.$implicit=e.item}function Hn(n,e){return new h.vHH(2100,"")}class Hc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Up{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const gs=new Up,jp=new Hc;let ka=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return gs;if((0,h.F4k)(t))return jp;throw Hn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})();const Hp=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Oh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){var c;if(null==t||""===t||t!=t)return null;try{return hr(t,r,u||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw Hn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Hp,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),Pa=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=h.Yjl({name:"json",type:n,pure:!1}),n})(),ir=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Hs="browser";function Ir(n){return n===Hs}function gr(n){return"server"===n}let bu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Du((0,h.LFG)(re),window)}),n})();class Du{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function La(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ms(this.window.history)||ms(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ms(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs extends class Jo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Kc(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function bo(n){wo=wo||document.createElement("a"),wo.setAttribute("href",n);const e=wo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let wo,ln=null;const Tr=new h.OlP("TRANSITION_ID"),Va=[{provide:h.ip1,useFactory:function Fn(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Tr,re,h.zs3],multi:!0}];class xi{static init(){(0,h.VLi)(new xi)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qs=new h.OlP("EventManagerPlugins");let ys=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Cu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends Jr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ws))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ws(n){O().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Iu=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(Iu,n),t.push(i))}return t}function Vt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let En=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new wl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new bl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ys),h.LFG(zs),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vt(r)):this.eventManager.addEventListener(e,t,Vt(r))}}class wl extends Xo{constructor(e,t,r,i){super(e),this.component=r;const u=De(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function _l(n){return"_ngcontent-%COMP%".replace(Iu,n)}(i+"-"+r.id),this.hostAttr=function vl(n){return"_nghost-%COMP%".replace(Iu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class bl extends Xo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Zc=(()=>{class n extends Cu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Dl=["alt","control","meta","shift"],Ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},li={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let xu=(()=>{class n extends Cu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Dl.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function Zs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&mr.hasOwnProperty(e)&&(e=mr[e]))}return Ks[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Dl.forEach(u=>{u!=i&&li[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Il=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Hs},{provide:h.g9A,useValue:function Ri(){Gs.makeCurrent(),xi.init()},multi:!0},{provide:re,useFactory:function Ru(){return(0,h.RDi)(document),document},deps:[]}]),Ua=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Cl(){return new h.qLn},deps:[]},{provide:qs,useClass:Zc,multi:!0,deps:[re,h.R0b,h.Lbi]},{provide:qs,useClass:xu,multi:!0,deps:[re]},{provide:En,useClass:En,deps:[ys,zs,h.AFp]},{provide:h.FYo,useExisting:En},{provide:Jr,useExisting:zs},{provide:zs,useClass:zs,deps:[re]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ys,useClass:ys,deps:[qs,h.R0b]},{provide:class yn{},useClass:Ar,deps:[]}];let ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Tr,useExisting:h.AFp},Va]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Ua,imports:[ir,h.hGG]}),n})();"undefined"!=typeof window&&window;var Ln=k(8996),Vn=k(7669);function gt(...n){const e=(0,Vn.yG)(n);return(0,Ln.D)(n,e)}var sr=k(7579);class ei extends sr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Fr=k(8306);const{isArray:ra}=Array,{getPrototypeOf:rd,prototype:mn,keys:Vh}=Object;function Ni(n){if(1===n.length){const e=n[0];if(ra(e))return{args:e,keys:null};if(function ku(n){return n&&"object"==typeof n&&rd(n)===mn}(e)){const t=Vh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ci=k(4671),Bt=k(4004);const{isArray:id}=Array;function kl(n){return(0,Bt.U)(e=>function Ol(n,e){return id(e)?n(...e):n(e)}(n,e))}function Ao(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var qn=k(5403),Es=k(9672);function Js(n,e,t){n?(0,Es.f)(t,n,e):e()}var hi=k(576);function Zi(n,e){const t=(0,hi.m)(n)?n:()=>n,r=i=>i.error(t());return new Fr.y(e?i=>e.schedule(r,0,i):r)}const Xs=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yi=k(8189);function sd(...n){return function Fl(){return(0,Yi.J)(1)}()((0,Ln.D)(n,(0,Vn.yG)(n)))}var So=k(8421);function Oi(n){return new Fr.y(e=>{(0,So.Xf)(n()).subscribe(e)})}var sa=k(515),oa=k(727),Lr=k(4482);function ki(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class od extends Fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oa.w0.EMPTY)}return e}refCount(){return ki()(this)}}function Bn(n,e){return(0,Lr.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,qn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,So.Xf)(n(y,S)).subscribe(i=(0,qn.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var Mo=k(5698);function Pi(...n){const e=(0,Vn.yG)(n);return(0,Lr.e)((t,r)=>{(e?sd(n,t,e):sd(n,t)).subscribe(r)})}function aa(n,e,t,r,i){return(u,c)=>{let p=t,y=e,b=0;u.subscribe((0,qn.x)(c,S=>{const M=b++;y=p?n(y,S,M):(p=!0,S),r&&c.next(y)},i&&(()=>{p&&c.next(y),c.complete()})))}}function Mr(n,e){return(0,Lr.e)(aa(n,e,arguments.length>=2,!0))}function Qi(n,e){return(0,Lr.e)((t,r)=>{let i=0;t.subscribe((0,qn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Ji(n){return(0,Lr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,qn.x)(t,void 0,void 0,c=>{u=(0,So.Xf)(n(c,Ji(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Dn=k(5577);function eo(n,e){return(0,hi.m)(e)?(0,Dn.z)(n,e,1):(0,Dn.z)(n,1)}function ad(n){return n<=0?()=>sa.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,qn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sn(n=Wp){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Wp(){return new Xs}function Kp(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function to(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,u)=>n(i,u,r)):ci.y,(0,Mo.q)(1),t?Kp(e):Sn(()=>new Xs))}var ti=k(8505);class no{constructor(e,t){this.id=e,this.url=t}}class ws extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pu extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cn extends no{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ll extends no{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ua extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qp extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vl extends no{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xr extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fi extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ul{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class $l{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yn(n){return new $l(n)}const Hl="ngNavigationCancelingError";function ro(n){const e=Error("NavigationCancelingError: "+n);return e[Hl]=!0,e}function xo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Lu(n[i],e[i]))return!1;return!0}function Lu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function ts(n){return Array.prototype.concat.apply([],n)}function ld(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pi(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Ln.D)(Promise.resolve(n)):gt(n)}const Ro={exact:function I(n,e,t){if(!Ot(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},la={exact:function C(n,e){return es(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lu(n[t],e[t]))},ignored:()=>!0};function Vu(n,e,t){return Ro[t.paths](n.root,e.root,t.matrixParams)&&la[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ot(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!Ot(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ot(n.segments,i)&&ee(n.segments,i,r)&&n.children[Pt])&&K(n.children[Pt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>la[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return ca.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return No(this)}}class Je{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yn(this.parameters)),this._parameterMap}toString(){return Ha(this)}}function Ot(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class zn{}class Mn{parse(e){const t=new dd(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vr(e.root,!0)}`,r=function Cy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Li(t)}=${Li(i)}`).join("&"):`${Li(t)}=${Li(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Oo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ca=new Mn;function No(n){return n.segments.map(e=>Ha(e)).join("/")}function Vr(n,e){if(!n.hasChildren())return No(n);if(e){const t=n.children[Pt]?Vr(n.children[Pt],!1):"",r=[];return Qn(n.children,(i,u)=>{u!==Pt&&r.push(`${u}:${Vr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function St(n,e){let t=[];return Qn(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),Qn(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[Vr(n.children[Pt],!1)]:[`${i}:${Vr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${No(n)}/${t[0]}`:`${No(n)}/(${t.join("//")})`}}function gi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Li(n){return gi(n).replace(/%3B/gi,";")}function cd(n){return gi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ql(n){return decodeURIComponent(n)}function zl(n){return ql(n.replace(/\+/g,"%20"))}function Ha(n){return`${cd(n.path)}${function Jp(n){return Object.keys(n).map(e=>`;${cd(e)}=${cd(n[e])}`).join("")}(n.parameters)}`}const Iy=/^[^\/()?;=#]+/;function Ds(n){const e=n.match(Iy);return e?e[0]:""}const Wl=/^[^=?&#]+/,Ay=/^[^&#]+/;class dd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new xe(e,t)),r}parseSegment(){const e=Ds(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Je(ql(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ds(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ds(this.remaining);i&&(r=i,this.capture(r))}e[ql(t)]=ql(r)}parseQueryParam(e){const t=function Ty(n){const e=n.match(Wl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Xp(n){const e=n.match(Ay);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=zl(t),u=zl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ds(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Pt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Pt]:new xe([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Uh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Uh(e,this._root).map(t=>t.value)}}function Bh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bh(n,t);if(r)return r}return null}function Uh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Uh(n,t);if(r.length)return r.unshift(e),r}return[]}class ko{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Po(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hd extends Sy{constructor(e,t){super(e),this.snapshot=t,pd(this,e)}toString(){return this.snapshot.toString()}}function Ga(n,e){const t=function My(n,e){const c=new Bu([],{},{},"",{},Pt,e,null,n.root,-1,{});return new jh("",new ko(c,[]))}(n,e),r=new ei([new Je("",{})]),i=new ei({}),u=new ei({}),c=new ei({}),p=new ei(""),y=new da(r,i,c,p,u,Pt,e,t.root);return y.snapshot=t.root,new hd(new ko(y,[]),t)}class da{constructor(e,t,r,i,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bt.U)(e=>Yn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bt.U)(e=>Yn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function fd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Bu{constructor(e,t,r,i,u,c,p,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jh extends Sy{constructor(e,t){super(t),this.url=e,pd(this,t)}toString(){return gd(this._root)}}function pd(n,e){e.value._routerState=n,e.children.forEach(t=>pd(n,t))}function gd(n){const e=n.children.length>0?` { ${n.children.map(gd).join(", ")} } `:"";return`${n.value}${e}`}function md(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function Fu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $h(n,e){const t=es(n.params,e.params)&&function It(n,e){return Ot(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$h(n.parent,e.parent))}function Kl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Hh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Kl(n,r,i);return Kl(n,r)})}(n,e,t);return new ko(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Kl(n,p)),c}}const r=function Ny(n){return new da(new ei(n.url),new ei(n.params),new ei(n.queryParams),new ei(n.fragment),new ei(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Kl(n,u));return new ko(r,i)}}function ha(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function eg(n,e,t,r,i){let u={};if(r&&Qn(r,(p,y)=>{u[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Me(t,u,i);const c=Gh(n,e,t);return new Me(c,u,i)}function Gh(n,e,t){const r={};return Qn(n.children,(i,u)=>{r[u]=i===e?t:Gh(i,e,t)}),new xe(n.segments,r)}class Oy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ha(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Uu);if(i&&i!==ld(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ly(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return so(n,e,t);const r=function K0(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Uu(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Vi(y,b,c))return u;r+=2}else{if(!Vi(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Pt]=new xe(n.segments.slice(r.pathIndex),n.children),so(u,0,i)}return r.match&&0===i.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?zh(n,e,t):r.match?so(n,0,i):zh(n,e,t)}function so(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function Fy(n){return Uu(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return Qn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Ly(n.children[c],e,u))}),Qn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new xe(n.segments,i)}}function zh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Uu(u)){const y=ju(u.outlets);return new xe(r,y)}if(0===i&&ha(t[0])){r.push(new Je(n.segments[e].path,Wh(t[0]))),i++;continue}const c=Uu(u)?u.outlets[Pt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&ha(p)?(r.push(new Je(c,Wh(p))),i+=2):(r.push(new Je(c,{})),i++)}return new xe(r,{})}function ju(n){const e={};return Qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=zh(new xe([],{}),0,t))}),e}function Wh(n){const e={};return Qn(n,(t,r)=>e[r]=`${t}`),e}function Vi(n,e,t){return n==t.path&&es(e,t.parameters)}class ng{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),md(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Po(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Qn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Po(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Po(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Po(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ul(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Xi(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(md(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),md(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function yd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class _d{constructor(e,t){this.routes=e,this.module=t}}function qa(n){return"function"==typeof n}function $u(n){return n instanceof Me}const Yl=Symbol("INITIAL_VALUE");function fa(){return Bn(n=>function ia(...n){const e=(0,Vn.yG)(n),t=(0,Vn.jO)(n),{args:r,keys:i}=Ni(n);if(0===r.length)return(0,Ln.D)([],e);const u=new Fr.y(function di(n,e,t=ci.y){return r=>{Js(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let y=0;y<i;y++)Js(e,()=>{const b=(0,Ln.D)(n[y],e);let S=!1;b.subscribe((0,qn.x)(r,M=>{u[y]=M,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Ao(i,c):ci.y));return t?u.pipe(kl(t)):u}(n.map(e=>e.pipe((0,Mo.q)(1),Pi(Yl)))).pipe(Mr((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Yl?i:(u===Yl&&(r=!0),r||!1!==u&&c!==t.length-1&&!$u(u)?i:u),e)},Yl),Qi(e=>e!==Yl),(0,Bt.U)(e=>$u(e)?e:!0===e),(0,Mo.q)(1)))}class Vy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ql,this.attachRef=null}}class Ql{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Vy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Jl=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new Qh(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ql),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Qh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===da?this.route:e===Ql?this.childContexts:this.parent.get(e,t)}}let Jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Jl],encapsulation:2}),n})();function Xl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];vd(r,Xh(e,r))}}function vd(n,e){n.children&&Xl(n.children,e)}function Xh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ef(n){const e=n.children&&n.children.map(ef),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=Jh),t}function rn(n){return n.outlet||Pt}function tf(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const ig={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ig):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||xo)(t,n,e);if(!u)return Object.assign({},ig);const c={};Qn(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ec(n,e,t,r,i="corrected"){if(t.length>0&&function Uy(n,e,t){return t.some(r=>wd(n,e,r)&&rn(r)!==Pt)}(n,t,r)){const c=new xe(e,function Ed(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Pt){const c=new xe([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[rn(u)]=c}return i}(n,e,r,new xe(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function sg(n,e,t){return t.some(r=>wd(n,e,r))}(n,t,r)){const c=new xe(n.segments,function By(n,e,t,r,i,u){const c={};for(const p of r)if(wd(n,t,p)&&!i[rn(p)]){const y=new xe([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[rn(p)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function wd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jy(n,e,t,r){return!!(rn(n)===r||r!==Pt&&wd(e,t,n))&&("**"===n.path||Hu(e,n,t).matched)}function $y(n,e,t){return 0===e.length&&!n.children[t]}class pa{constructor(e){this.segmentGroup=e||null}}class Rr{constructor(e){this.urlTree=e}}function Fo(n){return Zi(new pa(n))}function tc(n){return Zi(new Rr(n))}class rf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=ec(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,Bt.U)(u=>this.createUrlTree(Wa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ji(u=>{if(u instanceof Rr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof pa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,Bt.U)(i=>this.createUrlTree(Wa(i),e.queryParams,e.fragment))).pipe(Ji(i=>{throw i instanceof pa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new xe([],{[Pt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Bt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Ln.D)(i).pipe(eo(u=>{const c=r.children[u],p=tf(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Bt.U)(y=>({segment:y,outlet:u})))}),Mr((u,c)=>(u[c.outlet]=c.segment,u),{}),function Zp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qi((i,u)=>n(i,u,r)):ci.y,ad(1),t?Kp(e):Sn(()=>new Xs))}())}expandSegment(e,t,r,i,u,c){return(0,Ln.D)(r).pipe(eo(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(Ji(b=>{if(b instanceof pa)return gt(null);throw b}))),to(p=>!!p),Ji((p,y)=>{if(p instanceof Xs||"EmptyError"===p.name)return $y(t,i,u)?gt(new xe([],{})):Fo(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return jy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Fo(t):Fo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?tc(u):this.lineralizeSegments(r,u).pipe((0,Dn.z)(c=>{const p=new xe(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=Hu(t,i,u);if(!p)return Fo(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?tc(M):this.lineralizeSegments(i,M).pipe((0,Dn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Bt.U)(M=>(r._loadedConfig=M,new xe(i,{})))):gt(new xe(i,{}));const{matched:c,consumedSegments:p,remainingSegments:y}=Hu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Dn.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:G}=ec(t,p,y,F),ne=new xe(B.segments,B.children);if(0===G.length&&ne.hasChildren())return this.expandChildren(M,F,ne).pipe((0,Bt.U)(Ke=>new xe(p,Ke)));if(0===F.length&&0===G.length)return gt(new xe(p,{}));const we=rn(r)===u;return this.expandSegment(M,ne,F,G,we?Pt:u,!0).pipe((0,Bt.U)(Le=>new xe(p.concat(Le.segments),Le.children)))})):Fo(t)}getChildConfig(e,t,r){return t.children?gt(new _d(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Dn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Bt.U)(u=>(t._loadedConfig=u,u))):function Br(n){return Zi(ro(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new _d([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(c=>{const p=e.get(c);let y;if(function Kh(n){return n&&qa(n.canLoad)}(p))y=p.canLoad(t,r);else{if(!qa(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}return pi(y)})).pipe(fa(),(0,ti.b)(c=>{if(!$u(c))return;const p=ro(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Bt.U)(c=>!0===c)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Pt])return Zi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Me(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Qn(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,i)}),new xe(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Wa(n){const e={};for(const r of Object.keys(n.children)){const u=Wa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Bi(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class og{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ka{constructor(e,t){this.component=e,this.route=t}}function of(n,e,t){const r=n._root;return mi(r,e?e._root:null,t,[r.value])}function nc(n,e,t){const r=function Hy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Po(e);return n.children.forEach(c=>{(function ug(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function Gy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ot(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ot(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$h(n,e)||!es(n.queryParams,e.queryParams);default:return!$h(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new og(r)):(u.data=c.data,u._resolvedData=c._resolvedData),mi(n,e,u.component?p?p.children:null:t,r,i),y&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Ka(p.outlet.component,c))}else c&&Za(e,p,i),i.canActivateChecks.push(new og(r)),mi(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Qn(u,(c,p)=>Za(c,t.getContext(p),i)),i}function Za(n,e,t){const r=Po(n),i=n.value;Qn(r,(u,c)=>{Za(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ka(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class lf{}function cf(n){return new Fr.y(e=>e.error(n))}class df{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=ec(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new Bu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ko(r,t),u=new jh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=xy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=tf(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const i=dg(r);return function Ky(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return $y(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jy(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const B=r.length>0?ld(r).parameters:{};u=new Bu(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+r.length,A(e))}else{const B=Hu(t,e,r);if(!B.matched)return null;c=B.consumedSegments,p=B.remainingSegments,u=new Bu(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,f(t),m(t)+c.length,A(e))}const y=function Zy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=ec(t,c,p,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(y,b);return null===B?null:[new ko(u,B)]}if(0===y.length&&0===S.length)return[new ko(u,[])];const M=rn(e)===i,F=this.processSegment(y,b,S,M?Pt:i);return null===F?null:[new ko(u,F)]}}function cg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function dg(n){const e=[],t=new Set;for(const r of n){if(!cg(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=dg(r.children);e.push(new ko(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function A(n){return n.resolve||{}}function et(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function at(n){return Bn(e=>{const t=n(e);return t?(0,Ln.D)(t).pipe((0,Bt.U)(()=>e)):gt(e)})}class ic extends class rs{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gu=new h.OlP("ROUTES");class qu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Bt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new _d(ts(c.injector.get(Gu,void 0,h.XFs.Self|h.XFs.Optional)).map(ef),c)}),Ji(u=>{throw t._loader$=void 0,u}));return t._loader$=new od(i,()=>new sr.x).pipe(ki()),t._loader$}loadModuleFactory(e){return pi(e()).pipe((0,Dn.z)(t=>t instanceof h.YKP?gt(t):(0,Ln.D)(this.compiler.compileModuleAsync(t))))}}class Yy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ga(n){throw n}function bd(n,e,t){return e.parse("/")}function Dd(n,e){return gt(null)}const ff={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yi=(()=>{class n{constructor(t,r,i,u,c,p,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sr.x,this.errorHandler=ga,this.malformedUriErrorHandler=bd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Dd,afterPreactivation:Dd},this.urlHandlingStrategy=new Yy,this.routeReuseStrategy=new ic,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Gl(){return new Me(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qu(c,p,F=>this.triggerEvent(new Bl(F)),F=>this.triggerEvent(new bs(F))),this.routerState=Ga(this.currentUrlTree,this.rootComponentType),this.transitions=new ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qi(i=>0!==i.id),(0,Bt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Bn(i=>{let u=!1,c=!1;return gt(i).pipe((0,ti.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bn(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return hg(p.source)&&(this.browserUrlTree=p.extractedUrl),gt(p).pipe(Bn(M=>{const F=this.transitions.getValue();return r.next(new ws(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?sa.E:Promise.resolve(M)}),function sf(n,e,t,r){return Bn(i=>function za(n,e,t,r,i){return new rf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Bt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ti.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function N(n,e,t,r,i){return(0,Dn.z)(u=>function Wy(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new df(n,e,t,r,i,u).recognize();return null===c?cf(new lf):gt(c)}catch(c){return cf(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Bt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ti.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new ua(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:G,restoredState:ne,extras:we}=p,Ze=new ws(F,this.serializeUrl(B),G,ne);r.next(Ze);const Le=Ga(B,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},p),{targetSnapshot:Le,urlAfterRedirects:B,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),sa.E}),at(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,ti.b)(p=>{const y=new Qp(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,Bt.U)(p=>Object.assign(Object.assign({},p),{guards:of(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function qy(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function lg(n,e,t,r){return(0,Ln.D)(n).pipe((0,Dn.z)(i=>function rc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(p=>{const y=nc(p,e,i);let b;if(function Z0(n){return n&&qa(n.canDeactivate)}(y))b=pi(y.canDeactivate(n,e,t,r));else{if(!qa(y))throw new Error("Invalid CanDeactivate guard");b=pi(y(n,e,t,r))}return b.pipe(to())})).pipe(fa()):gt(!0)}(i.component,i.route,t,e,r)),to(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Dn.z)(p=>p&&function rg(n){return"boolean"==typeof n}(p)?function Nr(n,e,t,r){return(0,Ln.D)(e).pipe(eo(i=>sd(function uf(n,e){return null!==n&&e&&e(new Fi(n)),gt(!0)}(i.route.parent,r),function af(n,e){return null!==n&&e&&e(new $a(n)),gt(!0)}(i.route,r),function Lo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function ag(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Oi(()=>gt(c.guards.map(y=>{const b=nc(y,c.node,t);let S;if(function Yh(n){return n&&qa(n.canActivateChild)}(b))S=pi(b.canActivateChild(r,n));else{if(!qa(b))throw new Error("Invalid CanActivateChild guard");S=pi(b(r,n))}return S.pipe(to())})).pipe(fa())));return gt(u).pipe(fa())}(n,i.path,t),function zy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(u=>Oi(()=>{const c=nc(u,e,t);let p;if(function Zh(n){return n&&qa(n.canActivate)}(c))p=pi(c.canActivate(e,n));else{if(!qa(c))throw new Error("Invalid CanActivate guard");p=pi(c(e,n))}return p.pipe(to())}));return gt(i).pipe(fa())}(n,i.route,t))),to(i=>!0!==i,!0))}(r,u,n,e):gt(p)),(0,Bt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ti.b)(p=>{if($u(p.guardsResult)){const b=ro(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Vl(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Qi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),at(p=>{if(p.guards.canActivateChecks.length)return gt(p).pipe((0,ti.b)(y=>{const b=new xr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Bn(y=>{let b=!1;return gt(y).pipe(function z(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let u=0;return(0,Ln.D)(i).pipe(eo(c=>function oe(n,e,t,r){return function Ue(n,e,t,r){const i=et(n);if(0===i.length)return gt({});const u={};return(0,Ln.D)(i).pipe((0,Dn.z)(c=>function wt(n,e,t,r){const i=nc(n,e,r);return pi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ti.b)(p=>{u[c]=p}))),ad(1),(0,Dn.z)(()=>et(u).length===i.length?gt(u):sa.E))}(n._resolve,n,e,r).pipe((0,Bt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),xy(n,t).resolve),null)))}(c.route,r,n,e)),(0,ti.b)(()=>u++),ad(1),(0,Dn.z)(c=>u===i.length?gt(t):sa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ti.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ti.b)(y=>{const b=new fi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),at(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Bt.U)(p=>{const y=function Ry(n,e,t){const r=Kl(n,e._root,t?t._root:void 0);return new hd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ti.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Bt.U)(r=>(new ng(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ti.b)({next(){u=!0},complete(){u=!0}}),function Yp(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Ji(p=>{if(c=!0,function ud(n){return n&&n[Hl]}(p)){const y=$u(p.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Cn(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hg(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Ll(i.id,this.serializeUrl(i.extractedUrl),p);r.next(y);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return sa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Xl(t),this.config=t.map(ef),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function io(n,e,t,r,i){if(0===t.length)return eg(e.root,e.root,e.root,r,i);const u=function ky(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Oy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Qn(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Oy(t,e,r)}(t);if(u.toRoot())return eg(e.root,e.root,new xe([],{}),r,i);const c=function tg(n,e,t){if(n.isAbsolute)return new qh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new qh(u,u===e.root,0)}const r=ha(n.commands[0])?0:1;return function Py(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qh(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?so(c.segmentGroup,c.index,u.commands):Ly(c.segmentGroup,c.index,u.commands);return eg(e.root,c.segmentGroup,p,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=$u(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function pf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},ff):!1===r?Object.assign({},Cd):r,$u(t))return Vu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Vu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((G,ne)=>{b=G,S=ne});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Cn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function hg(n){return"imperative"!==n}let gf=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new sr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yi),h.Y36(da),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Id(n){return""===n||!!n}class Xy{}class Q0{preload(e,t){return gt(null)}}let J0=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new qu(i,r,y=>t.triggerEvent(new Bl(y)),y=>t.triggerEvent(new bs(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qi(t=>t instanceof Pu),eo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Ln.D)(i).pipe((0,Yi.J)(),(0,Bt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Dn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Xy))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ws?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new jl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new h.OlP("ROUTER_CONFIGURATION"),t_=new h.OlP("ROUTER_FORROOT_GUARD"),X0=[_e,{provide:zn,useClass:Mn},{provide:yi,useFactory:function r_(n,e,t,r,i,u,c={},p,y){const b=new yi(null,n,e,t,r,i,ts(u));return p&&(b.urlHandlingStrategy=p),y&&(b.routeReuseStrategy=y),function nE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[zn,Ql,_e,h.zs3,h.Sil,Gu,Cs,[class hf{},new h.FiY],[class xn{},new h.FiY]]},Ql,{provide:da,useFactory:function pg(n){return n.routerState.root},deps:[yi]},J0,Q0,class e_{preload(e,t){return t().pipe(Ji(()=>gt(null)))}},{provide:Cs,useValue:{enableTracing:!1}}];function TC(){return new h.PXZ("Router",yi)}let ma=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[X0,n_(t),{provide:t_,useFactory:tE,deps:[[yi,new h.FiY,new h.tp0]]},{provide:Cs,useValue:r||{}},{provide:fe,useFactory:eE,deps:[he,[new h.tBr(tt),new h.FiY],Cs]},{provide:fg,useFactory:AC,deps:[yi,bu,Cs]},{provide:Xy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Q0},{provide:h.PXZ,multi:!0,useFactory:TC},[Td,{provide:h.ip1,multi:!0,useFactory:rE,deps:[Td]},{provide:s_,useFactory:i_,deps:[Td]},{provide:h.tb,multi:!0,useExisting:s_}]]}}static forChild(t){return{ngModule:n,providers:[n_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(t_,8),h.LFG(yi,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function AC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new fg(n,e,t)}function eE(n,e,t={}){return t.useHash?new Ie(n,e):new Ye(n,e)}function tE(n){return"guarded"}function n_(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Gu,multi:!0,useValue:n}]}let Td=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new sr.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(yi),c=this.injector.get(Cs);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Cs),i=this.injector.get(J0),u=this.injector.get(fg),c=this.injector.get(yi),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function rE(n){return n.appInitializer.bind(n)}function i_(n){return n.bootstrapListener.bind(n)}const s_=new h.OlP("Router Initializer");let a_=(()=>{class n{constructor(){this.date$=gt({dateTime:Date.now().toString()})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-today-date"]],decls:7,vars:6,consts:[[1,"d-inline"],[1,"d-inline","m-lg-3","m-md-3","m-sm-3","m-xl-3"],[1,"mb-5"]],template:function(t,r){if(1&t&&(h.TgZ(0,"h1",0),h._uU(1,"Today"),h.qZA(),h.TgZ(2,"p",1),h._uU(3),h.ALo(4,"date"),h.ALo(5,"async"),h.qZA(),h._UZ(6,"hr",2)),2&t){let i;h.xp6(3),h.Oqu(h.xi3(4,1,null==(i=h.lcZ(5,4,r.date$))?null:i.dateTime,"E d LLL"))}},pipes:[Oh,ka],encapsulation:2,changeDetection:0}),n})();const iE=function(){return["/add-task"]};let sE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-home-page-add-task"]],decls:2,vars:2,consts:[["type","button",1,"btn","btn-secondary",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"button",0),h._uU(1,"Add task"),h.qZA()),2&t&&h.Q6J("routerLink",h.DdM(1,iE))},directives:[gf],encapsulation:2,changeDetection:0}),n})();const oE=function(n){return[n]};function aE(n,e){if(1&n&&(h.TgZ(0,"div",2)(1,"div",3),h._UZ(2,"img",4),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.Q6J("src",h.VKq(2,oE,t.imageUrl),h.LSH)("alt",h.VKq(4,oE,t.name))}}let u_=(()=>{class n{constructor(){this.pictures$=gt([{name:"test",imageUrl:"https://s3-alpha-sig.figma.com/img/4a54/edcf/1ae0a1a97c1d55fff83be7b5d93e6c59?Expires=1649030400&Signature=bxRFk4~0thtHpzbptBpAugnVSDig2z3vKkexFMXCTk4d6hhehzUAE6HON6Uuu7rwVIkPaL8fvWo7myumBf-sMfcPlOjrxigt~g39XCtObvVnIIHSCYbVm2GAmKqHhj6AJ43HbhebNF8wuR8TdnHiZBr1SW~3ilRvhu1wuASHpbP~Z~7gDDqj~QMgaYJfwgI9x8GHgG9q3foUwwf0FkbYfkH50q4Or~IkMK~r8YVxZYm2utvkHFoR7LMotD8q8vJfxooCuVIS-GVn6qIY4TICR9hfkcumGnxeLkUdgrY2yxREgZGlvEJXJlpHls~Cm1Am2oo~Em4vTykAlNKWni02Yg__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA"},{name:"test",imageUrl:"https://s3-alpha-sig.figma.com/img/dc1b/5002/52b4ffa2737388d8f81c869924c64984?Expires=1649030400&Signature=fj38LNalYBs~qAS-KKlRlYbulXI6VMXKxv5Dl1WUHYYSr4D0FrG2NYXuwI2mCVwekcSANMR~XyX-TYOq0H33TxLC3aYJroGKaakremHzC2pE7vF4evPwdVbyRI-~aGPPlXg3hS5Uezfq~kA7uwRBxm8Er3Fliiz~nGFSc7wKFWyW4tNNdlqJtgInQabm5SQ3VgLcq-hsmL8p6qAZOdd9NECtxOyr~Hzni0R9gYID0VtEWLJqUhgJtYObWIfSPZmz0Izim3RVrjEMdz9uMsgEtBKsHDP1CR1g1cF6Oi51M9KYjOjRoqn9fRo1oBJ9vB5vp0ao5iVkSHYNAwfmQRqtVQ__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA"},{name:"test",imageUrl:"https://s3-alpha-sig.figma.com/img/3467/c917/a5ffb2a9527450441ebe0b5ba1714e2e?Expires=1649030400&Signature=dgMwbrjAEDgE5~Bppc37iuXfxm6oGKPHukV61RZatltrl0NhJ7qF42G8IQeFV-s3GygYftMdxRr5-lRYs6beX0tlETrtUjIDcxvTEj5ke10rtlRfgP6SFfo5CRgqaETL5Z-wf6r5OUVen6fQ1CMCDzQF-rcuif9IQJT6uyGeuANe~5N0cAoDNWd~FPh92R~mRpC2vXWCu6YWiGVI3fZqgPn6DQlEU0~M-wfZOPLGA93q5pw7C6tKFgohFjGD6Z76JOIY7qiG8jCHPQd0wBXkjFWXTWM4O4DgHqiXT~i4gYnOrlmdoHnFkKO4HokVSvlwD~x0Vu08itC55uxqU~axiw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA"}])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-three-pictures-in-arow"]],decls:3,vars:3,consts:[[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3"],["class","col mb-3",4,"ngFor","ngForOf"],[1,"col","mb-3"],[1,"card","h-100"],[1,"card-img-top","h-100",3,"src","alt"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,aE,3,6,"div",1),h.ALo(2,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,r.pictures$)))},directives:[rr],pipes:[ka],encapsulation:2,changeDetection:0}),n})(),uE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home-page"]],decls:16,vars:0,consts:[[1,"container","mt-3","mb-3"],[1,"container"],[1,"row","justify-content-md-center"],[1,"col-md-auto"],[1,"container","mt-5"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"lib-today-date"),h.qZA(),h.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),h._uU(6,"Get a clear view of the day ahead"),h.qZA(),h.TgZ(7,"div",2)(8,"div",3)(9,"p"),h._uU(10,"All your tasks that are due today will show up here."),h.qZA(),h.TgZ(11,"div",2)(12,"div",3),h._UZ(13,"lib-home-page-add-task"),h.qZA()()()()()()(),h.TgZ(14,"div",4),h._UZ(15,"lib-three-pictures-in-arow"),h.qZA())},directives:[a_,sE,u_],encapsulation:2,changeDetection:0}),n})(),lE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir]]}),n})(),cE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir]]}),n})(),dE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,ma]]}),n})(),hE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,ma.forChild([{path:"",component:uE}]),lE,cE,dE]]}),n})();const fE=new h.OlP("GETS_ALL_TASK_DTO"),pE=new h.OlP("REMOVES_TASK_DTO"),oo=new h.OlP("SETS_TASK_DTO");class SC{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const gE={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Un="undefined"!=typeof window&&window||{};var ao=(()=>{return(n=ao||(ao={})).isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5",ao;var n})();let Ui;function mg(){if(void 0===Un.document)return"bs4";const n=Un.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Un.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=Un.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(Un.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(Un.document.head.removeChild(n),"bs4"):(Un.document.head.removeChild(n),"bs5")}function zu(){return void 0===Un||(void 0===Un.__theme?(Ui||(Ui=mg()),"bs3"===Ui):"bs3"===Un.__theme)}function c_(){return!zu()&&(Ui||(Ui=mg()),"bs4"===Ui)}function Wu(){return{isBs3:zu(),isBs4:c_(),isBs5:!zu()&&!c_()&&(Ui||(Ui=mg()),"bs5"===Ui)}}"undefined"==typeof console||console;let h_,LC=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{h_="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){h_=!1}let f_=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Ir(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!h_)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bE=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function DE(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function $M(n){try{return n.frameElement}catch(e){return null}}(function WM(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===UC(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=UC(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function qM(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function zM(n){return!function VC(n){return function HM(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function CE(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function p_(n){return function GM(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||BC(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(f_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BC(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function UC(n){if(!BC(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function jC(n){return null!=n&&"false"!=`${n}`}class KM{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Mo.q)(1)).subscribe(e)}}let ZM=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new KM(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bE),h.LFG(h.R0b),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ku=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=jC(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=jC(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(ZM),h.Y36(re))},n.\u0275dir=h.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[h.TTD]}),n})(),_g=(()=>{class n{static forRoot(){return{ngModule:n,providers:[LC,f_,bE]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ir]]}),n})();var IE=k(6451),TE=k(1144);const g_=["addListener","removeListener"],AE=["addEventListener","removeEventListener"],m_=["on","off"];function vg(n,e,t,r){if((0,hi.m)(t)&&(r=t,t=void 0),r)return vg(n,e,t).pipe(kl(r));const[i,u]=function y_(n){return(0,hi.m)(n.addEventListener)&&(0,hi.m)(n.removeEventListener)}(n)?AE.map(c=>p=>n[c](e,p,t)):function SE(n){return(0,hi.m)(n.addListener)&&(0,hi.m)(n.removeListener)}(n)?g_.map(Ya(n,e)):function $C(n){return(0,hi.m)(n.on)&&(0,hi.m)(n.off)}(n)?m_.map(Ya(n,e)):[];if(!i&&(0,TE.z)(n))return(0,Dn.z)(c=>vg(c,e,t))((0,So.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Fr.y(c=>{const p=(...y)=>c.next(1<y.length?y:y[0]);return i(p),()=>u(p)})}function Ya(n,e){return t=>r=>n[t](e,r)}var HC=k(4408);const Ad={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Ad;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new oa.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Ad;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ad;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var qC=k(7565);const Sd=new class mf extends qC.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class GC extends HC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ad.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Ad.cancelAnimationFrame(t),e._scheduled=void 0)}});var Qa=(()=>{return(n=Qa||(Qa={})).top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",Qa;var n})(),Ja=(()=>{return(n=Ja||(Ja={})).top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",Ja;var n})();function uo(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function __(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===uo(t,"position")?__(t):t:r?r.ownerDocument.documentElement:document.documentElement}function Eg(n){return null!==n.parentNode?Eg(n.parentNode):n}function Md(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function xE(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||__(n.firstElementChild)===n)}(c)?c:__(c);const p=Eg(n);return p.host?Md(p.host,e):Md(n,Eg(e).host)}function wg(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===uo(e,"transform");)e=e.parentElement;return e||document.documentElement}function v_(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function yf(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function RE(n){const e=n.body,t=n.documentElement;return{height:yf("Height",e,t),width:yf("Width",e,t)}}function xd(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function Rn(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function E_(n){const e=n.getBoundingClientRect();if(!(e&&Rn(e.top)&&Rn(e.left)&&Rn(e.bottom)&&Rn(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?RE(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||Rn(e.right)&&Rn(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||Rn(e.bottom)&&Rn(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,p=n.offsetHeight-u;if(c||p){const y=uo(n);c-=v_(y,"x"),p-=v_(y,"y"),t.width-=c,t.height-=p}return xd(t)}function w_(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function bg(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=uo(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:bg(w_(n))}function b_(n,e,t=!1){var r,i,u,c,p,y;const b="HTML"===e.nodeName,S=E_(n),M=E_(e),B=(bg(n),uo(e)),G=parseFloat(B.borderTopWidth),ne=parseFloat(B.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const we=xd({top:(null!==(u=S.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(p=S.left)&&void 0!==p?p:0)-(null!==(y=M.left)&&void 0!==y?y:0)-ne,width:S.width,height:S.height});if(we.marginTop=0,we.marginLeft=0,b){const Ze=parseFloat(B.marginTop),Le=parseFloat(B.marginLeft);Rn(we.top)&&(we.top-=G-Ze),Rn(we.bottom)&&(we.bottom-=G-Ze),Rn(we.left)&&(we.left-=ne-Le),Rn(we.right)&&(we.right-=ne-Le),we.marginTop=Ze,we.marginLeft=Le}return we}function NE(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function OE(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===uo(n,"position")||OE(w_(n)))}function D_(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?wg(n):Md(n,e);if("viewport"===r)u=function Is(n,e=!1){const t=n.ownerDocument.documentElement,r=b_(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:NE(t),p=e?0:NE(t,"left");return xd({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:p-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let p;"scrollParent"===r?(p=bg(w_(e)),"BODY"===p.nodeName&&(p=n.ownerDocument.documentElement)):p="window"===r?n.ownerDocument.documentElement:r;const y=b_(p,c,i);if(y&&"HTML"===p.nodeName&&!OE(c)){const{height:b,width:S}=RE(n.ownerDocument);Rn(u.top)&&Rn(y.top)&&Rn(y.marginTop)&&(u.top+=y.top-y.marginTop),Rn(u.top)&&(u.bottom=Number(b)+Number(y.top)),Rn(u.left)&&Rn(y.left)&&Rn(y.marginLeft)&&(u.left+=y.left-y.marginLeft),Rn(u.top)&&(u.right=Number(S)+Number(y.left))}else y&&(u=y)}return Rn(u.left)&&(u.left+=t),Rn(u.top)&&(u.top+=t),Rn(u.right)&&(u.right-=t),Rn(u.bottom)&&(u.bottom-=t),u}function QM({width:n,height:e}){return n*e}function zC(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var p,y,b,S,M,F,B,G,ne,we,Ze,Le;if(-1===n.indexOf("auto"))return n;const Ke=D_(t,r,c,u),ze={top:{width:null!==(p=null==Ke?void 0:Ke.width)&&void 0!==p?p:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==Ke?void 0:Ke.top)&&void 0!==b?b:0)},right:{width:(null!==(S=null==Ke?void 0:Ke.right)&&void 0!==S?S:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==Ke?void 0:Ke.height)&&void 0!==F?F:0},bottom:{width:null!==(B=null==Ke?void 0:Ke.width)&&void 0!==B?B:0,height:(null!==(G=null==Ke?void 0:Ke.bottom)&&void 0!==G?G:0)-(null!==(ne=null==e?void 0:e.bottom)&&void 0!==ne?ne:0)},left:{width:(null!==(we=e.left)&&void 0!==we?we:0)-(null!==(Ze=null==Ke?void 0:Ke.left)&&void 0!==Ze?Ze:0),height:null!==(Le=null==Ke?void 0:Ke.height)&&void 0!==Le?Le:0}},_t=Object.keys(ze).map(_n=>Object.assign(Object.assign({position:_n},ze[_n]),{area:QM(ze[_n])})).sort((_n,Zt)=>Zt.area-_n.area);let ct=_t.filter(({width:_n,height:Zt})=>_n>=t.clientWidth&&Zt>=t.clientHeight);ct=ct.filter(({position:_n})=>i.some(Zt=>Zt===_n));const Jt=ct.length>0?ct[0].position:_t[0].position,wn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${Wu().isBs5?Ja[Jt]:Jt}`),Jt+(wn?`-${wn}`:"")}const Rd=(n,e=0)=>n?parseFloat(n):e;function C_(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=Rd(null==t?void 0:t.marginTop)+Rd(null==t?void 0:t.marginBottom),i=Rd(null==t?void 0:t.marginLeft)+Rd(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function PE(n,e,t){return b_(e,t?wg(n):Md(n,e),t)}function I_(n,e,t){var r,i,u;const c=t.split(" ")[0],p=C_(n),y={width:p.width,height:p.height},b=-1!==["right","left"].indexOf(c),S=b?"top":"left",M=b?"left":"top",F=b?"height":"width",B=b?"width":"height";return y[S]=(null!==(r=e[S])&&void 0!==r?r:0)+e[F]/2-p[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-p[B]:null!==(u=e[function JM(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function FE(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const LE={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function Dg(n,e){return!!Wu().isBs5&&LE[e].includes(n)}function BE(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function YM(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function UE(n){var e,t,r,i,u,c;let p=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),S=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),B=b?"left":"top",G=b?"bottom":"right",ne=C_(y)[S],we=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-ne<(null!==(t=p[F])&&void 0!==t?t:0)&&(p[F]-=(null!==(r=p[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-ne)),Number(n.offsets.host[F])+Number(ne)>(null!==(u=p[G])&&void 0!==u?u:0)&&(p[F]+=Number(n.offsets.host[F])+Number(ne)-Number(p[G])),p=xd(p);const Ze=uo(n.instance.target),Le=parseFloat(Ze[`margin${M}`])||0,Ke=parseFloat(Ze[`border${M}Width`])||0;let ze;if(we){const ct=parseFloat(Ze.borderRadius)||0,Jt=Number(Le+Ke+ct);ze=F===we?Number(n.offsets.host[F])+Jt:Number(n.offsets.host[F])+Number(n.offsets.host[S]-Jt)}else ze=Number(n.offsets.host[F])+Number(n.offsets.host[S]/2-ne/2);let _t=ze-(null!==(c=p[F])&&void 0!==c?c:0)-Le-Ke;return _t=Math.max(Math.min(p[S]-(ne+5),_t),0),n.offsets.arrow={[F]:Math.round(_t),[B]:""},n.instance.arrow=y,n}function jE(n){if(n.offsets.target=xd(n.offsets.target),!FE(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),I_(n.instance.target,n.offsets.host,n.placement)),n;const e=D_(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const p=zC("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,p];return y.forEach((b,S)=>{var M,F,B,G,ne,we,Ze,Le,Ke,ze,_t,ct,Jt,wn,_n,Zt;if(t!==b||y.length===S+1)return;t=n.placement.split(" ")[0];const bn="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(B=n.offsets.target.left)&&void 0!==B?B:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(ne=n.offsets.target.bottom)&&void 0!==ne?ne:0)>Math.floor(null!==(we=n.offsets.host.top)&&void 0!==we?we:0)||"bottom"===t&&Math.floor(null!==(Ze=n.offsets.target.top)&&void 0!==Ze?Ze:0)<Math.floor(null!==(Le=n.offsets.host.bottom)&&void 0!==Le?Le:0),Os=Math.floor(null!==(Ke=n.offsets.target.left)&&void 0!==Ke?Ke:0)<Math.floor(null!==(ze=e.left)&&void 0!==ze?ze:0),fl=Math.floor(null!==(_t=n.offsets.target.right)&&void 0!==_t?_t:0)>Math.floor(null!==(ct=e.right)&&void 0!==ct?ct:0),G0=Math.floor(null!==(Jt=n.offsets.target.top)&&void 0!==Jt?Jt:0)<Math.floor(null!==(wn=e.top)&&void 0!==wn?wn:0),q0=Math.floor(null!==(_n=n.offsets.target.bottom)&&void 0!==_n?_n:0)>Math.floor(null!==(Zt=e.bottom)&&void 0!==Zt?Zt:0),st="left"===t&&Os||"right"===t&&fl||"top"===t&&G0||"bottom"===t&&q0,mt=-1!==["top","bottom"].indexOf(t),At=mt&&"left"===r&&Os||mt&&"right"===r&&fl||!mt&&"left"===r&&G0||!mt&&"right"===r&&q0;(bn||st||At)&&((bn||st)&&(t=y[S+1]),At&&(r=function WC(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),I_(n.instance.target,n.offsets.host,n.placement)))}),n}function _a(n){var e;if(!FE(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const p=D_(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(S){var M,F,B,G;let ne=n.offsets.target[S];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)<(null!==(F=p[S])&&void 0!==F?F:0)&&(ne=Math.max(null!==(B=n.offsets.target[S])&&void 0!==B?B:0,null!==(G=p[S])&&void 0!==G?G:0)),{[S]:ne}},secondary(S){var M,F,B,G;const ne="right"===S,we=ne?"left":"top";let Le=n.offsets.target[we];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)>(null!==(F=p[S])&&void 0!==F?F:0)&&(Le=Math.min(null!==(B=n.offsets.target[we])&&void 0!==B?B:0,(null!==(G=p[S])&&void 0!==G?G:0)-n.offsets.target[ne?"width":"height"])),{[we]:Le}}};return["left","right","top","bottom"].forEach(S=>{const M=-1!==["left","top","start"].indexOf(S)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(S))}),n}function T_(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,p=-1!==["bottom","top"].indexOf(r),y=p?"left":"top",b=p?"width":"height",S={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?S.start[y]:S.end[y]})}return n}const QC=new class YC{position(e,t){return this.offset(e,t)}offset(e,t){return PE(t,e)}positionElements(e,t,r,i,u){const c=[jE,T_,_a,UE],y=function ZC(n,e,t,r){if(!n||!e)return;const i=PE(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const p=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return p&&(c=p[1]+(p[2]?` ${p[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=zC(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:I_(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,Qa[r],u);if(y)return c.reduce((b,S)=>S(b),y)}};function XM(n,e,t,r,i,u){const c=QC.positionElements(n,e,t,r,i);if(!c)return;const p=function kE(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);BE(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${p.left}px, ${p.top}px, 0px)`},u),c.instance.arrow&&BE(c.instance.arrow,c.offsets.arrow,u),function KC(n,e){const t=n.instance.target;let r=t.className;const i=Wu().isBs5?Ja[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function VE(n){return Wu().isBs5?Dg(n,"end")?"ms-2":Dg(n,"start")?"me-2":Dg(n,"top")?"mb-2":Dg(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let _f=(()=>{class n{constructor(t,r,i){this.update$$=new sr.x,this.positionElements=new Map,this.isDisabled=!1,Ir(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,IE.T)(vg(window,"scroll",{passive:!0}),vg(window,"resize",{passive:!0}),gt(0,Sd),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{XM(Cg(u.target),Cg(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(Cg(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(Cg(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(h.FYo),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cg(n){return"string"==typeof n?document.querySelector(n):n instanceof h.SBq?n.nativeElement:null!=n?n:null}class vf{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class A_{constructor(e,t,r,i,u,c,p,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=p,this._posService=y,this.onBeforeShow=new h.vpe,this.onShown=new h.vpe,this.onBeforeHide=new h.vpe,this.onHidden=new h.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=h.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof h.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,p;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(p=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===p||p.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function MC(n,e){const t=function mE(n,e=gE){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new SC(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(p=>i.push(p())),u.length=0};return t.forEach(p=>{const y=p.open===p.close,b=y?e.toggle:e.show;if(!y&&p.close&&e.hide){const S=n.listen(r,p.close,e.hide);u.push(()=>S)}b&&i.push(n.listen(r,p.open,()=>b(c)))}),()=>{i.forEach(p=>p())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function xC(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function yE(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new vf([]);if(e instanceof h.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new vf([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new vf([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=h.zs3.create({providers:this._providers,parent:this._injector}),p=u.create(c);return Object.assign(p.instance,r),this._applicationRef.attachView(p.hostView),new vf([[p.location.nativeElement]],p.hostView,p)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new vf([i])}}let Ef=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new A_(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(h.zs3),h.LFG(_f),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JC=["*"];let wf=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Nd={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},S_=new h.OlP("override-default-config");let nx=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,zu()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,zu()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(HE),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},!1,h.Jf7)("keydown.esc",function(u){return r.onEsc(u)},!1,h.Jf7),2&t&&h.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:JC,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0)(1,"div",1),h.Hsn(2),h.qZA()()),2&t&&h.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[Ku],encapsulation:2}),n})(),XC=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),zu()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class d_{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=Un),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function yg(){const n=Wu(),e=Object.keys(n).find(t=>n[t]);return ao[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),GE=1,Tg=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new h.vpe,this.onShown=new h.vpe,this.onHide=new h.vpe,this.onHidden=new h.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},Nd,i):Nd}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||GE++;return this.config=this.modalDefaultOption?Object.assign({},Nd,this.modalDefaultOption,r):Object.assign({},Nd,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(XC).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const p of this.config.providers)i.provide(p);const u=new wf,c=i.provide({provide:HE,useValue:this.config}).provide({provide:wf,useValue:u}).attach(nx).to("body");return u.hide=()=>{var p;return null===(p=c.instance)||void 0===p?void 0:p.hide()},u.setClass=p=>{c.instance&&(c.instance.config.class=p)},u.onHidden=new h.vpe,u.onHide=new h.vpe,this.copyEvent(i.onBeforeHide,u.onHide),this.copyEvent(i.onHidden,u.onHidden),c.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),u.content=i.getInnerComponent(),u.id=null===(r=c.instance.config)||void 0===r?void 0:r.id),u}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(u=>{var c;return(null===(c=u.instance)||void 0===c?void 0:c.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var u;return(null===(u=i.instance)||void 0===u?void 0:u.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,u)=>{i.instance&&(i.instance.level=u+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(Ef),h.LFG(S_,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();_g.forRoot();let Ag=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Tg,Ef,_f]}}static forChild(){return{ngModule:n,providers:[Tg,Ef,_f]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[_g]]}),n})();class Sg{}const Yu="*";function Od(n,e=null){return{type:2,steps:n,options:e}}function Mg(n){return{type:6,styles:n,offset:null}}function M_(n){Promise.resolve(null).then(n)}class va{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){M_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class x_{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?M_(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const aI=function(n){return{dropdown:n}},kd=["*"],YE=[Mg({height:0,overflow:"hidden"}),function zE(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",Mg({height:"*",overflow:"hidden"}))];let sc=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new h.vpe,this.isDisabledChange=new h.vpe,this.toggleClick=new h.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),lI=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(YE),this._subscription=t.isOpenChange.subscribe(p=>{this.isOpen=p;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!zu()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(sc),h.Y36(h.sBO),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Sg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:kd,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&(h.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),h.Q6J("ngClass",h.VKq(7,aI,"down"===r.direction)))},directives:[hs],encapsulation:2,changeDetection:0}),n})(),Vo=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xg=(()=>{class n{constructor(t,r,i,u,c,p,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=p,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(YE),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:sc,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!zu()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Qi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(lI).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){zu()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.s_b),h.Y36(Ef),h.Y36(sc),h.Y36(Vo),h.Y36(Sg))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&h.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&h.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[h._Bn([sc])]}),n})(),QE=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(sc),h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),JE=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(p=>{this.isOpen=p,p?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(p=>this.isDisabled=p||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(xg),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(sc))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u)}),2&t&&h.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),XE=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Ef,_f,sc]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ir]]}),n})();function ew(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",13)(1,"li",14)(2,"button",15),h.NdJ("click",function(){h.CHM(t),h.oxw();const i=h.MAs(12);return h.oxw().openModal(i)}),h._uU(3,"Delete Task"),h.qZA()()()}}function cI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",16)(1,"h4",17),h._uU(2,"Delete Task"),h.qZA(),h.TgZ(3,"button",18),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return null==i.modalRef?null:i.modalRef.hide()}),h.TgZ(4,"span",19),h._uU(5,"\xd7"),h.qZA()()(),h.TgZ(6,"div",20),h._uU(7),h.qZA(),h.TgZ(8,"div",21)(9,"p"),h._uU(10,"Do you want to confirm?"),h.qZA(),h.TgZ(11,"button",22),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).decline()}),h._uU(12,"Cancel"),h.qZA(),h.TgZ(13,"button",23),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw().confirm(i.id)}),h._uU(14,"Delete Task"),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.xp6(7),h.hij(" You tying delete: ",t.text," ")}}const dI=function(n){return{"bg-success":n}},hI=function(n){return{"text-decoration-line-through":n}};function fI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",3)(1,"div",4)(2,"input",5),h.NdJ("change",function(){const u=h.CHM(t).$implicit;return h.oxw().onCheckedCheckboxed(u)}),h.qZA(),h.TgZ(3,"p",6),h._uU(4),h.qZA()(),h.TgZ(5,"div",7)(6,"div",8)(7,"button",9),h._uU(8," ... "),h._UZ(9,"span",10),h.qZA(),h.YNc(10,ew,4,0,"ul",11),h.qZA()(),h.YNc(11,cI,15,1,"ng-template",null,12,h.W1O),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Q6J("ngClass",h.VKq(5,dI,!0===t.isChecked))("value",t.id)("checked",t.isChecked),h.xp6(1),h.Q6J("ngClass",h.VKq(7,hI,!0===t.isChecked)),h.xp6(1),h.hij(" ",t.text,"")}}function tw(n,e){if(1&n&&(h.TgZ(0,"li"),h._uU(1),h.ALo(2,"json"),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Oqu(h.lcZ(2,1,t))}}let pI=(()=>{class n{constructor(t,r,i,u){this._getsAllTaskDto=t,this._removesTaskDto=r,this._setsTaskDto=i,this.modalService=u,this.tasks$=this._getsAllTaskDto.getAll()}onDeleteTaskClicked(t){this._removesTaskDto.remove(t)}onCheckedCheckboxed(t){this._setsTaskDto.set(!1===t.isChecked?{id:t.id,isChecked:!0}:{id:t.id,isChecked:!1})}openModal(t){this.modalRef=this.modalService.show(t,{class:"modal-sm"})}confirm(t){var r;this.message="Confirmed!",this.onDeleteTaskClicked(t),null===(r=this.modalRef)||void 0===r||r.hide()}decline(){var t;this.message="Declined!",null===(t=this.modalRef)||void 0===t||t.hide()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fE),h.Y36(pE),h.Y36(oo),h.Y36(Tg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-show-all-tasks"]],decls:6,vars:6,consts:[[1,"list-group"],["class","list-group-item d-flex",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"list-group-item","d-flex"],[1,"p-2","bd-highlight"],["type","checkbox","aria-label","...",1,"form-check-input","me-1","rounded-circle",3,"ngClass","value","checked","change"],[1,"d-inline",3,"ngClass"],[1,"ms-auto","p-2","bd-highlight"],["dropdown","",1,"btn-group","ml"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-outline-secondary","border-0"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["template",""],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu"],["role","menuitem"],[1,"dropdown-item",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"ul",0),h.YNc(1,fI,13,9,"li",1),h.ALo(2,"async"),h.qZA(),h.TgZ(3,"ul"),h.YNc(4,tw,3,3,"li",2),h.ALo(5,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,2,r.tasks$)),h.xp6(3),h.Q6J("ngForOf",h.lcZ(5,4,r.tasks$)))},directives:[rr,hs,xg,JE,QE],pipes:[ka,Pa],encapsulation:2,changeDetection:0}),n})(),rw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),oc=(()=>{class n extends rw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Xa=new h.OlP("NgValueAccessor"),gI={provide:Xa,useExisting:(0,h.Gpc)(()=>N_),multi:!0},sw=new h.OlP("CompositionEventMode");let N_=(()=>{class n extends rw{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function iw(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(sw,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([gI]),h.qOj]}),n})();const $i=new h.OlP("NgValidators"),eu=new h.OlP("NgAsyncValidators");function dw(n){return null!=n}function hw(n){const e=(0,h.QGY)(n)?(0,Ln.D)(n):n;return(0,h.CqO)(e),e}function fw(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Df(n,e){return e.map(t=>t(n))}function pw(n){return n.map(e=>function Pd(n){return!n.validate}(e)?e:t=>e.validate(t))}function k_(n){return null!=n?function Fd(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return fw(Df(t,e))}}(pw(n)):null}function Cf(n){return null!=n?function gw(n){if(!n)return null;const e=n.filter(dw);return 0==e.length?null:function(t){return function nw(...n){const e=(0,Vn.jO)(n),{args:t,keys:r}=Ni(n),i=new Fr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,So.Xf)(t[S]).subscribe((0,qn.x)(u,F=>{M||(M=!0,b--),p[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?Ao(r,p):p),u.complete())}))}});return e?i.pipe(kl(e)):i}(Df(t,e).map(hw)).pipe((0,Bt.U)(fw))}}(pw(n)):null}function Bo(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ld(n){return n._rawValidators}function ni(n){return n._rawAsyncValidators}function tu(n){return n?Array.isArray(n)?n:[n]:[]}function ac(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ts(n,e){const t=tu(e);return tu(n).forEach(i=>{ac(t,i)||t.push(i)}),t}function Pg(n,e){return tu(e).filter(t=>!ac(n,t))}class uc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=k_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class As extends uc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yr extends uc{get formDirective(){return null}get path(){return null}}class lc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let cc=(()=>{class n extends lc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(As,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),dc=(()=>{class n extends lc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Vd(n,e){P_(n,e),e.valueAccessor.writeValue(n.value),function TI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Bg(n,e)})}(n,e),function AI(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function L_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Bg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function II(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Vg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),F_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Sf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P_(n,e){const t=Ld(n);null!==e.validator?n.setValidators(Bo(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ni(n);null!==e.asyncValidator?n.setAsyncValidators(Bo(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Sf(e._rawValidators,i),Sf(e._rawAsyncValidators,i)}function F_(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ld(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=ni(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Sf(e._rawValidators,r),Sf(e._rawAsyncValidators,r),t}function Bg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function U_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Mf="VALID",xf="INVALID",jd="PENDING",Rf="DISABLED";function j_(n){return(Nf(n)?n.validators:n)||null}function Dw(n){return Array.isArray(n)?k_(n):n||null}function jg(n,e){return(Nf(e)?e.asyncValidators:n)||null}function Cw(n){return Array.isArray(n)?Cf(n):n||null}function Nf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const $_=n=>n instanceof Hg,Of=n=>n instanceof $d;function $g(n){return $_(n)?n.value:n.getRawValue()}function Iw(n,e){const t=Of(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function NI(n,e){Of(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class hc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Dw(this._rawValidators),this._composedAsyncValidatorFn=Cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mf}get invalid(){return this.status===xf}get pending(){return this.status==jd}get disabled(){return this.status===Rf}get enabled(){return this.status!==Rf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Dw(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Cw(e)}addValidators(e){this.setValidators(Ts(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ts(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pg(e,this._rawAsyncValidators))}hasValidator(e){return ac(this._rawValidators,e)}hasAsyncValidator(e){return ac(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mf||this.status===jd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rf:Mf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jd,this._hasOwnPendingAsyncValidator=!0;const t=hw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function RI(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Of(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof H_)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Rf:this.errors?xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jd)?jd:this._anyControlsHaveStatus(xf)?xf:Mf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hg extends hc{constructor(e=null,t,r){super(j_(t),jg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class $d extends hc{constructor(e,t,r){super(j_(t),jg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NI(this,e),Object.keys(e).forEach(r=>{Iw(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=$g(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class H_ extends hc{constructor(e,t,r){super(j_(t),jg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){NI(this,e),e.forEach((r,i)=>{Iw(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>$g(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Wg=new h.OlP("NgModelWithFormControlWarning"),Pw={provide:yr,useExisting:(0,h.Gpc)(()=>kf)};let kf=(()=>{class n extends yr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(F_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Vd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Vg(t.control||null,t,!1),U_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function bw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Vg(r||null,t),$_(i)&&(Vd(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function SI(n,e){P_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ux(n,e){return F_(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){P_(this.form,this),this._oldForm&&F_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($i,10),h.Y36(eu,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Pw]),h.qOj,h.TTD]}),n})();const dx={provide:As,useExisting:(0,h.Gpc)(()=>J_)};let J_=(()=>{class n extends As{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ug(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===N_?t=u:function Bd(n){return Object.getPrototypeOf(n.constructor)===oc}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function B_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Lg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(yr,13),h.Y36($i,10),h.Y36(eu,10),h.Y36(Xa,10),h.Y36(Wg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([dx]),h.qOj,h.TTD]}),n})(),jI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zg]]}),n})(),HI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[jI]}),n})();const Ww=new h.OlP("ADDS_TASK_DTO"),Kw=function(){return["/all-tasks"]};let Zw=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this.router=r,this.formTask=new $d({text:new Hg})}onAddtaskClicked(t){var r;this._addsTaskDto.add({text:null===(r=this.formTask.get("text"))||void 0===r?void 0:r.value,isChecked:!1}),this.formTask.reset(),this.router.navigate(["all-tasks"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ww),h.Y36(yi))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-add-task-form"]],decls:7,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["formControlName","text","rows","3",1,"form-control"],["type","submit",1,"btn","btn-secondary","m-1",3,"disabled"],["type","button",1,"btn","btn-outline-secondary","m-1",3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"form",0),h.NdJ("ngSubmit",function(){return r.onAddtaskClicked(r.formTask)}),h.TgZ(1,"div",1),h._UZ(2,"textarea",2),h.qZA(),h.TgZ(3,"button",3),h._uU(4,"Add task"),h.qZA(),h.TgZ(5,"button",4),h._uU(6,"Cancel"),h.qZA()()),2&t&&(h.Q6J("formGroup",r.formTask),h.xp6(3),h.Q6J("disabled",r.formTask.value.text<=0),h.xp6(2),h.Q6J("routerLink",h.DdM(3,Kw)))},directives:[qg,dc,kf,N_,cc,J_,gf],encapsulation:2,changeDetection:0}),n})(),av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-task-form-page"]],decls:6,vars:0,consts:[[1,"container","mt-3","mb-3"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"lib-today-date"),h.qZA(),h.TgZ(2,"div",0),h._UZ(3,"lib-show-all-tasks"),h.qZA(),h.TgZ(4,"div",0),h._UZ(5,"lib-add-task-form"),h.qZA())},directives:[a_,pI,Zw],encapsulation:2,changeDetection:0}),n})(),Jg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,HI,ma]]}),n})();var Yw=k(4986),jr=k(5813);function Xg(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,qn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Jw(n,e){return n===e}var nt,co=k(2011),Xw=(k(4087),k(3942)),ve=k(5861),pc=k(9681),em=k(4859),el=k(1877),Kt=k(2090),WI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nu={},uv=uv||{},Rt=WI||self;function tm(){}function lv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Pf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cv="closure_uid_"+(1e9*Math.random()>>>0),ZI=0;function YI(n,e,t){return n.call.apply(n.bind,arguments)}function QI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function $r(n,e,t){return($r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YI:QI).apply(null,arguments)}function Ff(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function ru(){this.s=this.s,this.o=this.o}var tb={};ru.prototype.s=!1,ru.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function KI(n){return Object.prototype.hasOwnProperty.call(n,cv)&&n[cv]||(n[cv]=++ZI)}(this);delete tb[n]}},ru.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},hv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function fv(n){return Array.prototype.concat.apply([],arguments)}function nm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ba(n){return/^[\s\xa0]*$/.test(n)}var is,rb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hi(n,e){return-1!=n.indexOf(e)}function tl(n,e){return n<e?-1:n>e?1:0}e:{var rm=Rt.navigator;if(rm){var JI=rm.userAgent;if(JI){is=JI;break e}}is=""}function im(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pv(n){const e={};for(const t in n)e[t]=n[t];return e}var XI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<XI.length;u++)t=XI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gv(n){return gv[" "](n),n}gv[" "]=tm;var Vf,n,tT=Hi(is,"Opera"),iu=Hi(is,"Trident")||Hi(is,"MSIE"),ib=Hi(is,"Edge"),Gd=ib||iu,Lf=Hi(is,"Gecko")&&!(Hi(is.toLowerCase(),"webkit")&&!Hi(is,"Edge"))&&!(Hi(is,"Trident")||Hi(is,"MSIE"))&&!Hi(is,"Edge"),Jn=Hi(is.toLowerCase(),"webkit")&&!Hi(is,"Edge");function nT(){var n=Rt.document;return n?n.documentMode:void 0}e:{var mv="",yv=(n=is,Lf?/rv:([^\);]+)(\)|;)/.exec(n):ib?/Edge\/([\d\.]+)/.exec(n):iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Jn?/WebKit\/(\S+)/.exec(n):tT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(yv&&(mv=yv?yv[1]:""),iu){var sm=nT();if(null!=sm&&sm>parseFloat(mv)){Vf=String(sm);break e}}Vf=mv}var sb={};var rT=Rt.document&&iu&&(nT()||parseInt(Vf,10))||void 0,iT=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",tm,e),Rt.removeEventListener("test",tm,e)}catch(t){}return n}();function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Bf(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lf){e:{try{gv(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bf.Z.h.call(this)}}_r.prototype.h=function(){this.defaultPrevented=!0},Hr(Bf,_r);var sT={2:"touch",3:"pen",4:"mouse"};Bf.prototype.h=function(){Bf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Uf="closure_listenable_"+(1e6*Math.random()|0),am=0;function ub(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++am,this.ca=this.fa=!1}function jf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $f(n){this.src=n,this.g={},this.h=0}function _v(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=dv(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gc(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}$f.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=gc(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ub(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var mc="closure_lm_"+(1e6*Math.random()|0),vv={};function lb(n,e,t,r,i){if(r&&r.once)return Ev(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)lb(n,e[u],t,r,i);return null}return t=fb(t),n&&n[Uf]?n.N(e,t,Pf(r)?!!r.capture:!!r,i):cb(n,e,t,!1,r,i)}function cb(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Pf(i)?!!i.capture:!!i,p=Cv(n);if(p||(n[mc]=p=new $f(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function db(){var e=oT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)iT||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Dv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ev(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ev(n,e[u],t,r,i);return null}return t=fb(t),n&&n[Uf]?n.O(e,t,Pf(r)?!!r.capture:!!r,i):cb(n,e,t,!0,r,i)}function wv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)wv(n,e[u],t,r,i);else r=Pf(r)?!!r.capture:!!r,t=fb(t),n&&n[Uf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gc(u=n.g[e],t,r,i))&&(jf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Cv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gc(e,t,r,i)),(t=-1<n?e[n]:null)&&bv(t))}function bv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Uf])_v(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Dv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Cv(e))?(_v(t,n),0==t.h&&(t.src=null,e[mc]=null)):jf(n)}}}function Dv(n){return n in vv?vv[n]:vv[n]="on"+n}function oT(n,e){if(n.ca)n=!0;else{e=new Bf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&bv(n),n=t.call(r,e)}return n}function Cv(n){return(n=n[mc])instanceof $f?n:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function fb(n){return"function"==typeof n?n:(n[hb]||(n[hb]=function(e){return n.handleEvent(e)}),n[hb])}function ri(){ru.call(this),this.i=new $f(this),this.P=this,this.I=null}function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var i=e;bt(e=new _r(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Hf(c,r,!0,e)&&i}if(i=Hf(c=e.g=n,r,!0,e)&&i,i=Hf(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Hf(c=e.g=t[u],r,!1,e)&&i}function Hf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&_v(n.i,c),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}Hr(ri,ru),ri.prototype[Uf]=!0,ri.prototype.removeEventListener=function(n,e,t,r){wv(this,n,e,t,r)},ri.prototype.M=function(){if(ri.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jf(t[r]);delete n.g[e],n.h--}}this.I=null},ri.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qd=Rt.JSON.stringify;function aT(){var n=Mv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Av,Iv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Gf,n=>n.reset());class Gf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lT(n){Rt.setTimeout(()=>{throw n},0)}function Tv(n,e){Av||function cT(){var n=Rt.Promise.resolve(void 0);Av=function(){n.then(dT)}}(),Sv||(Av(),Sv=!0),Mv.add(n,e)}var Sv=!1,Mv=new class uT{constructor(){this.h=this.g=null}add(e,t){const r=Iv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function dT(){for(var n;n=aT();){try{n.h.call(n.g)}catch(t){lT(t)}var e=Iv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sv=!1}function um(n,e){ri.call(this),this.h=n||1,this.g=e||Rt,this.j=$r(this.kb,this),this.l=Date.now()}function nl(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function xv(n,e,t){if("function"==typeof n)t&&(n=$r(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$r(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function Rv(n){n.g=xv(()=>{n.g=null,n.i&&(n.i=!1,Rv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(um,ri),(nt=um.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_i(this,"tick"),this.da&&(nl(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){um.Z.M.call(this),nl(this),delete this.g};class hT extends ru{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rv(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zd(n){ru.call(this),this.h=n,this.g={}}Hr(zd,ru);var pb=[];function Nv(n,e,t,r){Array.isArray(t)||(t&&(pb[0]=t.toString()),t=pb);for(var i=0;i<t.length;i++){var u=lb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function gb(n){im(n.g,function(e,t){this.g.hasOwnProperty(t)&&bv(e)},n),n.g={}}function Wd(){this.g=!0}function yc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return qd(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}zd.prototype.M=function(){zd.Z.M.call(this),gb(this)},zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wd.prototype.Aa=function(){this.g=!1},Wd.prototype.info=function(){};var _c={},lm=null;function cm(){return lm=lm||new ri}function Ov(n){_r.call(this,_c.Ma,n)}function qf(n){const e=cm();_i(e,new Ov(e,n))}function yb(n,e){_r.call(this,_c.STAT_EVENT,n),this.stat=e}function Gi(n){const e=cm();_i(e,new yb(e,n))}function _b(n,e){_r.call(this,_c.Na,n),this.size=e}function zf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}_c.Ma="serverreachability",Hr(Ov,_r),_c.STAT_EVENT="statevent",Hr(yb,_r),_c.Na="timingevent",Hr(_b,_r);var dm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kv(){}function Fv(){}kv.prototype.h=null;var Vv,Wf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lv(){_r.call(this,"d")}function hm(){_r.call(this,"c")}function fm(){}function Kf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zd(this),this.P=Bv,this.W=new um(n=Gd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pm}function pm(){this.i=null,this.g="",this.h=!1}Hr(Lv,_r),Hr(hm,_r),Hr(fm,kv),fm.prototype.g=function(){return new XMLHttpRequest},fm.prototype.i=function(){return{}},Vv=new fm;var Bv=45e3,gm={},Kd={};function Uv(n,e,t){n.K=1,n.v=bc(su(e)),n.s=t,n.U=!0,Eb(n,null)}function Eb(n,e){n.F=Date.now(),Zf(n),n.A=su(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wT(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pm,n.g=jb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hT($r(n.Ia,n,n.g),n.O)),Nv(n.V,n.g,"readystatechange",n.gb),e=n.H?pv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),qf(1),function fT(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function wb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bb(n,t),i==Kd){4==e&&(n.o=4,Gi(14),r=!1),yc(n.j,n.m,null,"[Incomplete Response]");break}if(i==gm){n.o=4,Gi(15),yc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}yc(n.j,n.m,i,null),$v(n,i)}mm(n)&&i!=Kd&&i!=gm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),rp(e),e.L=!0,Gi(11))):(yc(n.j,n.m,t,"[Invalid Chunked Response]"),Yd(n),Zd(n))}function bb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Kd:(t=Number(e.substring(t,r)),isNaN(t)?gm:(r+=1)+t>e.length?Kd:(e=e.substr(r,t),n.C=r+t,e))}function Zf(n){n.Y=Date.now()+n.P,jv(n,n.P)}function jv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zf($r(n.eb,n),e)}function ym(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Zd(n){0==n.l.G||n.I||Mm(n.l,n)}function Yd(n){ym(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,nl(n.W),gb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $v(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||bm(t.i,n)))if(t.I=n.N,!n.J&&bm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=zf($r(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ip(t),Ic(t)}Vb(t),Gi(18)}if(1>=wm(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Tc(t,11)}else if((n.J||t.g==n)&&ip(t),!ba(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(Hi(G,"spdy")||Hi(G,"quic")||Hi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Dm(u,u.h),u.h=null))}if(r.D){const ne=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,In(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Ub(r,r.H?r.la:null,r.W),c.J){Ib(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(ym(p),Zf(p)),r.g=c}else Lb(r);0<t.l.length&&np(t)}else"stop"!=b[0]&&"close"!=b[0]||Tc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Tc(t,7):rh(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}qf(4)}catch(b){}}function Hv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lv(n)||"string"==typeof n)hv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(lv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function _m(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(lv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function jo(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof jo)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vc(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ec(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ec(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ec(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Kf.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==ou(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const S=ou(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||Gd||this.g&&(this.h.h||this.g.ga()||Tm(this.g)))){this.I||4!=S||7==e||qf(8==e||0>=M?3:2),ym(this);var t=this.g.ba();this.N=t;t:if(mm(this)){var r=Tm(this.g);n="";var i=r.length,u=4==ou(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yd(this),Zd(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function mb(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ba(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Gi(12),Yd(this),Zd(this);break e}yc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$v(this,t)}this.U?(wb(this,S,c),Gd&&this.i&&3==S&&(Nv(this.V,this.W,"tick",this.fb),this.W.start())):(yc(this.j,this.m,c,null),$v(this,c)),4==S&&Yd(this),this.i&&!this.I&&(4==S?Mm(this.l,this):(this.i=!1,Zf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Gi(12)):(this.o=0,Gi(13)),Yd(this),Zd(this)}}}catch(S){}},nt.fb=function(){if(this.g){var n=ou(this.g),e=this.g.ga();this.C<e.length&&(ym(this),wb(this,n,e),this.i&&4!=n&&Zf(this))}},nt.cancel=function(){this.I=!0,Yd(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function pT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qf(3),Gi(17)),Yd(this),this.o=2,Zd(this)):jv(this,this.Y-n)},(nt=jo.prototype).R=function(){vc(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return vc(this),this.g.concat()},nt.get=function(n,e){return Ec(this.h,n)?this.h[n]:e},nt.set=function(n,e){Ec(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var mT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wc){this.g=void 0!==e?e:n.g,vm(this,n.j),this.s=n.s,Em(this,n.i),Yf(this,n.m),this.l=n.l,e=n.h;var t=new Jf;t.i=e.i,e.g&&(t.g=new jo(e.g),t.h=e.h),Gv(this,t),this.o=n.o}else n&&(t=String(n).match(mT))?(this.g=!!e,vm(this,t[1]||"",!0),this.s=Qd(t[2]||""),Em(this,t[3]||"",!0),Yf(this,t[4]),this.l=Qd(t[5]||"",!0),Gv(this,t[6]||"",!0),this.o=Qd(t[7]||"")):(this.g=!!e,this.h=new Jf(null,this.g))}function su(n){return new wc(n)}function vm(n,e,t){n.j=t?Qd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Em(n,e,t){n.i=t?Qd(e,!0):e}function Yf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gv(n,e,t){e instanceof Jf?(n.h=e,function bT(n,e){e&&!n.j&&(Ss(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zv(this,r),wT(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Jd(e,gx)),n.h=new Jf(e,n.g))}function In(n,e,t){n.h.set(e,t)}function bc(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_T),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _T(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jd(e,Cb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jd(e,Cb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jd(t,"/"==t.charAt(0)?vT:qv,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jd(t,ET)),n.join("")};var Cb=/[#\/\?@]/g,qv=/[#\?:]/g,vT=/[#\?]/g,gx=/[#\?@]/g,ET=/#/g;function Jf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ss(n){n.g||(n.g=new jo,n.h=0,n.i&&function Db(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zv(n,e){Ss(n),e=Cc(n,e),Ec(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ec((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vc(n)))}function Dc(n,e){return Ss(n),e=Cc(n,e),Ec(n.g.h,e)}function wT(n,e,t){zv(n,e),0<t.length&&(n.i=null,n.g.set(Cc(n,e),nm(t)),n.h+=t.length)}function Cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wv(n){this.l=n||yx,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Jf.prototype).add=function(n,e){Ss(this),this.i=null,n=Cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Ss(this),this.g.forEach(function(t,r){hv(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){Ss(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},nt.R=function(n){Ss(this);var e=[];if("string"==typeof n)Dc(this,n)&&(e=fv(e,this.g.get(Cc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fv(e,n[t])}return e},nt.set=function(n,e){return Ss(this),this.i=null,Dc(this,n=Cc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var yx=10;function Kv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wm(n){return n.h?1:n.g?n.g.size:0}function bm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Dm(n,e){n.g?n.g.add(e):n.h=e}function Ib(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Tb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nm(n.i)}function Zv(){}function DT(){this.g=new Zv}function CT(n,e,t){const r=t||"";try{Hv(n,function(i,u){let c=i;Pf(i)&&(c=qd(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Xf(n){this.l=n.$b||null,this.j=n.ib||!1}function rl(n,e){ri.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Im,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wv.prototype.cancel=function(){if(this.i=Tb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Zv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Zv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Hr(Xf,kv),Xf.prototype.g=function(){return new rl(this.l,this.j)},Xf.prototype.i=function(n){return function(){return n}}({}),Hr(rl,ri);var Im=0;function Yv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Xd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,eh(n)}function eh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=rl.prototype).open=function(n,e){if(this.readyState!=Im)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,eh(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xd(this)),this.readyState=Im},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,eh(this)),this.g&&(this.readyState=3,eh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xd(this):eh(this),3==this.readyState&&Yv(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,Xd(this))},nt.Ta=function(n){this.g&&(this.response=n,Xd(this))},nt.ha=function(){this.g&&Xd(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ab=Rt.JSON.parse;function ar(n){ri.call(this),this.headers=new jo,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sb,this.K=this.L=!1}Hr(ar,ri);var Sb="",Mb=/^https?$/i,xb=["POST","PUT"];function AT(n){return"content-type"==n.toLowerCase()}function Rb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,th(n),nh(n)}function th(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}function Nb(n){if(n.h&&void 0!==uv&&(!n.C[1]||4!=ou(n)||2!=n.ba()))if(n.v&&4==ou(n))xv(n.Fa,0,n);else if(_i(n,"readystatechange"),4==ou(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(mT)[1]||null;if(!i&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Mb.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var c=2<ou(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",th(n)}}finally{nh(n)}}}function nh(n,e){if(n.g){$o(n);const t=n.g,r=n.C[0]?tm:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function $o(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function ou(n){return n.g?n.g.readyState:0}function Tm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ep(n){let e="";return im(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function tp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ob(n){this.za=0,this.l=[],this.h=new Wd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tp("baseRetryDelayMs",5e3,n),this.$a=tp("retryDelaySeedMs",1e4,n),this.Ya=tp("forwardChannelMaxRetries",2,n),this.ra=tp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Wv(n&&n.concurrentRequestLimit),this.Ca=new DT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rh(n){if(kb(n),3==n.G){var e=n.V++,t=su(n.F);In(t,"SID",n.J),In(t,"RID",e),In(t,"TYPE","terminate"),ih(n,t),(e=new Kf(n,n.h,e,void 0)).K=2,e.v=bc(su(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=jb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Zf(e)}Bb(n)}function Ic(n){n.g&&(rp(n),n.g.cancel(),n.g=null)}function kb(n){Ic(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),ip(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Jv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&np(n)}function np(n){Kv(n.i)||n.m||(n.m=!0,Tv(n.Ha,n),n.C=0)}function Am(n,e){var t;t=e?e.m:n.V++;const r=su(n.F);In(r,"SID",n.J),In(r,"RID",t),In(r,"AID",n.U),ih(n,r),n.o&&n.s&&Qv(r,n.o,n.s),t=new Kf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Fb(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Dm(n.i,t),Uv(t,r,e)}function ih(n,e){n.j&&Hv({},function(t,r){In(e,r,t)})}function Fb(n,e,t){t=Math.min(n.l.length,t);var r=n.j?$r(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),p=!1;else try{CT(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Lb(n){n.g||n.u||(n.Y=1,Tv(n.Ga,n),n.A=0)}function Vb(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zf($r(n.Ga,n),xm(n,n.A)),n.A++,0))}function rp(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Sm(n){n.g=new Kf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=su(n.oa);In(e,"RID","rpc"),In(e,"SID",n.J),In(e,"CI",n.N?"0":"1"),In(e,"AID",n.U),ih(n,e),In(e,"TYPE","xmlhttp"),n.o&&n.s&&Qv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=bc(su(e)),t.s=null,t.U=!0,Eb(t,n)}function ip(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Mm(n,e){var t=null;if(n.g==e){ip(n),rp(n),n.g=null;var r=2}else{if(!bm(n.i,e))return;t=e.D,Ib(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_i(r=cm(),new _b(r,t,e,i)),np(n)}else Lb(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Pb(n,e){return!(wm(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zf($r(n.Ha,n,e),xm(n,n.C)),n.C++,0)))}(n,e)||2==r&&Vb(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Tc(n,5);break;case 4:Tc(n,10);break;case 3:Tc(n,6);break;default:Tc(n,2)}}function xm(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Tc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=$r(n.jb,n);t||(t=new wc("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||vm(t,"https"),bc(t)),function IT(n,e){const t=new Wd;if(Rt.Image){const r=new Image;r.onload=Ff(Cm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ff(Cm,t,r,"TestLoadImage: error",!1,e),r.onabort=Ff(Cm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ff(Cm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Gi(2);n.G=0,n.j&&n.j.va(e),Bb(n),kb(n)}function Bb(n){n.G=0,n.I=-1,n.j&&((0!=Tb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,nm(n.l),n.l.length=0),n.j.ua())}function Ub(n,e,t){let r=function Qf(n){return n instanceof wc?su(n):new wc(n,void 0)}(t);if(""!=r.i)e&&Em(r,e+"."+r.i),Yf(r,r.m);else{const i=Rt.location;r=function yT(n,e,t,r){var i=new wc(null,void 0);return n&&vm(i,n),e&&Em(i,e),t&&Yf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&im(n.aa,function(i,u){In(r,u,i)}),t=n.sa,(e=n.D)&&t&&In(r,e,t),In(r,"VER",n.ma),ih(n,r),r}function jb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new Xf({ib:!0}):n.qa)).L=n.H,e}function Xv(){}function sh(){if(iu&&!(10<=Number(rT)))throw Error("Environmental error: no available transport.")}function ss(n,e){ri.call(this),this.g=new Ob(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ba(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ba(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ac(this)}function $b(n){Lv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function e0(){hm.call(this),this.status=1}function Ac(n){this.g=n}(nt=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vv.g(),this.C=function Pv(n){return n.h||(n.h=n.i())}(this.u?this.u:Vv),this.g.onreadystatechange=$r(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Rb(this,u)}n=t||"";const i=new jo(this.headers);r&&Hv(r,function(u,c){i.set(c,u)}),r=function nb(n){e:{var e=AT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=dv(xb,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$o(this),0<this.B&&((this.K=function TT(n){return iu&&function ob(){return function eT(n){var e=sb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=rb(String(Vf)).split("."),t=rb("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=tl(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||tl(0==i[2].length,0==u[2].length)||tl(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$r(this.pa,this)):this.A=xv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Rb(this,u)}},nt.pa=function(){void 0!==uv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),nh(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nh(this,!0)),ar.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?Nb(this):this.cb())},nt.cb=function(){Nb(this)},nt.ba=function(){try{return 2<ou(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ab(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Ob.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Kf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=pv(u),bt(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fb(this,i,e),In(t=su(this.F),"RID",n),In(t,"CVER",22),this.D&&In(t,"X-HTTP-Session-Id",this.D),ih(this,t),this.o&&u&&Qv(t,this.o,u),Dm(this.i,i),this.Ra&&In(t,"TYPE","init"),this.ja?(In(t,"$req",e),In(t,"SID","null"),i.$=!0,Uv(i,t,null)):Uv(i,t,e),this.G=2}}else 3==this.G&&(n?Am(this,n):0==this.l.length||Kv(this.i)||Am(this))},nt.Ga=function(){if(this.u=null,Sm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zf($r(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Gi(10),Ic(this),Sm(this))},nt.ab=function(){null!=this.v&&(this.v=null,Ic(this),Vb(this),Gi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Gi(2)):(this.h.info("Failed to ping google.com"),Gi(1))},(nt=Xv.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},sh.prototype.g=function(n,e){return new ss(n,e)},Hr(ss,ri),ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Tv($r(n.hb,n,e))),Gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Ub(n,null,n.W),np(n)},ss.prototype.close=function(){rh(this.g)},ss.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Jv(this.g,e)}else this.v?((e={}).__data__=qd(n),Jv(this.g,e)):Jv(this.g,n)},ss.prototype.M=function(){this.g.j=null,delete this.j,rh(this.g),delete this.g,ss.Z.M.call(this)},Hr($b,Lv),Hr(e0,hm),Hr(Ac,Xv),Ac.prototype.xa=function(){_i(this.g,"a")},Ac.prototype.wa=function(n){_i(this.g,new $b(n))},Ac.prototype.va=function(n){_i(this.g,new e0(n))},Ac.prototype.ua=function(){_i(this.g,"b")},sh.prototype.createWebChannel=sh.prototype.g,ss.prototype.send=ss.prototype.u,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,dm.NO_ERROR=0,dm.TIMEOUT=8,dm.HTTP_ERROR=6,vb.COMPLETE="complete",Fv.EventType=Wf,Wf.OPEN="a",Wf.CLOSE="b",Wf.ERROR="c",Wf.MESSAGE="d",ri.prototype.listen=ri.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var ST=nu.createWebChannelTransport=function(){return new sh},Hb=nu.getStatEventTarget=function(){return cm()},Rm=nu.ErrorCode=dm,MT=nu.EventType=vb,Gb=nu.Event=_c,t0=nu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qi=nu.FetchXmlHttpFactory=Xf,au=nu.WebChannel=Fv,xT=nu.XhrIo=ar;const qb="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let Da="9.6.10";const il=new el.Yd("@firebase/firestore");function sp(){return il.logLevel}function Pe(n,...e){if(il.logLevel<=el.in.DEBUG){const t=e.map(ap);il.debug(`Firestore (${Da}): ${n}`,...t)}}function vr(n,...e){if(il.logLevel<=el.in.ERROR){const t=e.map(ap);il.error(`Firestore (${Da}): ${n}`,...t)}}function op(n,...e){if(il.logLevel<=el.in.WARN){const t=e.map(ap);il.warn(`Firestore (${Da}): ${n}`,...t)}}function ap(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function Mt(n,e){n||it()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Kt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class n0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Om{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class zb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class NT{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Gr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Gr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new n0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new vi(e)}}class r0{constructor(e,t,r){this.type="FirstParty",this.user=vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class s0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new r0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.p=t.token,new OT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Wb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}os.A=-1;class Kb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Wb(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Sc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zb(n){return n+"\0"}class ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ur.fromMillis(Date.now())}static fromDate(e){return ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new ur(0,0))}static max(){return new Ct(new ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Yb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function o0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class oh{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===oh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends oh{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const PT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends oh{construct(e,t,r){return new qr(e,t,r)}static isValidIdentifier(e){return PT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}class up{constructor(e){this.fields=e,e.sort(qr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const vx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=vx.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ah(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function Jb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function FT(n){const e=n.mapValue.fields.__previous_value__;return Jb(e)?FT(e):e}function km(n){const e=Mc(n.mapValue.fields.__local_write_time__.timestampValue);return new ur(e.seconds,e.nanos)}class Pm{constructor(e,t,r,i,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class ol{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ol("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}function al(n){return null==n}function xc(n){return 0===n&&1/n==-1/0}function a0(n){return"number"==typeof n&&Number.isInteger(n)&&!xc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Qt.fromString(e))}static fromName(e){return new je(Qt.fromString(e).popFirst(5))}static empty(){return new je(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Qt(e.slice()))}}const LT={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fm={nullValue:"NULL_VALUE"};function ul(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jb(n)?4:BT(n)?9:10:it()}function Ho(n,e){if(n===e)return!0;const t=ul(n);if(t!==ul(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return km(n).isEqual(km(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Mc(r.timestampValue),c=Mc(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ah(n.bytesValue).isEqual(ah(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return lr(r.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lr(r.integerValue)===lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=lr(r.doubleValue),c=lr(i.doubleValue);return u===c?xc(u)===xc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Sc(n.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Yb(u)!==Yb(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Ho(u[p],c[p])))return!1;return!0}(n,e);default:return it()}var i}function uh(n,e){return void 0!==(n.values||[]).find(t=>Ho(t,e))}function Rc(n,e){if(n===e)return 0;const t=ul(n),r=ul(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=lr(i.integerValue||i.doubleValue),p=lr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return u0(n.timestampValue,e.timestampValue);case 4:return u0(km(n),km(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=ah(i),p=ah(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Gt(c[y],p[y]);if(0!==b)return b}return Gt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Gt(lr(i.latitude),lr(u.latitude));return 0!==c?c:Gt(lr(i.longitude),lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Rc(c[y],p[y]);if(b)return b}return Gt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const M=Gt(p[S],b[S]);if(0!==M)return M;const F=Rc(c[p[S]],y[b[S]]);if(0!==F)return F}return Gt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function u0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Mc(n),r=Mc(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function lh(n){return lp(n)}function lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Mc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ah(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=lp(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${lp(r.fields[p])}`;return u+"}"}(n.mapValue):it();var e}function ch(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xb(n){return!!n&&"integerValue"in n}function Lm(n){return!!n&&"arrayValue"in n}function VT(n){return!!n&&"nullValue"in n}function eD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vm(n){return!!n&&"mapValue"in n}function cp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tD(n,e){return void 0===n?e:void 0===e||Rc(n,e)>0?n:e}function Bm(n,e){return void 0===n?e:void 0===e||Rc(n,e)<0?n:e}class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cp(t)}setAll(e){let t=qr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=cp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ei(cp(this.value))}}function ho(n){const e=[];return sl(n.fields,(t,r)=>{const i=new qr([t]);if(Vm(r)){const u=ho(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new up(e)}class Nn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Nn(e,0,Ct.min(),Ct.min(),Ei.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Ct.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Ct.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function l0(n){return n.fields.find(e=>2===e.kind)}function hh(n){return n.fields.filter(e=>2!==e.kind)}dh.UNKNOWN_ID=-1;class fh{constructor(e,t){this.fieldPath=e,this.kind=t}}class ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ph(0,Ca.min())}}function c0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new ur(t+1,0):new ur(t,r));return new Ca(i,je.empty(),e)}function UT(n){return new Ca(n.readTime,n.key,-1)}class Ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ca(Ct.min(),je.empty(),-1)}static max(){return new Ca(Ct.max(),je.empty(),-1)}}function nD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class jT{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function rD(n,e=null,t=[],r=[],i=null,u=null,c=null){return new jT(n,e,t,r,i,u,c)}function uu(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+lh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),al(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.P=t}return e.P}function dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!h0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ho(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!f0(n.startAt,e.startAt)&&f0(n.endAt,e.endAt)}function d0(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Um(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new $T(e,t,r):"array-contains"===t?new Ex(e,r):"in"===t?new oD(e,r):"not-in"===t?new aD(e,r):"array-contains-any"===t?new GT(e,r):new Wr(e,t,r)}static V(e,t,r){return"in"===t?new HT(e,r):new iD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Rc(t,this.value)):null!==t&&ul(this.value)===ul(t)&&this.v(Rc(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $T extends Wr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class HT extends Wr{constructor(e,t){super(e,"in",t),this.keys=sD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iD extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=sD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class Ex extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lm(t)&&uh(t.arrayValue,this.value)}}class oD extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uh(this.value.arrayValue,t)}}class aD extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uh(this.value.arrayValue,t)}}class GT extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uh(this.value.arrayValue,r))}}class ll{constructor(e,t){this.position=e,this.inclusive=t}}class Nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function h0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):Rc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function f0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ho(n.position[t],e.position[t]))return!1;return!0}class lu{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function p0(n,e,t,r,i,u,c,p){return new lu(n,e,t,r,i,u,c,p)}function Oc(n){return new lu(n)}function $m(n){return!al(n.limit)&&"F"===n.limitType}function Hm(n){return!al(n.limit)&&"L"===n.limitType}function uD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function lD(n){for(const e of n.filters)if(e.S())return e.field;return null}function Gm(n){return null!==n.collectionGroup}function gh(n){const e=qe(n);if(null===e.D){e.D=[];const t=lD(e),r=uD(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Nc(t)),e.D.push(new Nc(qr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Nc(qr.keyField(),u))}}}return e.D}function fo(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=rD(e.path,e.collectionGroup,gh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of gh(e))t.push(new Nc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ll(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ll(e.startAt.position,!e.startAt.inclusive):null;e.C=rD(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function cD(n,e,t){return new lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qm(n,e){return dp(fo(n),fo(e))&&n.limitType===e.limitType}function qT(n){return`${uu(fo(n))}|lt:${n.limitType}`}function dD(n){return`Query(target=${function Go(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${lh(r.value)}`;var r}).join(", ")}]`),al(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>lh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>lh(t)).join(",")),`Target(${e})`}(fo(n))}; limitType=${n.limitType})`}function hD(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=jm(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,gh(t),r)||t.endAt&&!function(i,u,c){const p=jm(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,gh(t),r)));var t,r}function zT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fD(n){return(e,t)=>{let r=!1;for(const i of gh(n)){const u=zm(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function zm(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),y=c.data.field(i);return null!==p&&null!==y?Rc(p,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function pD(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function gD(n){return{integerValue:""+n}}function g0(n,e){return a0(e)?gD(e):pD(n,e)}class Ia{constructor(){this._=void 0}}function mD(n,e,t){return n instanceof mh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof cu?Km(n,e):n instanceof Ta?WT(n,e):function(r,i){const u=Wm(r,i),c=KT(u)+KT(r.k);return Xb(u)&&Xb(r.k)?gD(c):pD(r.M,c)}(n,e)}function m0(n,e,t){return n instanceof cu?Km(n,e):n instanceof Ta?WT(n,e):t}function Wm(n,e){return n instanceof hp?Xb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class mh extends Ia{}class cu extends Ia{constructor(e){super(),this.elements=e}}function Km(n,e){const t=ZT(e);for(const r of n.elements)t.some(i=>Ho(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ta extends Ia{constructor(e){super(),this.elements=e}}function WT(n,e){let t=ZT(e);for(const r of n.elements)t=t.filter(i=>!Ho(i,r));return{arrayValue:{values:t}}}class hp extends Ia{constructor(e,t){super(),this.M=e,this.k=t}}function KT(n){return lr(n.integerValue||n.doubleValue)}function ZT(n){return Lm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yh{constructor(e,t){this.field=e,this.transform=t}}class QT{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fp{}function yD(n,e,t){n instanceof kc?function(r,i,u){const c=r.value.clone(),p=Qm(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof _h?function(r,i,u){if(!Zm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=Qm(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(_0(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ym(n,e,t){var i;n instanceof kc?function(r,i,u){if(!Zm(r.precondition,i))return;const c=r.value.clone(),p=vD(r.fieldTransforms,u,i);c.setAll(p),i.convertToFoundDocument(y0(i),c).setHasLocalMutations()}(n,e,t):n instanceof _h?function(r,i,u){if(!Zm(r.precondition,i))return;const c=vD(r.fieldTransforms,u,i),p=i.data;p.setAll(_0(r)),p.setAll(c),i.convertToFoundDocument(y0(i),p).setHasLocalMutations()}(n,e,t):Zm(n.precondition,i=e)&&i.convertToNoDocument(Ct.min())}function JT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=Wm(r.transform,i||null);null!=u&&(null==t&&(t=Ei.empty()),t.set(r.field,u))}return t||null}function _D(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sc(t,r,(i,u)=>function YT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cu&&r instanceof cu||t instanceof Ta&&r instanceof Ta?Sc(t.elements,r.elements,Ho):t instanceof hp&&r instanceof hp?Ho(t.k,r.k):t instanceof mh&&r instanceof mh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function y0(n){return n.isFoundDocument()?n.version:Ct.min()}class kc extends fp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class _h extends fp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function _0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Qm(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,m0(c,p,t[i]))}return r}function vD(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,mD(u,c,e))}return r}class pp extends fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ED extends fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class wx{constructor(e){this.count=e}}var Or,tn;function wD(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function XT(n){if(void 0===n)return vr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Or.OK:return ce.OK;case Or.CANCELLED:return ce.CANCELLED;case Or.UNKNOWN:return ce.UNKNOWN;case Or.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Or.INTERNAL:return ce.INTERNAL;case Or.UNAVAILABLE:return ce.UNAVAILABLE;case Or.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Or.NOT_FOUND:return ce.NOT_FOUND;case Or.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Or.ABORTED:return ce.ABORTED;case Or.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Or.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(tn=Or||(Or={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Pc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return o0(this.inner)}size(){return this.innerSize}}class wr{constructor(e,t){this.comparator=e,this.root=t||wi.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new v0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new v0(this.root,e,this.comparator,!1)}getReverseIterator(){return new v0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new v0(this.root,e,this.comparator,!0)}}class v0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:wi.RED,this.left=null!=i?i:wi.EMPTY,this.right=null!=u?u:wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new wi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1,wi.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eA(this.data.getIterator())}getIteratorFrom(e){return new eA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class eA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gp(n){return n.hasNext()?n.getNext():void 0}const bx=new wr(je.comparator);function qo(){return bx}const s=new wr(je.comparator);function o(){return s}function a(){return new Pc(n=>n.toString(),(n,e)=>n.isEqual(e))}const l=new wr(je.comparator),d=new On(je.comparator);function g(...n){let e=d;for(const t of n)e=e.add(t);return e}const v=new On(Gt);function w(){return v}class D{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,T.createSynthesizedTargetChangeForCurrentChange(e,t)),new D(Ct.min(),r,w(),qo(),g())}}class T{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new T(zr.EMPTY_BYTE_STRING,t,g(),g(),g())}}class x{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class P{constructor(e,t){this.targetId=e,this.$=t}}class U{constructor(e,t,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Z{constructor(){this.B=0,this.L=$e(),this.U=zr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=g(),t=g(),r=g();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new T(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=$e()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class ye{constructor(e){this.nt=e,this.st=new Map,this.it=qo(),this.rt=Fe(),this.ot=new On(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(d0(u))if(0===r){const c=new je(u.path);this.ct(t,c,Nn.newNoDocument(c,Ct.min()))}else Mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&d0(p.target)){const y=new je(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Nn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=g();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new D(e,t,this.ot,this.it,r);return this.it=qo(),this.rt=Fe(),this.ot=new On(Gt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Z,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new On(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Z),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Fe(){return new wr(je.comparator)}function $e(){return new wr(je.comparator)}const rt={asc:"ASCENDING",desc:"DESCENDING"},Ce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yt{constructor(e,t){this.databaseId=e,this.N=t}}function jt(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hn(n,e){return n.N?e.toBase64():e.toUint8Array()}function Ms(n,e){return jt(n,e.toTimestamp())}function jn(n){return Mt(!!n),Ct.fromTimestamp(function(e){const t=Mc(e);return new ur(t.seconds,t.nanos)}(n))}function mp(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jm(n){const e=Qt.fromString(n);return Mt(Sx(e)),e}function Fc(n,e){return mp(n.databaseId,e.path)}function po(n,e){const t=Jm(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(ey(t))}function yp(n,e){return mp(n.databaseId,e)}function Xm(n){const e=Jm(n);return 4===e.length?Qt.emptyPath():ey(e)}function Lc(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ey(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ty(n,e,t){return{name:Fc(n,e),fields:t.value.mapValue.fields}}function Dx(n,e,t){const r=po(n,e.name),i=jn(e.updateTime),u=new Ei({mapValue:{fields:e.fields}}),c=Nn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function E0(n,e){let t;if(e instanceof kc)t={update:ty(n,e.key,e.value)};else if(e instanceof pp)t={delete:Fc(n,e.key)};else if(e instanceof _h)t={update:ty(n,e.key,e.data),updateMask:vk(e.fieldMask)};else{if(!(e instanceof ED))return it();t={verify:Fc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof mh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ta)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hp)return{fieldPath:u.field.canonicalString(),increment:c.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ms(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function tA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Er.updateTime(jn(i.updateTime)):void 0!==i.exists?Er.exists(i.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Mt("REQUEST_TIME"===c.setToServerValue),p=new mh):"appendMissingElements"in c?p=new cu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Ta(c.removeAllFromArray.values||[]):"increment"in c?p=new hp(u,c.increment):it();const y=qr.fromServerFormat(c.fieldPath);return new yh(y,p)}(n,i)):[];var i;if(e.update){const i=po(n,e.update.name),u=new Ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new up((e.updateMask.fieldPaths||[]).map(b=>qr.fromServerFormat(b)));return new _h(i,u,c,t,r)}return new kc(i,u,t,r)}if(e.delete){const i=po(n,e.delete);return new pp(i,t)}if(e.verify){const i=po(n,e.verify);return new ED(i,t)}return it()}function Cx(n,e){return{documents:[yp(n,e.path)]}}function Ix(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(eD(M.value))return{unaryFilter:{field:ny(M.field),op:"IS_NAN"}};if(VT(M.value))return{unaryFilter:{field:ny(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(eD(M.value))return{unaryFilter:{field:ny(M.field),op:"IS_NOT_NAN"}};if(VT(M.value))return{unaryFilter:{field:ny(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ny(M.field),op:mk(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:ny((S=b).field),direction:gk(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||al(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Tx(n){let e=Xm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Ax(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Nc(ry((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(S){let M;return M="object"==typeof S?S.value:S,al(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new ll((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new ll(S.values||[],!S.before)}(t.endAt)),p0(e,i,c,u,p,"F",y,b)}function Ax(n){return n?void 0!==n.unaryFilter?[_k(n)]:void 0!==n.fieldFilter?[yk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ax(e)).reduce((e,t)=>e.concat(t)):it():[]}function gk(n){return rt[n]}function mk(n){return Ce[n]}function ny(n){return{fieldPath:n.canonicalString()}}function ry(n){return qr.fromServerFormat(n.fieldPath)}function yk(n){return Wr.create(ry(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function _k(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ry(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ry(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ry(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ry(n.unaryFilter.field);return Wr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function vk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mx(e)),e=Ek(n.get(t),e);return Mx(e)}function Ek(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Mx(n){return n+"\x01\x01"}function du(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new Qt(r)}const xx=["userId","batchId"];function bD(n,e){return[n,bi(e)]}function Rx(n,e,t){return[n,bi(e),t]}const wk={},bk=["prefixPath","collectionGroup","readTime","documentId"],Dk=["prefixPath","collectionGroup","documentId"],Ck=["collectionGroup","readTime","prefixPath","documentId"],Ik=["canonicalId","targetId"],Tk=["targetId","path"],Ak=["path","targetId"],Sk=["collectionId","parent"],Mk=["indexId","uid"],xk=["uid","sequenceNumber"],Rk=["indexId","uid","arrayValue","directionalValue","documentKey"],Nk=["indexId","uid","documentKey"],Ok=["userId","collectionPath","documentId"],kk=["userId","collectionPath","largestBatchId"],Pk=["userId","collectionGroup","largestBatchId"],Nx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fk=[...Nx,"documentOverlays"],Ox=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lk=[...Ox,"indexConfiguration","indexState","indexEntries"],kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Px{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class DD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Gr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new w0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=nA(r.target.error);this.At.reject(new w0(e,i))}}static open(e,t,r,i){try{return new DD(t,e.transaction(i,r))}catch(u){throw new w0(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bk(t)}}class hu{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===hu.Vt((0,Kt.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),vp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Kt.hl)())return!1;if(hu.St())return!0;const e=(0,Kt.z$)(),t=hu.Vt(e),r=0<t&&t<10,i=hu.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new w0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new w0(e,p))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=DD.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.bt(),S)).catch(S=>(y.abort(S),pe.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Pe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Vk{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return vp(this.Ft.delete())}}class w0 extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _p(n){return"IndexedDbTransactionError"===n.name}class Bk{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vp(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),vp(this.store.add(e))}get(e){return vp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),vp(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),vp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Gt(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new pe((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=u=>{const c=nA(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Gt(e,t){const r=[];return new pe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const y=new Vk(p),b=t(p.primaryKey,p.value,y);if(b instanceof pe){const S=b.catch(M=>(y.done(),pe.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vp(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=nA(r.target.error);t(i)}})}let Fx=!1;function nA(n){const e=hu.Vt((0,Kt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fx||(Fx=!0,setTimeout(()=>{throw r},0)),r}}return n}class Lx extends Px{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Di(n,e){const t=qe(n);return hu.xt(t.Ht,e)}class rA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&yD(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ym(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ym(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),g())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,(t,r)=>_D(t,r))&&Sc(this.baseMutations,e.baseMutations,(t,r)=>_D(t,r))}}class iA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=l;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new iA(e,t,r,i)}}class sA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vh{constructor(e,t,r,i,u=Ct.min(),c=Ct.min(),p=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new vh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new vh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vx{constructor(e){this.Jt=e}}function Bx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:CD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Fc(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:jt(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ep(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Ep(e.version)}}var i,u;return r}function CD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ep(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wp(n){const e=new ur(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function iy(n,e){const t=(e.baseMutations||[]).map(u=>tA(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>tA(n.Jt,u)),i=ur.fromMillis(e.localWriteTimeMs);return new rA(e.batchId,i,t,r)}function b0(n){const e=wp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(Mt(1===(i=n.query).documents.length),r=fo(Oc(Xm(i.documents[0])))):r=fo(Tx(n.query)),new vh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,zr.fromBase64String(n.resumeToken))}function Ux(n,e){const t=Ep(e.snapshotVersion),r=Ep(e.lastLimboFreeSnapshotVersion);let i;i=d0(e.target)?Cx(n.Jt,e.target):Ix(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function oA(n){const e=Tx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cD(e,e.limit,"L"):e}function aA(n,e){return new sA(e.largestBatchId,tA(n.Jt,e.overlayMutation))}function jx(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}class jk{getBundleMetadata(e,t){return $x(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:wp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $x(e).put({bundleId:(r=t).id,createTime:Ep(jn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Hx(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:oA(i.bundledQuery),readTime:wp(i.readTime)};var i})}saveNamedQuery(e,t){return Hx(e).put({name:(r=t).name,readTime:Ep(jn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $x(n){return Di(n,"bundles")}function Hx(n){return Di(n,"namedQueries")}class uA{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new uA(e,t.uid||"")}getOverlay(e,t){return D0(e).get(jx(this.userId,t)).next(r=>r?aA(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new sA(t,c);i.push(this.Xt(e,p))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(bi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(D0(e).Qt("collectionPathOverlayIndex",p))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=a(),u=bi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return D0(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=aA(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=a();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return D0(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,S)=>{const M=aA(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return D0(e).put(function(r,i,u){const[c,p,y]=jx(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:E0(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function D0(n){return Di(n,"documentOverlays")}class sy{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),xc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ah(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?BT(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function $k(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Gx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=$k(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}sy.fe=new sy;class Hk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Gx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Gx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Gk{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class qk{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ID{constructor(){this.De=new Hk,this.Ce=new Gk(this.De),this.xe=new qk(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Eh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Eh(this.indexId,this.documentKey,this.arrayValue,r)}}function bp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=qx(n.arrayValue,e.arrayValue),0!==t?t:(t=qx(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function qx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zk{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=l0(e);if(void 0!==t&&!this.Be(t))return!1;const r=hh(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Wk{constructor(){this.qe=new lA}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class lA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new On(Qt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(Qt.comparator)).toArray()}}const TD=new Uint8Array(0);class Kk{constructor(e){this.user=e,this.Ge=new lA,this.Ke=new Pc(t=>uu(t),(t,r)=>dp(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:bi(i)};return zx(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return zx(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(du(c.parent))}return r})}addFieldIndex(e,t){const r=AD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=AD(e),i=SD(e),u=C0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=C0(e);let i=!0;const u=new Map;return pe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=g();return pe.forEach(u,(p,y)=>{var b;Pe("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Le=>`${Le.fieldPath}:${Le.kind}`).join(",")}`} to execute ${uu(t)}`);const S=function(Le,Ke){const ze=l0(Ke);if(void 0===ze)return null;for(const _t of Um(Le,ze.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(y,p),M=function(Le,Ke){const ze=new Map;for(const _t of hh(Ke))for(const ct of Um(Le,_t.fieldPath))switch(ct.op){case"==":case"in":ze.set(_t.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return ze.set(_t.fieldPath.canonicalString(),ct.value),Array.from(ze.values())}return null}(y,p),F=function(Le,Ke){const ze=[];let _t=!0;for(const Jt of hh(Ke)){let wn,_n=!0;for(const Zt of Um(Le,Jt.fieldPath)){let bn,Os=!0;switch(Zt.op){case"<":case"<=":bn="nullValue"in(ct=Zt.value)?Fm:"booleanValue"in ct?{booleanValue:!1}:"integerValue"in ct||"doubleValue"in ct?{doubleValue:NaN}:"timestampValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in ct?{stringValue:""}:"bytesValue"in ct?{bytesValue:""}:"referenceValue"in ct?ch(ol.empty(),je.empty()):"geoPointValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in ct?{arrayValue:{}}:"mapValue"in ct?{mapValue:{}}:it();break;case"==":case"in":case">=":bn=Zt.value;break;case">":bn=Zt.value,Os=!1;break;case"!=":case"not-in":bn=Fm}tD(wn,bn)===bn&&(wn=bn,_n=Os)}if(null!==Le.startAt)for(let Zt=0;Zt<Le.orderBy.length;++Zt)if(Le.orderBy[Zt].field.isEqual(Jt.fieldPath)){const bn=Le.startAt.position[Zt];tD(wn,bn)===bn&&(wn=bn,_n=Le.startAt.inclusive);break}if(void 0===wn)return null;ze.push(wn),_t&&(_t=_n)}var ct;return new ll(ze,_t)}(y,p),B=function(Le,Ke){const ze=[];let _t=!0;for(const Jt of hh(Ke)){let wn,_n=!0;for(const Zt of Um(Le,Jt.fieldPath)){let bn,Os=!0;switch(Zt.op){case">=":case">":bn="nullValue"in(ct=Zt.value)?{booleanValue:!1}:"booleanValue"in ct?{doubleValue:NaN}:"integerValue"in ct||"doubleValue"in ct?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in ct?{stringValue:""}:"stringValue"in ct?{bytesValue:""}:"bytesValue"in ct?ch(ol.empty(),je.empty()):"referenceValue"in ct?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in ct?{arrayValue:{}}:"arrayValue"in ct?{mapValue:{}}:"mapValue"in ct?LT:it(),Os=!1;break;case"==":case"in":case"<=":bn=Zt.value;break;case"<":bn=Zt.value,Os=!1;break;case"!=":case"not-in":bn=LT}Bm(wn,bn)===bn&&(wn=bn,_n=Os)}if(null!==Le.endAt)for(let Zt=0;Zt<Le.orderBy.length;++Zt)if(Le.orderBy[Zt].field.isEqual(Jt.fieldPath)){const bn=Le.endAt.position[Zt];Bm(wn,bn)===bn&&(wn=bn,_n=Le.endAt.inclusive);break}if(void 0===wn)return null;ze.push(wn),_t&&(_t=_n)}var ct;return new ll(ze,_t)}(y,p),G=this.je(p,y,F),ne=this.je(p,y,B),we=this.We(p,y,M),Ze=this.ze(p.indexId,S,G,!!F&&F.inclusive,ne,!!B&&B.inclusive,we);return pe.forEach(Ze,Le=>r.Kt(Le,t.limit).next(Ke=>{Ke.forEach(ze=>{c=c.add(new je(du(ze.documentKey)))})}))}).next(()=>c)}return pe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):TD,B=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);S.push(...this.createRange(B,G,p.map(ne=>this.Je(e,F,ne,!0))))}return S}Je(e,t,r,i){const u=new Eh(e,je.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Eh(e,je.empty(),t,r);return i?u.ke():u}Ye(e){return new Eh(e,je.empty(),TD,TD)}getFieldIndex(e,t){const r=new zk(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new ID;for(const i of hh(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);sy.fe.Zt(u,c)}return r.Se()}He(e){const t=new ID;return sy.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new ID);let u=0;for(const c of hh(e)){const p=r[u++];for(const y of i)if(this.tn(t,c.fieldPath)&&Lm(p))i=this.en(i,c,p);else{const b=y.Ne(c.kind);sy.fe.Zt(p,b)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const y=new ID;y.seed(p.Se()),sy.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=AD(e),i=SD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return pe.forEach(u,p=>i.get([p.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new ph(S.sequenceNumber,new Ca(wp(S.readTime),new je(du(S.documentKey)),S.largestBatchId)):ph.empty(),F=b.fields.map(([B,G])=>new fh(qr.fromServerFormat(B),G));return new dh(b.indexId,b.collectionGroup,F,M)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=AD(e),u=SD(e);return this.sn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>pe.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Ep((F=r).readTime),documentKey:bi(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),pe.forEach(p,y=>this.rn(e,i,y).next(b=>{const S=this.on(u,y);return b.isEqual(S)?pe.resolve():this.un(e,u,b,S)}))))})}an(e,t,r){return C0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:bi(t.key.path)})}cn(e,t,r){return C0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,bi(t.key.path)])}rn(e,t,r){const i=C0(e);let u=new On(bp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,bi(t.path)])},(c,p)=>{u=u.add(new Eh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}on(e,t){let r=new On(bp);const i=this.Ze(t,e);if(null==i)return r;const u=l0(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Lm(c))for(const p of c.arrayValue.values||[])r=r.add(new Eh(t.indexId,e.key,this.He(p),i))}else r=r.add(new Eh(t.indexId,e.key,TD,i));return r}un(e,t,r,i){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,p,y,b,S){const M=c.getIterator(),F=p.getIterator();let B=gp(M),G=gp(F);for(;B||G;){let ne=!1,we=!1;if(B&&G){const Ze=y(B,G);Ze<0?we=!0:Ze>0&&(ne=!0)}else null!=B?we=!0:ne=!0;ne?(b(G),G=gp(F)):we?(S(B),B=gp(M)):(B=gp(M),G=gp(F))}}(r,i,bp,c=>{u.push(this.an(e,t,c))},c=>{u.push(this.cn(e,t,c))}),pe.waitFor(u)}sn(e){let t=1;return SD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>bp(c,p)).filter((c,p,y)=>!p||0!==bp(c,y[p-1]));const i=[];i.push(e);for(const c of r){const p=bp(c,e),y=bp(c,t);if(0===p)i[0]=e.ke();else if(p>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,""],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,""]));return u}}function zx(n){return Di(n,"collectionParents")}function C0(n){return Di(n,"indexEntries")}function AD(n){return Di(n,"indexConfiguration")}function SD(n){return Di(n,"indexState")}const Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Kx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(S,M,F)=>(p++,F.delete()));u.push(y.next(()=>{Mt(1===p)}));const b=[];for(const S of t.mutations){const M=Rx(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return pe.waitFor(u).next(()=>b)}function MD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class cA{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new cA(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wh(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=oy(e),c=wh(e);return c.add({}).next(p=>{Mt("number"==typeof p);const y=new rA(p,t,r,i),b=function(F,B,G){const ne=G.baseMutations.map(Ze=>E0(F.Jt,Ze)),we=G.mutations.map(Ze=>E0(F.Jt,Ze));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ne,mutations:we}}(this.M,this.userId,y),S=[];let M=new On((F,B)=>Gt(F.canonicalString(),B.canonicalString()));for(const F of i){const B=Rx(this.userId,F.key.path,p);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,wk))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.hn[p]=y.keys()}),pe.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return wh(e).get(t).next(r=>r?(Mt(r.userId===this.userId),iy(this.M,r)):null)}ln(e,t){return this.hn[t]?pe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return wh(e).Wt({index:"userMutationsIndex",range:i},(c,p,y)=>{p.userId===this.userId&&(Mt(p.batchId>=r),u=iy(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>iy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=bD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return oy(e).Wt({range:i},(c,p,y)=>{const[b,S,M]=c,F=du(S);if(b===this.userId&&t.path.isEqual(F))return wh(e).get(M).next(B=>{if(!B)throw it();Mt(B.userId===this.userId),u.push(iy(this.M,B))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Gt);const i=[];return t.forEach(u=>{const c=bD(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=oy(e).Wt({range:p},(b,S,M)=>{const[F,B,G]=b,ne=du(B);F===this.userId&&u.path.isEqual(ne)?r=r.add(G):M.done()});i.push(y)}),pe.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=bD(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new On(Gt);return oy(e).Wt({range:c},(y,b,S)=>{const[M,F,B]=y,G=du(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(B)):S.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(wh(e).get(u).next(c=>{if(null===c)throw it();Mt(c.userId===this.userId),r.push(iy(this.M,c))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Kx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return oy(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=du(u[1]);i.push(y)}else p.done()}).next(()=>{Mt(0===i.length)})})}containsKey(e,t){return Zx(e,this.userId,t)}_n(e){return Yx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zx(n,e,t){const r=bD(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return oy(n).Wt({range:u,jt:!0},(p,y,b)=>{const[S,M,F]=p;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function wh(n){return Di(n,"mutations")}function oy(n){return Di(n,"documentMutations")}function Yx(n){return Di(n,"mutationQueues")}class Dp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Dp(0)}static gn(){return new Dp(-1)}}class Zk{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Dp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Ct.fromTimestamp(new ur(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ay(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return ay(e).Wt((c,p)=>{const y=b0(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>pe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return ay(e).Wt((r,i)=>{const u=b0(i);t(u)})}yn(e){return Qx(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}pn(e,t){return Qx(e).put("targetGlobalKey",t)}In(e,t){return ay(e).put(Ux(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ay(e).Wt({range:i,index:"queryTargetsIndex"},(c,p,y)=>{const b=b0(p);dp(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=bh(e);return t.forEach(c=>{const p=bi(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=bh(e);return pe.forEach(t,u=>{const c=bi(u.path);return pe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=bh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bh(e);let u=g();return i.Wt({range:r,jt:!0},(c,p,y)=>{const b=du(c[1]),S=new je(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=bi(t.path),i=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let u=0;return bh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return ay(e).get(t).next(r=>r?b0(r):null)}}function ay(n){return Di(n,"targets")}function Qx(n){return Di(n,"targetGlobal")}function bh(n){return Di(n,"targetDocuments")}function Cp(n){return dA.apply(this,arguments)}function dA(){return dA=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==kx)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),dA.apply(this,arguments)}function Jx([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class Yk{constructor(e){this.En=e,this.buffer=new On(Jx),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qk{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){_p(i)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Cp(i)}yield t.vn(e)}))}}class Jk{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(os.A);const r=new Yk(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wx):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,u,c,p,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),sp()<=el.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class Xk{constructor(e,t){this.db=e,this.garbageCollector=new Jk(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return xD(e,r)}removeReference(e,t,r){return xD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xD(e,t)}Mn(e,t){return function(r,i){let u=!1;return Yx(r).zt(c=>Zx(r,c,i).next(p=>(p&&(u=!0),pe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.kn(e,(c,p)=>{if(p<=t){const y=this.Mn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ct.min()),bh(e).delete([0,bi(c.path)])))});i.push(y)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xD(e,t)}kn(e,t){const r=bh(e);let i,u=os.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==os.A&&t(new je(du(i)),u),u=b,i=y):u=os.A}).next(()=>{u!==os.A&&t(new je(du(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xD(n,e){return bh(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class Xx{constructor(){this.changes=new Pc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eP{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ip(e).put(r)}removeEntry(e,t,r){return Ip(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],CD(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Ip(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(i,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Ip(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(i,u)=>{r={document:this.Fn(t,u),size:MD(u)}}).next(()=>r)}getEntries(e,t){let r=qo();return this.Bn(e,t,(i,u)=>{const c=this.Fn(i,u);r=r.insert(i,c)}).next(()=>r)}Ln(e,t){let r=qo(),i=new wr(je.comparator);return this.Bn(e,t,(u,c)=>{const p=this.Fn(u,c);r=r.insert(u,p),i=i.insert(u,MD(c))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new On(nR);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(I0(i.first()),I0(i.last())),c=i.getIterator();let p=c.getNext();return Ip(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&nR(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(I0(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),CD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ip(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=qo();for(const y of c){const b=this.Fn(je.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=qo();const c=tR(t,r),p=tR(t,Ca.max());return Ip(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,S)=>{const M=this.Fn(je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new tP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eR(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}On(e,t){return eR(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Uk(n,e){let t;if(e.document)t=Dx(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=wp(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=je.fromSegments(e.unknownDocument.path),i=wp(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ur(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Nn.newInvalidDocument(e)}}class tP extends Xx{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Pc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new On((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=Bx(this.qn.M,c);i=i.add(u.path.popLast()),r+=MD(y)-p.size,t.push(this.qn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=Bx(this.qn.M,c.convertToNoDocument(Ct.min()));t.push(this.qn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function eR(n){return Di(n,"remoteDocumentGlobal")}function Ip(n){return Di(n,"remoteDocumentsV14")}function I0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tR(n,e){const t=e.documentKey.path.toArray();return[n,CD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nR(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class nP{constructor(e){this.M=e}kt(e,t,r,i){const u=new DD("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xx,{unique:!0}),p.createObjectStore("documentMutations"),rR(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),rR(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xx,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return pe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Kn(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&i>=7&&(c=c.next(()=>this.jn(u))),r<8&&i>=8&&(c=c.next(()=>this.Wn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.zn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:Ok});y.createIndex("collectionPathOverlayIndex",kk,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",Pk,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:bk});y.createIndex("documentKeyIndex",Dk),y.createIndex("collectionGroupIndex",Ck)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Mk}).createIndex("sequenceNumberIndex",xk,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Rk}).createIndex("documentKeyIndex",Nk,{unique:!1})}(e)})),c}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=MD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>pe.forEach(p,y=>{Mt(y.userId===u.userId);const b=iy(this.M,y);return Kx(e,u.userId,b).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,p)=>{const y=new Qt(c),b=[0,bi(y)];u.push(t.get(b).next(S=>S?pe.resolve():t.put({targetId:0,path:bi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:Sk});const r=t.store("collectionParents"),i=new lA,u=c=>{if(i.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:bi(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new Qt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const S=du(p);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=b0(i),c=Ux(this.M,u);return t.put(c)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new je(Qt.fromString(b.document.name).popFirst(5)):b.noDocument?je.fromSegments(b.noDocument.path):b.unknownDocument?je.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(S))}).next(()=>pe.waitFor(i))}}function rR(n){n.createObjectStore("targetDocuments",{keyPath:Tk}).createIndex("documentTargetsIndex",Ak,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ik,{unique:!0}),n.createObjectStore("targetGlobal")}const hA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fA{constructor(e,t,r,i,u,c,p,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=c,this.document=p,this.Yn=b,this.Xn=S,this.Zn=M,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=F=>Promise.resolve(),!fA.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xk(this,i),this.cs=t+"main",this.M=new Vx(y),this.hs=new hu(this.cs,this.Zn,new nP(this.M)),this.ls=new Zk(this.referenceDelegate,this.M),this.fs=new eP(this.M),this.ds=new jk,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,hA);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new os(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>RD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(_p(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return T0(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Ps(e){return RD(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Di(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ss(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return pe.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?pe.resolve(!0):T0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,hA);return!1}}return!(!this.networkEnabled||!this.inForeground)||RD(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lx(t,os.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>RD(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return cA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Kk(e)}getDocumentOverlayCache(e){return uA.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.Zn)?Lk:13===c?Ox:12===c?Fk:11===c?Nx:void it();var c;let p;return this.hs.runTransaction(e,i,u,y=>(p=new Lx(y,this.ts?this.ts.next():os.A),"readwrite-primary"===t?this.Ts(p).next(b=>!!b||this.Es(p)).next(b=>{if(!b)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(ce.FAILED_PRECONDITION,kx);return r(p)}).next(b=>this.Rs(p).next(()=>b)):this.Fs(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}Fs(e){return T0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,hA)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return T0(e).put("owner",t)}static vt(){return hu.vt()}As(e){const t=T0(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Kt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function T0(n){return Di(n,"owner")}function RD(n){return Di(n,"clientMetadata")}function pA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rP{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Gm(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let i=o();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let u=o();return this.indexManager.getCollectionParents(e,i).next(c=>pe.forEach(c,p=>{const y=(b=t,S=p.child(i),new lu(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.Ws(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=i.get(y);null==b&&(b=Nn.newInvalidDocument(y),i=i.insert(y,b)),Ym(p,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{hD(t,c)||(i=i.remove(u))}),i))}}class gA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=g(),i=g();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new gA(e,t.fromCache,r,i)}}class iR{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ct.min())?this.Zs(e,t):this.Xs.qs(e,i).next(u=>{const c=this.ti(t,u);return($m(t)||Hm(t))&&this.ei(t.limitType,c,i,r)?this.Zs(e,t):(sp()<=el.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dD(t)),this.Xs.Ks(e,t,c0(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ti(e,t){let r=new On(fD(e));return t.forEach((i,u)=>{hD(e,u)&&(r=r.add(u))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Zs(e,t){return sp()<=el.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",dD(t)),this.Xs.Ks(e,t,Ca.min())}}class iP{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new wr(Gt),this.ii=new Pc(u=>uu(u),dp),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new rP(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function sR(n,e,t,r){return new iP(n,e,t,r)}function oR(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(u=>(i=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=g();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ai.qs(r,y).next(b=>({ci:b,removedBatchIds:c,addedBatchIds:p}))})})}),mA.apply(this,arguments)}function sP(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const S=y.batch,M=S.keys();let F=pe.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(p,B)).next(G=>{const ne=y.docVersions.get(B);Mt(null!==ne),G.version.compareTo(ne)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.$s.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function aR(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function oP(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;p.push(t.ls.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,G,ne;e.targetMismatches.has(S)?F=F.withResumeToken(zr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),G=F,ne=b,(0===(B=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(u,F))});let y=qo();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(uR(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Ct.min())){const b=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return pe.waitFor(p).next(()=>c.apply(u)).next(()=>t.ai.Gs(u,y)).next(()=>y)}).then(u=>(t.si=i,u))}function uR(n,e,t){let r=g();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=qo();return t.forEach((c,p)=>{const y=i.get(c);p.isNoDocument()&&p.version.isEqual(Ct.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Pe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function aP(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function uy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(u=>u?(i=u,pe.resolve(i)):t.ls.allocateTargetId(r).next(c=>(i=new vh(e,c,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function ly(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!_p(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),yA.apply(this,arguments)}function ND(n,e,t){const r=qe(n);let i=Ct.min(),u=g();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const S=qe(p),M=S.ii.get(b);return void 0!==M?pe.resolve(S.si.get(M)):S.ls.getTargetData(y,b)}(r,c,fo(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.ni.Ks(c,e,t?i:Ct.min(),t?u:g())).next(p=>(dR(r,zT(e),p),{documents:p,hi:u})))}function lR(n,e){const t=qe(n),r=qe(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function cR(n,e){const t=qe(n),r=t.ri.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,c0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(dR(t,e,i),i))}function dR(n,e,t){let r=Ct.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function _A(){return _A=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);let u=g(),c=qo();for(const b of t){const S=e.li(b.metadata.name);b.document&&(u=u.add(S));const M=e.fi(b);M.setReadTime(e.di(b.metadata.readTime)),c=c.insert(S,M)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),y=yield uy(i,(b=r,fo(Oc(Qt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>uR(b,p,c).next(S=>(p.apply(b),S)).next(S=>i.ls.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.ls.addMatchingKeys(b,u,y.targetId)).next(()=>i.ai.Gs(b,S)).next(()=>S)))}),_A.apply(this,arguments)}function lP(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,ve.Z)(function*(n,e,t=g()){const r=yield uy(n,fo(oA(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=jn(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.ds.saveNamedQuery(u,e);const p=r.withResumeToken(zr.EMPTY_BYTE_STRING,c);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(u,p).next(()=>i.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.ls.addMatchingKeys(u,t,r.targetId)).next(()=>i.ds.saveNamedQuery(u,e))})}),vA.apply(this,arguments)}class cP{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return pe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:jn(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:oA(r.bundledQuery),readTime:jn(r.readTime)}),pe.resolve();var r}}class dP{constructor(){this.overlays=new wr(je.comparator),this.mi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=a(),u=t.length+1,c=new je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new wr((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=a(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=a(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=i)););return pe.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new sA(t,r));let u=this.mi.get(t);void 0===u&&(u=g(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class EA{constructor(){this.gi=new On(Ci.yi),this.pi=new On(Ci.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Ci(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Ci(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new Qt([])),r=new Ci(t,e),i=new Ci(t,e+1),u=[];return this.pi.forEachInRange([r,i],c=>{this.Ei(c),u.push(c.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new Qt([])),r=new Ci(t,e),i=new Ci(t,e+1);let u=g();return this.pi.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ci(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ci{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Gt(e.Vi,t.Vi)}static Ii(e,t){return Gt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class hP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new On(Ci.yi)}checkEmpty(e){return pe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const u=this.vi;this.vi++;const c=new rA(u,t,r,i);this.$s.push(c);for(const p of i)this.Si=this.Si.add(new Ci(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),u=i<0?0:i;return pe.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return pe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ci(t,0),i=new Ci(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,i],c=>{const p=this.Di(c.Vi);u.push(p)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Gt);return t.forEach(i=>{const u=new Ci(i,0),c=new Ci(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,c],p=>{r=r.add(p.Vi)})}),pe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new Ci(new je(u),0);let p=new On(Gt);return this.Si.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(y.Vi)),!0)},c),pe.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return pe.forEach(t.mutations,i=>{const u=new Ci(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Ci(t,0),i=this.Si.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class fP{constructor(e){this.ki=e,this.docs=new wr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Nn.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=qo();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||nD(UT(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Mi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pP(this)}getSize(e){return pe.resolve(this.size)}}class pP extends Xx{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class gP{constructor(e){this.persistence=e,this.Oi=new Pc(t=>uu(t),dp),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Fi=0,this.$i=new EA,this.targetCount=0,this.Bi=Dp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),pe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Dp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.In(t),pe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Oi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),pe.waitFor(u).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.$i.containsKey(t))}}class mP{constructor(e,t){this.Li={},this.overlays={},this.ts=new os(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new gP(this),this.indexManager=new Wk,this.fs=new fP(r=>this.referenceDelegate.Ui(r)),this.M=new Vx(t),this.ds=new cP(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new hP(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new yP(this.ts.next());return this.referenceDelegate.qi(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ki(e,t){return pe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class yP extends Px{constructor(e){super(),this.currentSequenceNumber=e}}class wA{constructor(e){this.persistence=e,this.Qi=new EA,this.ji=null}static Wi(e){return new wA(e)}get zi(){if(this.ji)return this.ji;throw it()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.zi,r=>{const i=je.fromPath(r);return this.Hi(e,i).next(u=>{u||t.removeEntry(i,Ct.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return pe.or([()=>pe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function hR(n,e){return`firestore_clients_${n}_${e}`}function fR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bA(n,e){return`firestore_targets_${n}_${e}`}class OD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new OD(e,t,i.state,u):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class A0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new A0(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=w();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=a0(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new kD(e,u):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DA{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DA(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class CA{constructor(){this.activeTargetIds=w()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IA{constructor(e,t,r,i,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new wr(Gt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=hR(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new CA),this.ar=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const u=e.getItem(hR(e.persistenceKey,i));if(u){const c=kD.Ji(i,u);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bA(this.persistenceKey,e));if(r){const i=A0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(u){let c=os.A;if(null!=u)try{const p=JSON.parse(u);Mt("number"==typeof p),c=p}catch(p){vr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==os.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new OD(this.currentUser,e,t,r),u=fR(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Yi())}pr(e){const t=fR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=bA(this.persistenceKey,e),u=new A0(e,t,r);this.setItem(i,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return kD.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return OD.Ji(new vi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return A0.Ji(i,t)}wr(e){return DA.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),u=this.gr(r),c=[],p=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Or(c,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=w();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class pR{constructor(){this.Fr=new CA,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new CA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _P{Br(e){}shutdown(){}}class gR{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class EP{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class wP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,u){const c=this.oo(e,t);Pe("RestConnection","Sending: ",c,r);const p={};return this.uo(p,i,u),this.ao(e,c,p,r).then(y=>(Pe("RestConnection","Received: ",y),y),y=>{throw op("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}co(e,t,r,i,u){return this.ro(e,t,r,i,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Da,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}oo(e,t){return`${this.so}/v1/${t}:${vP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((u,c)=>{const p=new xT;p.listenOnce(MT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Rm.NO_ERROR:const b=p.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Rm.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Rm.HTTP_ERROR:const S=p.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(G)>=0?G:ce.UNKNOWN}(M.status);c(new Re(F,M.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ST(),c=Hb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new qi({})),this.uo(p.initMessageHeaders,t,r),(0,Kt.uI)()||(0,Kt.b$)()||(0,Kt.d)()||(0,Kt.w1)()||(0,Kt.Mn)()||(0,Kt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Pe("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let S=!1,M=!1;const F=new EP({jr:G=>{M?Pe("Connection","Not sending because WebChannel is closed:",G):(S||(Pe("Connection","Opening WebChannel transport."),b.open(),S=!0),Pe("Connection","WebChannel sending:",G),b.send(G))},Wr:()=>b.close()}),B=(G,ne,we)=>{G.listen(ne,Ze=>{try{we(Ze)}catch(Le){setTimeout(()=>{throw Le},0)}})};return B(b,au.EventType.OPEN,()=>{M||Pe("Connection","WebChannel transport opened.")}),B(b,au.EventType.CLOSE,()=>{M||(M=!0,Pe("Connection","WebChannel transport closed"),F.eo())}),B(b,au.EventType.ERROR,G=>{M||(M=!0,op("Connection","WebChannel transport errored:",G),F.eo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),B(b,au.EventType.MESSAGE,G=>{var ne;if(!M){const we=G.data[0];Mt(!!we);const Ze=we,Le=Ze.error||(null===(ne=Ze[0])||void 0===ne?void 0:ne.error);if(Le){Pe("Connection","WebChannel received error:",Le);const Ke=Le.status;let ze=function(ct){const Jt=Or[ct];if(void 0!==Jt)return XT(Jt)}(Ke),_t=Le.message;void 0===ze&&(ze=ce.INTERNAL,_t="Unknown error status: "+Ke+" with message "+Le.message),M=!0,F.eo(new Re(ze,_t)),b.close()}else Pe("Connection","WebChannel received:",we),F.no(we)}}),B(c,Gb.STAT_EVENT,G=>{G.stat===t0.PROXY?Pe("Connection","Detected buffering proxy"):G.stat===t0.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Zr()},0),F}}function mR(){return"undefined"!=typeof window?window:null}function PD(){return"undefined"!=typeof document?document:null}function S0(n){return new yt(n,!0)}class TA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class yR{constructor(e,t,r,i,u,c,p,y){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new TA(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bP extends yR{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function hk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(Mt(void 0===b||"string"==typeof b),zr.fromBase64String(b||"")):(Mt(void 0===b||b instanceof Uint8Array),zr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ce.UNKNOWN:XT(y.code);return new Re(b,y.message||"")}(c);t=new U(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=po(n,r.document.name),u=jn(r.document.updateTime),c=new Ei({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,u,c);t=new x(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=po(n,r.document),u=r.readTime?jn(r.readTime):Ct.min(),c=Nn.newNoDocument(i,u);t=new x([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=po(n,r.document);t=new x([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new wx(r.count||0);t=new P(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Ct.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?jn(u.readTime):Ct.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Lc(this.M),t.addTarget=function(i,u){let c;const p=u.target;return c=d0(p)?{documents:Cx(i,p)}:{query:Ix(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=hn(i,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(c.readTime=jt(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function pk(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Lc(this.M),t.removeTarget=e,this.Oo(t)}}class DP extends yR{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function fk(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let u=jn(r.updateTime?r.updateTime:i);return u.isEqual(Ct.min())&&(u=jn(i)),new QT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.Jo(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Lc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>E0(this.M,r))};this.Oo(t)}}class CP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ro(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class IP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(vr(t),this.su=!1):Pe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class TP{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(p=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;Dh(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(b){const S=qe(b);S.lu.add(4),yield cy(S),S._u.set("Unknown"),S.lu.delete(4),yield M0(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this._u=new IP(r,i)}}function M0(n){return AA.apply(this,arguments)}function AA(){return AA=(0,ve.Z)(function*(n){if(Dh(n))for(const e of n.fu)yield e(!0)}),AA.apply(this,arguments)}function cy(n){return SA.apply(this,arguments)}function SA(){return SA=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),SA.apply(this,arguments)}function FD(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),RA(t)?xA(t):hy(t).Co()&&MA(t,e))}function x0(n,e){const t=qe(n),r=hy(t);t.hu.delete(e),r.Co()&&_R(t,e),0===t.hu.size&&(r.Co()?r.ko():Dh(t)&&t._u.set("Unknown"))}function MA(n,e){n.wu.Z(e.targetId),hy(n).Qo(e)}function _R(n,e){n.wu.Z(e),hy(n).jo(e)}function xA(n){n.wu=new ye({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),hy(n).start(),n._u.iu()}function RA(n){return Dh(n)&&!hy(n).Do()&&n.hu.size>0}function Dh(n){return 0===qe(n).lu.size}function vR(n){n.wu=void 0}function AP(n){return NA.apply(this,arguments)}function NA(){return NA=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{MA(n,e)})}),NA.apply(this,arguments)}function SP(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ve.Z)(function*(n,e){vR(n),RA(n)?(n._u.uu(e),xA(n)):n._u.set("Unknown")}),OA.apply(this,arguments)}function MP(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof U&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield LD(n,r)}else if(e instanceof x?n.wu.ut(e):e instanceof P?n.wu._t(e):n.wu.ht(e),!t.isEqual(Ct.min()))try{const r=yield aR(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.wu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.hu.get(y);b&&i.hu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=i.hu.get(p);if(!y)return;i.hu.set(p,y.withResumeToken(zr.EMPTY_BYTE_STRING,y.snapshotVersion)),_R(i,p);const b=new vh(y.target,p,1,y.sequenceNumber);MA(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield LD(n,r)}var r}),kA.apply(this,arguments)}function LD(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,ve.Z)(function*(n,e,t){if(!_p(e))throw e;n.lu.add(1),yield cy(n),n._u.set("Offline"),t||(t=()=>aR(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield M0(n)}))}),PA.apply(this,arguments)}function ER(n,e){return e().catch(t=>LD(n,t,e))}function dy(n){return FA.apply(this,arguments)}function FA(){return FA=(0,ve.Z)(function*(n){const e=qe(n),t=Ch(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;xP(e);)try{const i=yield aP(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,RP(e,i)}catch(i){yield LD(e,i)}wR(e)&&bR(e)}),FA.apply(this,arguments)}function xP(n){return Dh(n)&&n.cu.length<10}function RP(n,e){n.cu.push(e);const t=Ch(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function wR(n){return Dh(n)&&!Ch(n).Do()&&n.cu.length>0}function bR(n){Ch(n).start()}function NP(n){return LA.apply(this,arguments)}function LA(){return LA=(0,ve.Z)(function*(n){Ch(n).Xo()}),LA.apply(this,arguments)}function OP(n){return VA.apply(this,arguments)}function VA(){return VA=(0,ve.Z)(function*(n){const e=Ch(n);for(const t of n.cu)e.Ho(t.mutations)}),VA.apply(this,arguments)}function kP(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=iA.from(r,e,t);yield ER(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dy(n)}),BA.apply(this,arguments)}function PP(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,ve.Z)(function*(n,e){var t;e&&Ch(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(wD(u=i.code)&&u!==ce.ABORTED){const c=r.cu.shift();Ch(r).No(),yield ER(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield dy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),wR(n)&&bR(n)}),UA.apply(this,arguments)}function DR(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Dh(t);t.lu.add(3),yield cy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield M0(t)}),jA.apply(this,arguments)}function $A(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield M0(t)):e||(t.lu.add(2),yield cy(t),t._u.set("Unknown"))}),HA.apply(this,arguments)}function hy(n){return n.mu||(n.mu=function(e,t,r){const i=qe(e);return i.tu(),new bP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:AP.bind(null,n),Jr:SP.bind(null,n),Ko:MP.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),RA(n)?xA(n):n._u.set("Unknown")):(yield n.mu.stop(),vR(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Ch(n){return n.gu||(n.gu=function(e,t,r){const i=qe(e);return i.tu(),new DP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:NP.bind(null,n),Jr:PP.bind(null,n),Yo:OP.bind(null,n),Jo:kP.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield dy(n)):(yield n.gu.stop(),n.cu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class GA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new GA(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(vr("AsyncQueue",`${e}: ${n}`),_p(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=o(),this.sortedSet=new wr(this.comparator)}static emptySet(e){return new py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CR{constructor(){this.yu=new wr(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gy{constructor(e,t,r,i,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new gy(e,t,py.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class FP{constructor(){this.Iu=void 0,this.listeners=[]}}class LP{constructor(){this.queries=new Pc(e=>qT(e),qm),this.onlineState="Unknown",this.Tu=new Set}}function qA(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new FP),i)try{u.Iu=yield t.onListen(r)}catch(c){const p=fy(c,`Initialization of query '${dD(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&ZA(t)}),zA.apply(this,arguments)}function WA(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),KA.apply(this,arguments)}function VP(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Au(i)&&(r=!0);c.Iu=i}}r&&ZA(t)}function BP(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function ZA(n){n.Tu.forEach(e=>{e.next()})}class YA{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class UP{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class IR{constructor(e){this.M=e}li(e){return po(this.M,e)}fi(e){return e.metadata.exists?Dx(this.M,e.document,!1):Nn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return jn(e)}}class jP{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TR(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new IR(this.M);for(const i of e)if(i.metadata.queries){const u=r.li(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||g()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function uP(n,e,t,r){return _A.apply(this,arguments)}(e.localStore,new IR(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield lP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function TR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AR{constructor(e){this.key=e}}class SR{constructor(e){this.key=e}}class MR{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=g(),this.mutatedKeys=g(),this.Lu=fD(e),this.Uu=new py(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new CR,i=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const y=$m(this.query)&&i.size===this.query.limit?i.last():null,b=Hm(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=hD(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),ne=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let we=!1;F&&B?F.data.isEqual(B.data)?G!==ne&&(r.track({type:3,doc:B}),we=!0):this.Qu(F,B)||(r.track({type:2,doc:B}),we=!0,(y&&this.Lu(B,y)>0||b&&this.Lu(B,b)<0)&&(p=!0)):!F&&B?(r.track({type:0,doc:B}),we=!0):F&&!B&&(r.track({type:1,doc:F}),we=!0,(y||b)&&(p=!0)),we&&(B?(c=c.add(B),u=ne?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),$m(this.query)||Hm(this.query))for(;c.size>this.query.limit;){const S=$m(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Ku:r,ei:p,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((b,S)=>function(M,F){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return B(M)-B(F)}(b.type,S.type)||this.Lu(b.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,y=p!==this.$u;return this.$u=p,0!==u.length||y?{snapshot:new gy(this.query,e.Uu,i,u,e.mutatedKeys,0===p,y,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new CR,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=g(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new SR(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new AR(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=g();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return gy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class $P{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HP{constructor(e){this.key=e,this.Xu=!1}}class GP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Zu={},this.ta=new Pc(p=>qT(p),qm),this.ea=new Map,this.na=new Set,this.sa=new wr(je.comparator),this.ia=new Map,this.ra=new EA,this.oa={},this.ua=new Map,this.aa=Dp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function qP(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,ve.Z)(function*(n,e){const t=ES(n);let r,i;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Yu();else{const c=yield uy(t.localStore,fo(e));t.isPrimaryClient&&FD(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield JA(t,e,r,"current"===p)}return i}),QA.apply(this,arguments)}function JA(n,e,t,r){return XA.apply(this,arguments)}function XA(){return XA=(0,ve.Z)(function*(n,e,t,r){n.ha=(S,M,F)=>{return(B=(0,ve.Z)(function*(G,ne,we,Ze){let Le=ne.view.Gu(we);Le.ei&&(Le=yield ND(G.localStore,ne.query,!1).then(({documents:_t})=>ne.view.Gu(_t,Le)));const Ke=Ze&&Ze.targetChanges.get(ne.targetId),ze=ne.view.applyChanges(Le,G.isPrimaryClient,Ke);return lS(G,ne.targetId,ze.zu),ze.snapshot}),function(G,ne,we,Ze){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield ND(n.localStore,e,!0),u=new MR(e,i.hi),c=u.Gu(i.documents),p=T.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);lS(n,t,y.zu);const b=new $P(e,t,u);return n.ta.set(e,b),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),y.snapshot}),XA.apply(this,arguments)}function zP(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(u=>!qm(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),x0(t.remoteStore,r.targetId),my(t,r.targetId)}).catch(Cp))):(my(t,r.targetId),yield ly(t.localStore,r.targetId,!0))}),eS.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n,e,t){const r=wS(n);try{const i=yield function(u,c){const p=qe(u),y=ur.now(),b=c.reduce((M,F)=>M.add(F.key),g());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",M=>p.ai.qs(M,b).next(F=>{S=F;const B=[];for(const G of c){const ne=JT(G,S.get(G.key));null!=ne&&B.push(new _h(G.key,ne,ho(ne.value.mapValue),Er.exists(!0)))}return p.$s.addMutationBatch(M,y,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let y=u.oa[u.currentUser.toKey()];y||(y=new wr(Gt)),y=y.insert(c,p),u.oa[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Vc(r,i.changes),yield dy(r.remoteStore)}catch(i){const u=fy(i,"Failed to persist write");t.reject(u)}}),tS.apply(this,arguments)}function xR(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield oP(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ia.get(u);c&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Mt(c.Xu):i.removedDocuments.size>0&&(Mt(c.Xu),c.Xu=!1))}),yield Vc(t,r,e)}catch(r){yield Cp(r)}}),nS.apply(this,arguments)}function RR(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((u,c)=>{const p=c.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let y=!1;p.queries.forEach((b,S)=>{for(const M of S.listeners)M.Eu(c)&&(y=!0)}),y&&ZA(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KP(n,e,t){return rS.apply(this,arguments)}function rS(){return rS=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),u=i&&i.key;if(u){let c=new wr(je.comparator);c=c.insert(u,Nn.newNoDocument(u,Ct.min()));const p=g().add(u),y=new D(Ct.min(),new Map,new On(Gt),c,p);yield xR(r,y),r.sa=r.sa.remove(u),r.ia.delete(e),cS(r)}else yield ly(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Cp)}),rS.apply(this,arguments)}function ZP(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield sP(t.localStore,e);uS(t,r,null),aS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vc(t,i)}catch(i){yield Cp(i)}}),iS.apply(this,arguments)}function YP(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.$s.lookupMutationBatch(y,c).next(S=>(Mt(null!==S),b=S.keys(),p.$s.removeMutationBatch(y,S))).next(()=>p.$s.performConsistencyCheck(y)).next(()=>p.ai.qs(y,b))})}(r.localStore,e);uS(r,e,t),aS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vc(r,i)}catch(i){yield Cp(i)}}),sS.apply(this,arguments)}function oS(){return oS=(0,ve.Z)(function*(n,e){const t=qe(n);Dh(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),oS.apply(this,arguments)}function aS(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function uS(n,e,t){const r=qe(n);let i=r.oa[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||NR(n,r)})}function NR(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(x0(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),cS(n))}function lS(n,e,t){for(const r of t)r instanceof AR?(n.ra.addReference(r.key,e),JP(n,r)):r instanceof SR?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||NR(n,r.key)):it()}function JP(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.na.add(r),cS(n))}function cS(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(Qt.fromString(e)),r=n.aa.next();n.ia.set(r,new HP(t)),n.sa=n.sa.insert(t,r),FD(n.remoteStore,new vh(fo(Oc(t.path)),r,2,os.A))}}function Vc(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,y)=>{c.push(r.ha(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=gA.Js(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.Zu.Ko(i),yield(p=(0,ve.Z)(function*(y,b){const S=qe(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>pe.forEach(b,F=>pe.forEach(F.zs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>pe.forEach(F.Hs,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!_p(M))throw M;Pe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.si.get(F),ne=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.si=S.si.insert(F,ne)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))}),dS.apply(this,arguments)}function XP(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield oR(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(c=>{c.forEach(p=>{p.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vc(t,r.ci)}var i}),hS.apply(this,arguments)}function e1(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return g().add(r.key);{let i=g();const u=t.ea.get(e);if(!u)return i;for(const c of u){const p=t.ta.get(c);i=i.unionWith(p.view.qu)}return i}}function t1(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield ND(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&lS(t,e.targetId,i.zu),i}),fS.apply(this,arguments)}function n1(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,ve.Z)(function*(n,e){const t=qe(n);return cR(t.localStore,e).then(r=>Vc(t,r))}),pS.apply(this,arguments)}function r1(n,e,t,r){return gS.apply(this,arguments)}function gS(){return gS=(0,ve.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,p){const y=qe(c),b=qe(y.$s);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.ln(S,p).next(M=>M?y.ai.qs(S,M):pe.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(uS(i,e,r||null),aS(i,e),p=e,qe(qe(i.localStore).$s).dn(p)):it(),yield Vc(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),gS.apply(this,arguments)}function mS(){return mS=(0,ve.Z)(function*(n,e){const t=qe(n);if(ES(t),wS(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield OR(t,r.toArray());t.ca=!0,yield $A(t.remoteStore,!0);for(const u of i)FD(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(my(t,c),ly(t.localStore,c,!0))),x0(t.remoteStore,c)}),yield i,yield OR(t,r),function(u){const c=qe(u);c.ia.forEach((p,y)=>{x0(c.remoteStore,y)}),c.ra.bi(),c.ia=new Map,c.sa=new wr(je.comparator)}(t),t.ca=!1,yield $A(t.remoteStore,!1)}}),mS.apply(this,arguments)}function OR(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let p;const y=r.ea.get(c);if(y&&0!==y.length){p=yield uy(r.localStore,fo(y[0]));for(const b of y){const S=r.ta.get(b),M=yield t1(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield lR(r.localStore,c);p=yield uy(r.localStore,b),yield JA(r,kR(b),c,!1)}i.push(p)}return r.Zu.Ko(u),i}),yS.apply(this,arguments)}function kR(n){return p0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function o1(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function a1(n,e,t,r){return _S.apply(this,arguments)}function _S(){return _S=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);if(i.ca)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield cR(i.localStore,zT(u[0])),p=D.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vc(i,c,p);break}case"rejected":yield ly(i.localStore,e,!0),my(i,e,r);break;default:it()}}),_S.apply(this,arguments)}function u1(n,e,t){return vS.apply(this,arguments)}function vS(){return vS=(0,ve.Z)(function*(n,e,t){const r=ES(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield lR(r.localStore,i),c=yield uy(r.localStore,u);yield JA(r,kR(u),c.targetId,!1),FD(r.remoteStore,c)}for(const i of t)r.ea.has(i)&&(yield ly(r.localStore,i,!1).then(()=>{x0(r.remoteStore,i),my(r,i)}).catch(Cp))}}),vS.apply(this,arguments)}function ES(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KP.bind(null,e),e.Zu.Ko=VP.bind(null,e.eventManager),e.Zu.la=BP.bind(null,e.eventManager),e}function wS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YP.bind(null,e),e}class PR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=S0(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return sR(this.persistence,new iR,e.initialUser,this.M)}_a(e){return new mP(wA.Wi,this.M)}da(e){return new pR}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FR extends PR{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield wS(r.ga.syncEngine),yield dy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return sR(this.persistence,new iR,e.initialUser,this.M)}wa(e){return new Qk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new fA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mR(),PD(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new pR}}class c1 extends FR{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof IA&&(r.sharedClientState.syncEngine={kr:r1.bind(null,i),Mr:a1.bind(null,i),Or:u1.bind(null,i),Os:o1.bind(null,i),Nr:n1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(c){yield function s1(n,e){return mS.apply(this,arguments)}(r.ga.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}da(e){const t=mR();if(!IA.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bS{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>RR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=XP.bind(null,r.syncEngine),yield $A(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LP}createDatastore(e){const t=S0(e.databaseInfo.databaseId),r=new wP(e.databaseInfo);return new CP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>RR(this.syncEngine,p,0),c=gR.vt()?new gR:new _P,new TP(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,y,b){const S=new GP(r,i,u,c,p,y);return b&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield cy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function LR(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class VD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d1{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new UP(JSON.parse(u),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class h1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,c){const p=qe(u),y=Lc(p.M)+"/documents",b={documents:c.map(B=>Fc(p.M,B))},S=yield p.co("BatchGetDocuments",y,b),M=new Map;S.forEach(B=>{const G=function dk(n,e){return"found"in e?function(t,r){Mt(!!r.found);const i=po(t,r.found.name),u=jn(r.found.updateTime),c=new Ei({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const i=po(t,r.missing),u=jn(r.readTime);return Nn.newNoDocument(i,u)}(n,e):it()}(p.M,B);M.set(G.key.toString(),G)});const F=[];return c.forEach(B=>{const G=M.get(B.toString());Mt(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=je.fromPath(i);e.mutations.push(new ED(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const c=qe(i),p=Lc(c.M)+"/documents",y={writes:u.map(b=>E0(c.M,b))};yield c.ro("Commit",p,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class f1{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new TA(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new h1(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ca(u)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!al(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!wD(t)}return!1}}class p1{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=Kb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(p){Pe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function VR(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield oR(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),DS.apply(this,arguments)}function BR(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield IS(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>DR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>DR(e.remoteStore,u)),n.onlineComponents=e}),CS.apply(this,arguments)}function IS(n){return TS.apply(this,arguments)}function TS(){return TS=(0,ve.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield VR(n,new PR)),n.offlineComponents}),TS.apply(this,arguments)}function BD(n){return AS.apply(this,arguments)}function AS(){return AS=(0,ve.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield BR(n,new bS)),n.onlineComponents}),AS.apply(this,arguments)}function UR(n){return IS(n).then(e=>e.persistence)}function SS(n){return IS(n).then(e=>e.localStore)}function jR(n){return BD(n).then(e=>e.remoteStore)}function MS(n){return BD(n).then(e=>e.syncEngine)}function yy(n){return xS.apply(this,arguments)}function xS(){return xS=(0,ve.Z)(function*(n){const e=yield BD(n),t=e.eventManager;return t.onListen=qP.bind(null,e.syncEngine),t.onUnlisten=zP.bind(null,e.syncEngine),t}),xS.apply(this,arguments)}function $R(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,p,y){const b=new VD({next:M=>{u.enqueueAndForget(()=>WA(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&p&&"server"===p.source?y.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new YA(Oc(c.path),b,{includeMetadataChanges:!0,Du:!0});return qA(i,S)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}function HR(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,p,y){const b=new VD({next:M=>{u.enqueueAndForget(()=>WA(i,S)),M.fromCache&&"server"===p.source?y.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new YA(c,b,{includeMetadataChanges:!0,Du:!0});return qA(i,S)}(yield yy(n),n.asyncQueue,e,t,r)})),r.promise}const GR=new Map;function RS(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qR(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zR(n){if(!je.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WR(n){if(je.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UD(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KR(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,qR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class R0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZR({}),this._settingsFrozen=!1,e instanceof ol?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Om;switch(t.type){case"gapi":const r=t.client;return Mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new s0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GR.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),GR.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class cl extends as{constructor(e,t,r){super(e,t,Oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new je(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function YR(n,e,...t){if(n=(0,Kt.m9)(n),RS("collection","path",e),n instanceof R0){const r=Qt.fromString(e,...t);return WR(r),new cl(n,null,r)}{if(!(n instanceof Wn||n instanceof cl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return WR(r),new cl(n.firestore,null,r)}}function jD(n,e,...t){if(n=(0,Kt.m9)(n),1===arguments.length&&(e=Kb.R()),RS("doc","path",e),n instanceof R0){const r=Qt.fromString(e,...t);return zR(r),new Wn(n,null,new je(r))}{if(!(n instanceof Wn||n instanceof cl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return zR(r),new Wn(n.firestore,n instanceof cl?n.converter:null,new je(r))}}function QR(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),(n instanceof Wn||n instanceof cl)&&(e instanceof Wn||e instanceof cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JR(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&qm(n._query,e._query)&&n.converter===e.converter}class I1{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new TA(this,"async_queue_retry"),this.Ua=()=>{const t=PD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=PD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=PD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Gr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!_p(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,vr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=GA.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(i),i}qa(){this.Fa&&it()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function NS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class T1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends R0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new I1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||XR(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||XR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Pm(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new p1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function eN(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield VR(n,t),yield BR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function tN(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(zr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dl(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tp{constructor(e){this._methodName=e}}class $D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const F1=/^__.*__$/;class L1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new _h(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class nN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _h(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class HD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new HD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return zD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(rN(this.Ya)&&F1.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class V1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||S0(e)}uc(e,t,r,i=!1){return new HD({Ya:e,methodName:t,oc:r,path:qr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ap(n){const e=n._freezeSettings(),t=S0(n._databaseId);return new V1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GD(n,e,t,r,i,u={}){const c=n.uc(u.merge||u.mergeFields?2:0,e,t,i);FS("Data must be an object, but it was:",c,r);const p=oN(r,c);let y,b;if(u.merge)y=new up(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=LS(e,M,t);if(!c.contains(F))throw new Re(ce.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);uN(S,F)||S.push(F)}y=new up(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new L1(new Ei(p),y,b)}class N0 extends Tp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof N0}}function iN(n,e,t){return new HD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class OS extends Tp{_toFieldTransform(e){return new yh(e.path,new mh)}isEqual(e){return e instanceof OS}}class B1 extends Tp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=iN(this,e,!0),r=this.ac.map(u=>Sp(u,t)),i=new cu(r);return new yh(e.path,i)}isEqual(e){return this===e}}class U1 extends Tp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=iN(this,e,!0),r=this.ac.map(u=>Sp(u,t)),i=new Ta(r);return new yh(e.path,i)}isEqual(e){return this===e}}class j1 extends Tp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new hp(e.M,g0(e.M,this.cc));return new yh(e.path,t)}isEqual(e){return this===e}}function kS(n,e,t,r){const i=n.uc(1,e,t);FS("Data must be an object, but it was:",i,r);const u=[],c=Ei.empty();sl(r,(y,b)=>{const S=qD(e,y,t);b=(0,Kt.m9)(b);const M=i.nc(S);if(b instanceof N0)u.push(S);else{const F=Sp(b,M);null!=F&&(u.push(S),c.set(S,F))}});const p=new up(u);return new nN(c,p,i.fieldTransforms)}function PS(n,e,t,r,i,u){const c=n.uc(1,e,t),p=[LS(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(LS(e,u[F])),y.push(u[F+1]);const b=[],S=Ei.empty();for(let F=p.length-1;F>=0;--F)if(!uN(b,p[F])){const B=p[F];let G=y[F];G=(0,Kt.m9)(G);const ne=c.nc(B);if(G instanceof N0)b.push(B);else{const we=Sp(G,ne);null!=we&&(b.push(B),S.set(B,we))}}const M=new up(b);return new nN(S,M,c.fieldTransforms)}function sN(n,e,t,r=!1){return Sp(t,n.uc(r?4:3,e))}function Sp(n,e){if(aN(n=(0,Kt.m9)(n)))return FS("Unsupported field value:",e,n),oN(n,e);if(n instanceof Tp)return function(t,r){if(!rN(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Sp(c,r.sc(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Kt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return g0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ur.fromDate(t);return{timestampValue:jt(r.M,i)}}if(t instanceof ur){const i=new ur(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jt(r.M,i)}}if(t instanceof $D)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof dl)return{bytesValue:hn(r.M,t._byteString)};if(t instanceof Wn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${UD(t)}`)}(n,e)}function oN(n,e){const t={};return o0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sl(n,(r,i)=>{const u=Sp(i,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function aN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ur||n instanceof $D||n instanceof dl||n instanceof Wn||n instanceof Tp)}function FS(n,e,t){if(!aN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=UD(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function LS(n,e,t){if((e=(0,Kt.m9)(e))instanceof Bc)return e._internalPath;if("string"==typeof e)return qD(n,e);throw zD("Field path arguments must be of type string or ",n,!1,void 0,t)}const $1=new RegExp("[~\\*/\\[\\]]");function qD(n,e,t){if(e.search($1)>=0)throw zD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bc(...e.split("."))._internalPath}catch(r){throw zD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(ce.INVALID_ARGUMENT,p+n+y)}function uN(n,e){return n.some(t=>t.isEqual(e))}class O0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new H1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class H1 extends O0{data(){return super.data()}}function WD(n,e){return"string"==typeof e?qD(n,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}class Mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends O0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new k0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class k0 extends Uc{data(e={}){return super.data(e)}}class Ih{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new k0(this._firestore,this._userDataWriter,r.key,r,new Mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new k0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new k0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:G1(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function G1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function lN(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ih&&e instanceof Ih&&n._firestore===e._firestore&&JR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cN(n){if(Hm(n)&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P0{}function Th(n,...e){for(const t of e)n=t._apply(n);return n}class q1 extends P0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Ap(e.firestore),r=function(i,u,c,p,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){mN(S,b);const B=[];for(const G of S)B.push(gN(p,i,G));M={arrayValue:{values:B}}}else M=gN(p,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||mN(S,b),M=sN(c,"where",S,"in"===b||"not-in"===b);const F=Wr.create(y,b,M);return function(B,G){if(G.S()){const we=lD(B);if(null!==we&&!we.isEqual(G.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${G.field.toString()}'`);const Ze=uD(B);null!==Ze&&yN(0,G.field,Ze)}const ne=function(we,Ze){for(const Le of we.filters)if(Ze.indexOf(Le.op)>=0)return Le.op;return null}(B,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ne)throw new Re(ce.INVALID_ARGUMENT,ne===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new as(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new lu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class W1 extends P0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Nc(i,u);return function(p,y){if(null===uD(p)){const b=lD(p);null!==b&&yN(0,b,y.field)}}(r,c),c}(e._query,this.hc,this.dc);return new as(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new lu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dN extends P0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new as(e.firestore,e.converter,cD(e._query,this._c,this.wc))}}class hN extends P0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=pN(e,this.type,this.mc,this.gc);return new as(e.firestore,e.converter,(i=t,new lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fN extends P0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=pN(e,this.type,this.mc,this.gc);return new as(e.firestore,e.converter,(i=t,new lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pN(n,e,t,r){if(t[0]=(0,Kt.m9)(t[0]),t[0]instanceof O0)return function(i,u,c,p,y){if(!p)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of gh(i))if(S.field.isKeyField())b.push(ch(u,p.key));else{const M=p.data.field(S.field);if(Jb(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new ll(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ap(n.firestore);return function(u,c,p,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const G=b[B];if(M[B].field.isKeyField()){if("string"!=typeof G)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!Gm(u)&&-1!==G.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const ne=u.path.child(Qt.fromString(G));if(!je.isDocumentKey(ne))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const we=new je(ne);F.push(ch(c,we))}else{const ne=sN(p,y,G);F.push(ne)}}return new ll(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gN(n,e,t){if("string"==typeof(t=(0,Kt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gm(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!je.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(n,new je(r))}if(t instanceof Wn)return ch(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${UD(t)}.`)}function mN(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yN(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class VS{convertValue(e,t="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ah(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return sl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new $D(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=FT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(km(e));default:return null}}convertTimestamp(e){const t=Mc(e);return new ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Mt(Sx(r));const i=new ol(r.get(1),r.get(3)),u=new je(r.popFirst(5));return i.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function KD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tF extends VS{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class _N{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ap(e)}set(e,t,r){this._verifyNotCommitted();const i=Ah(e,this._firestore),u=KD(i.converter,t,r),c=GD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Ah(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Bc?PS(this._dataReader,"WriteBatch.update",u._key,t,r,i):kS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ah(e,this._firestore);return this._mutations=this._mutations.concat(new pp(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ah(n,e){if((n=(0,Kt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xp extends VS{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function vN(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Xn),i=KD(n.converter,e,t);return _y(r,[GD(Ap(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Er.none())])}function EN(n,e,t,...r){n=sn(n,Wn);const i=sn(n.firestore,Xn),u=Ap(i);let c;return c="string"==typeof(e=(0,Kt.m9)(e))||e instanceof Bc?PS(u,"updateDoc",n._key,e,t,r):kS(u,"updateDoc",n._key,e),_y(i,[c.toMutation(n._key,Er.exists(!0))])}function wN(n,...e){var t,r,i;n=(0,Kt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||NS(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(NS(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof Wn)b=sn(n.firestore,Xn),S=Oc(n._key.path),y={next:M=>{e[c]&&e[c](BS(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=sn(n,as);b=sn(M.firestore,Xn),S=M._query;const F=new xp(b);y={next:B=>{e[c]&&e[c](new Ih(b,F,M,B))},error:e[c+1],complete:e[c+2]},cN(n._query)}return function(M,F,B,G){const ne=new VD(G),we=new YA(F,ne,B);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return qA(yield yy(M),we)})),()=>{ne.pa(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return WA(yield yy(M),we)}))}}(Kr(b),S,p,y)}function _y(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function WP(n,e,t){return tS.apply(this,arguments)}(yield MS(t),r,i)})),i.promise}(Kr(n),e)}function BS(n,e,t){const r=t.docs.get(e._key),i=new xp(n);return new Uc(n,i,e._key,r,new Mp(t.hasPendingWrites,t.fromCache),e.converter)}class dF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ap(e)}get(e){const t=Ah(e,this._firestore),r=new tF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new O0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new O0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Ah(e,this._firestore),u=KD(i.converter,t,r),c=GD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Ah(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Bc?PS(this._dataReader,"Transaction.update",u._key,t,r,i):kS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Ah(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ah(e,this._firestore),r=new xp(this._firestore);return super.get(e).then(i=>new Uc(this._firestore,r,t._key,i._document,new Mp(!1,!1),t.converter))}}function US(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function DN(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function CN(){if(!function Qb(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Da=pc.SDK_VERSION,(0,pc._registerComponent)(new em.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Xn(i,new NT(t.getProvider("auth-internal")),new kT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,pc.registerVersion)(qb,"3.4.7",n),(0,pc.registerVersion)(qb,"3.4.7","esm2017")}();class F0{constructor(e){this._delegate=e}static fromBase64String(e){return CN(),new F0(dl.fromBase64String(e))}static fromUint8Array(e){return DN(),new F0(dl.fromUint8Array(e))}toBase64(){return CN(),this._delegate.toBase64()}toUint8Array(){return DN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jS(n){return function EF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wF{enableIndexedDbPersistence(e,t){return function S1(n,e){tN(n=sn(n,Xn));const t=Kr(n),r=n._freezeSettings(),i=new bS;return eN(t,i,new FR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function M1(n){tN(n=sn(n,Xn));const e=Kr(n),t=n._freezeSettings(),r=new bS;return eN(e,r,new c1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function x1(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!hu.vt())return Promise.resolve();const i=r+"main";yield hu.delete(i)}),function(r){return t.apply(this,arguments)})(pA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ol||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&op("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function D1(n,e,t,r={}){var i;const u=(n=sn(n,R0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&op("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=vi.MOCK_USER;else{c=(0,Kt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vi(y)}n._authCredentials=new zb(new n0(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function N1(n){return function g1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield UR(n),t=yield jR(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.lu.delete(0),M0(i)}(t)}))}(Kr(n=sn(n,Xn)))}(this._delegate)}disableNetwork(){return function O1(n){return function m1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield UR(n),t=yield jR(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=qe(i);u.lu.add(0),yield cy(u),u._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=sn(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,qR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function R1(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function QP(n,e){return oS.apply(this,arguments)}(yield MS(e),t)})),t.promise}(Kr(n=sn(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function cF(n,e){return function v1(n,e){const t=new VD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield yy(n),i=t,qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield yy(n),i=t,void qe(r).Tu.delete(i);var r,i}))}}(Kr(n=sn(n,Xn)),NS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,YR(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Aa(this,jD(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function C1(n,e){if(n=sn(n,R0),RS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new lu(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hF(n,e){return function E1(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,BD(i).then(u=>u.datastore));var i;new f1(n.asyncQueue,r,e,t).run()})),t.promise}(Kr(n=sn(n,Xn)),t=>e(new dF(n,t)))}(this._delegate,t=>e(new TN(this,t)))}batch(){return Kr(this._delegate),new AN(new _N(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function k1(n,e){const t=Kr(n=sn(n,Xn)),r=new T1;return function w1(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return LR(y,b);if(y instanceof ArrayBuffer)return LR(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new d1(y,c);var y}(t,S0(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function l1(n,e,t){const r=qe(n);var i;(i=(0,ve.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(F,B){const G=qe(F),ne=jn(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",we=>G.ds.getBundleMetadata(we,B.id)).then(we=>!!we&&we.createTime.compareTo(ne)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(TR(y));const b=new jP(y,u.localStore,c.M);let S=yield c.fa();for(;S;){const F=yield b.Nu(S);F&&p._updateProgress(F),S=yield c.fa()}const M=yield b.complete();return yield Vc(u,M.Ou,void 0),yield function(F,B){const G=qe(F);return G.persistence.runTransaction("Save bundle","readwrite",ne=>G.ds.saveBundleMetadata(ne,B))}(u.localStore,y),p._completeWith(M.progress),Promise.resolve(M.Mu)}catch(y){return op("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function P1(n,e){return function b1(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.ds.getNamedQuery(u,r))}(yield SS(n),e)}))}(Kr(n=sn(n,Xn)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class ZD extends VS{constructor(e){super(),this.firestore=e}convertBytes(e){return new F0(new dl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Aa.forKey(t,this.firestore,null)}}class TN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}get(e){const t=Np(e);return this._delegate.get(t).then(r=>new L0(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Np(e);return r?(US("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Np(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Np(e);return this._delegate.delete(t),this}}class AN{constructor(e){this._delegate=e}set(e,t,r){const i=Np(e);return r?(US("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Np(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Np(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new k0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new V0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Rp(e,new ZD(e),t),i.set(t,u)),u}}Rp.INSTANCES=new WeakMap;class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Aa(t,new Wn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Aa(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,YR(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Wn&&QR(this._delegate,e)}set(e,t){t=US("DocumentReference.set",t);try{return t?vN(this._delegate,e,t):vN(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EN(this._delegate,e):EN(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uF(n){return _y(sn(n.firestore,Xn),[new pp(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=SN(e),r=MN(e,i=>new L0(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rF(n){n=sn(n,Wn);const e=sn(n.firestore,Xn),t=Kr(e),r=new xp(e);return function y1(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const p=yield function(y,b){const S=qe(y);return S.persistence.runTransaction("read document","readonly",M=>S.ai.Bs(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=fy(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield SS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Uc(e,r,n._key,i,new Mp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function iF(n){n=sn(n,Wn);const e=sn(n.firestore,Xn);return $R(Kr(e),n._key,{source:"server"}).then(t=>BS(e,n,t))}(this._delegate):function nF(n){n=sn(n,Wn);const e=sn(n.firestore,Xn);return $R(Kr(e),n._key).then(t=>BS(e,n,t))}(this._delegate),t.then(r=>new L0(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function SN(n){for(const e of n)if("object"==typeof e&&!jS(e))return e;return{}}function MN(n,e){var t,r;let i;return i=jS(n[0])?n[0]:jS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class L0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lN(this._delegate,e._delegate)}}class V0 extends L0{data(e){const t=this._delegate.data(e);return function Nm(n,e){n||it()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}where(e,t,r){try{return new Rs(this.firestore,Th(this._delegate,function z1(n,e,t){const r=e,i=WD("where",n);return new q1(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Th(this._delegate,function K1(n,e="asc"){const t=e,r=WD("orderBy",n);return new W1(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Th(this._delegate,function Z1(n){return KR("limit",n),new dN("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Th(this._delegate,function Y1(n){return KR("limitToLast",n),new dN("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Th(this._delegate,function Q1(...n){return new hN("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Th(this._delegate,function J1(...n){return new hN("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Th(this._delegate,function X1(...n){return new fN("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Th(this._delegate,function eF(...n){return new fN("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return JR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oF(n){n=sn(n,as);const e=sn(n.firestore,Xn),t=Kr(e),r=new xp(e);return function _1(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const p=yield ND(i,u,!0),y=new MR(u,p.hi),b=y.Gu(p.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const y=fy(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield SS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ih(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function aF(n){n=sn(n,as);const e=sn(n.firestore,Xn),t=Kr(e),r=new xp(e);return HR(t,n._query,{source:"server"}).then(i=>new Ih(e,r,n,i))}(this._delegate):function sF(n){n=sn(n,as);const e=sn(n.firestore,Xn),t=Kr(e),r=new xp(e);return cN(n._query),HR(t,n._query).then(i=>new Ih(e,r,n,i))}(this._delegate),t.then(r=>new $S(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SN(e),r=MN(e,i=>new $S(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wN(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}class DF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new V0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $S{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new V0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new V0(this._firestore,r))})}isEqual(e){return lN(this._delegate,e._delegate)}}class vy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Aa(this.firestore,e):null}doc(e){try{return new Aa(this.firestore,void 0===e?jD(this._delegate):jD(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function lF(n,e){const t=sn(n.firestore,Xn),r=jD(n),i=KD(n.converter,e);return _y(t,[GD(Ap(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Aa(this.firestore,t))}isEqual(e){return QR(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Rp.getInstance(this.firestore,e):null))}}function Np(n){return sn(n,Wn)}class HS{constructor(...e){this._delegate=new Bc(...e)}static documentId(){return new HS(qr.keyField().canonicalString())}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Op{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pF(){return new OS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Op(e)}static delete(){const e=function fF(){return new N0("deleteField")}();return e._methodName="FieldValue.delete",new Op(e)}static arrayUnion(...e){const t=function gF(...n){return new B1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Op(t)}static arrayRemove(...e){const t=function mF(...n){return new U1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Op(t)}static increment(e){const t=function yF(n){return new j1("increment",n)}(e);return t._methodName="FieldValue.increment",new Op(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const CF={Firestore:IN,GeoPoint:$D,Timestamp:ur,Blob:F0,Transaction:TN,WriteBatch:AN,DocumentReference:Aa,DocumentSnapshot:L0,Query:Rs,QueryDocumentSnapshot:V0,QuerySnapshot:$S,CollectionReference:vy,FieldPath:HS,FieldValue:Op,setLogLevel:function bF(n){!function RT(n){il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function TF(n){(function IF(n,e){n.INTERNAL.registerComponent(new em.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},CF)))})(n,(e,t)=>new IN(e,t,new wF)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Xw.Z);var YD=k(5363),AF=k(6063);class SF extends sr.x{constructor(e=1/0,t=1/0,r=AF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)p=y;p&&r.splice(0,p+1)}}}var MF=k(3099);function xN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,MF.B)({connector:()=>new SF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function RN(n,e){return(0,hi.m)(e)?Bn(()=>n,e):Bn(()=>n)}var GS=k(9468);k(5867);const ON=new Map,kF={activated:!1,tokenObservers:[]},PF={initialized:!1,enabled:!1};function Ii(n){return ON.get(n)||kF}function fu(n,e){ON.set(n,e)}function JD(){return PF}class UF{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Kt.BH,yield function jF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Kt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PN(n){if(!Ii(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function KS(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(M){throw Ns.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw Ns.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(M){throw Ns.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),ZS.apply(this,arguments)}function zF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const B0="firebase-app-check-store";let tC=null;function LN(){return tC||(tC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ns.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(B0,{keyPath:"compositeKey"})}}catch(t){e(Ns.create("storage-open",{originalErrorMessage:t.message}))}}),tC)}function YS(){return YS=(0,ve.Z)(function*(n,e){const r=(yield LN()).transaction(B0,"readwrite"),u=r.objectStore(B0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(Ns.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),YS.apply(this,arguments)}const U0=new el.Yd("@firebase/app-check");function jN(n,e){return(0,Kt.hl)()?function YF(n,e){return function VN(n,e){return YS.apply(this,arguments)}(function UN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{U0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $N(){return JD().enabled}function HN(){return eM.apply(this,arguments)}function eM(){return eM=(0,ve.Z)(function*(){const n=JD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),eM.apply(this,arguments)}const nL={error:"UNKNOWN_ERROR"};function rL(n){return Kt.US.encodeString(JSON.stringify(n),!1)}function nC(n){return tM.apply(this,arguments)}function tM(){return tM=(0,ve.Z)(function*(n,e=!1){const t=n.app;PN(t);const r=Ii(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&rC(y)&&(i=y)}if(!e&&i&&rC(i))return{token:i.token};let p,c=!1;if($N()){r.exchangeTokenPromise||(r.exchangeTokenPromise=KS(zF(t,yield HN()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield jN(t,y),fu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?U0.warn(y.message):U0.error(y),u=y}return i?(p={token:i.token},fu(t,Object.assign(Object.assign({},r),{token:i})),yield jN(t,i)):p=sL(u),c&&qN(t,p),p}),tM.apply(this,arguments)}function rM(n,e){const t=Ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),fu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function GN(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function iL(n){const{app:e}=n;return new UF((0,ve.Z)(function*(){let r;if(r=Ii(e).token?yield nC(n,!0):yield nC(n),r.error)throw r.error}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),fu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qN(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function rC(n){return n.expireTimeMillis-Date.now()>0}function sL(n){return{token:rL(nL),error:n}}class oL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)rM(this.app,t.next);return Promise.resolve()}}const XN="app-check-internal";!function EL(){(0,pc._registerComponent)(new em.wA("app-check",n=>function aL(n,e){return new oL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XN).initialize()})),(0,pc._registerComponent)(new em.wA(XN,n=>function uL(n){return{getToken:e=>nC(n,e),addTokenListener:e=>function nM(n,e,t,r){const{app:i}=n,u=Ii(i),c={next:t,error:r,type:e};if(fu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&rC(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),GN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>GN(n))}(n,"INTERNAL",e),removeTokenListener:e=>rM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pc.registerVersion)("@firebase/app-check","0.5.5")}();class aM{constructor(){return(0,jr.vb)("app-check")}}"undefined"!=typeof window&&window;var IL=k(127);const tO=new h.OlP("angularfire2.auth.use-emulator"),nO=new h.OlP("angularfire2.auth.settings"),rO=new h.OlP("angularfire2.auth.tenant-id"),iO=new h.OlP("angularfire2.auth.langugage-code"),sO=new h.OlP("angularfire2.auth.use-device-language"),oO=new h.OlP("angularfire.auth.persistence"),aO=(n,e,t,r,i,u,c,p)=>(0,co.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return p&&y.setPersistence(p),y},[t,r,i,u,c,p]);let uO=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B){const G=new sr.x,ne=gt(void 0).pipe((0,YD.Q)(c.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Bt.U)(()=>(0,co.on)(t,u,r)),(0,Bt.U)(we=>aO(we,u,p,b,S,M,y,F)),xN({bufferSize:1,refCount:!1}));if(gr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{ne.pipe(to()).subscribe();const Ze=ne.pipe(Bn(ze=>ze.getRedirectResult().then(_t=>_t,()=>null)),jr.iC,xN({bufferSize:1,refCount:!1})),Le=ne.pipe(Bn(ze=>new Fr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onAuthStateChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))})))),Ke=ne.pipe(Bn(ze=>new Fr.y(_t=>({unsubscribe:u.runOutsideAngular(()=>ze.onIdTokenChanged(ct=>_t.next(ct),ct=>_t.error(ct),()=>_t.complete()))}))));this.authState=Ze.pipe(RN(Le),(0,GS.R)(c.outsideAngular),(0,YD.Q)(c.insideAngular)),this.user=Ze.pipe(RN(Ke),(0,GS.R)(c.outsideAngular),(0,YD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Bn(ze=>ze?(0,Ln.D)(ze.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Bn(ze=>ze?(0,Ln.D)(ze.getIdTokenResult()):gt(null))),this.credential=(0,IE.T)(Ze,G,this.authState.pipe(Qi(ze=>!ze))).pipe((0,Bt.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,GS.R)(c.outsideAngular),(0,YD.Q)(c.insideAngular))}return(0,co.pX)(this,ne,u,{spy:{apply:(we,Ze,Le)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Le.then(Ke=>G.next(Ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(co.Dh),h.LFG(co.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(jr.HU),h.LFG(tO,8),h.LFG(nO,8),h.LFG(rO,8),h.LFG(iO,8),h.LFG(sO,8),h.LFG(oO,8),h.LFG(aM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function lO(n,e){return function AL(n,e=Yw.z){return new Fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function lM(n,e){return lO(n,e).pipe((0,Bt.U)(t=>({payload:t,type:"query"})))}function sC(n,e){return lM(n,e).pipe(Pi(void 0),Xg(),(0,Bt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function cO(n,e,t){return sC(n,t).pipe(Mr((r,i)=>function ML(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Qw(n,e=ci.y){return n=null!=n?n:Jw,(0,Lr.e)((t,r)=>{let i,u=!0;t.subscribe((0,qn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,Bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function cM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function dO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class hO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Pi(void 0),Xg(),Qi(([r,i])=>i.length>0||!r),(0,Bt.U)(([r,i])=>i),jr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dO(e);return cO(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr.iC)}valueChanges(e={}){return lM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),jr.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(jr.iC)}add(e){return this.ref.add(e)}doc(e){return new fO(this.ref.doc(e),this.afs)}}class fO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=mO(r,t);return new hO(i,u,this.afs)}snapshotChanges(){return function SL(n,e){return lO(n,e).pipe(Pi(void 0),Xg(),(0,Bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(jr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ln.D)(this.ref.get(e)).pipe(jr.iC)}}class RL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qi(t=>t.length>0),jr.iC):sC(this.query,this.afs.schedulers.outsideAngular).pipe(jr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dO(e);return cO(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr.iC)}valueChanges(e={}){return lM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),jr.iC)}get(e){return(0,Ln.D)(this.query.get(e)).pipe(jr.iC)}}const pO=new h.OlP("angularfire2.enableFirestorePersistence"),gO=new h.OlP("angularfire2.firestore.persistenceSettings"),NL=new h.OlP("angularfire2.firestore.settings"),OL=new h.OlP("angularfire2.firestore.use-emulator");function mO(n,e=(t=>t)){return{query:e(n),ref:n}}let yO=(()=>{class n{constructor(t,r,i,u,c,p,y,b,S,M,F,B,G,ne,we,Ze,Le){this.schedulers=y;const Ke=(0,co.on)(t,p,r),ze=S;M&&aO(Ke,p,F,G,ne,we,B,Ze),[this.firestore,this.persistenceEnabled$]=(0,co.cc)(`${Ke.name}.firestore`,"AngularFirestore",Ke.name,()=>{const _t=p.runOutsideAngular(()=>Ke.firestore());if(u&&_t.settings(u),ze&&_t.useEmulator(...ze),i&&!gr(c)){const ct=()=>{try{return(0,Ln.D)(_t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jt){return"undefined"!=typeof console&&console.warn(Jt),gt(!1)}};return[_t,p.runOutsideAngular(ct)]}return[_t,gt(!1)]},[u,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=mO(i,r),p=this.schedulers.ngZone.run(()=>u);return new hO(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new RL(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new fO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(co.Dh),h.LFG(co.xv,8),h.LFG(pO,8),h.LFG(NL,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(jr.HU),h.LFG(gO,8),h.LFG(OL,8),h.LFG(uO,8),h.LFG(tO,8),h.LFG(nO,8),h.LFG(rO,8),h.LFG(iO,8),h.LFG(sO,8),h.LFG(oO,8),h.LFG(aM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kL=(()=>{class n{constructor(){IL.Z.registerVersion("angularfire",jr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:pO,useValue:!0},{provide:gO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[yO]}),n})(),j0=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,Bt.U)(r=>((n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(p=>u[p]!==c[p]))(t,i,e))})(r,t)))}remove(t){this._client.doc("tasks/"+t).delete()}set(t){this._client.doc("tasks/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yO))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[j0,{provide:Ww,useExisting:j0},{provide:fE,useExisting:j0},{provide:pE,useExisting:j0},{provide:oo,useExisting:j0}],imports:[[kL]]}),n})(),vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,Ag.forRoot(),XE.forRoot()]]}),n})(),EO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir]]}),n})(),FL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,ma.forChild([{path:"",component:av}]),Jg,_O,vO,EO,lE]]}),n})(),LL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list-of-tasks-page"]],decls:6,vars:0,consts:[[1,"container","mt-3","mb-3"],[1,"container"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"lib-today-date"),h.qZA(),h.TgZ(2,"div",0),h._UZ(3,"lib-show-all-tasks"),h.qZA(),h.TgZ(4,"div",1),h._UZ(5,"lib-home-page-add-task"),h.qZA())},directives:[a_,pI,sE],encapsulation:2,changeDetection:0}),n})(),VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[ir,ma.forChild([{path:"",component:LL}]),lE,vO,_O,dE]]}),n})();const BL=[{path:"",loadChildren:()=>hE},{path:"add-task",loadChildren:()=>FL},{path:"all-tasks",loadChildren:()=>VL}];let UL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ma.forRoot(BL)],ma]}),n})(),jL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-md","navbar-dark",2,"background-color","#7749f8"],[1,"container"],[1,"navbar-brand","fw-bold"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"p",2),h._uU(3,"AWESOME TO DO APP"),h.qZA()()())},encapsulation:2,changeDetection:0}),n})(),$L=(()=>{class n{constructor(){this.title="tasks"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"lib-navbar")(1,"router-outlet")},directives:[jL,Jl],styles:[""]}),n})();const nn=!1;function wO(n){return new h.vHH(3e3,nn)}function bV(){return"undefined"!=typeof window&&void 0!==window.document}function dM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Sh(n){switch(n.length){case 0:return new va;case 1:return n[0];default:return new x_(n)}}function bO(n,e,t,r,i={},u={}){const c=[],p=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,B=F&&b||{};Object.keys(S).forEach(G=>{let ne=G,we=S[G];if("offset"!==G)switch(ne=e.normalizePropertyName(ne,c),we){case"!":we=i[G];break;case Yu:we=u[G];break;default:we=e.normalizeStyleValue(G,ne,we,c)}B[ne]=we}),F||p.push(B),b=B,y=M}),c.length)throw function dV(n){return new h.vHH(3502,nn)}();return p}function hM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fM(t,"destroy",n)))}}function fM(n,e,t){const r=t.totalTime,u=pM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function pM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function zo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function DO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let gM=(n,e)=>!1,CO=(n,e,t)=>[],IO=null;function mM(n){const e=n.parentNode||n.host;return e===IO?null:e}(dM()||"undefined"!=typeof Element)&&(bV()?(IO=(()=>document.documentElement)(),gM=(n,e)=>{for(;e;){if(e===n)return!0;e=mM(e)}return!1}):gM=(n,e)=>n.contains(e),CO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let kp=null,TO=!1;function AO(n){kp||(kp=function CV(){return"undefined"!=typeof document?document.body:null}()||{},TO=!!kp.style&&"WebkitAppearance"in kp.style);let e=!0;return kp.style&&!function DV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in kp.style,!e&&TO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in kp.style)),e}const SO=gM,MO=CO;let xO=(()=>{class n{validateStyleProperty(t){return AO(t)}matchesElement(t,r){return!1}containsElement(t,r){return SO(t,r)}getParentElement(t){return mM(t)}query(t,r,i){return MO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],y){return new va(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yM=(()=>{class n{}return n.NOOP=new xO,n})();const _M="ng-enter",aC="ng-leave",uC="ng-trigger",lC=".ng-trigger",NO="ng-animating",vM=".ng-animating";function Pp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EM(parseFloat(e[1]),e[2])}function EM(n,e){return"s"===e?1e3*n:n}function cC(n,e,t){return n.hasOwnProperty("duration")?n:function AV(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(wO()),{duration:0,delay:0,easing:""};i=EM(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(u=EM(parseFloat(y),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function HL(){return new h.vHH(3100,nn)}()),p=!0),u<0&&(e.push(function GL(){return new h.vHH(3101,nn)}()),p=!0),p&&e.splice(y,0,wO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Ey(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Mh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ey(n,t);return t}function kO(n,e,t){return t?e+":"+t+";":""}function PO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=kO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=kO(0,xV(t),n.style[t]));n.setAttribute("style",e)}function hl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=bM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),dM()&&PO(n))}function Fp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=bM(t);n.style[r]=""}),dM()&&PO(n))}function $0(n){return Array.isArray(n)?1==n.length?n[0]:Od(n):n}const wM=new RegExp("{{\\s*(.+?)\\s*}}","g");function FO(n){let e=[];if("string"==typeof n){let t;for(;t=wM.exec(n);)e.push(t[1]);wM.lastIndex=0}return e}function dC(n,e,t){const r=n.toString(),i=r.replace(wM,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function zL(n){return new h.vHH(3003,nn)}()),p=""),p.toString()});return i==r?n:i}function hC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const MV=/-+([a-z0-9])/g;function bM(n){return n.replace(MV,(...e)=>e[1].toUpperCase())}function xV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function WL(n){return new h.vHH(3004,nn)}()}}function LO(n,e){return window.getComputedStyle(n)[e]}function FV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function LV(n,e,t){if(":"==n[0]){const y=function VV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function aV(n){return new h.vHH(3016,nn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function oV(n){return new h.vHH(3015,nn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(VO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(VO(c,i))}(r,t,e)):t.push(n),t}const mC=new Set(["true","1"]),yC=new Set(["false","0"]);function VO(n,e){const t=mC.has(n)||yC.has(n),r=mC.has(e)||yC.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?mC.has(n):yC.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?mC.has(e):yC.has(e)),c&&p}}const BV=new RegExp("s*:selfs*,?","g");function DM(n,e,t,r){return new UV(n).build(e,t,r)}class UV{constructor(e){this._driver=e}build(e,t,r){const i=new HV(t);this._resetContextStyleTimingState(i);const u=Wo(this,$0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function ZL(){return new h.vHH(3006,nn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function YL(){return new h.vHH(3007,nn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(_C(p)){const y=p;Object.keys(y).forEach(b=>{FO(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(hC(u.values()),t.errors.push(function QL(n,e){return new h.vHH(3008,nn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Wo(this,$0(e.animation),t);return{type:1,matchers:FV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Lp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Wo(this,r,t)),options:Lp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Wo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Lp(e.options)}}visitAnimate(e,t){const r=function qV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return CM(cC(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=CM(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||cC(r,e),CM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Mg({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=Mg(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Yu?r.push(c):t.errors.push(function JL(n){return new h.vHH(3002,nn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(_C(c)){const p=c,y=p.easing;if(y&&(u=y,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function XL(n,e,t,r,i){return new h.vHH(3010,nn)}()),S=!1),u=b.startTime),S&&(y[p]={startTime:u,endTime:i}),t.options&&function SV(n,e,t){const r=e.params||{},i=FO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function qL(n){return new h.vHH(3001,nn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function eV(){return new h.vHH(3011,nn)}()),r;let u=0;const c=[];let p=!1,y=!1,b=0;const S=e.steps.map(Ze=>{const Le=this._makeStyleAst(Ze,t);let Ke=null!=Le.offset?Le.offset:function GV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(_C(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(_C(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Le.styles),ze=0;return null!=Ke&&(u++,ze=Le.offset=Ke),y=y||ze<0||ze>1,p=p||ze<b,b=ze,c.push(ze),Le});y&&t.errors.push(function tV(){return new h.vHH(3012,nn)}()),p&&t.errors.push(function nV(){return new h.vHH(3200,nn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function rV(){return new h.vHH(3202,nn)}()):0==u&&(F=1/(M-1));const B=M-1,G=t.currentTime,ne=t.currentAnimateTimings,we=ne.duration;return S.forEach((Ze,Le)=>{const Ke=F>0?Le==B?1:F*Le:c[Le],ze=Ke*we;t.currentTime=G+ne.delay+ze,ne.duration=ze,this._validateStyleAst(Ze,t),Ze.offset=Ke,r.styles.push(Ze)}),r}visitReference(e,t){return{type:8,animation:Wo(this,$0(e.animation),t),options:Lp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function jV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(BV,"")),n=n.replace(/@\*/g,lC).replace(/@\w+/g,t=>lC+"-"+t.substr(1)).replace(/:animating/g,vM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,zo(t.collectedStyles,t.currentQuerySelector,{});const p=Wo(this,$0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Lp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function iV(){return new h.vHH(3013,nn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:cC(e.timings,t.errors,!0);return{type:12,animation:Wo(this,$0(e.animation),t),timings:r,options:null}}}class HV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function _C(n){return!Array.isArray(n)&&"object"==typeof n}function Lp(n){return n?(n=Ey(n)).params&&(n.params=function $V(n){return n?Ey(n):null}(n.params)):n={},n}function CM(n,e,t){return{duration:n,delay:e,easing:t}}function IM(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class vC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const KV=new RegExp(":enter","g"),YV=new RegExp(":leave","g");function TM(n,e,t,r,i,u={},c={},p,y,b=[]){return(new QV).buildKeyframes(n,e,t,r,i,u,c,p,y,b)}class QV{buildKeyframes(e,t,r,i,u,c,p,y,b,S=[]){b=b||new vC;const M=new AM(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),Wo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(p).length){let B;for(let G=F.length-1;G>=0;G--){const ne=F[G];if(ne.element===t){B=ne;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([p],null,M.errors,y)}return F.length?F.map(B=>B.buildKeyframes()):[IM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Pp(r.duration):null,p=null!=r.delay?Pp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Wo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=EC);const c=Pp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Wo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Pp(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Wo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return cC(t.params?dC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*u),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Pp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=EC);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),Wo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;Wo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const EC={};class AM{constructor(e,t,r,i,u,c,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=EC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new wC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Pp(r.duration)),null!=r.delay&&(i.delay=Pp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=dC(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new AM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=EC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new JV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(KV,"."+this._enterClassName)).replace(YV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function sV(n){return new h.vHH(3014,nn)}()),p}}class wC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new wC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Yu,this._currentKeyframe[t]=Yu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function XV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Yu})):Mh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const y=dC(c[p],u,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Yu),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const b=Mh(p,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==Yu&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?hC(e.values()):[],c=t.size?hC(t.values()):[];if(r){const p=i[0],y=Ey(p);p.offset=0,y.offset=1,i=[p,y]}return IM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class JV extends wC{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,y=Mh(e[0],!1);y.offset=0,u.push(y);const b=Mh(e[0],!1);b.offset=jO(p),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=Mh(e[M],!1);F.offset=jO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return IM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function jO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class SM{}class eB extends SM{normalizePropertyName(e,t){return bM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(tB[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function KL(n,e){return new h.vHH(3005,nn)}())}return c+u}}const tB=(()=>function nB(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function $O(n,e,t,r,i,u,c,p,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const MM={};class HO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function rB(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||MM,G=this.buildStyles(r,p&&p.params||MM,M),ne=y&&y.params||MM,we=this.buildStyles(i,ne,M),Ze=new Set,Le=new Map,Ke=new Map,ze="void"===i,_t={params:Object.assign(Object.assign({},F),ne)},ct=S?[]:TM(e,t,this.ast.animation,u,c,G,we,_t,b,M);let Jt=0;if(ct.forEach(_n=>{Jt=Math.max(_n.duration+_n.delay,Jt)}),M.length)return $O(t,this._triggerName,r,i,ze,G,we,[],[],Le,Ke,Jt,M);ct.forEach(_n=>{const Zt=_n.element,bn=zo(Le,Zt,{});_n.preStyleProps.forEach(fl=>bn[fl]=!0);const Os=zo(Ke,Zt,{});_n.postStyleProps.forEach(fl=>Os[fl]=!0),Zt!==t&&Ze.add(Zt)});const wn=hC(Ze.values());return $O(t,this._triggerName,r,i,ze,G,we,ct,wn,Le,Ke,Jt)}}class iB{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Ey(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let y=c[p];y.length>1&&(y=dC(y,i,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class oB{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new iB(i.style,i.options&&i.options.params||{},r)}),GO(this.states,"true","1"),GO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new HO(e,i,this.states))}),this.fallbackTransition=function aB(n,e,t){return new HO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function GO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const uB=new vC;class lB{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=DM(this._driver,t,r,[]);if(r.length)throw function hV(n){return new h.vHH(3503,nn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=bO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=TM(this._driver,t,u,_M,aC,{},{},r,uB,i),c.forEach(S=>{const M=zo(p,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function fV(){return new h.vHH(3300,nn)}()),c=[]),i.length)throw function pV(n){return new h.vHH(3504,nn)}();p.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,Yu)})});const b=Sh(c.map(S=>{const M=p.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function gV(n){return new h.vHH(3301,nn)}();return t}listen(e,t,r,i){const u=pM(t,"","","");return hM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const qO="ng-animate-queued",xM="ng-animate-disabled",pB=[],zO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sa="__ng_removed";class RM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function vB(n){return null!=n?n:null}(r?e.value:e),r){const u=Ey(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const H0="void",NM=new RM(H0);class mB{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function mV(n,e){return new h.vHH(3302,nn)}();if(null==r||0==r.length)throw function yV(n){return new h.vHH(3303,nn)}();if(!function EB(n){return"start"==n||"done"==n}(r))throw function _V(n,e){return new h.vHH(3400,nn)}();const u=zo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=zo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Ma(e,uC),Ma(e,uC+"-"+t),p[t]=NM),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function vV(n){return new h.vHH(3401,nn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new OM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ma(e,uC),Ma(e,uC+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new RM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=NM),b.value!==H0&&y.value===b.value){if(!function DB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const ne=[],we=u.matchStyles(y.value,y.params,ne),Ze=u.matchStyles(b.value,b.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Fp(e,we),hl(e,Ze)})}return}const F=zo(this._engine.playersByElement,e,[]);F.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let B=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!B){if(!i)return;B=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(Ma(e,qO),c.onStart(()=>{wy(e,qO)})),c.onDone(()=>{let ne=this.players.indexOf(c);ne>=0&&this.players.splice(ne,1);const we=this._engine.playersByElement.get(e);if(we){let Ze=we.indexOf(c);Ze>=0&&we.splice(Ze,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,lC,!0);r.forEach(i=>{if(i[Sa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,H0,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Sh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||NM,S=new RM(H0),M=new OM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Sa];(!u||u===zO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const y=pM(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,hM(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class yB{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new mB(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(bC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bC(t))return;const u=t[Sa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,xM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wy(e,xM))}removeNode(e,t,r,i){if(bC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Sa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return bC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,lC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,vM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Sa];if(r&&r.setForRemoval){if(e[Sa]=zO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(xM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ma(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Sh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function EV(n){return new h.vHH(3402,nn)}()}_flushAnimations(e,t){const r=new vC,i=[],u=new Map,c=[],p=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const mt=this.driver.query(st,".ng-animate-queued",!0);for(let At=0;At<mt.length;At++)S.add(mt[At])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=ZO(F,this.collectedEnterElements),G=new Map;let ne=0;B.forEach((st,mt)=>{const At=_M+ne++;G.set(mt,At),st.forEach(fn=>Ma(fn,At))});const we=[],Ze=new Set,Le=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const mt=this.collectedLeaveElements[st],At=mt[Sa];At&&At.setForRemoval&&(we.push(mt),Ze.add(mt),At.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(fn=>Ze.add(fn)):Le.add(mt))}const Ke=new Map,ze=ZO(F,Array.from(Ze));ze.forEach((st,mt)=>{const At=aC+ne++;Ke.set(mt,At),st.forEach(fn=>Ma(fn,At))}),e.push(()=>{B.forEach((st,mt)=>{const At=G.get(mt);st.forEach(fn=>wy(fn,At))}),ze.forEach((st,mt)=>{const At=Ke.get(mt);st.forEach(fn=>wy(fn,At))}),we.forEach(st=>{this.processLeaveNode(st)})});const _t=[],ct=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(At=>{const fn=At.player,Ti=At.element;if(_t.push(fn),this.collectedEnterElements.length){const ks=Ti[Sa];if(ks&&ks.setForMove){if(ks.previousTriggersValues&&ks.previousTriggersValues.has(At.triggerName)){const Vp=ks.previousTriggersValues.get(At.triggerName),Rh=this.statesByElement.get(At.element);Rh&&Rh[At.triggerName]&&(Rh[At.triggerName].value=Vp)}return void fn.destroy()}}const pl=!M||!this.driver.containsElement(M,Ti),Ko=Ke.get(Ti),xh=G.get(Ti),cr=this._buildInstruction(At,r,xh,Ko,pl);if(cr.errors&&cr.errors.length)return void ct.push(cr);if(pl)return fn.onStart(()=>Fp(Ti,cr.fromStyles)),fn.onDestroy(()=>hl(Ti,cr.toStyles)),void i.push(fn);if(At.isFallbackTransition)return fn.onStart(()=>Fp(Ti,cr.fromStyles)),fn.onDestroy(()=>hl(Ti,cr.toStyles)),void i.push(fn);const ok=[];cr.timelines.forEach(ks=>{ks.stretchStartingKeyframe=!0,this.disabledNodes.has(ks.element)||ok.push(ks)}),cr.timelines=ok,r.append(Ti,cr.timelines),c.push({instruction:cr,player:fn,element:Ti}),cr.queriedElements.forEach(ks=>zo(p,ks,[]).push(fn)),cr.preStyleProps.forEach((ks,Vp)=>{const Rh=Object.keys(ks);if(Rh.length){let Bp=y.get(Vp);Bp||y.set(Vp,Bp=new Set),Rh.forEach(PM=>Bp.add(PM))}}),cr.postStyleProps.forEach((ks,Vp)=>{const Rh=Object.keys(ks);let Bp=b.get(Vp);Bp||b.set(Vp,Bp=new Set),Rh.forEach(PM=>Bp.add(PM))})});if(ct.length){const st=[];ct.forEach(mt=>{st.push(function wV(n,e){return new h.vHH(3505,nn)}())}),_t.forEach(mt=>mt.destroy()),this.reportError(st)}const Jt=new Map,wn=new Map;c.forEach(st=>{const mt=st.element;r.has(mt)&&(wn.set(mt,mt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Jt))}),i.forEach(st=>{const mt=st.element;this._getPreviousPlayers(mt,!1,st.namespaceId,st.triggerName,null).forEach(fn=>{zo(Jt,mt,[]).push(fn),fn.destroy()})});const _n=we.filter(st=>QO(st,y,b)),Zt=new Map;KO(Zt,this.driver,Le,b,Yu).forEach(st=>{QO(st,y,b)&&_n.push(st)});const Os=new Map;B.forEach((st,mt)=>{KO(Os,this.driver,new Set(st),y,"!")}),_n.forEach(st=>{const mt=Zt.get(st),At=Os.get(st);Zt.set(st,Object.assign(Object.assign({},mt),At))});const fl=[],G0=[],q0={};c.forEach(st=>{const{element:mt,player:At,instruction:fn}=st;if(r.has(mt)){if(S.has(mt))return At.onDestroy(()=>hl(mt,fn.toStyles)),At.disabled=!0,At.overrideTotalTime(fn.totalTime),void i.push(At);let Ti=q0;if(wn.size>1){let Ko=mt;const xh=[];for(;Ko=Ko.parentNode;){const cr=wn.get(Ko);if(cr){Ti=cr;break}xh.push(Ko)}xh.forEach(cr=>wn.set(cr,Ti))}const pl=this._buildAnimation(At.namespaceId,fn,Jt,u,Os,Zt);if(At.setRealPlayer(pl),Ti===q0)fl.push(At);else{const Ko=this.playersByElement.get(Ti);Ko&&Ko.length&&(At.parentPlayer=Sh(Ko)),i.push(At)}}else Fp(mt,fn.fromStyles),At.onDestroy(()=>hl(mt,fn.toStyles)),G0.push(At),S.has(mt)&&i.push(At)}),G0.forEach(st=>{const mt=u.get(st.element);if(mt&&mt.length){const At=Sh(mt);st.setRealPlayer(At)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<we.length;st++){const mt=we[st],At=mt[Sa];if(wy(mt,aC),At&&At.hasAnimation)continue;let fn=[];if(p.size){let pl=p.get(mt);pl&&pl.length&&fn.push(...pl);let Ko=this.driver.query(mt,vM,!0);for(let xh=0;xh<Ko.length;xh++){let cr=p.get(Ko[xh]);cr&&cr.length&&fn.push(...cr)}}const Ti=fn.filter(pl=>!pl.destroyed);Ti.length?wB(this,mt,Ti):this.processLeaveNode(mt)}return we.length=0,fl.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const mt=this.players.indexOf(st);this.players.splice(mt,1)}),st.play()}),fl}elementContainsData(e,t){let r=!1;const i=t[Sa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const y=!u||u==H0;p.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=zo(r,b,[]);this._getPreviousPlayers(b,S,c,p,t.toState).forEach(B=>{const G=B.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),B.destroy(),M.push(B)})}Fp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(G=>{const ne=G.element;S.add(ne);const we=ne[Sa];if(we&&we.removedBeforeQueried)return new va(G.duration,G.delay);const Ze=ne!==y,Le=function bB(n){const e=[];return YO(n,e),e}((r.get(ne)||pB).map(Jt=>Jt.getRealPlayer())).filter(Jt=>!!Jt.element&&Jt.element===ne),Ke=u.get(ne),ze=c.get(ne),_t=bO(0,this._normalizer,0,G.keyframes,Ke,ze),ct=this._buildPlayer(G,_t,Le);if(G.subTimeline&&i&&M.add(ne),Ze){const Jt=new OM(e,p,ne);Jt.setRealPlayer(ct),b.push(Jt)}return ct});b.forEach(G=>{zo(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function _B(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),S.forEach(G=>Ma(G,NO));const B=Sh(F);return B.onDestroy(()=>{S.forEach(G=>wy(G,NO)),hl(y,t.toStyles)}),M.forEach(G=>{zo(i,G,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new va(e.duration,e.delay)}}class OM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new va,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>hM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){zo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bC(n){return n&&1===n.nodeType}function WO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function KO(n,e,t,r,i){const u=[];t.forEach(y=>u.push(WO(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[Sa]=gB,c.push(b))}),n.set(b,S)});let p=0;return t.forEach(y=>WO(y,u[p++])),c}function ZO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let y=u.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(p,y),y}return e.forEach(p=>{const y=c(p);1!==y&&t.get(y).push(p)}),t}function Ma(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function wy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function wB(n,e,t){Sh(t).onDone(()=>n.processLeaveNode(e))}function YO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof x_?YO(r.players,e):e.push(r)}}function QO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class DC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new yB(e,t,r),this._timelineEngine=new lB(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const y=[],S=DM(this._driver,u,y,[]);if(y.length)throw function cV(n,e){return new h.vHH(3404,nn)}();p=function sB(n,e,t){return new oB(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=DO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=DO(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let IB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&hl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hl(this._element,this._initialStyles),this._endStyles&&(hl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fp(this._element,this._endStyles),this._endStyles=null),hl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function kM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];TB(i)&&(e=e||{},e[i]=n[i])}return e}function TB(n){return"display"===n||"position"===n}class JO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:LO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class AB{validateStyleProperty(e){return AO(e)}matchesElement(e,t){return!1}containsElement(e,t){return SO(e,t)}getParentElement(e){return mM(e)}query(e,t,r){return MO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof JO);(function RV(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(G=>b[G]=B[G])}),t=function NV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(y){p[y]=LO(n,y)})}}return e}(e,t=t.map(F=>Mh(F,!1)),b);const M=function CB(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kM(e[0]),e.length>1&&(r=kM(e[e.length-1]))):e&&(t=kM(e)),t||r?new IB(n,t,r):null}(e,t);return new JO(e,t,y,M)}}let SB=(()=>{class n extends Sg{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Od(t):t;return XO(this._renderer,null,r,"register",[i]),new MB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class MB extends class rI{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new xB(this._id,e,t||{},this._renderer)}}class xB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return XO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function XO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const ek="@.disabled";let RB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new tk("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(y),new NB(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(DC),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class tk{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==ek?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class NB extends tk{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==ek?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function OB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function kB(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let PB=(()=>{class n extends DC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re),h.LFG(yM),h.LFG(SM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const nk=new h.OlP("AnimationModuleType"),rk=[{provide:Sg,useClass:SB},{provide:SM,useFactory:function FB(){return new eB}},{provide:DC,useClass:PB},{provide:h.FYo,useFactory:function LB(n,e,t){return new RB(n,e,t)},deps:[En,DC,h.R0b]}],ik=[{provide:yM,useFactory:()=>new AB},{provide:nk,useValue:"BrowserAnimations"},...rk],VB=[{provide:yM,useClass:xO},{provide:nk,useValue:"NoopAnimations"},...rk];let BB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?VB:ik}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ik,imports:[ta]}),n})();const sk_firebaseConfig={apiKey:"AIzaSyA4Tz-4_pCoShUWfwqtX6VgLgbnuu4dPUA",authDomain:"tasks-4bd2d.firebaseapp.com",projectId:"tasks-4bd2d",storageBucket:"tasks-4bd2d.appspot.com",messagingSenderId:"1089299502470",appId:"1:1089299502470:web:4a429aa80599680ef3c807",measurementId:"G-X1ZS33XM3P"};let UB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[$L]}),n.\u0275inj=h.cJS({providers:[],imports:[[ta,UL,BB,EO,co.hO.initializeApp(sk_firebaseConfig)]]}),n})();(0,h.G48)(),Il().bootstrapModule(UB).catch(n=>console.error(n))},5867:(ut,Ae,k)=>{k.d(Ae,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=k(9681);(0,h.registerVersion)("firebase","9.6.10","app")},127:(ut,Ae,k)=>{k.d(Ae,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ut,Ae,k)=>{k.r(Ae);var h=k(5861),Y=k(3942),O=k(2090),ue=k(9681),X=k(655),ge=k(1877),re=k(4859);const Oe=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new ge.Yd("@firebase/auth");function Ye(_,...f){tt.logLevel<=ge.in.ERROR&&tt.error(`Auth (${ue.SDK_VERSION}): ${_}`,...f)}function Ie(_,...f){throw He(_,...f)}function _e(_,...f){return He(_,...f)}function Ee(_,f,m){const E=Object.assign(Object.assign({},Ve()),{[f]:m});return new O.LL("auth","Firebase",E).create(f,{appName:_.name})}function Ge(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ie(_,"argument-error"),Ee(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(_,...f){if("string"!=typeof _){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return fe.create(_,...f)}function te(_,f,...m){if(!_)throw He(f,...m)}function W(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ye(f),new Error(f)}function ie(_,f){_||W(f)}const me=new Map;function se(_){ie(_ instanceof Function,"Expected a class definition");let f=me.get(_);return f?(ie(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,me.set(_,f),f)}function Tt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Xt(){return"http:"===kn()||"https:"===kn()}function kn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(f,m){this.shortDelay=f,this.longDelay=m,ie(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,f){ie(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ai{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},us=new cn(3e4,6e4);function en(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function qt(_,f,m,E){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(_,f,m,E,A={}){return ii(_,A,(0,h.Z)(function*(){let N={},z={};E&&("GET"===f?z=E:N={body:JSON.stringify(E)});const oe=(0,O.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=yield _._getAdditionalHeaders();return Ue["Content-Type"]="application/json",_.languageCode&&(Ue["X-Firebase-Locale"]=_.languageCode),Ai.fetch()(Pr(_,_.config.apiHost,m,oe),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ii(_,f,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(_,f,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},on),f);try{const A=new ls(_),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw cs(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const oe=N.ok?z.errorMessage:z.error.message,[Ue,et]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw cs(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw cs(_,"email-already-in-use",z);const wt=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Ee(_,wt,et);Ie(_,wt)}}catch(A){if(A instanceof O.ZR)throw A;Ie(_,"network-request-failed")}})).apply(this,arguments)}function kr(_,f,m,E){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(_,f,m,E,A={}){const N=yield qt(_,f,m,E,A);return"mfaPendingCredential"in N&&Ie(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Pr(_,f,m,E){const A=`${f}${m}?${E}`;return _.config.emulator?dn(_.config,A):`${_.config.apiScheme}://${A}`}class ls{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),us.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cs(_,f,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=_e(_,f,E);return A.customData._tokenResponse=m,A}function Zr(){return(Zr=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function er(_,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function si(_,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function xa(){return(xa=(0,h.Z)(function*(_,f=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(f),A=ot(E);te(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:A,token:E,authTime:vn(zt(A.auth_time)),issuedAtTime:vn(zt(A.iat)),expirationTime:vn(zt(A.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(_){return 1e3*Number(_)}function ot(_){const[f,m,E]=_.split(".");if(void 0===f||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(m);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function hr(_,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&Ht(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Ht({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class yo{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fr(_){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(_){var f;const m=_.auth,E=yield _.getIdToken(),A=yield hr(_,si(m,{idToken:E}));te(null==A?void 0:A.users.length,m,"internal-error");const N=A.users[0];_._notifyReloadListener(N);const z=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Te(N.providerUserInfo):[],oe=Qe(_.providerData,z),wt=!!_.isAnonymous&&!(_.email&&N.passwordHash||(null==oe?void 0:oe.length)),at={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new br(N.createdAt,N.lastLoginAt),isAnonymous:wt};Object.assign(_,at)})).apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(_){const f=(0,O.m9)(_);yield fr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Qe(_,f){return[..._.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function Te(_){return _.map(f=>{var{providerId:m}=f,E=(0,X._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ft(){return(ft=(0,h.Z)(function*(_,f){const m=yield ii(_,{},(0,h.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:N}=_.config,z=Pr(_,A,"/v1/token",`key=${N}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Ai.fetch()(z,{method:"POST",headers:oe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Dt(_){const f=ot(_);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,h.Z)(function*(){return te(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:z}=yield function Xe(_,f){return ft.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(A,N,Number(z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:A,expirationTime:N}=m,z=new $t;return E&&(te("string"==typeof E,"internal-error",{appName:f}),z.refreshToken=E),A&&(te("string"==typeof A,"internal-error",{appName:f}),z.accessToken=A),N&&(te("number"==typeof N,"internal-error",{appName:f}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return W("not implemented")}}function Lt(_,f){te("string"==typeof _||void 0===_,"internal-error",{appName:f})}class j{constructor(f){var{uid:m,auth:E,stsTokenManager:A}=f,N=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new br(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const E=yield hr(m,m.stsTokenManager.getToken(m.auth,f));return te(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Fs(_){return xa.apply(this,arguments)}(this,f)}reload(){return function Dr(_){return Ut.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,h.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield fr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield hr(f,function dt(_,f){return Zr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,A,N,z,oe,Ue,et,wt;const at=null!==(E=m.displayName)&&void 0!==E?E:void 0,xn=null!==(A=m.email)&&void 0!==A?A:void 0,rs=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ic=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Gu=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,qu=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,hf=null!==(et=m.createdAt)&&void 0!==et?et:void 0,Yy=null!==(wt=m.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:ga,emailVerified:bd,isAnonymous:Dd,providerData:ff,stsTokenManager:Cd}=m;te(ga&&Cd,f,"internal-error");const yi=$t.fromJSON(this.name,Cd);te("string"==typeof ga,f,"internal-error"),Lt(at,f.name),Lt(xn,f.name),te("boolean"==typeof bd,f,"internal-error"),te("boolean"==typeof Dd,f,"internal-error"),Lt(rs,f.name),Lt(ic,f.name),Lt(Gu,f.name),Lt(qu,f.name),Lt(hf,f.name),Lt(Yy,f.name);const pf=new j({uid:ga,auth:f,email:xn,emailVerified:bd,displayName:at,isAnonymous:Dd,photoURL:ic,phoneNumber:rs,tenantId:Gu,stsTokenManager:yi,createdAt:hf,lastLoginAt:Yy});return ff&&Array.isArray(ff)&&(pf.providerData=ff.map(hg=>Object.assign({},hg))),qu&&(pf._redirectEventId=qu),pf}static _fromIdTokenResponse(f,m,E=!1){return(0,h.Z)(function*(){const A=new $t;A.updateFromServerResponse(m);const N=new j({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield fr(N),N})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,h.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function de(_,f,m){return`firebase:${_}:${f}:${m}`}class Q{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:A,name:N}=this.auth;this.fullUserKey=de(this.userKey,A.apiKey,N),this.fullPersistenceKey=de("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?j._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Q(se(q),f,E);const A=(yield Promise.all(m.map(function(){var et=(0,h.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return et.apply(this,arguments)}}()))).filter(et=>et);let N=A[0]||se(q);const z=de(E,f.config.apiKey,f.name);let oe=null;for(const et of m)try{const wt=yield et._get(z);if(wt){const at=j._fromJSON(f,wt);et!==N&&(oe=at),N=et;break}}catch(wt){}const Ue=A.filter(et=>et._shouldAllowMigration);return N._shouldAllowMigration&&Ue.length?(N=Ue[0],oe&&(yield N._set(z,oe.toJSON())),yield Promise.all(m.map(function(){var et=(0,h.Z)(function*(wt){if(wt!==N)try{yield wt._remove(z)}catch(at){}});return function(wt){return et.apply(this,arguments)}}())),new Q(N,f,E)):new Q(N,f,E)})()}}function Be(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Wt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Et(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Nt(f))return"Blackberry";if(pn(f))return"Webos";if(Yt(f))return"Safari";if((f.includes("chrome/")||Cr(f))&&!f.includes("edge/"))return"Chrome";if(Tn(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Et(_=(0,O.z$)()){return/firefox\//i.test(_)}function Yt(_=(0,O.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Cr(_=(0,O.z$)()){return/crios\//i.test(_)}function Wt(_=(0,O.z$)()){return/iemobile/i.test(_)}function Tn(_=(0,O.z$)()){return/android/i.test(_)}function Nt(_=(0,O.z$)()){return/blackberry/i.test(_)}function pn(_=(0,O.z$)()){return/webos/i.test(_)}function nr(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function ds(_=(0,O.z$)()){return nr(_)||Tn(_)||pn(_)||Nt(_)||/windows phone/i.test(_)||Wt(_)}function Na(_,f=[]){let m;switch(_){case"Browser":m=Be((0,O.z$)());break;case"Worker":m=`${Be((0,O.z$)())}-${_}`;break;default:m=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class oi{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kt(this),this.idTokenSubscription=new kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,N;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,f),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var E;let A=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==A?void 0:A._redirectEventId,oe=yield m.tryRedirectSignIn(f);(!N||N===z)&&(null==oe?void 0:oe.user)&&(A=oe.user)}return A?A._redirectEventId?(te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===A._redirectEventId?m.directlySetCurrentUser(A):m.reloadAndSetCurrentUserOrClear(A)):m.reloadAndSetCurrentUserOrClear(A):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(A){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){try{yield fr(f)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function vt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&te(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return f&&te(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,h.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&se(f)||m._popupRedirectResolver;te(E,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[se(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return te(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,E,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Na(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function ke(_){return(0,O.m9)(_)}class kt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function $n(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class an{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return W("not implemented")}_getIdTokenResponse(f){return W("not implemented")}_linkToIdToken(f,m){return W("not implemented")}_getReauthenticationResolver(f){return W("not implemented")}}function Pn(_,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:resetPassword",en(_,f))})).apply(this,arguments)}function xt(_,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function hs(_,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",en(_,f))})).apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithPassword",en(_,f))})).apply(this,arguments)}function fs(_,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:sendOobCode",en(_,f))})).apply(this,arguments)}function Si(_,f){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(_,f){return fs(_,f)})).apply(this,arguments)}function gu(_,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(_,f){return fs(_,f)})).apply(this,arguments)}function Mi(_,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(_,f){return fs(_,f)})).apply(this,arguments)}function jc(_,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(_,f){return fs(_,f)})).apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,f))})).apply(this,arguments)}function $c(){return($c=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,f))})).apply(this,arguments)}class _u extends an{constructor(f,m,E,A=null){super("password",E),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new _u(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new _u(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Bs(_,f){return rr.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function yu(_,f){return Yr.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return xt(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Nh(_,f){return $c.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Hn(_,f){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithIdp",en(_,f))})).apply(this,arguments)}class gs extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new gs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=m,N=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const z=new gs(E,A);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(f){return Hn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Hn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Hn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function jp(_,f){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:sendVerificationCode",en(_,f))})).apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,f))})).apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)(function*(_,f){const m=yield kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,f));if(m.temporaryProof)throw cs(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Hp={USER_NOT_FOUND:"user-not-found"};function qc(){return(qc=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Hp)})).apply(this,arguments)}class Yo extends an{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Yo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Yo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function gl(_,f){return js.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function $p(_,f){return Gc.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Oh(_,f){return qc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}=f;return E||m||A||N?new Yo({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}):null}}class vo{constructor(f){var m,E,A,N,z,oe;const Ue=(0,O.zd)((0,O.pd)(f)),et=null!==(m=Ue.apiKey)&&void 0!==m?m:null,wt=null!==(E=Ue.oobCode)&&void 0!==E?E:null,at=function by(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);te(et&&wt&&at,"argument-error"),this.apiKey=et,this.operation=at,this.code=wt,this.continueUrl=null!==(N=Ue.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const m=function Pa(_){const f=(0,O.zd)((0,O.pd)(_)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||f||_}(f);try{return new vo(m)}catch(E){return null}}}let ml=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return _u._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=vo.parseLink(E);return te(A,"argument-error"),_u._fromEmailAndCode(m,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class $s{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qr extends $s{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Qo extends Qr{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return te("providerId"in m&&"signInMethod"in m,"argument-error"),gs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Qo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Qo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:N,nonce:z,providerId:oe}=f;if(!E&&!A&&!m&&!N||!oe)return null;try{return new Qo(oe)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:N})}catch(Ue){return null}}}let Eo=(()=>{class _ extends Qr{constructor(){super("facebook.com")}static credential(m){return gs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Fa=(()=>{class _ extends Qr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return gs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return _.credential(E,A)}catch(N){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),zc=(()=>{class _ extends Qr{constructor(){super("github.com")}static credential(m){return gs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ir extends an{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Hn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Hn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Hn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:N}=m;return E&&A&&N&&E===A?new ir(E,N):null}static _create(f,m){return new ir(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends $s{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ui.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ui.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=ir.fromJSON(f);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return ir._create(E,m)}catch(A){return null}}}let vu=(()=>{class _ extends Qr{constructor(){super("twitter.com")}static credential(m,E){return gs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return _.credential(E,A)}catch(N){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Eu(_,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signUp",en(_,f))})).apply(this,arguments)}class gr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,A=!1){return(0,h.Z)(function*(){const N=yield j._fromIdTokenResponse(f,E,A),z=Ph(E);return new gr({user:N,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=Ph(E);return new gr({user:f,providerId:A,_tokenResponse:E,operationType:m})})()}}function Ph(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Wc(){return(Wc=(0,h.Z)(function*(_){var f;const m=ke(_);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new gr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Eu(m,{returnSecureToken:!0}),A=yield gr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class bu extends O.ZR{constructor(f,m,E,A){var N;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,bu.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,A){return new bu(f,m,E,A)}}function Du(_,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?bu._fromErrorAndOperation(_,N,f,E):N})}function ms(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function yl(){return(yl=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_);yield Gs(!0,m,f);const{providerUserInfo:E}=yield er(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=ms(E||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(_,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(_,f,m=!1){const E=yield hr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return gr._forOperation(_,"link",E)})).apply(this,arguments)}function Gs(_,f,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(_,f,m){yield fr(f);const A=!1===_?"provider-already-linked":"no-such-provider";te(ms(f.providerData).has(m)===_,f.auth,A)})).apply(this,arguments)}function Kc(_,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(_,f,m=!1){const{auth:E}=_,A="reauthenticate";try{const N=yield hr(_,Du(E,A,f,_),m);te(N.idToken,E,"internal-error");const z=ot(N.idToken);te(z,E,"internal-error");const{sub:oe}=z;return te(_.uid===oe,E,"user-mismatch"),gr._forOperation(_,A,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ie(E,"user-mismatch"),N}})).apply(this,arguments)}function bo(_,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(_,f,m=!1){const E="signIn",A=yield Du(_,E,f),N=yield gr._fromIdTokenResponse(_,E,A);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Fn(_,f){return Va.apply(this,arguments)}function Va(){return(Va=(0,h.Z)(function*(_,f){return bo(ke(_),f)})).apply(this,arguments)}function xi(_,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_);return yield Gs(!1,m,f.providerId),yn(m,f)})).apply(this,arguments)}function qs(_,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(_,f){return Kc((0,O.m9)(_),f)})).apply(this,arguments)}function Cu(_,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(_,f){return kr(_,"POST","/v1/accounts:signInWithCustomToken",en(_,f))})).apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(_,f){const m=ke(_),E=yield Cu(m,{token:f,returnSecureToken:!0}),A=yield gr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class pt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Iu._fromServerResponse(f,m):Ie(f,"internal-error")}}class Iu extends pt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Iu(m)}}function Ba(_,f,m){var E;te((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Au(){return(Au=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),A={requestType:"PASSWORD_RESET",email:f};m&&Ba(E,A,m),yield gu(E,A)})).apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(_,f,m){yield Pn((0,O.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function De(){return(De=(0,h.Z)(function*(_,f){yield hs((0,O.m9)(_),{oobCode:f})})).apply(this,arguments)}function Vt(_,f){return El.apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_),E=yield Pn(m,{oobCode:f}),A=E.requestType;switch(te(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(E.mfaInfo,m,"internal-error");default:te(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=pt._fromServerResponse(ke(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(_,f){const{data:m}=yield Vt((0,O.m9)(_),f);return m.email})).apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(_,f,m){const E=ke(_),A=yield Eu(E,{returnSecureToken:!0,email:f,password:m}),N=yield gr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),A={requestType:"EMAIL_SIGNIN",email:f};te(m.handleCodeInApp,E,"argument-error"),m&&Ba(E,A,m),yield Mi(E,A)})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),A=ml.credentialWithLink(f,m||Tt());return te(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Fn(E,A)})).apply(this,arguments)}function mr(_,f){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:createAuthUri",en(_,f))})).apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(_,f){const E={identifier:f,continueUri:Xt()?Tt():"http://localhost"},{signinMethods:A}=yield mr((0,O.m9)(_),E);return A||[]})).apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(_,f){const m=(0,O.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Ba(m.auth,A,f);const{email:N}=yield Si(m.auth,A);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Nu(){return(Nu=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&Ba(E.auth,N,m);const{email:z}=yield jc(E.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Il(_,f){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(_,f){return qt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Tl(){return(Tl=(0,h.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,O.m9)(_),N={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},z=yield hr(E,Il(E.auth,N));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const oe=E.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Sl(_,f,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(_,f,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const z=yield hr(_,xt(E,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Co{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Jc extends Co{constructor(f,m,E,A){super(f,m,E),this.username=A}}class Xc extends Co{constructor(f,m){super(f,"facebook.com",m)}}class Io extends Jc{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ys extends Co{constructor(f,m){super(f,"google.com",m)}}class Ml extends Jc{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Sr(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Qc(_){var f,m;if(!_)return null;const{providerId:E}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(f=ot(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new Co(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new Xc(N,A);case"github.com":return new Io(N,A);case"google.com":return new Ys(N,A);case"twitter.com":return new Ml(N,A,_.screenName||null);case"custom":case"anonymous":return new Co(N,null);default:return new Co(N,E,A)}}(m)}class _s{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new _s("enroll",f)}static _fromMfaPendingCredential(f){return new _s("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return _s._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return _s._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ja{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=ke(f),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(oe=>pt._fromServerResponse(E,oe));te(A.mfaPendingCredential,E,"internal-error");const z=_s._fromMfaPendingCredential(A.mfaPendingCredential);return new ja(z,N,function(){var oe=(0,h.Z)(function*(Ue){const et=yield Ue._process(E,z);delete A.mfaInfo,delete A.mfaPendingCredential;const wt=Object.assign(Object.assign({},A),{idToken:et.idToken,refreshToken:et.refreshToken});switch(m.operationType){case"signIn":const at=yield gr._fromIdTokenResponse(E,m.operationType,wt);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return te(m.user,E,"internal-error"),gr._forOperation(m.user,m.operationType,wt);default:Ie(E,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function Gn(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:start",en(_,f))}class vs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>pt._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new vs(f)}getSession(){var f=this;return(0,h.Z)(function*(){return _s._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,h.Z)(function*(){const A=f,N=yield E.getSession(),z=yield hr(E.user,A._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield m.user.getIdToken(),N=yield hr(m.user,function qp(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",en(_,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const na=new WeakMap,Nl="__sak";class To{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Nl,"1"),this.storage.removeItem(Nl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vn=(()=>{class _ extends To{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nd(){const _=(0,O.z$)();return Yt(_)||nr(_)}()&&function Zn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),N=this.localCache[E];A!==N&&m(E,N,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((oe,Ue,et)=>{this.notifyListeners(oe,et)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const N=()=>{const oe=this.storage.getItem(A);!E&&this.localCache[A]===oe||this.notifyListeners(A,oe)},z=this.storage.getItem(A);!function Ra(){return(0,O.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,N=this;return(0,h.Z)(function*(){yield A().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,h.Z)(function*(){const N=yield E().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,A=this;return(0,h.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return _.type="LOCAL",_})(),sr=(()=>{class _ extends To{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Fr=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const A=new _(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const A=m,{eventId:N,eventType:z,data:oe}=A.data,Ue=E.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const et=Array.from(Ue).map(function(){var at=(0,h.Z)(function*(xn){return xn(A.origin,oe)});return function(xn){return at.apply(this,arguments)}}()),wt=yield function ei(_){return Promise.all(_.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(et);A.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:wt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ra(_="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return _+m}class rd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var A=this;return(0,h.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,oe;return new Promise((Ue,et)=>{const wt=ra("",20);N.port1.start();const at=setTimeout(()=>{et(new Error("unsupported_event"))},E);oe={messageChannel:N,onMessage(xn){const rs=xn;if(rs.data.eventId===wt)switch(rs.data.status){case"ack":clearTimeout(at),z=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(rs.data.response);break;default:clearTimeout(at),clearTimeout(z),et(new Error("invalid_response"))}}},A.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:f,eventId:wt,data:m},[N.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function mn(){return window}function Ni(){return void 0!==mn().WorkerGlobalScope&&"function"==typeof mn().importScripts}function ci(){return(ci=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Ol="firebaseLocalStorageDb",Ao="firebaseLocalStorage",qn="fbase_key";class Es{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ia(_,f){return _.transaction([Ao],f?"readwrite":"readonly").objectStore(Ao)}function Js(){const _=indexedDB.open(Ol,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Ao,{keyPath:qn})}catch(A){m(A)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Ao)?f(E):(E.close(),yield function di(){const _=indexedDB.deleteDatabase(Ol);return new Es(_).toPromise()}(),f(yield Js()))}))})}function hi(_,f,m){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(_,f,m){const E=ia(_,!0).put({[qn]:f,value:m});return new Es(E).toPromise()})).apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(_,f){const m=ia(_,!1).get(f),E=yield new Es(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Yi(_,f){const m=ia(_,!0).delete(f);return new Es(m).toPromise()}const Oi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Js()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(A++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Ni()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Fr._getInstance(function id(){return Ni()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function ku(){return ci.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new rd(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Bt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Js();return yield hi(m,Nl,"1"),yield Yi(m,Nl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(N=>hi(N,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=yield E._withRetries(N=>function Pl(_,f){return Xs.apply(this,arguments)}(N,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(A=>Yi(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(z=>{const oe=ia(z,!1).getAll();return new Es(oe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:z,value:oe}of E)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(oe)&&(m.notifyListeners(z,oe),A.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function sa(_,f){return qt(_,"POST","/v2/accounts/mfaSignIn:start",en(_,f))}function ki(){return(ki=(0,h.Z)(function*(_){return(yield qt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bn(_){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=A=>{const N=_e("internal-error");N.customData=A,m(N)},E.type="text/javascript",E.charset="UTF-8",function od(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function Mo(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Mr=1e12;class Qi{constructor(f){this.auth=f,this.counter=Mr,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Ji(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Mr;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Mr))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(f||Mr))||void 0===E||E.execute(),""})()}}class Ji{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;te(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dn(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eo=Mo("rcb"),ad=new cn(3e4,6e4);class Wp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!mn().grecaptcha}load(f,m=""){return te(function Kp(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(mn().grecaptcha):new Promise((E,A)=>{const N=mn().setTimeout(()=>{A(_e(f,"network-request-failed"))},ad.get());mn()[eo]=()=>{mn().clearTimeout(N),delete mn()[eo];const oe=mn().grecaptcha;if(!oe)return void A(_e(f,"internal-error"));const Ue=oe.render;oe.render=(et,wt)=>{const at=Ue(et,wt);return this.counter++,at},this.hostLanguage=m,E(oe)},Bn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:eo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!mn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zp{load(f){return(0,h.Z)(function*(){return new Qi(f)})()}clearedOneInstance(){}}const to="recaptcha",ti={theme:"light",type:"image"};class Yp{constructor(f,m=Object.assign({},ti),E){this.parameters=m,this.type=to,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(E),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zp:new Wp,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const z=oe=>{!oe||(f.tokenChangeListeners.delete(z),N(oe))};f.tokenChangeListeners.add(z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=mn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){te(Xt()&&!Ni(),f.auth,"internal-error"),yield function no(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Lr(_){return ki.apply(this,arguments)}(f.auth);te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ws{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Yo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Cn(){return(Cn=(0,h.Z)(function*(_,f,m){const E=ke(_),A=yield xr(E,f,(0,O.m9)(m));return new ws(A,N=>Fn(E,N))})).apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);yield Gs(!1,E,"phone");const A=yield xr(E.auth,f,(0,O.m9)(m));return new ws(A,N=>xi(E,N))})).apply(this,arguments)}function Vl(){return(Vl=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_),A=yield xr(E.auth,f,(0,O.m9)(m));return new ws(A,N=>qs(E,N))})).apply(this,arguments)}function xr(_,f,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(_,f,m){var E;const A=yield m.verify();try{let N;if(te("string"==typeof A,_,"argument-error"),te(m.type===to,_,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const z=N.session;if("phoneNumber"in N)return te("enroll"===z.type,_,"internal-error"),(yield Gn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===z.type,_,"internal-error");const oe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return te(oe,_,"missing-multi-factor-info"),(yield sa(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield jp(_,{phoneNumber:N.phoneNumber,recaptchaToken:A});return z}}finally{m._reset()}})).apply(this,arguments)}function bs(){return(bs=(0,h.Z)(function*(_,f){yield yn((0,O.m9)(_),f)})).apply(this,arguments)}let Fi=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=ke(m)}verifyPhoneNumber(m,E){return xr(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Yo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Yo._fromTokenResponse(E,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Xi(_,f){return f?se(f):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class $a extends an{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Hn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Hn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Hn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Ul(_){return bo(_.auth,new $a(_),_.bypassAuthState)}function jl(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),Kc(m,new $a(_),_.bypassAuthState)}function Pt(_){return $l.apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),yn(m,new $a(_),_.bypassAuthState)})).apply(this,arguments)}class Yn{constructor(f,m,E,A,N=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:N,tenantId:z,error:oe,type:Ue}=f;if(oe)return void m.reject(oe);const et={auth:m.auth,requestUri:E,sessionId:A,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(et))}catch(wt){m.reject(wt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ul;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return jl;default:Ie(this.auth,"internal-error")}}resolve(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hl=new cn(2e3,1e4);function ud(){return(ud=(0,h.Z)(function*(_,f,m){const E=ke(_);Ge(_,f,$s);const A=Xi(E,m);return new ts(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);Ge(E.auth,f,$s);const A=Xi(E.auth,m);return new ts(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);Ge(E.auth,f,$s);const A=Xi(E.auth,m);return new ts(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let ts=(()=>{class _ extends Yn{constructor(m,E,A,N,z){super(m,E,N,z),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return te(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ie(1===m.filter.length,"Popup operations only handle one event");const E=ra();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Hl.get())};m()}}return _.currentPopupAction=null,_})();const ns=new Map;class Qn extends Yn{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=ns.get(m.auth._key());if(!E){try{const N=(yield function pi(_,f){return Gl.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(N)}catch(A){E=()=>Promise.reject(A)}ns.set(m.auth._key(),E)}return m.bypassAuthState||ns.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Gl(){return(Gl=(0,h.Z)(function*(_,f){const m=I(f),E=C(_);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function Ro(_,f){return la.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(_,f){return C(_)._set(I(f),"true")})).apply(this,arguments)}function C(_){return se(_._redirectPersistence)}function I(_){return de("pendingRedirect",_.config.apiKey,_.name)}function K(){return(K=(0,h.Z)(function*(_,f,m){const E=ke(_);Ge(_,f,$s);const A=Xi(E,m);return yield Ro(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);Ge(E.auth,f,$s);const A=Xi(E.auth,m);yield Ro(A,E.auth);const N=yield No(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Ot(){return(Ot=(0,h.Z)(function*(_,f,m){const E=(0,O.m9)(_);Ge(E.auth,f,$s);const A=Xi(E.auth,m);yield Gs(!1,E,f.providerId),yield Ro(A,E.auth);const N=yield No(E);return A._openRedirect(E.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(_,f){return yield ke(_)._initializationPromise,Mn(_,f,!1)})).apply(this,arguments)}function Mn(_,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(_,f,m=!1){const E=ke(_),A=Xi(E,f),z=yield new Qn(E,A,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,f)),z})).apply(this,arguments)}function No(_){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(_){const f=ra(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Li{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ql(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cd(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!cd(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oo(f))}saveEventToCache(f){this.cachedEventUids.add(Oo(f)),this.lastProcessedEventTime=Date.now()}}function Oo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function cd({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function zl(_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(_,f={}){return qt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Jp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cy=/^https?/;function Ds(){return(Ds=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield zl(_);for(const m of f)try{if(Wl(m))return}catch(E){}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function Wl(_){const f=Tt(),{protocol:m,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!Cy.test(m))return!1;if(Jp.test(_))return E===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Ty=new cn(3e4,6e4);function Ay(){const _=mn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let dd=null;function Sy(_){return dd=dd||function Xp(_){return new Promise((f,m)=>{var E,A,N;function z(){Ay(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ay(),m(_e(_,"network-request-failed"))},timeout:Ty.get()})}if(null===(A=null===(E=mn().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=mn().gapi)||void 0===N?void 0:N.load)){const oe=Mo("iframefcb");return mn()[oe]=()=>{gapi.load?z():m(_e(_,"network-request-failed"))},Bn(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>m(Ue))}z()}}).catch(f=>{throw dd=null,f})}(_),dd}const Bh=new cn(5e3,15e3),Po={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ga(_){const f=_.config;te(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?dn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ue.SDK_VERSION},A=hd.get(_.config.apiHost);A&&(E.eid=A);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function da(){return da=(0,h.Z)(function*(_){const f=yield Sy(_),m=mn().gapi;return te(m,_,"internal-error"),f.open({where:document.body,url:Ga(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Po,dontclear:!0},E=>new Promise(function(){var A=(0,h.Z)(function*(N,z){yield E.restyle({setHideOnLeave:!1});const oe=_e(_,"network-request-failed"),Ue=mn().setTimeout(()=>{z(oe)},Bh.get());function et(){mn().clearTimeout(Ue),N(E)}E.ping(et).then(et,()=>{z(oe)})});return function(N,z){return A.apply(this,arguments)}}()))}),da.apply(this,arguments)}const xy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Hh(_,f,m,E,A,N){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(f instanceof $s){f.setDefaultLanguage(_.languageCode),z.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,et]of Object.entries(N||{}))z[Ue]=et}if(f instanceof Qr){const Ue=f.getScopes().filter(et=>""!==et);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const oe=z;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function Ny({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(oe).slice(1)}`}const io="webStorageSupport";class Gh extends class eg{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Gh(f)}_finalizeEnroll(f,m,E){return function ed(_,f){return qt(_,"POST","/v2/accounts/mfaEnrollment:finalize",en(_,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function oa(_,f){return qt(_,"POST","/v2/accounts/mfaSignIn:finalize",en(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Oy=(()=>{class _{constructor(){}static assertion(m){return Gh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var ky="@firebase/auth",qh="0.19.11";class tg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var A;f((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function so(){return window}function ju(){return(ju=(0,h.Z)(function*(_,f,m){var E;const{BuildInfo:A}=so();ie(f.sessionId,"AuthEvent did not contain a session ID");const N=yield qa(f.sessionId),z={};return nr()?z.ibi=A.packageName:Tn()?z.apn=A.packageName:Ie(_,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=N,Hh(_,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(_){const{BuildInfo:f}=so(),m={};nr()?m.iosBundleId=f.packageName:Tn()?m.androidPackageName=f.packageName:Ie(_,"operation-not-supported-in-this-environment"),yield zl(_,m)})).apply(this,arguments)}function yd(){return(yd=(0,h.Z)(function*(_,f,m){const{cordova:E}=so();let A=()=>{};try{yield new Promise((N,z)=>{let oe=null;function Ue(){var at;N();const xn=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof xn&&xn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function et(){oe||(oe=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===(null==document?void 0:document.visibilityState)&&et()}f.addPassiveListener(Ue),document.addEventListener("resume",et,!1),Tn()&&document.addEventListener("visibilitychange",wt,!1),A=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",wt,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function qa(_){return rg.apply(this,arguments)}function rg(){return(rg=(0,h.Z)(function*(_){const f=$u(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $u(_){if(ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function Fy(_){(0,ue._registerComponent)(new re.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:N,authDomain:z}=E.options;return((oe,Ue)=>{te(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),te(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const et={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Na(_)},wt=new oi(oe,Ue,et);return function ae(_,f){const m=(null==f?void 0:f.persistence)||[],E=(Array.isArray(m)?m:[m]).map(se);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(wt,m),wt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new re.wA("auth-internal",f=>{const m=ke(f.getProvider("auth").getImmediate());return new tg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(ky,qh,function Py(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(ky,qh,"esm2017")}("Browser");class Zh extends Li{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Yl(_){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(_){const f=yield Jl()._get(Qh(_));return f&&(yield Jl()._remove(Qh(_))),f})).apply(this,arguments)}function Ql(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function Jl(){return se(Vn)}function Qh(_){return de("authEvent",_.config.apiKey,_.name)}function vd(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function tf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ed(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function sg(_=(0,O.z$)()){return!("file:"!==Ed()&&"ionic:"!==Ed()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rr(){try{const _=self.localStorage,f=ra();if(_)return _.setItem(f,"1"),_.removeItem(f),!function pa(_=(0,O.z$)()){return function jy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $y(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return Fo()&&(0,O.hl)()}return!1}function Fo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tc(){return(function Uy(){return"http:"===Ed()||"https:"===Ed()}()||(0,O.ru)()||sg())&&!function wd(){return(0,O.b$)()||(0,O.UG)()}()&&Rr()&&!Fo()}function nf(){return sg()&&"undefined"!=typeof document}function za(){return(za=(0,h.Z)(function*(){return!!nf()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Bi={LOCAL:"local",NONE:"none",SESSION:"session"},Wa=te,sf="persistence";function Ka(_){return of.apply(this,arguments)}function of(){return(of=(0,h.Z)(function*(_){yield _._initializationPromise;const f=nc(),m=de(sf,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function nc(){var _;try{return(null===(_=function rf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const Hy=te;class mi{constructor(){this.browserResolver=se(class ha{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sr,this._completeRedirectFn=Mn}_openPopup(f,m,E,A){var N=this;return(0,h.Z)(function*(){var z;ie(null===(z=N.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=Hh(f,m,E,Tt(),A);return function md(_,f,m,E=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},xy),{width:E.toString(),height:A.toString(),top:N,left:z}),et=(0,O.z$)().toLowerCase();m&&(oe=Cr(et)?"_blank":m),Et(et)&&(f=f||"http://localhost",Ue.scrollbars="yes");const wt=Object.entries(Ue).reduce((xn,[rs,ic])=>`${xn}${rs}=${ic},`,"");if(function pu(_=(0,O.z$)()){var f;return nr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(et)&&"_self"!==oe)return function $h(_,f){const m=document.createElement("a");m.href=_,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",oe),new gd(null);const at=window.open(f||"",oe,wt);te(at,_,"popup-blocked");try{at.focus()}catch(xn){}return new gd(at)}(f,oe,ra())})()}_openRedirect(f,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N._originValidation(f),function Vh(_){mn().location.href=_}(Hh(f,m,E,Tt(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(ie(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const E=yield function My(_){return da.apply(this,arguments)}(f),A=new Li(f);return E.register("authEvent",N=>(te(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(io,{type:io},A=>{var N;const z=null===(N=null==A?void 0:A[0])||void 0===N?void 0:N[io];void 0!==z&&m(!!z),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Iy(_){return Ds.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return ds()||Yt()||nr()}}),this.cordovaResolver=se(class ef{constructor(){this._redirectPersistence=sr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn}_initialize(f){var m=this;return(0,h.Z)(function*(){const E=f._key();let A=m.eventManagers.get(E);return A||(A=new Zh(f),m.eventManagers.set(E,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,A){var N=this;return(0,h.Z)(function*(){!function _d(_){var f,m,E,A,N,z,oe,Ue,et,wt;const at=so();te("function"==typeof(null===(f=null==at?void 0:at.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(m=null==at?void 0:at.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(N=null===(A=null===(E=null==at?void 0:at.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ue=null===(oe=null===(z=null==at?void 0:at.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(wt=null===(et=null==at?void 0:at.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===wt?void 0:wt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield N._initialize(f);yield z.initialized(),z.resetRedirect(),function Vu(){ns.clear()}(),yield N._originValidation(f);const oe=function Yh(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Ql(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(f,E,A);yield function Z0(_,f){return Jl()._set(Qh(_),f)}(f,oe);const Ue=yield function zh(_,f,m){return ju.apply(this,arguments)}(f,oe,m),et=yield function Zl(_){const{cordova:f}=so();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(_):A=f.InAppBrowser.open(_,function _o(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(A)})})}(Ue);return function ng(_,f,m){return yd.apply(this,arguments)}(f,z,et)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Wh(_){return Vi.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:N}=so(),z=setTimeout((0,h.Z)(function*(){yield Yl(f),m.onEvent(tf())}),500),oe=function(){var wt=(0,h.Z)(function*(at){clearTimeout(z);const xn=yield Yl(f);let rs=null;xn&&(null==at?void 0:at.url)&&(rs=function Vy(_,f){var m,E;const A=function Xl(_){const f=vd(_),m=f.link?decodeURIComponent(f.link):void 0,E=vd(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return vd(A).link||A||E||m||_}(f);if(A.includes("/__/auth/callback")){const N=vd(A),z=N.firebaseError?function Jh(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=oe?_e(oe):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(xn,at.url)),m.onEvent(rs||tf())});return function(xn){return wt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Ue=A,et=`${N.packageName.toLowerCase()}://`;so().handleOpenURL=function(){var wt=(0,h.Z)(function*(at){if(at.toLowerCase().startsWith(et)&&oe({url:at}),"function"==typeof Ue)try{Ue(at)}catch(xn){console.error(xn)}});return function(at){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=sr,this._completeRedirectFn=Mn}_initialize(f){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,E,A)})()}_openRedirect(f,m,E,A){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,E,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return nf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Br(){return za.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function ug(_){return _.unwrap()}function Za(_){return lg(_)}function lg(_){const{_tokenResponse:f}=_ instanceof O.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Fi.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Fa;break;case"facebook.com":E=Eo;break;case"github.com":E=zc;break;case"twitter.com":E=vu;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:oe,nonce:Ue}=f;return N||z||A||oe?oe?m.startsWith("saml.")?ir._create(m,oe):gs._fromParams({providerId:m,signInMethod:m,pendingToken:oe,idToken:A,accessToken:N}):new Qo(m).credential({idToken:A,accessToken:N,rawNonce:Ue}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Nr(_,f){return f.catch(m=>{throw m instanceof O.ZR&&function qy(_,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new zy(_,function Ou(_,f){var m;const E=(0,O.m9)(_),A=f;return te(f.customData.operationType,E,"argument-error"),te(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),ja._fromError(E,A)}(_,f));else if(E){const A=lg(f),N=f;A&&(N.credential=A,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:Za(m),additionalUserInfo:Sr(m),user:Lo.getOrCreate(A)}})}function af(_,f){return uf.apply(this,arguments)}function uf(){return(uf=(0,h.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>Nr(_,m.confirm(E))}})).apply(this,arguments)}class zy{constructor(f,m){this.resolver=m,this.auth=function Gy(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Nr(ug(this.auth),this.resolver.resolveSignIn(f))}}class Lo{constructor(f){this._delegate=f,this.multiFactor=function td(_){const f=(0,O.m9)(_);return na.has(f)||na.set(f,vs._fromUser(f)),na.get(f)}(f)}static getOrCreate(f){return Lo.USER_MAP.has(f)||Lo.USER_MAP.set(f,new Lo(f)),Lo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,h.Z)(function*(){return Nr(m.auth,xi(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,h.Z)(function*(){return af(E.auth,function Ll(_,f,m){return ua.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,h.Z)(function*(){return Nr(m.auth,function es(_,f,m){return Lu.apply(this,arguments)}(m._delegate,f,mi))})()}linkWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ka(ke(m.auth)),function Je(_,f,m){return function It(_,f,m){return Ot.apply(this,arguments)}(_,f,m)}(m._delegate,f,mi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,h.Z)(function*(){return Nr(m.auth,qs(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return af(this.auth,function Qp(_,f,m){return Vl.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Nr(this.auth,function xo(_,f,m){return Fu.apply(this,arguments)}(this._delegate,f,mi))}reauthenticateWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ka(ke(m.auth)),function ee(_,f,m){return function Me(_,f,m){return xe.apply(this,arguments)}(_,f,m)}(m._delegate,f,mi)})()}sendEmailVerification(f){return function Ri(_,f){return Cl.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,h.Z)(function*(){return yield function La(_,f){return yl.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Al(_,f){return Sl((0,O.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Yc(_,f){return Sl((0,O.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Bl(_,f){return bs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ta(_,f){return Tl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Ru(_,f,m){return Nu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Lo.USER_MAP=new WeakMap;const rc=te;let lf=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;rc(A,"invalid-api-key",{appName:m.name}),rc(A,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?mi:void 0;this._delegate=E.initialize({options:{persistence:Wy(A,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Lo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function gn(_,f,m){const E=ke(_);te(E._canInitEmulator,E,"emulator-config-failed"),te(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),N=pr(f),{host:z,port:oe}=function Ls(_){const f=pr(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const N=A[1];return{host:N,port:$n(E.substr(N.length+1))}}{const[N,z]=E.split(":");return{host:N,port:$n(z)}}}(f);E.config.emulator={url:`${N}//${z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Ki(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function vl(_,f){return De.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vt(this._delegate,m)}confirmPasswordReset(m,E){return function Su(_,f,m){return _l.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,h.Z)(function*(){return Nr(A._delegate,function ea(_,f,m){return Xr.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function xu(_,f){return Zs.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Dl(_,f){const m=vo.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){rc(tc(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function St(_,f){return zn.apply(this,arguments)}(m._delegate,mi);return E?Nr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function ig(_,f){ke(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:N,error:z,complete:oe}=cf(m,E,A);return this._delegate.onAuthStateChanged(N,z,oe)}onIdTokenChanged(m,E,A){const{next:N,error:z,complete:oe}=cf(m,E,A);return this._delegate.onIdTokenChanged(N,z,oe)}sendSignInLinkToEmail(m,E){return function bl(_,f,m){return Zc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Tu(_,f,m){return Au.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let A;switch(function og(_,f){Wa(Object.values(Bi).includes(f),_,"invalid-persistence-type"),(0,O.b$)()?Wa(f!==Bi.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?Wa(f===Bi.NONE,_,"unsupported-persistence-type"):Fo()?Wa(f===Bi.NONE||f===Bi.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):Wa(f===Bi.NONE||Rr(),_,"unsupported-persistence-type")}(E._delegate,m),m){case Bi.SESSION:A=sr;break;case Bi.LOCAL:A=(yield se(Oi)._isAvailable())?Oi:Vn;break;case Bi.NONE:A=q;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Nr(this._delegate,function wu(_){return Wc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Nr(this._delegate,Fn(this._delegate,m))}signInWithCustomToken(m){return Nr(this._delegate,function zs(_,f){return Ws.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Nr(this._delegate,function wl(_,f,m){return Fn((0,O.m9)(_),ml.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Nr(this._delegate,function Mu(_,f,m){return Ks.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return af(this._delegate,function Pu(_,f,m){return Cn.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return rc(tc(),E._delegate,"operation-not-supported-in-this-environment"),Nr(E._delegate,function ro(_,f,m){return ud.apply(this,arguments)}(E._delegate,m,mi))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return rc(tc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ka(E._delegate),function R(_,f,m){return function L(_,f,m){return K.apply(this,arguments)}(_,f,m)}(E._delegate,m,mi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function En(_,f){return Xo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Bi,_})();function cf(_,f,m){let E=_;"function"!=typeof _&&({next:E,error:f,complete:m}=_);const A=E;return{next:z=>A(z&&Lo.getOrCreate(z)),error:f,complete:m}}function Wy(_,f){const m=function ag(_,f){const m=nc();if(!m)return[];const E=de(sf,_,f);switch(m.getItem(E)){case Bi.NONE:return[q];case Bi.LOCAL:return[Oi,sr];case Bi.SESSION:return[sr];default:return[]}}(_,f);if("undefined"!=typeof self&&!m.includes(Oi)&&m.push(Oi),"undefined"!=typeof window)for(const E of[Vn,sr])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class df{constructor(){this.providerId="phone",this._delegate=new Fi(ug(Y.Z.auth()))}static credential(f,m){return Fi.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}df.PHONE_SIGN_IN_METHOD=Fi.PHONE_SIGN_IN_METHOD,df.PROVIDER_ID=Fi.PROVIDER_ID;const Ky=te;class Zy{constructor(f,m,E=Y.Z.app()){var A;Ky(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Yp(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dg(_){_.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new lf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ml,FacebookAuthProvider:Eo,GithubAuthProvider:zc,GoogleAuthProvider:Fa,OAuthProvider:Qo,SAMLAuthProvider:ui,PhoneAuthProvider:df,PhoneMultiFactorGenerator:Oy,RecaptchaVerifier:Zy,TwitterAuthProvider:vu,Auth:lf,AuthCredential:an,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ut,Ae,k)=>{k.d(Ae,{y:()=>$});var h=k(2961),Y=k(727),O=k(8822),ue=k(4671);var re=k(2416),he=k(576),le=k(2806);let $=(()=>{class Se{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const fe=new Se;return fe.source=this,fe.operator=Ve,fe}subscribe(Ve,fe,be){const tt=function We(Se){return Se&&Se instanceof h.Lv||function J(Se){return Se&&(0,he.m)(Se.next)&&(0,he.m)(Se.error)&&(0,he.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(Ve)?Ve:new h.Hp(Ve,fe,be);return(0,le.x)(()=>{const{operator:Ye,source:Ie}=this;tt.add(Ye?Ye.call(tt,Ie):Ie?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(fe){Ve.error(fe)}}forEach(Ve,fe){return new(fe=H(fe))((be,tt)=>{const Ye=new h.Hp({next:Ie=>{try{Ve(Ie)}catch(_e){tt(_e),Ye.unsubscribe()}},error:tt,complete:be});this.subscribe(Ye)})}_subscribe(Ve){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ve)}[O.L](){return this}pipe(...Ve){return function ge(Se){return 0===Se.length?ue.y:1===Se.length?Se[0]:function(Ve){return Se.reduce((fe,be)=>be(fe),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=H(Ve))((fe,be)=>{let tt;this.subscribe(Ye=>tt=Ye,Ye=>be(Ye),()=>fe(tt))})}}return Se.create=Oe=>new Se(Oe),Se})();function H(Se){var Oe;return null!==(Oe=null!=Se?Se:re.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ut,Ae,k)=>{k.d(Ae,{x:()=>re});var h=k(8306),Y=k(727);const ue=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),ge=k(2806);let re=(()=>{class le extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const J=new he(this,this);return J.operator=H,J}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:J}=this;for(;J.length;)J.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:J,isStopped:We,observers:Se}=this;return J||We?Y.Lc:(this.currentObservers=null,Se.push(H),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:J,thrownError:We,isStopped:Se}=this;J?H.error(We):Se&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return le.create=($,H)=>new he($,H),le})();class he extends re{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===J||J.call(H,$)}error($){var H,J;null===(J=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===J||J.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,J;return null!==(J=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==J?J:Y.Lc}}},2961:(ut,Ae,k)=>{k.d(Ae,{Hp:()=>Ve,Lv:()=>J});var h=k(576),Y=k(727),O=k(2416),ue=k(7849);function X(){}const ge=le("C",void 0,void 0);function le(Ie,_e,Ee){return{kind:Ie,value:_e,error:Ee}}var $=k(3410),H=k(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ye}static create(_e,Ee,Ge){return new Ve(_e,Ee,Ge)}next(_e){this.isStopped?tt(function he(Ie){return le("N",Ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?tt(function re(Ie){return le("E",void 0,Ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?tt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Se(Ie,_e){return We.call(Ie,_e)}class Oe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ge){fe(Ge)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ge){fe(Ge)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){fe(Ee)}}}class Ve extends J{constructor(_e,Ee,Ge){let He;if(super(),(0,h.m)(_e)||!_e)He={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),He={next:_e.next&&Se(_e.next,te),error:_e.error&&Se(_e.error,te),complete:_e.complete&&Se(_e.complete,te)}):He=_e}this.destination=new Oe(He)}}function fe(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ie):(0,ue.h)(Ie)}function tt(Ie,_e){const{onStoppedNotification:Ee}=O.v;Ee&&$.z.setTimeout(()=>Ee(Ie,_e))}const Ye={closed:!0,next:X,error:function be(Ie){throw Ie},complete:X}},727:(ut,Ae,k)=>{k.d(Ae,{Lc:()=>ge,w0:()=>X,Nn:()=>re});var h=k(576);const O=(0,k(3888).d)(le=>function(H){le(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=k(8737);class X{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:J}=this;if((0,h.m)(J))try{J()}catch(Se){$=Se instanceof O?Se.errors:[Se]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Se of We)try{he(Se)}catch(Oe){$=null!=$?$:[],Oe instanceof O?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new O($)}}add($){var H;if($&&$!==this)if(this.closed)he($);else{if($ instanceof X){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,ue.P)(H,$),$ instanceof X&&$._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const ge=X.EMPTY;function re(le){return le instanceof X||le&&"closed"in le&&(0,h.m)(le.remove)&&(0,h.m)(le.add)&&(0,h.m)(le.unsubscribe)}function he(le){(0,h.m)(le)?le():le.unsubscribe()}},2416:(ut,Ae,k)=>{k.d(Ae,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,k)=>{k.d(Ae,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(ut,Ae,k)=>{k.d(Ae,{D:()=>_e});var h=k(8421),Y=k(5363),O=k(9468),ge=k(8306),he=k(2202),le=k(576),$=k(9672);function J(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(He=>{(0,$.f)(He,Ge,()=>{const te=Ee[Symbol.asyncIterator]();(0,$.f)(He,Ge,()=>{te.next().then(W=>{W.done?He.complete():He.next(W.value)})},0,!0)})})}var We=k(3670),Se=k(8239),Oe=k(1144),Ve=k(6495),fe=k(2206),be=k(4532),tt=k(3260);function _e(Ee,Ge){return Ge?function Ie(Ee,Ge){if(null!=Ee){if((0,We.c)(Ee))return function ue(Ee,Ge){return(0,h.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,Oe.z)(Ee))return function re(Ee,Ge){return new ge.y(He=>{let te=0;return Ge.schedule(function(){te===Ee.length?He.complete():(He.next(Ee[te++]),He.closed||this.schedule())})})}(Ee,Ge);if((0,Se.t)(Ee))return function X(Ee,Ge){return(0,h.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,fe.D)(Ee))return J(Ee,Ge);if((0,Ve.T)(Ee))return function H(Ee,Ge){return new ge.y(He=>{let te;return(0,$.f)(He,Ge,()=>{te=Ee[he.h](),(0,$.f)(He,Ge,()=>{let W,ie;try{({value:W,done:ie}=te.next())}catch(me){return void He.error(me)}ie?He.complete():He.next(W)},0,!0)}),()=>(0,le.m)(null==te?void 0:te.return)&&te.return()})}(Ee,Ge);if((0,tt.L)(Ee))return function Ye(Ee,Ge){return J((0,tt.Q)(Ee),Ge)}(Ee,Ge)}throw(0,be.z)(Ee)}(Ee,Ge):(0,h.Xf)(Ee)}},8421:(ut,Ae,k)=>{k.d(Ae,{Xf:()=>We});var h=k(655),Y=k(1144),O=k(8239),ue=k(8306),X=k(3670),ge=k(2206),re=k(4532),he=k(6495),le=k(3260),$=k(576),H=k(7849),J=k(8822);function We(Ie){if(Ie instanceof ue.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Se(Ie){return new ue.y(_e=>{const Ee=Ie[J.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,Y.z)(Ie))return function Oe(Ie){return new ue.y(_e=>{for(let Ee=0;Ee<Ie.length&&!_e.closed;Ee++)_e.next(Ie[Ee]);_e.complete()})}(Ie);if((0,O.t)(Ie))return function Ve(Ie){return new ue.y(_e=>{Ie.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,H.h)})}(Ie);if((0,ge.D)(Ie))return be(Ie);if((0,he.T)(Ie))return function fe(Ie){return new ue.y(_e=>{for(const Ee of Ie)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Ie);if((0,le.L)(Ie))return function tt(Ie){return be((0,le.Q)(Ie))}(Ie)}throw(0,re.z)(Ie)}function be(Ie){return new ue.y(_e=>{(function Ye(Ie,_e){var Ee,Ge,He,te;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,h.KL)(Ie);!(Ge=yield Ee.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(W){He={error:W}}finally{try{Ge&&!Ge.done&&(te=Ee.return)&&(yield te.call(Ee))}finally{if(He)throw He.error}}_e.complete()})})(Ie,_e).catch(Ee=>_e.error(Ee))})}},6451:(ut,Ae,k)=>{k.d(Ae,{T:()=>ge});var h=k(8189),Y=k(8421),O=k(515),ue=k(7669),X=k(8996);function ge(...re){const he=(0,ue.yG)(re),le=(0,ue._6)(re,1/0),$=re;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,h.J)(le)((0,X.D)($,he)):O.E}},5403:(ut,Ae,k)=>{k.d(Ae,{x:()=>Y});var h=k(2961);function Y(ue,X,ge,re,he){return new O(ue,X,ge,re,he)}class O extends h.Lv{constructor(X,ge,re,he,le,$){super(X),this.onFinalize=le,this.shouldUnsubscribe=$,this._next=ge?function(H){try{ge(H)}catch(J){X.error(J)}}:super._next,this._error=he?function(H){try{he(H)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ut,Ae,k)=>{k.d(Ae,{U:()=>O});var h=k(4482),Y=k(5403);function O(ue,X){return(0,h.e)((ge,re)=>{let he=0;ge.subscribe((0,Y.x)(re,le=>{re.next(ue.call(X,le,he++))}))})}},8189:(ut,Ae,k)=>{k.d(Ae,{J:()=>O});var h=k(5577),Y=k(4671);function O(ue=1/0){return(0,h.z)(Y.y,ue)}},5577:(ut,Ae,k)=>{k.d(Ae,{z:()=>he});var h=k(4004),Y=k(8421),O=k(4482),ue=k(9672),X=k(5403),re=k(576);function he(le,$,H=1/0){return(0,re.m)($)?he((J,We)=>(0,h.U)((Se,Oe)=>$(J,Se,We,Oe))((0,Y.Xf)(le(J,We))),H):("number"==typeof $&&(H=$),(0,O.e)((J,We)=>function ge(le,$,H,J,We,Se,Oe,Ve){const fe=[];let be=0,tt=0,Ye=!1;const Ie=()=>{Ye&&!fe.length&&!be&&$.complete()},_e=Ge=>be<J?Ee(Ge):fe.push(Ge),Ee=Ge=>{Se&&$.next(Ge),be++;let He=!1;(0,Y.Xf)(H(Ge,tt++)).subscribe((0,X.x)($,te=>{null==We||We(te),Se?_e(te):$.next(te)},()=>{He=!0},void 0,()=>{if(He)try{for(be--;fe.length&&be<J;){const te=fe.shift();Oe?(0,ue.f)($,Oe,()=>Ee(te)):Ee(te)}Ie()}catch(te){$.error(te)}}))};return le.subscribe((0,X.x)($,_e,()=>{Ye=!0,Ie()})),()=>{null==Ve||Ve()}}(J,We,le,H)))}},5363:(ut,Ae,k)=>{k.d(Ae,{Q:()=>ue});var h=k(9672),Y=k(4482),O=k(5403);function ue(X,ge=0){return(0,Y.e)((re,he)=>{re.subscribe((0,O.x)(he,le=>(0,h.f)(he,X,()=>he.next(le),ge),()=>(0,h.f)(he,X,()=>he.complete(),ge),le=>(0,h.f)(he,X,()=>he.error(le),ge)))})}},3099:(ut,Ae,k)=>{k.d(Ae,{B:()=>ge});var h=k(8996),Y=k(5698),O=k(7579),ue=k(2961),X=k(4482);function ge(he={}){const{connector:le=(()=>new O.x),resetOnError:$=!0,resetOnComplete:H=!0,resetOnRefCountZero:J=!0}=he;return We=>{let Se=null,Oe=null,Ve=null,fe=0,be=!1,tt=!1;const Ye=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ie=()=>{Ye(),Se=Ve=null,be=tt=!1},_e=()=>{const Ee=Se;Ie(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,Ge)=>{fe++,!tt&&!be&&Ye();const He=Ve=null!=Ve?Ve:le();Ge.add(()=>{fe--,0===fe&&!tt&&!be&&(Oe=re(_e,J))}),He.subscribe(Ge),Se||(Se=new ue.Hp({next:te=>He.next(te),error:te=>{tt=!0,Ye(),Oe=re(Ie,$,te),He.error(te)},complete:()=>{be=!0,Ye(),Oe=re(Ie,H),He.complete()}}),(0,h.D)(Ee).subscribe(Se))})(We)}}function re(he,le,...$){return!0===le?(he(),null):!1===le?null:le(...$).pipe((0,Y.q)(1)).subscribe(()=>he())}},9468:(ut,Ae,k)=>{k.d(Ae,{R:()=>Y});var h=k(4482);function Y(O,ue=0){return(0,h.e)((X,ge)=>{ge.add(O.schedule(()=>X.subscribe(ge),ue))})}},5698:(ut,Ae,k)=>{k.d(Ae,{q:()=>ue});var h=k(515),Y=k(4482),O=k(5403);function ue(X){return X<=0?()=>h.E:(0,Y.e)((ge,re)=>{let he=0;ge.subscribe((0,O.x)(re,le=>{++he<=X&&(re.next(le),X<=he&&re.complete())}))})}},8505:(ut,Ae,k)=>{k.d(Ae,{b:()=>X});var h=k(576),Y=k(4482),O=k(5403),ue=k(4671);function X(ge,re,he){const le=(0,h.m)(ge)||re||he?{next:ge,error:re,complete:he}:ge;return le?(0,Y.e)(($,H)=>{var J;null===(J=le.subscribe)||void 0===J||J.call(le);let We=!0;$.subscribe((0,O.x)(H,Se=>{var Oe;null===(Oe=le.next)||void 0===Oe||Oe.call(le,Se),H.next(Se)},()=>{var Se;We=!1,null===(Se=le.complete)||void 0===Se||Se.call(le),H.complete()},Se=>{var Oe;We=!1,null===(Oe=le.error)||void 0===Oe||Oe.call(le,Se),H.error(Se)},()=>{var Se,Oe;We&&(null===(Se=le.unsubscribe)||void 0===Se||Se.call(le)),null===(Oe=le.finalize)||void 0===Oe||Oe.call(le)}))}):ue.y}},4408:(ut,Ae,k)=>{k.d(Ae,{o:()=>X});var h=k(727);class Y extends h.w0{constructor(re,he){super()}schedule(re,he=0){return this}}const O={setInterval(ge,re,...he){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(ge,re,...he):setInterval(ge,re,...he)},clearInterval(ge){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class X extends Y{constructor(re,he){super(re,he),this.scheduler=re,this.work=he,this.pending=!1}schedule(re,he=0){if(this.closed)return this;this.state=re;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId($,this.id,he),this}requestAsyncId(re,he,le=0){return O.setInterval(re.flush.bind(re,this),le)}recycleAsyncId(re,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;O.clearInterval(he)}execute(re,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(re,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,he){let $,le=!1;try{this.work(re)}catch(H){le=!0,$=H||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:re,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(le,this),null!=re&&(this.id=this.recycleAsyncId(he,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ae,k)=>{k.d(Ae,{v:()=>O});var h=k(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,re){return new this.schedulerActionCtor(this,X).schedule(re,ge)}}Y.now=h.l.now;class O extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,re){for(;X=ge.shift();)X.unsubscribe();throw re}}}},4986:(ut,Ae,k)=>{k.d(Ae,{z:()=>O});var h=k(4408);const O=new(k(7565).v)(h.o)},6063:(ut,Ae,k)=>{k.d(Ae,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(ut,Ae,k)=>{k.d(Ae,{z:()=>h});const h={setTimeout(Y,O,...ue){const{delegate:X}=h;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...ue):setTimeout(Y,O,...ue)},clearTimeout(Y){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Ae,k)=>{k.d(Ae,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,k)=>{k.d(Ae,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ae,k)=>{k.d(Ae,{_6:()=>ge,jO:()=>ue,yG:()=>X});var h=k(576);function O(re){return re[re.length-1]}function ue(re){return(0,h.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,h.m)(re.schedule)}(O(re))?re.pop():void 0}function ge(re,he){return"number"==typeof O(re)?re.pop():he}},8737:(ut,Ae,k)=>{function h(Y,O){if(Y){const ue=Y.indexOf(O);0<=ue&&Y.splice(ue,1)}}k.d(Ae,{P:()=>h})},3888:(ut,Ae,k)=>{function h(Y){const ue=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(Ae,{d:()=>h})},2806:(ut,Ae,k)=>{k.d(Ae,{x:()=>O,O:()=>ue});var h=k(2416);let Y=null;function O(X){if(h.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:re,error:he}=Y;if(Y=null,re)throw he}}else X()}function ue(X){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ut,Ae,k)=>{function h(Y,O,ue,X=0,ge=!1){const re=O.schedule(function(){ue(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!ge)return re}k.d(Ae,{f:()=>h})},4671:(ut,Ae,k)=>{function h(Y){return Y}k.d(Ae,{y:()=>h})},1144:(ut,Ae,k)=>{k.d(Ae,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Ae,k)=>{k.d(Ae,{D:()=>Y});var h=k(576);function Y(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ae,k)=>{function h(Y){return"function"==typeof Y}k.d(Ae,{m:()=>h})},3670:(ut,Ae,k)=>{k.d(Ae,{c:()=>O});var h=k(8822),Y=k(576);function O(ue){return(0,Y.m)(ue[h.L])}},6495:(ut,Ae,k)=>{k.d(Ae,{T:()=>O});var h=k(2202),Y=k(576);function O(ue){return(0,Y.m)(null==ue?void 0:ue[h.h])}},8239:(ut,Ae,k)=>{k.d(Ae,{t:()=>Y});var h=k(576);function Y(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(ut,Ae,k)=>{k.d(Ae,{Q:()=>O,L:()=>ue});var h=k(655),Y=k(576);function O(X){return(0,h.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:he,done:le}=yield(0,h.qq)(re.read());if(le)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(he)}}finally{re.releaseLock()}})}function ue(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ut,Ae,k)=>{k.d(Ae,{A:()=>Y,e:()=>O});var h=k(576);function Y(ue){return(0,h.m)(null==ue?void 0:ue.lift)}function O(ue){return X=>{if(Y(X))return X.lift(function(ge){try{return ue(ge,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ut,Ae,k)=>{k.d(Ae,{h:()=>O});var h=k(2416),Y=k(3410);function O(ue){Y.z.setTimeout(()=>{const{onUnhandledError:X}=h.v;if(!X)throw ue;X(ue)})}},4532:(ut,Ae,k)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>h})},655:(ut,Ae,k)=>{function ue(W,ie){var me={};for(var se in W)Object.prototype.hasOwnProperty.call(W,se)&&ie.indexOf(se)<0&&(me[se]=W[se]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(W);Ne<se.length;Ne++)ie.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,se[Ne])&&(me[se[Ne]]=W[se[Ne]])}return me}function he(W,ie,me,se){return new(me||(me=Promise))(function(ae,Tt){function Xt(vt){try{lt(se.next(vt))}catch(cn){Tt(cn)}}function kn(vt){try{lt(se.throw(vt))}catch(cn){Tt(cn)}}function lt(vt){vt.done?ae(vt.value):function Ne(ae){return ae instanceof me?ae:new me(function(Tt){Tt(ae)})}(vt.value).then(Xt,kn)}lt((se=se.apply(W,ie||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function be(W,ie,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=me.apply(W,ie||[]),ae=[];return Ne={},Tt("next"),Tt("throw"),Tt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Tt(dn){se[dn]&&(Ne[dn]=function(Ai){return new Promise(function(on,us){ae.push([dn,Ai,on,us])>1||Xt(dn,Ai)})})}function Xt(dn,Ai){try{!function kn(dn){dn.value instanceof fe?Promise.resolve(dn.value.v).then(lt,vt):cn(ae[0][2],dn)}(se[dn](Ai))}catch(on){cn(ae[0][3],on)}}function lt(dn){Xt("next",dn)}function vt(dn){Xt("throw",dn)}function cn(dn,Ai){dn(Ai),ae.shift(),ae.length&&Xt(ae[0][0],ae[0][1])}}function Ye(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function J(W){var ie="function"==typeof Symbol&&Symbol.iterator,me=ie&&W[ie],se=0;if(me)return me.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&se>=W.length&&(W=void 0),{value:W&&W[se++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(ae){me[ae]=W[ae]&&function(Tt){return new Promise(function(Xt,kn){!function Ne(ae,Tt,Xt,kn){Promise.resolve(kn).then(function(lt){ae({value:lt,done:Xt})},Tt)}(Xt,kn,(Tt=W[ae](Tt)).done,Tt.value)})}}}k.d(Ae,{_T:()=>ue,mG:()=>he,qq:()=>fe,FC:()=>be,KL:()=>Ye})},5e3:(ut,Ae,k)=>{k.d(Ae,{deG:()=>Wp,tb:()=>uh,AFp:()=>a0,ip1:()=>al,CZH:()=>xc,hGG:()=>wD,z2F:()=>h0,sBO:()=>gh,Sil:()=>Vm,_Vd:()=>_m,EJc:()=>ch,SBq:()=>vc,qLn:()=>Nr,vpe:()=>$o,tBr:()=>Vr,XFs:()=>dt,OlP:()=>Sn,zs3:()=>Vo,ZZ4:()=>kc,aQg:()=>Qm,soG:()=>lp,YKP:()=>zv,h0i:()=>Ss,PXZ:()=>$T,R0b:()=>ho,FiY:()=>gi,Lbi:()=>Ho,g9A:()=>ul,Qsj:()=>wc,FYo:()=>Db,JOm:()=>oe,tp0:()=>Oo,Rgc:()=>ep,dDg:()=>Ca,q4F:()=>Gv,GfV:()=>Yf,s_b:()=>Ic,ifc:()=>zt,eFA:()=>iD,G48:()=>Hm,Gpc:()=>H,X6Q:()=>$m,_c5:()=>tn,VLi:()=>rD,c2e:()=>u0,zSh:()=>WE,wAp:()=>bt,vHH:()=>Oe,cg1:()=>rm,kL8:()=>im,dqk:()=>Ht,sIi:()=>Fd,CqO:()=>W_,QGY:()=>q_,F4k:()=>z_,RDi:()=>ms,AaK:()=>he,qOj:()=>Ng,TTD:()=>Eo,_Bn:()=>bb,xp6:()=>RC,uIk:()=>Pg,Tol:()=>iv,ekj:()=>nv,Suo:()=>e0,Xpm:()=>Lt,lG2:()=>Yt,Yz7:()=>on,cJS:()=>en,oAB:()=>Q,Yjl:()=>Cr,Y36:()=>hc,_UZ:()=>Gg,qZA:()=>Hd,TgZ:()=>Ju,EpF:()=>G_,n5z:()=>od,LFG:()=>Je,$8M:()=>Mo,$Z:()=>Hg,NdJ:()=>qg,CRH:()=>Ac,oxw:()=>Nw,ALo:()=>ar,lcZ:()=>Mb,xi3:()=>xb,Hsn:()=>K_,F$t:()=>kw,Q6J:()=>$d,DdM:()=>bm,VKq:()=>Dm,iGM:()=>ss,MAs:()=>Ew,Jf7:()=>cg,CHM:()=>El,LSH:()=>Hu,YNc:()=>_w,W1O:()=>t0,_uU:()=>Zw,Oqu:()=>av,hij:()=>Jg});var h=k(7579),Y=k(727),O=k(8306),ue=k(6451),X=k(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return he(this())},s}function J(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}class Oe extends Error{constructor(o,a){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function _e(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${be(s)} found${a}`)}function lt(s,o){null==s&&function vt(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return dr(s,zi)||dr(s,ls)}function dr(s,o){return s.hasOwnProperty(o)?s[o]:null}function kr(s){return s&&(s.hasOwnProperty(Pr)||s.hasOwnProperty(cs))?s[Pr]:null}const zi=ge({\u0275prov:ge}),Pr=ge({\u0275inj:ge}),ls=ge({ngInjectableDef:ge}),cs=ge({ngInjectorDef:ge});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Zr;function Kn(s){const o=Zr;return Zr=s,o}function si(s,o,a){const l=qt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==o?o:void _e(he(s),"Injector")}function vn(s){return{toString:s}.toString()}var tr=(()=>((tr=tr||{})[tr.OnPush=0]="OnPush",tr[tr.Default=1]="Default",tr))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,Dt="undefined"!=typeof window&&window,hr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ot||"undefined"!=typeof global&&global||Dt||hr,fr={},ht=[],Dr=ge({\u0275cmp:ge}),Ut=ge({\u0275dir:ge}),Qe=ge({\u0275pipe:ge}),Te=ge({\u0275mod:ge}),Xe=ge({\u0275fac:ge}),ft=ge({__NG_ELEMENT_ID__:ge});let $t=0;function Lt(s){return vn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===tr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ht,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||ht,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=$t++,l.inputs=Et(s.inputs,a),l.outputs=Et(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return Wt(s)||function Tn(s){return s[Ut]||null}(s)}function q(s){return function Nt(s){return s[Qe]||null}(s)}const de={};function Q(s){return vn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ht,declarations:s.declarations||ht,imports:s.imports||ht,exports:s.exports||ht,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function Et(s,o){if(null==s)return fr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Yt=Lt;function Cr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Wt(s){return s[Dr]||null}function pn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function Mi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ai(s){return Array.isArray(s)&&!0===s[1]}function jc(s){return 0!=(8&s.flags)}function Us(s){return 2==(2&s.flags)}function yu(s){return 1==(1&s.flags)}function Yr(s){return null!==s.template}function Nh(s){return 0!=(512&s[2])}function Qr(s,o){return s.hasOwnProperty(Xe)?s[Xe]:null}class Qo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Eo(){return Fa}function Fa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Gp),zc}function zc(){const s=Hs(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===fr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Gp(s,o,a,l){const d=Hs(s)||function ui(s,o){return s[ir]=o}(s,{previous:fr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new Qo(D&&D.currentValue,o,v===fr),s[l]=o}Eo.ngInherit=!0;const ir="__ngSimpleChanges__";function Hs(s){return s[ir]||null}let Du;function ms(s){Du=s}function yn(s){return!!s.listen}const Jo={createRenderer:(s,o)=>function La(){return void 0!==Du?Du:"undefined"!=typeof document?document:void 0}()};function ln(s){for(;Array.isArray(s);)s=s[0];return s}function bo(s,o){return ln(o[s])}function Tr(s,o){return ln(o[s.index])}function Va(s,o){return s.data[o]}function xi(s,o){return s[o]}function Ar(s,o){const a=o[s];return Mi(a)?a:a[0]}function qs(s){return 4==(4&s[2])}function ys(s){return 128==(128&s[2])}function Jr(s,o){return null==o?null:s[o]}function zs(s){s[18]=0}function Ws(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:Co(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Su(){return pt.bindingsEnabled}function De(){return pt.lFrame.lView}function Vt(){return pt.lFrame.tView}function El(s){return pt.lFrame.contextLView=s,s[8]}function En(){let s=Xo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xo(){return pt.lFrame.currentTNode}function Xr(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function wl(){return pt.lFrame.isParent}function bl(){pt.lFrame.isParent=!1}function Mu(){return pt.isInCheckNoChangesMode}function Ks(s){pt.isInCheckNoChangesMode=s}function mr(){const s=pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Zs(){return pt.lFrame.bindingIndex++}function Ri(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Nu(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ua(o)}function Ua(s){pt.lFrame.currentDirectiveIndex=s}function Tl(){return pt.lFrame.currentQueryIndex}function Al(s){pt.lFrame.currentQueryIndex=s}function Yc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Sl(s,o,a){if(a&dt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Yc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=pt.lFrame=Qc();return l.currentTNode=o,l.lView=s,!0}function Do(s){const o=Qc(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Qc(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Co(s):o}function Co(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Jc(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Xc=Jc;function Io(){const s=Jc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Sr(){return pt.lFrame.selectedIndex}function Qs(s){pt.lFrame.selectedIndex=s}function An(){const s=pt.lFrame;return Va(s.tView,s.selectedIndex)}function _s(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function ja(s,o,a){ed(s,o,3,a)}function Ou(s,o,a,l){(3&s[2])===a&&ed(s,o,a,l)}function Gn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function ed(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(qp(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function qp(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class na{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function gt(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];ei(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function sr(s){return 3===s||4===s||6===s}function ei(s){return 64===s.charCodeAt(0)}function Fr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||ra(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function ra(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function rd(s){return-1!==s}function mn(s){return 32767&s}function Ni(s,o){let a=function Vh(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let ku=!0;function ci(s){const o=ku;return ku=s,o}let kl=0;function qn(s,o){const a=ia(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Es(l.data,s),Es(o,null),Es(l.blueprint,null));const d=di(s,o),g=s.injectorIndex;if(rd(d)){const v=mn(d),w=Ni(d,o),D=w[1].data;for(let T=0;T<8;T++)o[g+T]=w[v+T]|D[v+T]}return o[g+8]=d,g}function Es(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ia(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function di(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Js(s,o,a){!function Ao(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=kl++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Zi(s,o,a){if(a&dt.Optional)return s;_e(o,"NodeInjector")}function Pl(s,o,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const d=s[9],g=Kn(void 0);try{return d?d.get(o,l,a&dt.Optional):si(o,l,a&dt.Optional)}finally{Kn(g)}}return Zi(l,o,a)}function Xs(s,o,a,l=dt.Default,d){if(null!==s){const g=function sa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Fl:o}(a);if("function"==typeof g){if(!Sl(o,s,l))return l&dt.Host?Zi(d,a,l):Pl(o,a,l,d);try{const v=g(l);if(null!=v||l&dt.Optional)return v;_e(a)}finally{Xc()}}else if("number"==typeof g){let v=null,w=ia(s,o),D=-1,T=l&dt.Host?o[16][6]:null;for((-1===w||l&dt.SkipSelf)&&(D=-1===w?di(s,o):o[w+8],-1!==D&&Lr(l,!1)?(v=o[1],w=mn(D),o=Ni(D,o)):w=-1);-1!==w;){const x=o[1];if(oa(g,w,x.data)){const P=sd(w,o,a,v,l,T);if(P!==Yi)return P}D=o[w+8],-1!==D&&Lr(l,o[1].data[w+8]===T)&&oa(g,w,o)?(v=x,w=mn(D),o=Ni(D,o)):w=-1}}}return Pl(o,a,l,d)}const Yi={};function Fl(){return new ki(En(),De())}function sd(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=So(w,v,a,null==l?Us(w)&&ku:l!=v&&0!=(3&w.type),d&dt.Host&&g===w);return null!==x?Oi(o,v,x,w):Yi}function So(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,U=d?w+x:s.directiveEnd;for(let Z=l?w:w+x;Z<U;Z++){const ye=v[Z];if(Z<D&&a===ye||Z>=D&&ye.type===a)return Z}if(d){const Z=v[D];if(Z&&Yr(Z)&&Z.type===a)return D}return null}function Oi(s,o,a,l){let d=s[a];const g=o.data;if(function td(s){return s instanceof na}(d)){const v=d;v.resolving&&function tt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(be(g[a]));const w=ci(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Kn(v.injectImpl):null;Sl(s,l,dt.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Rl(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Fa(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Kn(D),ci(w),v.resolving=!1,Xc()}}return d}function oa(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Lr(s,o){return!(s&dt.Self||s&dt.Host&&o)}class ki{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Xs(this._tNode,this._lView,o,l,a)}}function od(s){return vn(()=>{const o=s.prototype.constructor,a=o[Xe]||Bn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[Xe]||Bn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Bn(s){return We(s)?()=>{const o=Bn(J(s));return o&&o()}:Qr(s)}function Mo(s){return function hi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(sr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(En(),s)}const aa="__parameters__";function Dn(s,o,a){return vn(()=>{const l=function Ji(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,T,x){const P=D.hasOwnProperty(aa)?D[aa]:Object.defineProperty(D,aa,{value:[]})[aa];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wp=new Sn("AnalyzeForEntryComponents");function xr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),xr(l,o)):o!==s&&o.push(l)}return o}function fi(s,o){s.forEach(a=>Array.isArray(a)?fi(a,o):o(a))}function Bl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function bs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Fi(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Yn(s,o,a){let l=ro(s,o);return l>=0?s[1|l]=a:(l=~l,function Ul(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Hl(s,o){const a=ro(s,o);if(a>=0)return s[1|a]}function ro(s,o){return function xo(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Ro={},la="__NG_DI_FLAG__",Vu="ngTempTokenPath",I=/\n/gm,L="__source",K=ge({provide:String,useValue:ge});let ee;function Me(s){const o=ee;return ee=s,o}function xe(s,o=dt.Default){if(void 0===ee)throw new Oe(203,"");return null===ee?si(s,void 0,o):ee.get(s,o&dt.Optional?null:void 0,o)}function Je(s,o=dt.Default){return(function er(){return Zr}()||xe)(J(s),o)}const Ot=Je;function St(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,g=dt.Default;for(let v=0;v<l.length;v++){const w=l[v],D=Mn(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(Je(d,g))}else o.push(Je(l))}return o}function zn(s,o){return s[la]=o,s.prototype[la]=o,s}function Mn(s){return s[la]}const Vr=zn(Dn("Inject",s=>({token:s})),-1),gi=zn(Dn("Optional"),8),Oo=zn(Dn("SkipSelf"),4);class md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function io(s){return s instanceof md?s.changingThisBreaksApplicationSecurity:s}const so=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function Hu(s){const o=function pa(){const s=De();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function ha(s,o){const a=function Uu(s){return s instanceof md&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?io(s):function ju(s){return(s=String(s)).match(so)||s.match(zh)?s:"unsafe:"+s}(fe(s))}const nf="__ngContext__";function Br(s,o){s[nf]=o}function rf(s){const o=function za(s){return s[nf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Za(s){return s.ngOriginalError}function lg(s,...o){s.error(...o)}class Nr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function qy(s){return s&&s.ngErrorLogger||lg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Za(o);for(;a&&Za(a);)a=Za(a);return a||null}}const Zy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function cg(s){return s.ownerDocument.defaultView}function m(s){return s instanceof Function?s():s}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function et(s,o){return undefined(s,o)}function xn(s){const o=s[3];return ai(o)?o[3]:o}function Gu(s){return hf(s[13])}function qu(s){return hf(s[4])}function hf(s){for(;null!==s&&!ai(s);)s=s[4];return s}function ga(s,o,a,l,d){if(null!=l){let g,v=!1;ai(l)?g=l:Mi(l)&&(v=!0,l=l[0]);const w=ln(l);0===s&&null!==a?null==d?t_(o,a,w):Cs(o,a,w,d||null,!0):1===s&&null!==a?Cs(o,a,w,d||null,!0):2===s?function s_(s,o,a){const l=ma(s,o);l&&function TC(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function sE(s,o,a,l,d){const g=a[7];g!==ln(a)&&ga(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];gg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function Cd(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function bu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function Y0(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ws(d,-1)),a.splice(l,1)}function Jy(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Y0(d,l),o>0&&(s[a-1][4]=l[4]);const g=bs(s,10+o);!function yi(s,o){gg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Xy(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&gg(s,o,a,3,null,null),function gf(s){let o=s[13];if(!o)return e_(s[1],s);for(;o;){let a=null;if(Mi(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Mi(o)&&e_(o[1],o),o=o[3];null===o&&(o=s),Mi(o)&&e_(o[1],o),a=o&&o[4]}o=a}}(o)}}function e_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function J0(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof na)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Q0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):ln(o[v]),D=l[d=a[g+2]],T=a[g+3];"boolean"==typeof T?w.removeEventListener(a[g],D,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ai(o[3])){a!==o[3]&&Y0(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function fg(s,o,a){return function IC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===zt.None||d===zt.Emulated)return null}return Tr(l,a)}(s,o.parent,a)}function Cs(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function t_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function X0(s,o,a,l,d){null!==l?Cs(s,o,a,l,d):t_(s,o,a)}function ma(s,o){return yn(s)?s.parentNode(o):o.parentNode}function eE(s,o,a){return n_(s,o,a)}let n_=function tE(s,o,a){return 40&s.type?Tr(s,a):null};function pg(s,o,a,l){const d=fg(s,l,o),g=o[11],w=eE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)X0(g,d,a[D],w,!1);else X0(g,d,a,w,!1)}function Td(s,o){if(null!==o){const a=o.type;if(3&a)return Tr(o,s);if(4&a)return i_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Td(s,l);{const d=s[o.index];return ai(d)?i_(-1,d):ln(d)}}if(32&a)return et(o,s)()||ln(s[o.index]);{const l=rE(s,o);return null!==l?Array.isArray(l)?l[0]:Td(xn(s[16]),l):Td(s,o.next)}}return null}function rE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function i_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Td(l,d)}return o[7]}function o_(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&Br(ln(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)o_(s,o,a.child,l,d,g,!1),ga(o,s,d,w,g);else if(32&D){const T=et(a,l);let x;for(;x=T();)ga(o,s,d,x,g);ga(o,s,d,w,g)}else 16&D?iE(s,o,l,a,d,g):ga(o,s,d,w,g);a=v?a.projectionNext:a.next}}function gg(s,o,a,l,d,g){o_(a,l,s.firstChild,o,d,g,!1)}function iE(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)ga(o,s,d,D[T],g);else o_(s,o,D,v[3],d,g,!0)}function aE(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function u_(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function uE(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const cE="ng-template";function dE(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==uE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function hE(s){return 4===s.type&&s.value!==cE}function fE(s,o,a){return o===(4!==s.type||a?s.value:cE)}function pE(s,o,a){let l=4;const d=s.attrs||[],g=function FM(s){for(let o=0;o<s.length;o++)if(sr(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!fE(s,D,a)||""===D&&1===o.length){if(oo(l))return!1;v=!0}}else{const T=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!dE(s.attrs,T,a)){if(oo(l))return!1;v=!0}continue}const P=SC(8&l?"class":D,d,hE(s),a);if(-1===P){if(oo(l))return!1;v=!0;continue}if(""!==T){let U;U=P>g?"":d[P+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==uE(Z,T,0)||2&l&&T!==U){if(oo(l))return!1;v=!0}}}}else{if(!v&&!oo(l)&&!oo(D))return!1;if(v&&oo(D))continue;v=!1,l=D|1&l}}return oo(l)||v}function oo(s){return 0==(1&s)}function SC(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function MC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function gE(s,o,a=!1){for(let l=0;l<o.length;l++)if(pE(s,o[l],a))return!0;return!1}function xC(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function yE(s,o){return s?":not("+o.trim()+")":o}function Un(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!oo(v)&&(o+=yE(g,d),d=""),l=v,g=g||!oo(l);a++}return""!==d&&(o+=yE(g,d)),o}const Ft={};function RC(s){NC(Vt(),De(),Sr()+s,Mu())}function NC(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ja(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Ou(o,g,0,a)}Qs(a)}function l_(s,o){return s<<17|o<<2}function ya(s){return s>>17&32767}function _E(s){return 2|s}function ao(s){return(131068&s)>>2}function Ui(s,o){return-131069&s|o<<2}function vE(s){return 1|s}function Ad(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Al(d),v.contentQueries(2,o[g],g)}}}function mf(s,o,a,l,d,g,v,w,D,T){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,zs(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=T||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function Sd(s,o,a,l,d){let g=s.data[o];if(null===g)g=function ME(s,o,a,l,d){const g=Xo(),v=wl(),D=s.data[o]=function w_(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function Cl(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function ea(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Xr(g,!0),g}function Qa(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Ja(s,o,a){Do(o);try{const l=s.viewQuery;null!==l&&bf(1,l,a);const d=s.template;null!==d&&xE(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ad(s,o),s.staticViewQueries&&bf(2,s.viewQuery,a);const g=s.components;null!==g&&function qC(s,o){for(let a=0;a<o.length;a++)Ef(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Io()}}function uo(s,o,a,l){const d=o[2];if(256==(256&d))return;Do(o);const g=Mu();try{zs(o),function xu(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&xE(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const T=s.preOrderCheckHooks;null!==T&&ja(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Ou(o,T,0,null),Gn(o,0)}if(function ex(s){for(let o=Gu(s);null!==o;o=qu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Ws(g,1),d[2]|=1024}}}(o),function Cg(s){for(let o=Gu(s);null!==o;o=qu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ys(l)&&uo(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Ad(s,o),!g)if(v){const T=s.contentCheckHooks;null!==T&&ja(o,T)}else{const T=s.contentHooks;null!==T&&Ou(o,T,1),Gn(o,1)}!function HC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Qs(~d);else{const g=d,v=a[++l],w=a[++l];Nu(v,g),w(2,o[g])}}}finally{Qs(-1)}}(s,o);const w=s.components;null!==w&&function GC(s,o){for(let a=0;a<o.length;a++)vf(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&bf(2,D,l),!g)if(v){const T=s.viewCheckHooks;null!==T&&ja(o,T)}else{const T=s.viewHooks;null!==T&&Ou(o,T,2),Gn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ws(o[3],-1))}finally{Io()}}function __(s,o,a,l){const d=o[10],g=!Mu(),v=qs(o);try{g&&!v&&d.begin&&d.begin(),v&&Ja(s,o,l),uo(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function xE(s,o,a,l,d){const g=Sr(),v=2&l;try{Qs(-1),v&&o.length>20&&NC(s,o,20,Mu()),a(l,d)}finally{Qs(g)}}function Md(s,o,a){!Su()||(function I_(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||qn(a,o),Br(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],T=Yr(D);T&&ZC(o,a,D);const x=Oi(o,s,w,a);Br(x,o),null!==v&&YC(0,w-d,x,D,0,v),T&&(Ar(a.index,o)[8]=x)}}(s,o,a,Tr(a,o)),128==(128&a.flags)&&function FE(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function Il(){return pt.lFrame.currentDirectiveIndex}();try{Qs(v);for(let D=l;D<d;D++){const T=s.data[D],x=o[D];Ua(D),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&LE(T,x)}}finally{Qs(-1),Ua(w)}}(s,o,a))}function wg(s,o,a=Tr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function v_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=yf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function yf(s,o,a,l,d,g,v,w,D,T){const x=20+l,P=x+d,U=function RE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ft);return a}(x,P),Z="function"==typeof T?T():T;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Z,incompleteFirstPass:!1}}function E_(s,o,a,l){const d=eI(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&tI(s).push(l,d.length-1))}function bg(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Rd(s,o,a,l){let d=!1;if(Su()){const g=function Dg(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];gE(a,v.selectors,!1)&&(d||(d=[]),Js(qn(a,o),s,v.type),Yr(v)?(VE(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,UE(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const P=g[x];P.providersResolver&&P.providersResolver(P)}let w=!1,D=!1,T=Qa(s,o,g.length,null);for(let x=0;x<g.length;x++){const P=g[x];a.mergedAttrs=Fr(a.mergedAttrs,P.hostAttrs),jE(s,a,o,T,P),BE(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),T++}!function b_(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let T=o.directiveStart;T<l;T++){const x=d[T],P=x.inputs,U=null===g||hE(o)?null:QC(P,g);v.push(U),w=bg(P,T,w),D=bg(x.outputs,T,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function KC(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Oe(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Fr(a.mergedAttrs,a.attrs),d}function C_(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function PE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function LE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function VE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function BE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Yr(o)&&(a[""]=s)}}function UE(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function jE(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Qr(d.type)),v=new na(g,Yr(d),null);s.blueprint[l]=v,a[l]=v,C_(s,o,0,l,Qa(s,a,d.hostVars,Ft),d)}function ZC(s,o,a){const l=Tr(o,s),d=v_(a),g=s[10],v=wf(s,mf(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function _a(s,o,a,l,d,g){const v=Tr(s,o);!function T_(s,o,a,l,d,g,v){if(null==g)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?fe(g):v(g,l||"",d);yn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function YC(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const T=v[D++],x=v[D++],P=v[D++];null!==w?l.setInput(a,P,T,x):a[x]=P}}}function QC(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function _f(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function vf(s,o){const a=Ar(o,s);if(ys(a)){const l=a[1];80&a[2]?uo(l,a,l.template,a[8]):a[5]>0&&A_(a)}}function A_(s){for(let l=Gu(s);null!==l;l=qu(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];uo(v,g,v.template,g[8])}else g[5]>0&&A_(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Ar(a[l],s);ys(d)&&d[5]>0&&A_(d)}}function Ef(s,o){const a=Ar(o,s),l=a[1];(function JC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Ja(l,a,a[8])}function wf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function $E(s){for(;s;){s[2]|=64;const o=xn(s);if(Nh(s)&&!o)return s;s=o}return null}function S_(s,o,a){const l=o[10];l.begin&&l.begin();try{uo(s,o,s.template,a)}catch(d){throw GE(o,d),d}finally{l.end&&l.end()}}function ji(s){!function Nd(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=rf(a),d=l[1];__(d,l,d.template,a)}}(s[8])}function bf(s,o,a){Al(0),o(s,a)}const XC=(()=>Promise.resolve(null))();function eI(s){return s[7]||(s[7]=[])}function tI(s){return s.cleanup||(s.cleanup=[])}function GE(s,o){const a=s[9],l=a?a.get(Nr,null):null;l&&l.handleError(o)}function Tg(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],T=s.data[v];null!==T.setInput?T.setInput(D,d,l,w):D[w]=d}}function Zu(s,o,a){const l=bo(o,s);!function Dd(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Ag(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=le(d,w):2==g&&(l=le(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const qE=new Sn("INJECTOR",-1);class zE{get(o,a=Ro){if(a===Ro){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}const WE=new Sn("Set Injector scope."),Od={},Mg={};let KE;function iI(){return void 0===KE&&(KE=new zE),KE}function sI(s,o=null,a=null,l){const d=oI(s,o,a,l);return d._resolveInjectorDefTypes(),d}function oI(s,o=null,a=null,l){return new rx(s,a,o||iI(),l)}class rx{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&fi(a,w=>this.processProvider(w,o,a)),fi([o],w=>this.processInjectorType(w,[],g)),this.records.set(qE,va(void 0,this));const v=this.records.get(WE);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Ro,l=dt.Default){this.assertNotDestroyed();const d=Me(this),g=Kn(void 0);try{if(!(l&dt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function lI(s){return"function"==typeof s||"object"==typeof s&&s instanceof Sn}(o)&&qt(o);w=D&&this.injectableDefInScope(D)?va(ZE(o),Od):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&dt.Self?iI():this.parent).get(o,a=l&dt.Optional&&a===Ro?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Vu]=v[Vu]||[]).unshift(he(o)),d)throw v;return function ca(s,o,a,l){const d=s[Vu];throw o[L]&&d.unshift(o[L]),s.message=function No(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):he(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Vu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Kn(g),Me(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(he(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=kr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=kr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{fi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:Z}=x[P];fi(Z,ye=>this.processProvider(ye,U,Z||ht))}}this.injectorDefTypes.add(v);const D=Qr(v)||(()=>new v);this.records.set(v,va(D,Od));const T=d.providers;if(null!=T&&!w){const x=o;fi(T,P=>this.processProvider(P,x,T))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=kd(o=J(o))?o:J(o&&o.provide);const g=function sx(s,o,a){return x_(s)?va(void 0,s.useValue):va(M_(s),Od)}(o);if(kd(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=va(void 0,Od,!0),v.factory=()=>St(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===Od&&(a.value=Mg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function sc(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ZE(s){const o=qt(s),a=null!==o?o.factory:Qr(s);if(null!==a)return a;if(s instanceof Sn)throw new Oe(204,!1);if(s instanceof Function)return function ix(s){const o=s.length;if(o>0)throw Fi(o,"?"),new Oe(204,!1);const a=function ii(s){const o=s&&(s[zi]||s[ls]);if(o){const a=function Ps(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function M_(s,o,a){let l;if(kd(s)){const d=J(s);return Qr(d)||ZE(d)}if(x_(s))l=()=>J(s.useValue);else if(function aI(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...St(s.deps||[]));else if(function R_(s){return!(!s||!s.useExisting)}(s))l=()=>Je(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function YE(s){return!!s.deps}(s))return Qr(d)||ZE(d);l=()=>new d(...St(s.deps))}return l}function va(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function x_(s){return null!==s&&"object"==typeof s&&K in s}function kd(s){return"function"==typeof s}let Vo=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return sI({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return sI({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Ro,s.NULL=new zE,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>Je(qE)}),s.__NG_ELEMENT_ID__=-1,s})();function aw(s,o){_s(rf(s)[1],En())}function Ng(s){let o=function O_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Yr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Og(s.inputs),v.declaredInputs=Og(s.declaredInputs),v.outputs=Og(s.outputs);const w=d.hostBindings;w&&kg(s,w);const D=d.viewQuery,T=d.contentQueries;if(D&&lw(s,D),T&&cw(s,T),re(s.inputs,d.inputs),re(s.declaredInputs,d.declaredInputs),re(s.outputs,d.outputs),Yr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Ng&&(a=!1)}}o=Object.getPrototypeOf(o)}!function uw(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Fr(d.hostAttrs,a=Fr(a,d.hostAttrs))}}(l)}function Og(s){return s===fr?{}:s===ht?[]:s}function lw(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function cw(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function kg(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Df=null;function Pd(){if(!Df){const s=Ht.Symbol;if(s&&s.iterator)Df=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Df=l)}}}return Df}function Fd(s){return!!Cf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Pd()in s)}function Cf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Bo(s,o,a){return s[o]=a}function ni(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Pg(s,o,a,l){const d=De();return ni(d,Zs(),o)&&(Vt(),_a(An(),d,s,o,a,l)),Pg}function _w(s,o,a,l,d,g,v,w){const D=De(),T=Vt(),x=s+20,P=T.firstCreatePass?function ax(s,o,a,l,d,g,v,w,D){const T=o.consts,x=Sd(o,s,4,v||null,Jr(T,w));Rd(o,a,x,Jr(T,D)),_s(o,x);const P=x.tViews=yf(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,T,D,o,a,l,d,g,v):T.data[x];Xr(P,!1);const U=D[11].createComment("");pg(T,D,U,P),Br(U,D),wf(D,D[x]=_f(U,D,U,P)),yu(P)&&Md(T,D,P),null!=v&&wg(D,P,w)}function Ew(s){return xi(function Dl(){return pt.lFrame.contextLView}(),20+s)}function hc(s,o=dt.Default){const a=De();return null===a?Je(s,o):Xs(En(),a,J(s),o)}function Hg(){throw new Error("invalid")}function $d(s,o,a){const l=De();return ni(l,Zs(),o)&&function Is(s,o,a,l,d,g,v,w){const D=Tr(o,a);let x,T=o.inputs;!w&&null!=T&&(x=T[l])?(Tg(s,a,x,l,d),Us(o)&&function OE(s,o){const a=Ar(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function NE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,yn(g)?g.setProperty(D,l,d):ei(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Vt(),An(),l,s,o,l[11],a,!1),$d}function H_(s,o,a,l,d){const v=d?"class":"style";Tg(s,a,o.inputs[v],v,l)}function Ju(s,o,a,l){const d=De(),g=Vt(),v=20+s,w=d[11],D=d[v]=Cd(w,o,function Dy(){return pt.lFrame.currentNamespace}()),T=g.firstCreatePass?function OI(s,o,a,l,d,g,v){const w=o.consts,T=Sd(o,s,2,d,Jr(w,g));return Rd(o,a,T,Jr(w,v)),null!==T.attrs&&Ag(T,T.attrs,!1),null!==T.mergedAttrs&&Ag(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,g,d,0,o,a,l):g.data[v];Xr(T,!0);const x=T.mergedAttrs;null!==x&&gt(w,D,x);const P=T.classes;null!==P&&u_(w,D,P);const U=T.styles;return null!==U&&aE(w,D,U),64!=(64&T.flags)&&pg(g,d,D,T),0===function Ba(){return pt.lFrame.elementDepthCount}()&&Br(D,d),function Tu(){pt.lFrame.elementDepthCount++}(),yu(T)&&(Md(g,d,T),function Eg(s,o,a){if(jc(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,T,d)),null!==l&&wg(d,T),Ju}function Hd(){let s=En();wl()?bl():(s=s.parent,Xr(s,!1));const o=s;!function Au(){pt.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(_s(a,s),jc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Lh(s){return 0!=(16&s.flags)}(o)&&H_(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zp(s){return 0!=(32&s.flags)}(o)&&H_(a,o,De(),o.stylesWithoutHost,!1),Hd}function Gg(s,o,a,l){return Ju(s,o,a,l),Hd(),Gg}function G_(){return De()}function q_(s){return!!s&&"function"==typeof s.then}function z_(s){return!!s&&"function"==typeof s.subscribe}const W_=z_;function qg(s,o,a,l){const d=De(),g=Vt(),v=En();return function Rw(s,o,a,l,d,g,v,w){const D=yu(l),x=s.firstCreatePass&&tI(s),P=o[8],U=eI(o);let Z=!0;if(3&l.type||w){const $e=Tr(l,o),rt=w?w($e):$e,Ce=U.length,yt=w?jt=>w(ln(jt[l.index])):l.index;if(yn(a)){let jt=null;if(!w&&D&&(jt=function xw(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=g,jt.__ngLastListenerFn__=g,Z=!1;else{g=zg(l,o,P,g,!1);const hn=a.listen(rt,d,g);U.push(g,hn),x&&x.push(d,yt,Ce,Ce+1)}}else g=zg(l,o,P,g,!0),rt.addEventListener(d,g,v),U.push(g),x&&x.push(d,yt,Ce,v)}else g=zg(l,o,P,g,!1);const ye=l.outputs;let Fe;if(Z&&null!==ye&&(Fe=ye[d])){const $e=Fe.length;if($e)for(let rt=0;rt<$e;rt+=2){const Ms=o[Fe[rt]][Fe[rt+1]].subscribe(g),jn=U.length;U.push(g,Ms),x&&x.push(d,l.index,jn,-(jn+1))}}}(g,d,d[11],v,s,o,!!a,l),qg}function kI(s,o,a,l){try{return!1!==a(l)}catch(d){return GE(s,d),!1}}function zg(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?Ar(s.index,o):o;0==(32&o[2])&&$E(w);let D=kI(o,0,l,v),T=g.__ngNextListenerFn__;for(;T;)D=kI(o,0,T,v)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Nw(s=1){return function Ys(s){return(pt.lFrame.contextLView=function Ml(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function Ow(s,o){let a=null;const l=function mE(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?gE(s,g,!0):xC(l,g))return d}else a=d}return a}function kw(s){const o=De()[16][6];if(!o.projection){const l=o.projection=Fi(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?Ow(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function K_(s,o=0,a){const l=De(),d=Vt(),g=Sd(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),bl(),64!=(64&g.flags)&&function a_(s,o,a){iE(o[11],0,o,a,fg(s,a,o),eE(a.parent||o[6],a,o))}(d,l,g)}function X_(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?ya(g):ao(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];FI(s[w],o)&&(D=!0,s[w+1]=l?vE(x):_E(x)),w=l?ya(x):ao(x)}D&&(s[a+1]=l?_E(g):vE(g))}function FI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ro(s,o)>=0}const or={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vw(s){return s.substring(or.key,or.keyEnd)}function Uw(s,o){const a=or.textEnd;return a===o?-1:(o=or.keyEnd=function VI(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,or.key=o,a),fc(s,o,a))}function fc(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function nv(s,o){return function lo(s,o,a,l){const d=De(),g=Vt(),v=Ri(2);g.firstUpdatePass&&Hw(g,s,v,l),o!==Ft&&ni(d,v,o)&&GI(g,g.data[Sr()],d,d[11],s,d[v+1]=function Ww(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(io(s)))),s}(o,a),l,v)}(s,o,null,!0),nv}function iv(s){!function Uo(s,o,a,l){const d=Vt(),g=Ri(2);d.firstUpdatePass&&Hw(d,null,g,l);const v=De();if(a!==Ft&&ni(v,g,a)){const w=d.data[Sr()];if(Kw(w,l)&&!sv(d,g)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=le(D,a||"")),H_(d,w,v,a,l)}else!function HI(s,o,a,l,d,g,v,w){d===Ft&&(d=ht);let D=0,T=0,x=0<d.length?d[0]:null,P=0<g.length?g[0]:null;for(;null!==x||null!==P;){const U=D<d.length?d[D+1]:void 0,Z=T<g.length?g[T+1]:void 0;let Fe,ye=null;x===P?(D+=2,T+=2,U!==Z&&(ye=P,Fe=Z)):null===P||null!==x&&x<P?(D+=2,ye=x):(T+=2,ye=P,Fe=Z),null!==ye&&GI(s,o,a,l,ye,Fe,v,w),x=D<d.length?d[D]:null,P=T<g.length?g[T]:null}}(d,w,v,v[11],v[g+1],v[g+1]=function jI(s,o,a){if(null==a||""===a)return ht;const l=[],d=io(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(Yn,wa,s,!0)}function wa(s,o){for(let a=function Bw(s){return function jw(s){or.key=0,or.keyEnd=0,or.value=0,or.valueEnd=0,or.textEnd=s.length}(s),Uw(s,fc(s,0,or.textEnd))}(o);a>=0;a=Uw(o,a))Yn(s,Vw(o),!0)}function sv(s,o){return o>=s.expandoStartIndex}function Hw(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Sr()],v=sv(s,a);Kw(g,l)&&null===o&&!v&&(o=!1),o=function Gw(s,o,a,l){const d=function ta(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Qg(a=zw(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=zw(d,s,o,a,l),null===g){let D=function UI(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==ao(l))return s[ya(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=zw(null,s,o,D[1],l),D=Qg(D,o.attrs,l),function qw(s,o,a,l){s[ya(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function px(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Qg(l,s[g].hostAttrs,a);return Qg(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function J_(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=ya(v),D=ao(v);s[l]=a;let x,T=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||ro(P,x)>0)&&(T=!0)}else x=a;if(d)if(0!==D){const U=ya(s[w+1]);s[l+1]=l_(U,w),0!==U&&(s[U+1]=Ui(s[U+1],l)),s[w+1]=function BM(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=l_(w,0),0!==w&&(s[w+1]=Ui(s[w+1],l)),w=l;else s[l+1]=l_(D,0),0===w?w=l:s[D+1]=Ui(s[D+1],l),D=l;T&&(s[l+1]=_E(s[l+1])),X_(s,x,l,!0),X_(s,x,l,!1),function PI(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&ro(g,o)>=0&&(a[l+1]=vE(a[l+1]))}(o,x,s,l,g),v=l_(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function zw(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=Qg(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Qg(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Yn(s,v,!!a||o[++g]))}return void 0===s?null:s}function GI(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,T=D[w+1];ov(function mg(s){return 1==(1&s)}(T)?qI(D,o,a,d,ao(T),v):void 0)||(ov(g)||function kC(s){return 2==(2&s)}(T)&&(g=qI(D,null,a,d,w,v)),function oE(s,o,a,l,d){const g=yn(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:oe.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=oe.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,bo(Sr(),a),d,g))}function qI(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],T=Array.isArray(D),x=T?D[1]:D,P=null===x;let U=a[d+1];U===Ft&&(U=P?ht:void 0);let Z=P?Hl(U,l):x===l?U:void 0;if(T&&!ov(Z)&&(Z=Hl(D,l)),ov(Z)&&(w=Z,v))return w;const ye=s[d+1];d=v?ya(ye):ao(ye)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=Hl(D,l))}return w}function ov(s){return void 0!==s}function Kw(s,o){return 0!=(s.flags&(o?16:32))}function Zw(s,o=""){const a=De(),l=Vt(),d=s+20,g=l.firstCreatePass?Sd(l,d,1,o,null):l.data[d],v=a[d]=function bd(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);pg(l,a,v,g),Xr(g,!1)}function av(s){return Jg("",s,""),av}function Jg(s,o,a){const l=De(),d=function As(s,o,a,l){return ni(s,Zs(),a)?o+fe(a)+l:Ft}(l,s,o,a);return d!==Ft&&Zu(l,Sr(),d),Jg}const ba=void 0;var Hi=["en",[["a","p"],["AM","PM"],ba],[["AM","PM"],ba,ba],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ba,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ba,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ba,"{1} 'at' {0}",ba],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rb(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let tl={};function rm(s){const o=function gv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=pv(o);if(a)return a;const l=o.split("-")[0];if(a=pv(l),a)return a;if("en"===l)return Hi;throw new Error(`Missing locale data for the locale "${s}".`)}function im(s){return rm(s)[bt.PluralCase]}function pv(s){return s in tl||(tl[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),tl[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const iu="en-US";let Vf=iu;function pm(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)pm(s[g],o,a,l,d);else{const g=Vt(),v=De();let w=kd(s)?s:J(s.provide),D=M_(s);const T=En(),x=1048575&T.providerIndexes,P=T.directiveStart,U=T.providerIndexes>>20;if(kd(s)||!s.multi){const Z=new na(D,d,hc),ye=Kd(w,o,d?x:x+U,P);-1===ye?(Js(qn(T,v),g,w),Bv(g,s,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Z),v.push(Z)):(a[ye]=Z,v[ye]=Z)}else{const Z=Kd(w,o,x+U,P),ye=Kd(w,o,x,x+U),Fe=Z>=0&&a[Z],$e=ye>=0&&a[ye];if(d&&!$e||!d&&!Fe){Js(qn(T,v),g,w);const rt=function wb(s,o,a,l,d){const g=new na(s,a,hc);return g.multi=[],g.index=o,g.componentProviders=0,gm(g,d,l&&!a),g}(d?Eb:Uv,a.length,d,l,D);!d&&$e&&(a[ye].providerFactory=rt),Bv(g,s,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(rt),v.push(rt)}else Bv(g,s,Z>-1?Z:ye,gm(a[d?ye:Z],D,!d&&l));!d&&l&&$e&&a[ye].componentProviders++}}}function Bv(s,o,a,l){const d=kd(o),g=function uI(s){return!!s.useClass}(o);if(d||g){const D=(g?J(o.useClass):o).prototype.ngOnDestroy;if(D){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,D]):T[x+1].push(l,D)}else T.push(a,D)}}}function gm(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Kd(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Uv(s,o,a,l){return mm(this.multi,[])}function Eb(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Oi(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),mm(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],mm(d,g);return g}function mm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function bb(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Kf(s,o,a){const l=Vt();if(l.firstCreatePass){const d=Yr(s);pm(a,l.data,l.blueprint,d,!0),pm(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class jv{}class $v{resolveComponentFactory(o){throw function ym(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _m=(()=>{class s{}return s.NULL=new $v,s})();function Hv(){return jo(En(),De())}function jo(s,o){return new vc(Tr(s,o))}let vc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Hv,s})();function Ec(s){return s instanceof vc?s.nativeElement:s}class Db{}let wc=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function vm(){const s=De(),a=Ar(En().index,s);return function su(s){return s[11]}(Mi(a)?a:s)}(),s})(),Em=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class Yf{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Gv=new Yf("13.2.7"),In={};function bc(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(ln(g)),ai(g))for(let w=10;w<g.length;w++){const D=g[w],T=D[1].firstChild;null!==T&&bc(D[1],D,T,l)}const v=a.type;if(8&v)bc(s,o,a.child,l);else if(32&v){const w=et(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=rE(o,a);if(Array.isArray(w))l.push(...w);else{const D=xn(o[16]);bc(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Qf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return bc(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ai(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Jy(o,l),bs(a,l))}this._attachedToViewContainer=!1}Xy(this._lView[1],this._lView)}onDestroy(o){E_(this._lView[1],this._lView,null,o)}markForCheck(){$E(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){S_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function tx(s,o,a){Ks(!0);try{S_(s,o,a)}finally{Ks(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hg(s,o){gg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class yT extends Qf{constructor(o){super(o),this._view=o}detectChanges(){ji(this._view)}checkNoChanges(){!function Ig(s){Ks(!0);try{ji(s)}finally{Ks(!1)}}(this._view)}get context(){return null}}class Qd extends _m{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Wt(o);return new qv(a,this.ngModule)}}function Jd(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class qv extends jv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function LM(s){return s.map(Un).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Jd(this.componentDef.inputs)}get outputs(){return Jd(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function Cb(s,o){return{get:(a,l,d)=>{const g=s.get(a,In,d);return g!==In||l===In?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Db,Jo),w=g.get(Em,null),D=v.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function Rn(s,o,a){if(yn(s))return s.selectRootElement(o,a===zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):Cd(v.createRenderer(null,this.componentDef),T,function _T(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),P=this.componentDef.onPush?576:528,U=function yI(s,o){return{components:[],scheduler:s||Zy,clean:XC,playerHandler:o||null,flags:0}}(),Z=yf(0,null,null,1,0,null,null,null,null,null),ye=mf(null,Z,U,P,null,null,v,D,w,g);let Fe,$e;Do(ye);try{const rt=function eu(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=Sd(v,20,2,"#host",null),T=D.mergedAttrs=o.hostAttrs;null!==T&&(Ag(D,T,!0),null!==s&&(gt(d,s,T),null!==D.classes&&u_(d,s,D.classes),null!==D.styles&&aE(d,s,D.styles)));const x=l.createRenderer(s,o),P=mf(a,v_(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(Js(qn(D,a),v,o.type),VE(v,D),UE(D,a.length,1)),wf(a,P),a[20]=P}(x,this.componentDef,ye,v,D);if(x)if(l)gt(D,x,["ng-version",Gv.full]);else{const{attrs:Ce,classes:yt}=function VM(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!oo(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ce&&gt(D,x,Ce),yt&&yt.length>0&&u_(D,x,yt.join(" "))}if($e=Va(Z,20),void 0!==a){const Ce=$e.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const jt=a[yt];Ce.push(null!=jt?Array.from(jt):null)}}Fe=function ow(s,o,a,l,d){const g=a[1],v=function WC(s,o,a){const l=En();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),jE(s,l,o,Qa(s,o,1,null),a));const d=Oi(o,s,l.directiveStart,l);Br(d,o);const g=Tr(l,o);return g&&Br(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=En();o.contentQueries(1,v,D.directiveStart)}const w=En();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Qs(w.index),C_(a[1],w,0,w.directiveStart,w.directiveEnd,o),LE(o,v)),v}(rt,this.componentDef,ye,U,[aw]),Ja(Z,ye,null)}finally{Io()}return new ET(this.componentType,Fe,jo($e,ye),ye,$e)}}class ET extends class Zf{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new yT(d),this.componentType=o}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ss{}class zv{}const Dc=new Map;class Kv extends Ss{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qd(this);const l=pn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=oI(o,a,[{provide:Ss,useValue:this},{provide:_m,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Vo.THROW_IF_NOT_FOUND,l=dt.Default){return o===Vo||o===Ss||o===qE?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wm extends zv{constructor(o){super(),this.moduleType=o,null!==pn(o)&&function bT(s){const o=new Set;!function a(l){const d=pn(l,!0),g=d.id;null!==g&&(function Cc(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${he(o)} vs ${he(o.name)}`)}(g,Dc.get(g),l),Dc.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new Kv(this.moduleType,o)}}function bm(s,o,a){const l=mr()+s,d=De();return d[l]===Ft?Bo(d,l,a?o.call(a):o()):function Ld(s,o){return s[o]}(d,l)}function Dm(s,o,a,l){return Im(De(),mr(),s,o,a,l)}function rl(s,o){const a=s[o];return a===Ft?void 0:a}function Im(s,o,a,l,d,g){const v=o+a;return ni(s,v,d)?Bo(s,v+1,g?l.call(g,d):l(d)):rl(s,v+1)}function Yv(s,o,a,l,d,g,v){const w=o+a;return function tu(s,o,a,l){const d=ni(s,o,a);return ni(s,o+1,l)||d}(s,w,d,g)?Bo(s,w+2,v?l.call(v,d,g):l(d,g)):rl(s,w+2)}function ar(s,o){const a=Vt();let l;const d=s+20;a.firstCreatePass?(l=function Sb(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Qr(l.type)),v=Kn(hc);try{const w=ci(!1),D=g();return ci(w),function vw(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),d,D),D}finally{Kn(v)}}function Mb(s,o,a){const l=s+20,d=De(),g=xi(d,l);return th(d,l)?Im(d,mr(),o,g.transform,a,g):g.transform(a)}function xb(s,o,a,l){const d=s+20,g=De(),v=xi(g,d);return th(g,d)?Yv(g,mr(),o,v.transform,a,l,v):v.transform(a,l)}function th(s,o){return s[1].data[o].pure}function nh(s){return o=>{setTimeout(s,void 0,o)}}const $o=class Nb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),T=l;if(o&&"object"==typeof o){const P=o;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),D=null===(g=P.error)||void 0===g?void 0:g.bind(P),T=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(D=nh(D),w&&(w=nh(w)),T&&(T=nh(T)));const x=super.subscribe({next:w,error:D,complete:T});return o instanceof Y.w0&&o.add(x),x}};function ou(){return this._results[Pd()]()}class Tm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pd(),l=Tm.prototype;l[a]||(l[a]=ou)}get changes(){return this._changes||(this._changes=new $o)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=xr(o);(this._changesDetected=!function Vl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ep=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ob,s})();const Qv=ep,tp=class extends Qv{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=mf(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Ja(a,l,o),new Qf(l)}};function Ob(){return rh(En(),De())}function rh(s,o){return 4&s.type?new tp(o,s,jo(s,o)):null}let Ic=(()=>{class s{}return s.__NG_ELEMENT_ID__=kb,s})();function kb(){return ih(En(),De())}const Jv=Ic,np=class extends Jv{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return jo(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){const o=di(this._hostTNode,this._hostLView);if(rd(o)){const a=Ni(o,this._hostLView),l=mn(o);return new ki(a[1].data[l+8],a)}return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Pb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function ua(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,g=P.ngModuleRef}const D=v?o:new qv(Wt(o)),T=l||this.parentInjector;if(!g&&null==D.ngModule){const U=(v?T:this.parentInjector).get(Ss,null);U&&(g=U)}const x=D.create(T,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function Cu(s){return ai(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],U=new np(P,P[6],P[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Qy(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],Bl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Id(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=i_(g,v),D=l[11],T=ma(D,v[7]);return null!==T&&function pf(s,o,a,l,d,g){l[0]=d,l[6]=o,gg(s,l,a,1,d,g)}(d,v[6],D,l,T,w),o.attachToViewContainerRef(),Bl(Am(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Pb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Jy(this._lContainer,a);l&&(bs(Am(this._lContainer),a),Xy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Jy(this._lContainer,a);return l&&null!=bs(Am(this._lContainer),a)?new Qf(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Pb(s){return s[8]}function Am(s){return s[8]||(s[8]=[])}function ih(s,o){let a;const l=o[s.index];if(ai(l))a=l;else{let d;if(8&s.type)d=ln(l);else{const g=o[11];d=g.createComment("");const v=Tr(s,o);Cs(g,ma(g,v),d,function AC(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=_f(l,o,d,s),wf(o,a)}return new np(a,s,o)}class rp{constructor(o){this.queryList=o,this.matches=null}clone(){return new rp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Sm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Gb(o,a).matches&&this.queries[a].setDirty()}}class ip{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Mm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Mm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class xm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new xm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,Tc(a,g)),this.matchTNodeWithReadOption(o,a,So(a,o,g,!1,!1))}else l===ep?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,So(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===vc||d===Ic||d===ep&&4&a.type)this.addMatch(a.index,-2);else{const g=So(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Tc(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Ub(s,o,a,l){return-1===a?function Bb(s,o){return 11&s.type?jo(s,o):4&s.type?rh(s,o):null}(o,s):-2===a?function jb(s,o,a){return a===vc?jo(o,s):a===ep?rh(o,s):a===Ic?ih(o,s):void 0}(s,o,l):Oi(s,s[1],a,o)}function Xv(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const T=v[D];w.push(T<0?null:Ub(o,g[T],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function sh(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Xv(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const T=g[w+1],x=o[-D];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&sh(U[1],U,T,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const Z=P[U];sh(Z[1],Z,T,l)}}}}}return l}function ss(s){const o=De(),a=Vt(),l=Tl();Al(l+1);const d=Gb(a,l);if(s.dirty&&qs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?sh(a,o,l,[]):Xv(a,o,d,l);s.reset(g,Ec),s.notifyOnChanges()}return!0}return!1}function e0(s,o,a,l){const d=Vt();if(d.firstCreatePass){const g=En();(function Rm(s,o,a){null===s.queries&&(s.queries=new Mm),s.queries.track(new xm(o,a))})(d,new ip(o,a,l),g.index),function MT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Hb(s,o,a){const l=new Tm(4==(4&a));E_(s,o,l,l.destroy),null===o[19]&&(o[19]=new Sm),o[19].queries.push(new rp(l))}(d,De(),a)}function Ac(){return function ST(s,o){return s[19].queries[o].queryList}(De(),Tl())}function Gb(s,o){return s.queries.getByIndex(o)}function t0(s,o){return rh(s,o)}function Pm(...s){}const al=new Sn("Application Initializer");let xc=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Pm,this.reject=Pm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(q_(g))a.push(g);else if(W_(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Je(al,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const a0=new Sn("AppId",{providedIn:"root",factory:function je(){return`${Fm()}${Fm()}${Fm()}`}});function Fm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ul=new Sn("Platform Initializer"),Ho=new Sn("Platform ID"),uh=new Sn("appBootstrapListener");let u0=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();const lp=new Sn("LocaleId",{providedIn:"root",factory:()=>Ot(lp,dt.Optional|dt.SkipSelf)||function lh(){return"undefined"!=typeof $localize&&$localize.locale||iu}()}),ch=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Vm=(()=>{class s{compileModuleSync(a){return new wm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(pn(a).declarations).reduce((v,w)=>{const D=Wt(w);return D&&v.push(new qv(D)),v},[]);return new eD(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const tD=(()=>Promise.resolve(0))();function Bm(s){"undefined"==typeof Zone?tD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ho{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ei(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hh(s){const o=()=>{!function l0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fh(s),s.isCheckStableRunning=!0,dh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return ph(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),c0(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return ph(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),c0(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,fh(s),dh(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Nn,Pm,Pm);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Nn={};function dh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ph(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function c0(s){s._nesting--,dh(s)}class UT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Ca=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),Bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Je(ho))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),nD=(()=>{class s{constructor(){this._applications=new Map,uu.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return uu.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();class jT{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function rD(s){uu=s}let Go,uu=new jT;const Wr=new Sn("AllowMultipleToken");class $T{constructor(o,a){this.name=o,this.token=a}}function iD(s,o,a=[]){const l=`Platform: ${o}`,d=new Sn(l);return(g=[])=>{let v=oD();if(!v||v.injector.get(Wr,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:WE,useValue:"platform"});!function HT(s){if(Go&&!Go.destroyed&&!Go.injector.get(Wr,!1))throw new Oe(400,"");Go=s.get(aD);const o=s.get(ul,null);o&&o.forEach(a=>a())}(Vo.create({providers:w,name:l}))}return function sD(s){const o=oD();if(!o)throw new Oe(401,"");return o}()}}function oD(){return Go&&!Go.destroyed?Go:null}let aD=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function GT(s,o){let a;return a="noop"===s?new UT:("zone.js"===s?void 0:s)||new ho({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:ho,useValue:w}];return w.run(()=>{const T=Vo.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(T),P=x.injector.get(Nr,null);if(!P)throw new Oe(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{P.handleError(Z)}});x.onDestroy(()=>{jm(this._modules,x),U.unsubscribe()})}),function ll(s,o,a){try{const l=a();return q_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(xc);return U.runInitializers(),U.donePromise.then(()=>(function mv(s){lt(s,"Expected localeId to be defined"),"string"==typeof s&&(Vf=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(lp,iu)||iu),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Nc({},l);return function dp(s,o,a){const l=new wm(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(h0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Je(Vo))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();function Nc(s,o){return Array.isArray(o)?o.reduce(Nc,s):Object.assign(Object.assign({},s),o)}let h0=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),Bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ue.T)(w,D.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof jv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function Um(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ss),w=d.create(Vo.NULL,[],l||d.selector,g),D=w.location.nativeElement,T=w.injector.get(Ca,null),x=T&&w.injector.get(nD);return T&&x&&x.registerApplication(D,T),w.onDestroy(()=>{this.detachView(w.hostView),jm(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;jm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(uh,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Je(ho),Je(Vo),Je(Nr),Je(_m),Je(xc))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function jm(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let p0=!0,Oc=!1;function $m(){return Oc=!0,p0}function Hm(){if(Oc)throw new Error("Cannot enable prod mode after platform setup.");p0=!1}let gh=(()=>{class s{}return s.__NG_ELEMENT_ID__=fo,s})();function fo(s){return function cD(s,o,a){if(Us(s)&&!a){const l=Ar(s.index,o);return new Qf(l,l)}return 47&s.type?new Qf(o[16],o):null}(En(),De(),16==(16&s))}class yh{constructor(){}supports(o){return Fd(o)}create(o){return new QT(o)}}const YT=(s,o)=>o;class QT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||YT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<yD(l,d,g)?a:l,w=yD(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const T=w-d,x=D-d;if(T!=x){for(let U=0;U<T;U++){const Z=U<g.length?g[U]:g[U]=0,ye=Z+U;x<=ye&&ye<T&&(g[U]=Z+1)}g[v.previousIndex]=x-T}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Fd(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function gw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Pd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new Er(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new fp),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Er{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zm{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class fp{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Zm,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yD(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Ym{constructor(){}supports(o){return o instanceof Map||Cf(o)}create(){return new JT}}class JT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Cf(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new _D(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class _D{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y0(){return new kc([new yh])}let kc=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||y0()),deps:[[s,new Oo,new gi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:y0}),s})();function _0(){return new Qm([new Ym])}let Qm=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||_0()),deps:[[s,new Oo,new gi]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:_0}),s})();const tn=iD(null,"core",[{provide:Ho,useValue:"unknown"},{provide:aD,deps:[Vo]},{provide:nD,deps:[]},{provide:u0,deps:[]}]);let wD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Je(h0))},s.\u0275mod=Q({type:s}),s.\u0275inj=en({}),s})()},3942:(ut,Ae,k)=>{k.d(Ae,{Z:()=>Oe});var h=k(2090),Y=k(4859),O=k(9681),ue=k(1877);class X{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,O._addComponent)(fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,be=O._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(fe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(tt=Ye.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:be})}_removeServiceInstance(fe,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Ve=function he(Ve){const fe={},be={__esModule:!0,initializeApp:function Ie(He,te={}){const W=O.initializeApp(He,te);if((0,h.r3)(fe,W.name))return fe[W.name];const ie=new Ve(W,be);return fe[W.name]=ie,ie},app:Ye,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(He){const te=He.name,W=te.replace("-compat","");if(O._registerComponent(He)&&"PUBLIC"===He.type){const ie=(me=Ye())=>{if("function"!=typeof me[W])throw re.create("invalid-app-argument",{appName:te});return me[W]()};void 0!==He.serviceProps&&(0,h.ZB)(ie,He.serviceProps),be[W]=ie,Ve.prototype[W]=function(...me){return this._getService.bind(this,te).apply(this,He.multipleInstances?me:[])}}return"PUBLIC"===He.type?be[W]:null},removeApp:function tt(He){delete fe[He]},useAsService:function Ge(He,te){return"serverAuth"===te?null:te},modularAPIs:O}};function Ye(He){if(!(0,h.r3)(fe,He=He||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:He});return fe[He]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(fe).map(He=>fe[He])}}),Ye.App=Ve,be}(X);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function fe(be){(0,h.ZB)(Ve,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ve}(),H=new ue.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Se(Ve){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(ut,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>kn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Ai,_apps:()=>vt,_clearComponents:()=>qt,_components:()=>cn,_getProvider:()=>us,_registerComponent:()=>on,_removeServiceInstance:()=>en,deleteApp:()=>cs,getApp:()=>Pr,getApps:()=>ls,initializeApp:()=>zi,onLog:()=>er,registerVersion:()=>Zr,setLogLevel:()=>Kn});var h=k(5861),Y=k(4859),O=k(1877),ue=k(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ge(Qe){const Te=Qe.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(Xe)){const ft=Xe.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(Xe=>Xe).join(" ")}}const re="@firebase/app",le=new O.Yd("@firebase/app"),kn="[DEFAULT]",lt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,cn=new Map;function dn(Qe,Te){try{Qe.container.addComponent(Te)}catch(Xe){le.debug(`Component ${Te.name} failed to register with FirebaseApp ${Qe.name}`,Xe)}}function Ai(Qe,Te){Qe.container.addOrOverwriteComponent(Te)}function on(Qe){const Te=Qe.name;if(cn.has(Te))return le.debug(`There were multiple attempts to register component ${Te}.`),!1;cn.set(Te,Qe);for(const Xe of vt.values())dn(Xe,Qe);return!0}function us(Qe,Te){const Xe=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Qe.container.getProvider(Te)}function en(Qe,Te,Xe=kn){us(Qe,Te).clearInstance(Xe)}function qt(){cn.clear()}const ii=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ps{constructor(Te,Xe,ft){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const kr="9.6.10";function zi(Qe,Te={}){"object"!=typeof Te&&(Te={name:Te});const Xe=Object.assign({name:kn,automaticDataCollectionEnabled:!1},Te),ft=Xe.name;if("string"!=typeof ft||!ft)throw ii.create("bad-app-name",{appName:String(ft)});const $t=vt.get(ft);if($t){if((0,ue.vZ)(Qe,$t.options)&&(0,ue.vZ)(Xe,$t.config))return $t;throw ii.create("duplicate-app",{appName:ft})}const Lt=new Y.H0(ft);for(const V of cn.values())Lt.addComponent(V);const j=new Ps(Qe,Xe,Lt);return vt.set(ft,j),j}function Pr(Qe=kn){const Te=vt.get(Qe);if(!Te)throw ii.create("no-app",{appName:Qe});return Te}function ls(){return Array.from(vt.values())}function cs(Qe){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(Qe){const Te=Qe.name;vt.has(Te)&&(vt.delete(Te),yield Promise.all(Qe.container.getProviders().map(Xe=>Xe.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function Zr(Qe,Te,Xe){var ft;let $t=null!==(ft=lt[Qe])&&void 0!==ft?ft:Qe;Xe&&($t+=`-${Xe}`);const Lt=$t.match(/\s|\//),j=Te.match(/\s|\//);if(Lt||j){const V=[`Unable to register library "${$t}" with version "${Te}":`];return Lt&&V.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Lt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void le.warn(V.join(" "))}on(new Y.wA(`${$t}-version`,()=>({library:$t,version:Te}),"VERSION"))}function er(Qe,Te){if(null!==Qe&&"function"!=typeof Qe)throw ii.create("invalid-log-argument");(0,O.Am)(Qe,Te)}function Kn(Qe){(0,O.Ub)(Qe)}const vn="firebase-heartbeat-store";let tr=null;function Fs(){return tr||(tr=(0,ue.X3)("firebase-heartbeat-database",1,(Qe,Te)=>{0===Te&&Qe.createObjectStore(vn)}).catch(Qe=>{throw ii.create("storage-open",{originalErrorMessage:Qe.message})})),tr}function zt(){return(zt=(0,h.Z)(function*(Qe){try{return(yield Fs()).transaction(vn).objectStore(vn).get(hr(Qe))}catch(Te){throw ii.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function ot(Qe,Te){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(Qe,Te){try{const ft=(yield Fs()).transaction(vn,"readwrite");return yield ft.objectStore(vn).put(Te,hr(Qe)),ft.complete}catch(Xe){throw ii.create("storage-set",{originalErrorMessage:Xe.message})}})).apply(this,arguments)}function hr(Qe){return`${Qe.name}!${Qe.options.appId}`}class yo{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new ht(Xe),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Te=this;return(0,h.Z)(function*(){const ft=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=br();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Te._heartbeatsCache.heartbeats.some(Lt=>Lt.date===$t))return Te._heartbeatsCache.heartbeats.push({date:$t,agent:ft}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Lt=>{const j=new Date(Lt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,h.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Xe=br(),{heartbeatsToSend:ft,unsentEntries:$t}=function fr(Qe,Te=1024){const Xe=[];let ft=Qe.slice();for(const $t of Qe){const Lt=Xe.find(j=>j.agent===$t.agent);if(Lt){if(Lt.dates.push($t.date),Dr(Xe)>Te){Lt.dates.pop();break}}else if(Xe.push({agent:$t.agent,dates:[$t.date]}),Dr(Xe)>Te){Xe.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:ft}}(Te._heartbeatsCache.heartbeats),Lt=(0,ue.L)(JSON.stringify({version:2,heartbeats:ft}));return Te._heartbeatsCache.lastSentHeartbeatDate=Xe,$t.length>0?(Te._heartbeatsCache.heartbeats=$t,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Lt})()}}function br(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,h.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function xa(Qe){return zt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Xe=this;return(0,h.Z)(function*(){var ft;if(yield Xe._canUseIndexedDBPromise){const Lt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Lt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Xe=this;return(0,h.Z)(function*(){var ft;if(yield Xe._canUseIndexedDBPromise){const Lt=yield Xe.read();return ot(Xe.app,{lastSentHeartbeatDate:null!==(ft=Te.lastSentHeartbeatDate)&&void 0!==ft?ft:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Te.heartbeats]})}})()}}function Dr(Qe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Ut(Qe){on(new Y.wA("platform-logger",Te=>new X(Te),"PRIVATE")),on(new Y.wA("heartbeat",Te=>new yo(Te),"PRIVATE")),Zr(re,"0.7.20",Qe),Zr(re,"0.7.20","esm2017"),Zr("fire-js","")}("")},4859:(ut,Ae,k)=>{k.d(Ae,{wA:()=>O,H0:()=>he});var h=k(5861),Y=k(2090);class O{constructor($,H,J){this.name=$,this.instanceFactory=H,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class X{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const J=new Y.BH;if(this.instancesDeferred.set(H,J),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&J.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const J=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),We=null!==(H=null==$?void 0:$.optional)&&void 0!==H&&H;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(We)return null;throw Se}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function re(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(H){}for(const[H,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Se)}catch(Se){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...H.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:H});for(const[Se,Oe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&Oe.resolve(We);return We}onInit($,H){var J;const We=this.normalizeInstanceIdentifier(H),Se=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Se.add($),this.onInitCallbacks.set(We,Se);const Oe=this.instances.get(We);return Oe&&$(Oe,We),()=>{Se.delete($)}}invokeOnInitCallbacks($,H){const J=this.onInitCallbacks.get(H);if(J)for(const We of J)try{We($,H)}catch(Se){}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===ue?void 0:le),options:H}),this.instances.set($,J),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch(We){}var le;return J||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new X($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,k)=>{k.d(Ae,{in:()=>Y,Yd:()=>re,Ub:()=>he,Am:()=>le});const h=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ue=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=($,H,...J)=>{if(H<$.logLevel)return;const We=(new Date).toISOString(),Se=X[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${We}]  ${$.name}:`,...J)};class re{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function he($){h.forEach(H=>{H.setLogLevel($)})}function le($,H){for(const J of h){let We=null;H&&H.level&&(We=O[H.level]),J.userLogHandler=null===$?null:(Se,Oe,...Ve)=>{const fe=Ve.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(tt){return null}}).filter(be=>be).join(" ");Oe>=(null!=We?We:Se.logLevel)&&$({level:Y[Oe].toLowerCase(),message:fe,args:Ve,type:Se.name})}}}},5861:(ut,Ae,k)=>{function h(O,ue,X,ge,re,he,le){try{var $=O[he](le),H=$.value}catch(J){return void X(J)}$.done?ue(H):Promise.resolve(H).then(ge,re)}function Y(O){return function(){var ue=this,X=arguments;return new Promise(function(ge,re){var he=O.apply(ue,X);function le(H){h(he,ge,re,le,$,"next",H)}function $(H){h(he,ge,re,le,$,"throw",H)}le(void 0)})}}k.d(Ae,{Z:()=>Y})}},ut=>{ut(ut.s=2766)}]);